El Ciclo de Trabajo Adaptativo para Sistemas de Recolección de Energía Jason Hsu, Sadaf Zahedi, Aman Kansal, Mani Srivastava Departamento de Ingeniería Eléctrica Universidad de California Los Ángeles {jasonh,kansal,szahedi,mbs} @ ee.ucla.edu Vijay Raghunathan NEC Labs America Princeton, NJ vijay@nec-labs.com RESUMEN La recolección de energía del entorno es factible en muchas aplicaciones para mejorar las limitaciones energéticas en redes de sensores. En este artículo, presentamos un algoritmo adaptativo de ciclo de trabajo que permite a los nodos sensores de recolección de energía ajustar autónomamente su ciclo de trabajo según la disponibilidad de energía en el entorno. El algoritmo tiene tres objetivos, a saber: (a) lograr una operación energéticamente neutral, es decir, que el consumo de energía no sea mayor que la energía proporcionada por el entorno, (b) maximizar el rendimiento del sistema basado en un modelo de utilidad de la aplicación sujeto a la restricción de neutralidad energética mencionada anteriormente, y (c) adaptarse a la dinámica de la fuente de energía en tiempo de ejecución. Presentamos un modelo que permite recolectar nodos sensores para predecir futuras oportunidades energéticas basadas en datos históricos. También obtenemos un límite superior sobre el rendimiento máximo alcanzable asumiendo un conocimiento perfecto sobre el comportamiento futuro de la fuente de energía. Nuestros métodos son evaluados utilizando datos recopilados de una plataforma prototipo de recolección de energía solar y demostramos que nuestro algoritmo puede utilizar hasta un 58% más de energía ambiental en comparación con el caso en que no se utiliza un manejo de energía consciente de la recolección. Categorías y Descriptores de Asignaturas C.2.4 [Organización de Sistemas Informáticos]: Redes de Comunicación de Computadoras-Sistemas Distribuidos Términos Generales Algoritmos, Diseño 1. La provisión de energía siempre ha sido un tema crucial en el diseño de redes de sensores inalámbricos alimentadas por batería, ya que la vida útil y la utilidad de los sistemas están limitadas por cuánto tiempo las baterías pueden mantener la operación. La fidelidad de los datos producidos por una red de sensores comienza a degradarse una vez que los nodos sensores empiezan a quedarse sin energía de la batería. Por lo tanto, se ha propuesto la recolección de energía del entorno para complementar o reemplazar completamente las fuentes de energía de las baterías y así mejorar la vida útil del sistema y reducir el costo de mantenimiento de reemplazar las baterías periódicamente. Sin embargo, las métricas para evaluar los sistemas de recolección de energía son diferentes de las utilizadas para los sistemas alimentados por batería. La energía ambiental es distinta de la energía de la batería de dos maneras. Primero, es un suministro inagotable que, si se utiliza adecuadamente, puede permitir que el sistema dure para siempre, a diferencia de la batería que es un recurso limitado. Segundo, existe una incertidumbre asociada con su disponibilidad y medición, en comparación con la energía almacenada en la batería que puede ser conocida de manera determinística. Por lo tanto, los métodos de gestión de energía basados en el estado de la batería no siempre son aplicables a los sistemas de recolección de energía. Además, la mayoría de los esquemas de gestión de energía diseñados para sistemas alimentados por batería solo tienen en cuenta la dinámica de los consumidores de energía (por ejemplo, la CPU, la radio) pero no la dinámica del suministro de energía. En consecuencia, los sistemas alimentados por batería suelen operar al nivel de rendimiento más bajo que cumpla con el requisito mínimo de fidelidad de datos para maximizar la vida útil del sistema. Los sistemas de recolección de energía, por otro lado, pueden proporcionar un rendimiento mejorado dependiendo de la energía disponible. En este documento, estudiaremos cómo adaptar el rendimiento del perfil de energía disponible. Existen muchas técnicas para lograr el escalado del rendimiento a nivel de nodo, como el ajuste de la potencia de transmisión de radio [1], el escalado dinámico de voltaje [2] y el uso de modos de bajo consumo de energía [3]. Sin embargo, estas técnicas requieren soporte de hardware y puede que no siempre estén disponibles en nodos de sensores con recursos limitados. Alternativamente, una técnica común de escalado de rendimiento es el ciclo de trabajo. Los dispositivos de baja potencia suelen ofrecer al menos un modo de baja potencia en el que el nodo se apaga y el consumo de energía es insignificante. Además, la tasa de ciclo de trabajo está directamente relacionada con métricas de rendimiento del sistema como la latencia de red y la frecuencia de muestreo. Utilizaremos el ajuste del ciclo de trabajo como la técnica primitiva de escalado de rendimiento en nuestros algoritmos. TRABAJO RELACIONADO Se ha explorado la recolección de energía para varios tipos de sistemas, como computadoras portátiles [4], [5], [6], redes de sensores [7], etc. Varias tecnologías para extraer energía del entorno han sido demostradas, incluyendo la solar, basada en el movimiento, bioquímica, basada en vibraciones [8], [9], [10], [11], y otras están siendo desarrolladas [12], [13]. Si bien se han prototipado varias plataformas de nodos de sensores de recolección de energía [14], [15], [16], existe la necesidad de técnicas sistemáticas de gestión de energía que proporcionen garantías de rendimiento durante la operación del sistema. El primer trabajo que tuvo en cuenta la energía ambiental para el enrutamiento de datos fue [17], seguido por [18]. Si bien estos trabajos demostraron que las decisiones conscientes del entorno mejoran el rendimiento en comparación con las decisiones conscientes de la batería, su objetivo no era lograr una operación energéticamente neutral. Nuestras técnicas propuestas intentan maximizar el rendimiento del sistema manteniendo una operación energéticamente neutral. MODELO DEL SISTEMA Las consideraciones sobre el uso de energía en un sistema de recolección varían significativamente de las de un sistema alimentado por batería, como se mencionó anteriormente. Proponemos el modelo mostrado en la Figura 1 para diseñar métodos de gestión de energía en un sistema de recolección. Las funciones de los diferentes bloques mostrados en la figura se discuten a continuación. Los métodos precisos utilizados en nuestro sistema para lograr estas funciones serán discutidos en secciones posteriores. Seguimiento de Energía Recolectada: Este bloque representa los mecanismos utilizados para medir la energía recibida del dispositivo de recolección, como el panel solar. Dicha información es útil para determinar el perfil de disponibilidad de energía y adaptar el rendimiento del sistema en función de ella. La recolección de esta información requiere que el hardware del nodo esté equipado con la capacidad de medir la energía generada del entorno, y la plataforma Heliomote [14] que utilizamos para evaluar los algoritmos tiene esta capacidad. Modelo de Generación de Energía: Para que los nodos de sensores inalámbricos con capacidades limitadas de almacenamiento y procesamiento puedan utilizar los datos de energía recolectados, se requieren modelos que representen los componentes esenciales de esta información sin necesidad de utilizar un almacenamiento extensivo. El propósito de este bloque es proporcionar un modelo para la energía disponible para el sistema en una forma que pueda ser utilizada para tomar decisiones de gestión de energía. Los datos medidos por el bloque de seguimiento de energía se utilizan aquí para predecir la disponibilidad futura de energía. Un buen modelo de predicción debería tener un bajo error de predicción y proporcionar valores de energía predichos para períodos lo suficientemente largos como para tomar decisiones significativas sobre el rendimiento escalable. Además, para fuentes de energía que presentan tanto patrones a largo plazo como a corto plazo (por ejemplo, variaciones diurnas y climáticas frente a patrones climáticos para la energía solar), el modelo debe ser capaz de capturar ambas características. Un modelo así también puede utilizar información de fuentes externas como el servicio de pronóstico del tiempo local para mejorar su precisión. Modelo de Consumo de Energía: También es importante contar con información detallada sobre las características de uso de energía del sistema, en varios niveles de rendimiento. Para la aplicabilidad general de nuestro diseño, asumiremos que solo está disponible un modo de suspensión. Suponemos que el consumo de energía en los modos de reposo y activo es conocido. Cabe destacar que, para sistemas de baja potencia con capacidades más avanzadas como la escalabilidad dinámica de voltaje (DVS), múltiples modos de baja potencia y la capacidad de apagar selectivamente componentes del sistema, es necesario conocer el consumo de energía en cada uno de los estados y el efecto resultante en el rendimiento de la aplicación para tomar decisiones de gestión de energía. Modelo de almacenamiento de energía: Este bloque representa el modelo para la tecnología de almacenamiento de energía. Dado que toda la energía generada puede no ser utilizada instantáneamente, el sistema de recolección generalmente contará con alguna tecnología de almacenamiento de energía. Las tecnologías de almacenamiento (por ejemplo, baterías y ultracondensadores) son no ideales, ya que hay una pérdida de energía al almacenar y recuperar energía de ellos. Estas características deben ser conocidas para gestionar de manera eficiente el uso y almacenamiento de energía. Este bloque también incluye la capacidad del sistema de medir la energía almacenada residual. La mayoría de los sistemas de baja potencia utilizan baterías para almacenar energía y mostrar el estado residual de la batería. Esto se basa comúnmente en medir el voltaje de la batería, que luego se mapea a la energía residual de la batería utilizando la relación conocida entre la carga y el voltaje para la tecnología de batería en uso. También están disponibles métodos más sofisticados que rastrean el flujo de energía hacia y desde la batería. Gestión de energía consciente de la cosecha: Los insumos proporcionados por los bloques mencionados anteriormente se utilizan aquí para determinar la estrategia adecuada de gestión de energía para el sistema. La gestión de energía podría ser llevada a cabo para cumplir diferentes objetivos en distintas aplicaciones. Por ejemplo, en algunos sistemas, la energía recolectada puede complementar marginalmente el suministro de la batería y el objetivo puede ser maximizar la vida útil del sistema. Un caso más interesante es cuando la energía recolectada se utiliza como la fuente principal de energía para el sistema con el objetivo de lograr una vida útil del sistema indefinidamente larga. En tales casos, el objetivo de gestión de energía es lograr una operación energéticamente neutral. En otras palabras, el sistema solo debería utilizar la energía que se ha recolectado del entorno e intentar maximizar el rendimiento dentro de este presupuesto de energía disponible. 4. GESTIÓN ÓPTIMA DE LA POTENCIA TEÓRICAMENTE Desarrollamos la siguiente teoría para comprender el modo de operación energéticamente neutral. Definamos Ps(t) como la energía recolectada del entorno en el tiempo t, y la energía consumida por la carga en ese momento es Pc(t). Además, modelamos el búfer de almacenamiento no ideal por su eficiencia de ida y vuelta η (estrictamente menor que 1) y una potencia de fuga constante Pleak. Utilizando esta notación, aplicar la regla de conservación de energía conduce a la siguiente desigualdad: 0 0 00 [ ( ) ( )] [ ( ) ( )] 0 T T T s c c s leakP t P t dt P t P t dt P dtB η + + − − − ≥+ −∫ ∫ ∫ (1) donde B0 es el nivel inicial de la batería y la función [X]+ = X si X > 0 y cero en caso contrario. DEFINICIÓN 1 de función (ρ,σ1,σ2): Se dice que una función no negativa, continua y acotada P (t) es una función (ρ,σ1,σ2) si y solo si para cualquier valor de número real finito T, se cumplen las siguientes condiciones: 2 1( ) T T P t dt Tρ σ ρ σ− ≤ ≤ +∫ (2) Esta función puede ser utilizada para modelar tanto fuentes de energía como cargas. Si el perfil de energía recolectada Ps(t) es una función (ρ1,σ1,σ2), entonces la tasa promedio de energía disponible en largas duraciones se convierte en ρ1, y la variabilidad está limitada por σ1 y σ2. De manera similar, Pc(t) puede ser modelado como una función (ρ2,σ3), cuando ρ2 y σ3 se utilizan para establecer un límite superior en el consumo de energía (la desigualdad del lado derecho) sin restricciones de consumo mínimo de energía. La condición de neutralidad energética, ecuación (1), conduce al siguiente teorema, basado en los modelos de producción de energía, consumo y almacenamiento de energía discutidos anteriormente. TEOREMA 1 (OPERACIÓN ENERGÉTICAMENTE NEUTRA): Considere un sistema de recolección en el cual el perfil de producción de energía está caracterizado por una función (ρ1, σ1, σ2), la carga está caracterizada por una función (ρ2, σ3) y el almacenamiento de energía está caracterizado por los parámetros η para la eficiencia de almacenamiento y Pleak para la potencia de fuga. Las siguientes condiciones son suficientes para que el sistema logre la neutralidad energética: ρ2 ≤ ηρ1 − Pleak (3) B0 ≥ ησ2 + σ3 (4) B ≥ B0 (5) donde B0 es la energía inicial almacenada en el búfer y proporciona un límite inferior en la capacidad del búfer de energía B. La prueba se presenta en nuestro trabajo previo [19]. Para ajustar el ciclo de trabajo D utilizando nuestro algoritmo de escalado de rendimiento, asumimos la siguiente relación entre el ciclo de trabajo y la utilidad percibida del sistema para el usuario: Supongamos que la utilidad de la aplicación para el usuario está representada por U(D) cuando el sistema opera a un ciclo de trabajo D. Luego, min 1 min max 2 max ( ) 0, ( ) , ( ) , U D si D D U D k D si D D D U D k si D D β = < = + ≤ ≤ = > Este es un modelo bastante general y simple y los valores específicos de Dmin y Dmax pueden determinarse según los requisitos de la aplicación. Como ejemplo, considera un nodo sensor diseñado para detectar intrusiones a lo largo de una periferia. En este caso, un aumento lineal en el ciclo de trabajo se traduce en un aumento lineal en la probabilidad de detección. Las velocidades más rápidas y más lentas de los intrusos pueden ser conocidas, lo que lleva a un modelo de seguimiento de energía mínima y energía cosechada, modelo de almacenamiento de energía, modelo de gestión de energía consciente de la cosecha, modelo de generación de energía. Modelo del sistema para un sistema de recolección de energía. 181 es el máximo retraso de detección tolerable, lo que resulta en los valores relevantes de Dmax y Dmin para el nodo del sensor. Si bien puede haber casos en los que la relación entre la utilidad y el ciclo de trabajo sea no lineal, en este documento restringimos nuestro enfoque a aplicaciones que siguen este modelo lineal. A la vista de los modelos anteriores para los componentes del sistema y el rendimiento requerido, el objetivo de nuestra estrategia de gestión de energía es ajustar dinámicamente el ciclo de trabajo D(i) para maximizar la utilidad total U(D) durante un período de tiempo, garantizando al mismo tiempo una operación energéticamente neutral para el nodo sensor. Antes de discutir los métodos de escalado de rendimiento para la adaptación del ciclo de trabajo consciente de la cosecha, primero consideremos la estrategia óptima de gestión de energía que es posible para un perfil de generación de energía dado. Para el cálculo de la estrategia óptima, asumimos un conocimiento completo del perfil de disponibilidad energética en el nodo, incluyendo la disponibilidad en el futuro. El cálculo del óptimo es una herramienta útil para evaluar el rendimiento de nuestro algoritmo propuesto. Esto es particularmente útil para nuestro algoritmo ya que no hay algoritmos previos disponibles para servir como referencia para la comparación. Supongamos que el eje del tiempo está dividido en ranuras discretas de duración ΔT, y el cálculo de adaptación del ciclo de trabajo se realiza sobre una ventana de Nw de tales ranuras de tiempo. Definimos las siguientes variables del perfil energético, con el índice i variando en {1,..., Nw}: Ps(i) es la potencia de salida de la fuente recolectada en el intervalo de tiempo i, promediada durante la duración del intervalo, Pc es el consumo de energía de la carga en modo activo, y D(i) es el ciclo de trabajo utilizado en el intervalo i, cuyo valor debe determinarse. B(i) es la energía residual de la batería al inicio del intervalo i. Siguiendo esta convención, la energía de la batería restante después del último intervalo en la ventana se representa como B(Nw+1). Los valores de estas variables dependerán de la elección de D(i). La energía utilizada directamente de la fuente recolectada y la energía almacenada y utilizada de la batería deben contabilizarse de manera diferente. La Figura 2 muestra dos posibles casos para Ps(i) en un intervalo de tiempo. Ps(i) puede ser menor o mayor que Pc, como se muestra a la izquierda y a la derecha respectivamente. Cuando Ps(i) es menor que Pc, parte de la energía utilizada por la carga proviene de la batería, mientras que cuando Ps(i) es mayor que Pc, toda la energía utilizada es suministrada directamente desde la fuente recolectada. El área sombreada con líneas de cruz muestra la energía disponible para almacenarse en la batería, mientras que el área rayada muestra la energía extraída de la batería. Podemos escribir la energía utilizada de la batería en cualquier ranura i como: ( ) ( ) ( ) ( )[ ] ( ) ( ){ } ( ) ( )[ ]1 1c cs s sB i B i TD i P P i TP i D i TD i P i Pη η + + − + = Δ − − Δ − − − (6) En la ecuación (6), el primer término del lado derecho mide la energía extraída de la batería cuando Ps(i) < Pc, el siguiente término mide la energía almacenada en la batería cuando el nodo está en modo de suspensión, y el último término mide la energía almacenada en la batería en modo activo si Ps(i) > Pc. Para una operación energéticamente neutral, requerimos que la batería al final de la ventana de Nw ranuras sea mayor o igual que la batería inicial. Claramente, el nivel de la batería disminuirá cuando la energía recolectada no esté disponible y el sistema funcione con la energía almacenada. Sin embargo, la ventana Nw se elige cuidadosamente de tal manera que durante esa duración, esperamos que la disponibilidad de energía ambiental complete un ciclo periódico. Por ejemplo, en el caso de la recolección de energía solar, Nw podría elegirse como una duración de veinticuatro horas, correspondiente al ciclo diurno en la energía recolectada. Esta es una aproximación ya que la elección ideal del tamaño de la ventana sería infinita, pero se debe usar un tamaño finito para facilitar el análisis. Además, el nivel de la batería no puede ser negativo en ningún momento, y esto se garantiza teniendo un nivel de batería inicial lo suficientemente grande, B0, para que la operación del nodo se mantenga incluso en caso de un apagón total durante un período de tiempo determinado. Expresando cuantitativamente las restricciones anteriores, podemos expresar el cálculo de los ciclos de trabajo óptimos como un problema de optimización a continuación: La solución al problema de optimización proporciona los ciclos de trabajo que deben utilizarse en cada intervalo y la evolución de la batería residual a lo largo de Nw intervalos. Ten en cuenta que, si bien las restricciones anteriores contienen la función no lineal [x]+, las cantidades que aparecen dentro de esa función son todas constantes conocidas. Las cantidades variables ocurren solo en términos lineales y, por lo tanto, el problema de optimización anterior se puede resolver utilizando técnicas estándar de programación lineal, disponibles en cajas de herramientas de optimización populares. GESTIÓN DE ENERGÍA CONSCIENTE DE LA COSECHA Presentamos ahora un algoritmo práctico para la gestión de energía que puede ser utilizado para adaptar el rendimiento en función de la información de energía cosechada. Este algoritmo intenta lograr una operación energéticamente neutral sin utilizar el conocimiento de la disponibilidad futura de energía y maximiza el rendimiento alcanzable dentro de esa restricción. La estrategia de gestión de energía consciente de la cosecha consta de tres partes. La primera parte es una instancia del modelo de generación de energía que rastrea perfiles de entrada de energía pasados y los utiliza para predecir la disponibilidad de energía futura. La segunda parte calcula los ciclos de trabajo óptimos basados en la energía predicha, y este paso utiliza nuestro método computacionalmente viable para resolver el problema de optimización. La tercera parte consiste en un método para adaptar dinámicamente el ciclo de trabajo en respuesta al perfil de generación de energía observado en tiempo real. Este paso es necesario ya que la generación de energía observada puede desviarse significativamente de la disponibilidad de energía predicha y se debe garantizar la operación energéticamente neutral con la energía recibida real en lugar de los valores predichos. 5.1. Modelo de predicción de energía Utilizamos un modelo de predicción basado en el Promedio Móvil Exponencialmente Ponderado (EWMA). El método está diseñado para aprovechar el ciclo diurno de la energía solar, pero al mismo tiempo adaptarse a las variaciones estacionales. Se mantiene un resumen histórico del perfil de generación de energía con este propósito. Si bien el tamaño de los datos almacenados está limitado a una longitud de vector de Nw valores para minimizar los costos de memoria del algoritmo de gestión de energía, el tamaño de la ventana es efectivamente infinito ya que cada valor en la ventana de historial depende de todos los datos observados hasta ese instante. El tamaño de la ventana se elige como 24 horas y cada intervalo de tiempo se considera como 30 minutos, ya que la variación en la potencia generada por el panel solar utilizando esta configuración es inferior al 10% entre cada intervalo adyacente. Esto produce Nw = 48. Se pueden utilizar duraciones de ranura más cortas a expensas de un Nw más alto. El resumen histórico mantenido se deriva de la siguiente manera. En un día típico, esperamos que la generación de energía sea similar a la generación de energía en el mismo momento de los días anteriores. El valor de la energía generada en un intervalo de tiempo particular se mantiene como un promedio ponderado de la energía recibida en el mismo intervalo de tiempo durante todos los días observados. Los pesos son exponenciales, lo que resulta en una contribución decreciente de la Figura 2 más antigua. Dos posibles casos para cálculos de energía Slot i Slot k Pc Pc P(i) P(i) Activo Dormir 182 datos. Más específicamente, el promedio histórico mantenido para cada ranura está dado por: 1 (1 )k k kx x xα α−= + − donde α es el valor del factor de ponderación, kx es el valor observado de energía generada en la ranura, y 1kx − es el promedio histórico previamente almacenado. En este modelo, la importancia de cada día en relación con el anterior permanece constante porque se utilizó el mismo factor de ponderación para todos los días. El valor promedio obtenido para una ranura se trata como una estimación del valor energético predicho para la ranura correspondiente al día siguiente. Este método ayuda a que los valores promedio históricos se adapten a las variaciones estacionales en la energía recibida en diferentes días. Uno de los parámetros a elegir en el método de predicción anterior es el parámetro α, que es una medida de la tasa de cambio en el patrón de energía con el tiempo. Dado que este parámetro se ve afectado por las características de la energía y la ubicación del nodo sensor, el sistema debería tener un período de entrenamiento durante el cual este parámetro será determinado. Para determinar un buen valor de α, recopilamos datos de energía durante 72 días y comparamos el error promedio del método de predicción para varios valores de α. El error basado en los diferentes valores de α se muestra en la Figura 3. Esta curva sugiere un valor óptimo de α = 0.15 para minimizar el error de predicción y este valor se utilizará en el resto de este artículo. 5.2. Solución de baja complejidad Los valores de energía predichos para la próxima ventana de Nw ranuras se utilizan para calcular los ciclos de trabajo deseados para la próxima ventana, asumiendo que los valores predichos coincidan con los valores observados en el futuro. Dado que nuestro objetivo es desarrollar un algoritmo práctico para sistemas informáticos integrados, presentamos un método simplificado para resolver el problema de programación lineal presentado en la Sección 4. Con este fin, definimos los conjuntos S y D de la siguiente manera: { } { } | ( ) 0 | ( ) 0 s c c s S i P i P D i P P i = − ≥ = − > Los dos conjuntos difieren por la condición de si la operación del nodo puede ser sostenida completamente por energía ambiental. En caso de que la energía producida del entorno no sea suficiente, la batería se descargará para complementar la energía restante. A continuación sumamos ambos lados de la ecuación (6) sobre toda la ventana Nw y la reescribimos con la nueva notación. El término del lado izquierdo es en realidad la energía de la batería utilizada en toda la ventana de Nw ranuras, que puede establecerse en 0 para una operación energéticamente neutral. Después de algunas manipulaciones algebraicas, esto da como resultado: 1 1 ( ) ( ) ( ) 1 ( ) Nw c s s c i i D i S P P i D i P i P D i η η= ∈ ∈ ⎛ ⎞⎛ ⎞ = + − +⎜ ⎟⎜ ⎟ ⎝ ⎠⎝ ⎠ ∑ ∑ ∑ (13) El término del lado izquierdo es la energía total recibida en Nw ranuras. El primer término del lado derecho se puede interpretar como la energía total consumida durante los D intervalos y el segundo término es la energía total consumida durante los S intervalos. Ahora podemos reemplazar tres restricciones (8), (9) y (10) en el problema original con (13), reformulando el problema de optimización de la siguiente manera: 1 max ( ) wN i D i = ∑ 1 1 ( ) ( ) ( ) 1 ( ) Nw c s s c i i D i S P P i D i P i P D i η η= ∈ ∈ ⎛ ⎞⎛ ⎞ = + − +⎜ ⎟⎜ ⎟ ⎝ ⎠⎝ ⎠ ∑ ∑ ∑ min max D(i) D {1,...,Nw) D(i) D {1,...,Nw) i i ≥ ∀ ∈ ≤ ∀ ∈ Esta forma facilita una solución de baja complejidad que no requiere un solver general de programación lineal. Dado que nuestro objetivo es maximizar la utilidad total del sistema, es preferible establecer el ciclo de trabajo en Dmin para los intervalos de tiempo donde la utilidad por unidad de energía es la menor. Por otro lado, también nos gustaría que los intervalos de tiempo con los mayores Ps operen en Dmax debido a una mejor eficiencia en el uso de energía directamente desde la fuente de energía. Al combinar estas dos características, definimos el coeficiente de utilidad para cada ranura i de la siguiente manera: 1 ( ) 1 1 ( ) 1 c c s P para i S W i P P i para i D η η ∈⎧ ⎪ = ⎛ ⎞⎛ ⎞⎨ + − ∈⎜ ⎟⎜ ⎟⎪ ⎝ ⎠⎝ ⎠⎩ donde W(i) es una representación de qué tan eficiente es el uso de energía en una ranura de tiempo i en particular. Un valor W(i) mayor indica más utilidad del sistema por unidad de energía en la ranura i y viceversa. El algoritmo comienza asumiendo D(i) = Dmin para i = {1…NW} debido al requisito de ciclo de trabajo mínimo, y calcula la energía restante del sistema R mediante: 1 1 ( ) ( ) ( ) 1 ( ) (14) Nw c s s c i i D i S P R P i D i P i P D i η η= ∈ ∈ ⎛ ⎞⎛ ⎞ = − + − −⎜ ⎟⎜ ⎟ ⎝ ⎠⎝ ⎠ ∑ ∑ ∑ Un valor negativo de R concluye que el problema de optimización es inviable, lo que significa que el sistema no puede lograr neutralidad energética incluso con el ciclo de trabajo mínimo. En este caso, el diseñador del sistema es responsable de aumentar la disponibilidad de energía del entorno (por ejemplo, mediante el uso de paneles solares más grandes). Si R es positivo, significa que el sistema tiene un exceso de energía que no se está utilizando, y esto podría asignarse para aumentar el ciclo de trabajo más allá de Dmin para algunos intervalos. Dado que nuestro objetivo es maximizar la utilidad total del sistema, la forma más eficiente de asignar la energía excedente es asignar el ciclo de trabajo Dmax a los intervalos con el mayor W(i). Por lo tanto, los coeficientes W(i) se organizan en orden decreciente y el ciclo de trabajo Dmax se asigna a las ranuras comenzando por los coeficientes más grandes hasta que la energía excedente disponible, R (calculada por (14) en cada iteración), no sea suficiente para asignar Dmax a otra ranura. La energía restante, RLast, se utiliza para aumentar el ciclo de trabajo a algún valor entre Dmin y Dmax en la ranura con el siguiente coeficiente más bajo. Denotando este intervalo con índice j, el ciclo de trabajo se da por: D(j)= min / ( ( ) ) / ( ) Último c Último s c s R P si j D DR si j S P j P P jη ∈⎧ ⎫ ⎪ ⎪ +⎨ ⎬ ∈⎪ ⎪− −⎩ ⎭ La solución anterior al problema de optimización requiere solo cálculos aritméticos simples y un paso de ordenación que se puede implementar fácilmente en una plataforma integrada, en lugar de implementar un solucionador general de programas lineales. 5.3. Adaptación de ciclo de trabajo continuo ranura por ranura. Los valores de energía observados pueden variar considerablemente de los predichos, como debido al efecto de las nubes u otros cambios repentinos. Por lo tanto, es importante adaptar los ciclos de trabajo calculados utilizando los valores predichos, a las mediciones de energía reales en tiempo real para garantizar la neutralidad energética. Denote las asignaciones iniciales del ciclo de trabajo para cada intervalo de tiempo i calculadas utilizando los valores de energía predichos como D(i) = {1, ..., Nw}. Primero calculamos la diferencia entre el nivel de potencia predicho Ps(i) y el nivel de potencia observado real, Ps(i) en cada intervalo i. Entonces, la energía en exceso en la ranura i, denotada por X, se puede obtener de la siguiente manera: ( ) ( ) ( ) 1 ( ) ( ) ( )[ ( ) ( )](1 ) ( ) s s s c s s s s s c P i P i si P i P X P i P i D i P i P i si P i P η − >⎧ ⎪ = ⎨ − − − − ≤⎪ ⎩ 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 0.5 2.6 2.7 2.8 2.9 3 alfa AvgError(mA) Figura 3. Elección del parámetro de predicción. El término superior representa la diferencia de energía cuando la energía recibida real es mayor que la potencia consumida por la carga. Por otro lado, si la energía recibida es menor que Pc, necesitaremos tener en cuenta la energía adicional utilizada de la batería por la carga, la cual es una función del ciclo de trabajo utilizado en el intervalo de tiempo i y del factor de eficiencia de la batería η. Cuando se recibe más energía de la prevista, X es positivo y ese exceso de energía está disponible para su uso en los solutos subsiguientes, mientras que si X es negativo, esa energía debe ser compensada en las ranuras subsiguientes. CASO I: X<0. En este caso, queremos reducir los ciclos de trabajo utilizados en los intervalos futuros para compensar esta falta de energía. Dado que nuestra función objetivo es maximizar la utilidad total del sistema, debemos reducir los ciclos de trabajo para los intervalos de tiempo con el coeficiente de utilidad normalizado más pequeño, W(i). Esto se logra primero ordenando el coeficiente W(j), donde j>i, en orden decreciente, y luego reduciendo de forma iterativa Dj a Dmin hasta que la reducción total en el consumo de energía sea igual a X. CASO II: X>0. Aquí, queremos aumentar los ciclos de trabajo utilizados en el futuro para aprovechar esta energía excedente que recibimos en el intervalo de tiempo reciente. A diferencia del Caso I, los ciclos de trabajo de los futuros intervalos de tiempo con el coeficiente de utilidad más alto W(i) deben aumentarse primero para maximizar la utilidad total del sistema. Supongamos que el ciclo de trabajo se cambia por d en la ranura j. Define una cantidad R(j,d) de la siguiente manera: ⎪ ⎩ ⎪ ⎨ ⎧ <=⎟ ⎟ ⎠ ⎞ ⎜ ⎜ ⎝ ⎛ ⎟⎟ ⎠ ⎞ ⎜⎜ ⎝ ⎛ −+ >⋅ = lji l ljl PPifP P d PPifP djR 　　　 1 1 　　d　　 ),( ηη El procedimiento preciso para adaptar el ciclo de trabajo y tener en cuenta los factores anteriores se presenta en el Algoritmo 1. Este cálculo se realiza al final de cada intervalo para establecer el ciclo de trabajo para el siguiente intervalo. Sostenemos que nuestro algoritmo de ciclado de deber es energéticamente neutral porque un excedente de energía en el intervalo de tiempo anterior siempre se traducirá en una oportunidad adicional de energía para los intervalos de tiempo futuros, y viceversa. La afirmación puede ser violada en casos de graves escaseces de energía, especialmente hacia el final de la ventana. Por ejemplo, un gran déficit en el suministro de energía no puede ser restaurado si no hay una entrada de energía futura hasta el final de la ventana. En tal caso, este excedente se trasladará a la siguiente ventana para que se mantenga la neutralidad energética a largo plazo. 6. EVALUACIÓN Nuestro algoritmo adaptativo de ciclo de trabajo fue evaluado utilizando un perfil real de energía solar medido con un nodo sensor llamado Heliomote, capaz de recolectar energía solar [14]. Esta plataforma no solo rastrea la energía generada, sino también el flujo de energía hacia y desde la batería para proporcionar una estimación precisa de la energía almacenada. La plataforma de recolección de energía fue desplegada en una zona residencial en Los Ángeles desde principios de junio hasta mediados de agosto, durante un total de 72 días. El nodo sensor utilizado es un mote Mica2 que funciona con un ciclo de trabajo fijo del 40% con una batería inicialmente llena. El voltaje de la batería y la corriente neta de los paneles solares se muestrean cada 10 segundos. El perfil de generación de energía para esa duración, medido mediante el seguimiento de la corriente de salida de la célula solar, se muestra en la Figura 4, tanto en escalas continuas como diurnas. Podemos observar que aunque el perfil de energía varía de un día a otro, aún muestra un patrón general a lo largo de varios días. 0 10 20 30 40 50 60 70 0 10 20 30 40 50 60 70 Día mA 0 5 10 15 20 0 10 20 30 40 50 60 70 Hora mA 6.1. Modelo de predicción Primero evaluamos el rendimiento del modelo de predicción, el cual es juzgado por la cantidad de error absoluto que cometió entre el perfil de energía predicho y el real. La Figura 5 muestra el error promedio de cada intervalo de tiempo en mA durante los 72 días completos. Generalmente, la cantidad de error es mayor durante el día porque es cuando el factor del clima puede causar desviaciones en la energía recibida, mientras que la predicción hecha para la noche es mayormente correcta. 6.2. El algoritmo de ciclo de trabajo adaptativo. Los métodos previos para optimizar el rendimiento mientras se logra una operación energéticamente neutral utilizando la energía recolectada son escasos. En cambio, comparamos el rendimiento de nuestro algoritmo con dos extremos: el óptimo teórico calculado asumiendo un conocimiento completo sobre la disponibilidad futura de energía y un enfoque simple que intenta lograr neutralidad energética utilizando un ciclo de trabajo fijo sin tener en cuenta la ineficiencia de la batería. Los ciclos de trabajo óptimos se calculan para cada intervalo utilizando el conocimiento futuro de la energía recibida real para ese intervalo. Para el enfoque simple, el ciclo de trabajo se mantiene constante dentro de cada día y es Figura 4 Perfil de Energía Solar (Izquierda: Continuo, Derecha: Diurno) Entrada: D: Ciclo de trabajo inicial, X: Exceso de energía debido a un error en la predicción, P: Perfil de energía predicho, i: índice del intervalo de tiempo actual Salida: D: Ciclos de trabajo actualizados en uno o más intervalos de tiempo subsiguientes AdaptDutyCycle() Iteración: En cada intervalo de tiempo hacer: si X > 0 Wordenado = W{1, ...,Nw} ordenado en orden descendente. Q := índices de Wsorted para k = 1 a |Q| si Q(k) ≤ i o D(Q(k)) ≥ Dmax //la ranura ya ha pasado, continuar si R(Q(k), Dmax − D(Q(k))) < X D(Q(k)) = Dmax X = X − R(j, Dmax − D(Q(k))) else //X insuficiente para aumentar el ciclo de trabajo a Dmax si P (Q(k)) > Pl D(Q(k)) = D(Q(k)) + X/Pl else D(Q(k)) = D(Q(k)) + ( ( ))(1 1 ))c s X P P Q kη η+ − si X < 0 Wsorted = W{1, ...,Nw} ordenado en orden ascendente. Q := índices de Wsorted para k = 1 a |Q| si Q(k) ≤ I o D(Q(k)) ≤ Dmin continuar si R(Q(k), Dmax − D(Q(k))) > X D(Q(k)) = Dmin X = X − R(j, Dmin − D(Q(k))) else si P(Q(k)) > Pc D(Q(k)) = D(Q(k)) + X/Pc else D(Q(k)) = D(Q(k)) + ( ( ))(1 1 ))c s X P P Q kη η+ − ALGORITMO 1 Pseudocódigo para el algoritmo de adaptación del ciclo de trabajo Figura 5. El error promedio del predictor en mA es de 0, 5, 10, 15, 20, 25. Calculado tomando la proporción de la disponibilidad de energía predicha y el uso máximo, lo que garantiza que el nodo sensor nunca agotará su batería funcionando en este ciclo de trabajo. Luego comparamos el rendimiento de nuestro algoritmo con los dos extremos con eficiencia de batería variable. La Figura 6 muestra los resultados, utilizando Dmax = 0.8 y Dmin = 0.3. La eficiencia de la batería varió de 0.5 a 1 en el eje x y las utilizaciones de energía solar logradas por los tres algoritmos se muestran en el eje y. Muestra la fracción de energía neta recibida que se utiliza para realizar un trabajo útil en lugar de perderse debido a la ineficiencia de almacenamiento. Como se puede ver en la figura, el factor de eficiencia de la batería tiene un gran impacto en el rendimiento de los tres enfoques diferentes. Los tres enfoques convergen todos hacia una utilización del 100% si tenemos una batería perfecta (η=1), es decir, la energía no se pierde al almacenarla en las baterías. Cuando se tiene en cuenta la ineficiencia de la batería, tanto el enfoque adaptativo como el óptimo tienen una tasa de utilización de energía solar mucho mejor que el enfoque simple. Además, el resultado también muestra que nuestro algoritmo de ciclo de trabajo adaptativo se desempeña extremadamente cerca del óptimo. 0.4 0.5 0.6 0.7 0.8 0.9 1 0.4 0.5 0.6 0.7 0.8 0.9 1 Eficiencia de ida y vuelta de la batería SolarEnergyUtilization(%) Óptimo Adaptativo Simple También comparamos el rendimiento de nuestro algoritmo con diferentes valores de Dmin y Dmax para η=0.7, que es típico de las baterías de NiMH. Estos resultados se muestran en la Tabla 1 como el porcentaje de energía ahorrada por los enfoques óptimo y adaptativo, y esta es la energía que normalmente se desperdiciaría en el enfoque simple. Las cifras y la tabla indican que nuestro algoritmo en tiempo real es capaz de lograr un rendimiento muy cercano al óptimo factible. Además, estos resultados muestran que la recolección de energía ambiental con un adecuado manejo de energía puede lograr una utilización mucho mejor de la energía ambiental. Dmax Dmin 0.8 0.05 0.8 0.1 0.8 0.3 0.5 0.2 0.9 0.2 1.0 0.2 Adaptativo 51.0% 48.2% 42.3% 29.4% 54.7% 58.7% Óptimo 52.3% 49.6% 43.7% 36.7% 56.6% 60.8% 7. CONCLUSIONES Discutimos varios temas sobre la gestión de energía para sistemas alimentados con energía ambientalmente recolectada. Específicamente, diseñamos un método para optimizar el rendimiento sujeto a la restricción de operación energéticamente neutral. También obtuvimos un límite teóricamente óptimo sobre el rendimiento y demostramos que nuestro algoritmo propuesto operaba muy cerca del óptimo. Las propuestas fueron evaluadas utilizando datos reales recopilados con un nodo sensor de recolección de energía desplegado en un entorno exterior. Nuestro método tiene ventajas significativas sobre los métodos actualmente utilizados, los cuales se basan en una estimación conservadora del ciclo de trabajo y solo pueden proporcionar un rendimiento subóptimo. Sin embargo, este trabajo es solo el primer paso hacia soluciones óptimas para la operación energéticamente neutra. Está diseñado para un método específico de escalado de potencia basado en la adaptación del ciclo de trabajo. Varios otros métodos de escalado de potencia, como DVS, conmutación de potencia de submódulo y el uso de múltiples modos de baja potencia también están disponibles. Por lo tanto, es de interés extender nuestros métodos para aprovechar estas capacidades avanzadas. AGRADECIMIENTOS Esta investigación fue financiada en parte a través del apoyo proporcionado por DARPA en el programa PAC/C, la Fundación Nacional de Ciencias (NSF) bajo el premio #0306408, y el Centro de Sensores en Red Integrados de la Universidad de California en Los Ángeles (CENS). Cualquier opinión, hallazgo, conclusión o recomendación expresada en este documento son responsabilidad de los autores y no reflejan necesariamente las opiniones de DARPA, NSF o CENS. REFERENCIAS [1] R Ramanathan y R Hain, Control de topología de redes inalámbricas multihop utilizando ajuste de potencia de transmisión en Proc. Infocom. Vol. 2, págs. 26-30, pp. 404-413. Marzo de 2000 [2] T.A. Pering, T.D. Burd y R. W. Brodersen, La simulación y evaluación de algoritmos de escalado dinámico de voltaje, en Proc. ACM ISLPED, pp. 76-81, 1998 [3] L. Benini y G. De Micheli, Gestión Dinámica de Energía: Técnicas de Diseño y Herramientas CAD. Kluwer Academic Publishers, Norwell, MA, 1997. [4] John Kymisis, Clyde Kendall, Joseph Paradiso y Neil Gershenfeld. Recolección de energía parasitaria en zapatos. En ISWC, páginas 132-139. Prensa de la Sociedad de Computación de IEEE, octubre de 1998. [5] Nathan S. Shenck y Joseph A. Paradiso. Recuperación de energía con piezoeléctricos montados en zapatos. IEEE Micro, 21(3):30ñ42, mayo-junio de 2001. [6] T Starner. Computación portátil impulsada por humanos. Revista de Sistemas de IBM, 35(3-4), 1996. [7] Mohammed Rahimi, Hardik Shah, Gaurav S. Sukhatme, John Heidemann y D. Estrin. Estudiando la viabilidad de la recolección de energía en una red de sensores móviles. En ICRA, 2003. [8] Chris Melhuish. El proyecto ecobot. www.ias.uwe.ac.uk/energy autonomy/EcoBot página web.html. [9] Jan M.Rabaey, M. Josie Ammer, Julio L. da Silva Jr., Danny Patel y Shad Roundy. Picoradio soporta redes inalámbricas ad-hoc de ultra bajo consumo de energía. IEEE Computer, páginas 42-48, julio de 2000. [10] Joseph A. Paradiso y Mark Feldmeier. Un controlador de botón compacto, inalámbrico y autoalimentado. En ACM Ubicomp, páginas 299-304, Atlanta, GA, EE. UU., septiembre de 2001. Springer-Verlag Berlin Heidelberg. [11] SE Wright, DS Scott, JB Haddow, y MA Rosen. El límite superior de conversión de energía solar. volumen 1, páginas 384-392, julio de 2000. [12] Proyectos de recolección de energía de Darpa. http://www.darpa.mil/dso/trans/energy/projects.html. [13] Werner Weber. Inteligencia ambiental: investigación industrial sobre un concepto visionario. En Actas del simposio internacional de 2003 sobre electrónica y diseño de bajo consumo, páginas 247-251. ACM Press, 2003. [14] V Raghunathan, A Kansal, J Hsu, J Friedman, y MB Srivastava, Consideraciones de diseño para sistemas embebidos inalámbricos de captación de energía solar, (IPSN/SPOTS), abril de 2005. [15] Xiaofan Jiang, Joseph Polastre, David Culler, Redes de sensores ambientalmente alimentadas perpetuamente, (IPSN/SPOTS), 25-27 de abril de 2005. [16] Chulsung Park, Pai H. Chou y Masanobu Shinozuka, DuraNode: Red de sensores inalámbricos para monitoreo de salud estructural, por aparecer en las Actas de la 4ta Conferencia Internacional de IEEE sobre Sensores, Irvine, CA, 31 de octubre - 1 de noviembre de 2005. [17] Aman Kansal y Mani B. Srivastava. Un marco de recolección de energía ambiental para redes de sensores. En el simposio internacional sobre electrónica de bajo consumo y diseño, páginas 481-486. ACM Press, 2003. [18] Thiemo Voigt, Hartmut Ritter y Jochen Schiller. Utilizando energía solar en redes de sensores inalámbricos. En LCN, 2003. [19] A. Kansal, J. Hsu, S. Zahedi y M. B. Srivastava. Gestión de energía en redes de sensores con recolección de energía. Informe técnico TR-UCLA-NESL200603-02, Laboratorio de Sistemas en Red y Embebidos, UCLA, marzo de 2006. Figura 6. Ciclos de trabajo logrados con respecto a η TABLA 1. Energía ahorrada por enfoque adaptativo y óptimo. 185