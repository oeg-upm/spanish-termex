Migración del centro de datos en vivo a través de WANS: un sólido enfoque consciente de contexto cooperativo K.K. Ramakrishnan, Prashant Shenoy, Jacobus van der Merwe AT&T Labs-Research / University of Massachusetts abstrae una preocupación significativa para los proveedores de servicios basados en Internet es la operación continua y la disponibilidad de servicios frente a las interrupciones, ya sea planificadas o no planificadas. En este documento abogamos por un enfoque cooperativo y consciente de contexto para la migración del centro de datos a través de WANS para lidiar con interrupciones de manera no disruptiva. Buscamos específicamente lograr una alta disponibilidad de servicios de centros de datos frente a interrupciones planificadas e imprevistas de instalaciones de centros de datos. Hacemos uso de las tecnologías de virtualización del servidor para habilitar la replicación y la migración de las funciones del servidor. Proponemos nuevas funciones de red para habilitar la migración y replicación del servidor en redes de área amplia (por ejemplo, Internet), y finalmente mostramos la utilidad de la tecnología de replicación de almacenamiento inteligente y dinámica para garantizar que las aplicaciones tengan acceso a datos frente a interrupciones con recuperación muy estrecha.Objetivos de punto. Categorías y descriptores de sujetos C.2.4 [Redes de comunicación por computadora]: Sistemas distribuidos Términos generales Diseño, confiabilidad 1. Introducción Una preocupación significativa para los proveedores de servicios basados en Internet es la operación continua y la disponibilidad de servicios frente a las interrupciones, ya sea planificada o no planificada. Estas preocupaciones se ven exacerbadas por el mayor uso de Internet para las aplicaciones de negocios de misión crítica y entretenimiento en tiempo real. Una interrupción relativamente menor puede interrumpir e incomodar a un gran número de usuarios. Hoy, estos servicios se alojan casi exclusivamente en los centros de datos. Los avances recientes en las tecnologías de virtualización del servidor [8, 14, 22] permiten la migración en vivo de los servicios dentro de un entorno de red de área local (LAN). En el entorno LAN, estas tecnologías han demostrado ser una herramienta muy efectiva para permitir la gestión de centros de datos de manera no disruptiva. No solo puede admitir eventos de mantenimiento planificados [8], sino que también se puede utilizar de manera más dinámica para equilibrar automáticamente la carga entre los servidores físicos en un centro de datos [22]. Al usar estas tecnologías en un entorno LAN, los servicios se ejecutan en un servidor virtual, y los servicios de migración proporcionados por el marco de virtualización subyacente permiten que un servidor virtual se migre de un servidor físico a otro, sin ningún tiempo de inactividad significativo para el servicio o aplicación.. En particular, dado que el servidor virtual conserva la misma dirección de red que antes, cualquier interacción en curso de nivel de red no se interrumpe. Del mismo modo, en un entorno LAN, los requisitos de almacenamiento normalmente se cumplen a través de la red de almacenamiento adjunto (NAS) o a través de una red de área de almacenamiento (SAN) que todavía se puede acceder desde la nueva ubicación del servidor físico para permitir el acceso continuo de almacenamiento. Desafortunadamente, en un entorno de área amplia (WAN), la migración del servidor en vivo no se puede lograr tan fácilmente por dos razones: primero, la migración en vivo requiere que el servidor virtual mantenga la misma dirección de red para que desde un punto de vista de conectividad de red, el servidor migrado sea indistinguible deloriginal. Si bien esto se logra con bastante facilidad en un entorno LAN compartido, no hay mecanismos actuales disponibles para lograr eficientemente la misma hazaña en un entorno WAN. En segundo lugar, si bien se han desarrollado mecanismos de replicación remota bastante sofisticados en el contexto de la recuperación de desastres [20, 7, 11], estos mecanismos no son adecuados para la migración de centros de datos en vivo, porque en general las tecnologías disponibles no son conscientes de la semántica de nivel de aplicación/servicio. En este artículo describimos un diseño para la migración de servicios en vivo en Wans. Nuestro diseño utiliza tecnologías de virtualización de servidores existentes y propone mecanismos de red y almacenamiento para facilitar la migración a través de una WAN. La esencia de nuestro enfoque es la migración cooperativa y consciente del contexto, donde un sistema de gestión de migración orquesta la migración del centro de datos en los tres subsistemas involucrados, a saber, las plataformas del servidor, la red de área amplia y el sistema de almacenamiento de disco. Si bien es conceptualmente similar en la naturaleza al trabajo basado en LAN descrito anteriormente, el uso de tecnologías de migración en una red de área amplia presenta desafíos únicos y no se puede lograr, hasta donde sabemos. Nuestra principal contribución es el diseño de un marco que permitirá la migración a través de una WAN de todos los subsistemas involucrados con la habilitación de servicios de centros de datos. Describimos nuevos mecanismos, así como extensiones a las tecnologías existentes para habilitar esto y describir la funcionalidad cooperativa consciente de contexto necesaria en los diferentes subsistemas para habilitar esto.262 2. La migración del centro de datos en vivo a través de WANS se involucra tres subsistemas esenciales con los servicios de alojamiento en un centro de datos: primero, los servidores alojan la aplicación o la lógica del servicio. En segundo lugar, los servicios normalmente se alojan en un centro de datos para proporcionar acceso compartido a través de una red, Internet o redes privadas virtuales (VPN). Finalmente, la mayoría de las aplicaciones requieren almacenamiento en disco para almacenar datos y la cantidad de espacio en disco y la frecuencia de acceso varía mucho entre diferentes servicios/aplicaciones. Las interrupciones, fallas o, en general, las interrupciones de cualquier tipo de cualquiera de estos componentes causarán interrupción del servicio. Por esta razón, el trabajo previo y las prácticas actuales han abordado la robustez de los componentes individuales. Por ejemplo, los centros de datos generalmente tienen múltiples conexiones de red y dispositivos LAN redundantes para garantizar la redundancia en el nivel de red. Del mismo modo, los servidores físicos se están diseñando con componentes redundantes en caliente (discos, cuchillas de procesador, fuentes de alimentación, etc.). Finalmente, la redundancia a nivel de almacenamiento se puede proporcionar a través de tecnologías sofisticadas de reflejo de datos. Sin embargo, el enfoque de nuestro trabajo está en el caso en el que dichos mecanismos de redundancia local no son suficientes. Específicamente, estamos interesados en proporcionar disponibilidad de servicios cuando el centro de datos en su conjunto no está disponible, por ejemplo, debido a operaciones de mantenimiento de amplio centro de datos, o debido a eventos catastróficos. Como tal, nuestro enfoque básico es migrar los servicios entre centros de datos en todo el mundo es Red (WAN). Por necesidad, mover o migrar servicios de un centro de datos a otro debe considerar estos tres componentes. Históricamente, dicha migración ha sido de naturaleza disruptiva, que requiere tiempo de inactividad de los servicios reales involucrados o que requieren técnicas de replicación de peso pesado. En el último caso, se pueden poner a disposición réplicas simultáneamente de un servicio, lo que permite que un subconjunto del servicio se migren o mantenga sin afectar el servicio en su conjunto. Argumentamos que estos mecanismos existentes son inadecuados para satisfacer las necesidades de los servicios basados en la red, incluidos los servicios en tiempo real, en términos de disponibilidad y operación continua. En cambio, abogamos por un enfoque donde los subsistemas de servidor, red y almacenamiento cooperen y coordinen las acciones, de una manera que es consciente del contexto del servicio para realizar una migración perfecta en redes de área amplia. En esta sección describimos brevemente los bloques de construcción técnicos que permitirían nuestro enfoque. Como se describe a continuación, algunos de estos bloques de construcción existen, o existen en parte, mientras que en otros casos utilizamos el deseo de una alta disponibilidad de servicios como el conductor de los cambios que proponemos.2.1 Migración del servidor virtual en vivo El habilitador principal para nuestro enfoque son las capacidades de migración del servidor en vivo que se han desarrollado en el contexto de la virtualización del servidor en los últimos años [5, 8]. En este enfoque, se transfiere un sistema operativo en ejecución completo (incluidas cualquier aplicación activa) que se ejecuta como servidor virtual de una máquina física a otra. Dado que el servidor virtual se migra en su totalidad, tanto la aplicación como el estado de nivel del kernel se migran, incluido cualquier estado asociado con las conexiones de red en curso. Suponiendo que la accesibilidad del nivel de red para las direcciones de red de servidores virtuales se mantiene después de la migración, la implicación es que las aplicaciones que se ejecutan en el servidor virtual experimentan muy poco tiempo de inactividad (en el orden de decenas a cientos de milisegundos) y las conexiones de red en curso permanecen intactas. Para mantener la accesibilidad del nivel de red, las direcciones IP asociadas con el servidor virtual deben ser accesibles en el servidor físico donde se migra el servidor virtual. En un entorno LAN, esto se logra, ya sea emitiendo una respuesta ARP no solicitada para establecer el enlace entre la nueva dirección MAC y la dirección IP, o confiando en tecnologías de capa dos para permitir que el servidor virtual reutilice su dirección MAC (antigua) [8]. Debido a la dificultad del nivel de red en movimiento (es decir, direcciones IP) en un entorno no LAN enrutado, el uso de la migración de servidores en vivo como herramienta de administración se ha limitado a los entornos LAN [22]. Sin embargo, la migración del servidor virtual en el área amplia también será una herramienta atractiva, específicamente para lidiar con interrupciones y, por lo tanto, proponer mecanismos de red para habilitar esto. Si las necesidades de almacenamiento de disco se cumplen con el almacenamiento adjunto de la red (NAS), el almacenamiento se convierte en otra aplicación basada en la red y, por lo tanto, se puede abordar de la misma manera con la migración basada en LAN [8]. Los entornos de virtualización modernos también incluyen soporte para otras formas de almacenamiento (local), incluidas las redes de área de almacenamiento (SAN) [23]. Sin embargo, dado que proponemos utilizar la migración del servidor WAN como un medio para tratar las interrupciones completas del centro de datos, estos mecanismos son inadecuados para nuestros propósitos y a continuación proponemos la extensión a las tecnologías de replicación remota que pueden funcionar en concierto con la migración del servidor para minimizar el tiempo de inactividad del servicio.2.2 Requisitos de red de la discusión anterior, un requisito clave para la migración del servidor en vivo a través de una WAN es la capacidad de que las direcciones IP del servidor virtual sean accesibles en la nueva ubicación del centro de datos inmediatamente después de que la migración se haya completado. Esto presenta un desafío significativo por varias razones. Primero, a pesar de las décadas de trabajo en esta área, la movilidad de las direcciones IP sigue siendo un problema no resuelto que generalmente solo se aborda en las escalas de tiempo de configuración manual. El segundo desafío proviene del hecho de que los protocolos de enrutamiento actuales son bien conocidos por tener problemas de convergencia que no se adaptan a las limitaciones de tiempo impuestas por la migración en vivo. En tercer lugar, en el entorno de red de hoy en día, los cambios de conectividad del entorno de WAN generalmente son iniciados y controlados por operadores de red o sistemas de gestión de redes. Nuevamente, esto es poco adecuado para la migración del servidor WAN, donde es esencial que el software de migración, que está monitoreando de cerca el estado del proceso de migración del servidor, inicie este cambio en el momento apropiado. Nuestro enfoque para abordar los requisitos de red para la migración de WAN Live se basa en las observaciones de que no todos los cambios de red en este enfoque son críticos y además que los cambios instantáneos se logran mejor de manera localizada. Específicamente, en nuestra solución, descrita en detalle en la Sección 3, permitimos que el software de migración inicie los cambios de red necesarios tan pronto como se haya identificado la necesidad de migración. Hacemos uso de las tecnologías de túnel durante esta fase inicial para establecer preventivamente la conectividad entre los centros de datos involucrados. Una vez que se completa la migración del servidor, el software de migración inicia un cambio local para dirigir el tráfico hacia el nuevo centro de datos a través del túnel. Los cambios en la red de escala de tiempo más lento y luego eliminan este cambio de conectividad de red local para una ruta de red de red más óptima al nuevo centro de datos.2.3 Requisitos de replicación de almacenamiento La disponibilidad de datos generalmente se aborda replicando datos comerciales en un sistema de almacenamiento local/primario, hasta alguna ubicación remota desde donde se puede acceder. Desde un punto de vista comercial/de usabilidad, dicha replicación remota es impulsada por dos métricas [9]. El primer 263 es el objetivo de punto de recuperación, que es el punto de datos consistente al que los datos se pueden restaurar después de un desastre. El segundo es el objetivo de tiempo de recuperación, que es el tiempo que lleva recuperarse a ese punto de datos consistente después de un desastre [13]. La replicación remota se puede clasificar ampliamente en las siguientes dos categorías: ¡replicación sincrónica: cada bloque de datos escrito en un sistema de almacenamiento local se replica en la ubicación remota antes de que regrese la operación de escritura local.¡Replicación asincrónica: en este caso, los sistemas de almacenamiento locales y remotos pueden divergir. La cantidad de divergencia entre las copias locales y remotas generalmente está limitada por una cierta cantidad de datos o en un cierto período de tiempo. La replicación sincrónica se recomienda normalmente para aplicaciones, como bases de datos financieras, donde la consistencia entre los sistemas de almacenamiento locales y remotos es una alta prioridad. Sin embargo, estas propiedades deseables tienen un precio. Primero, debido a que cada bloque de datos debe replicarse de forma remota, los sistemas de replicación sincrónica no pueden beneficiarse de ninguna escritura local de datos si los mismos bloques de datos se escriben repetidamente [16]. En segundo lugar, debido a que los datos deben copiarse en la ubicación remota antes de que regrese la operación de escritura, la replicación sincrónica tiene un impacto de rendimiento directo en la aplicación, ya que tanto el rendimiento menor como el aumento de la latencia de la ruta entre los sistemas primarios y remotos se reflejan en eltiempo que se necesita para completar el disco local. Una alternativa es usar replicación asincrónica. Sin embargo, debido a que los sistemas locales y remotos pueden divergir, la replicación asincrónica siempre implica alguna pérdida de datos en caso de falla del sistema primario. Pero, debido a que las operaciones de escritura se pueden lanzar y canalizar los sistemas de replicación asincrónicos pueden mover datos a través de la red de una manera mucho más eficiente que los sistemas de replicación sincrónica. Para la migración del servidor WAN Live, buscamos un sistema de replicación más flexible donde el modo puede ser dictado por la semántica de migración. Específicamente, para admitir la migración del servidor en vivo, proponemos un sistema de replicación remota donde la transferencia inicial de datos entre los centros de datos se realiza mediante replicación asíncrona para beneficiarse de la eficiencia de ese modo de operación. Cuando la mayor parte de los datos se han transferido de esta manera, la replicación cambia a la replicación sincrónica en previsión de la finalización del paso de migración del servidor. El paso final de migración del servidor desencadena un conmutador simultáneo al sistema de almacenamiento en el nuevo centro de datos. De esta manera, cuando el servidor virtual comienza a ejecutarse en el nuevo centro de datos, los requisitos de almacenamiento se pueden cumplir localmente.3. Escenarios de migración de WAN En esta sección, ilustramos cómo nuestro enfoque cooperativo y consciente de contexto puede combinar los bloques de construcción técnicos descritos en la sección anterior para realizar la migración del servidor en vivo en una red de área amplia. Demostramos cómo la coordinación de las tecnologías de virtualización y migración del servidor, el subsistema de replicación de almacenamiento y la red pueden lograr la migración en vivo de todo el centro de datos en la WAN. Utilizamos diferentes escenarios para demostrar nuestro enfoque. En la Sección 3.1 describimos cómo nuestro enfoque se puede utilizar para lograr la migración segura en vivo de un centro de datos cuando se manejan los eventos de mantenimiento planificados. En la Sección 3.2 mostramos el uso de la migración del servidor en vivo para mitigar los efectos de las interrupciones o fallas no planificadas.3.1 Cabras de mantenimiento tratamos con interrupciones de mantenimiento en dos partes. Primero, consideramos el caso en el que el servicio no tiene requisitos de almacenamiento (o muy limitados). Este podría, por ejemplo, ser el caso con un elemento de red, como una puerta de enlace de voz-ip (VoIP). En segundo lugar, tratamos con el caso más general donde el servicio también requiere la migración del almacenamiento de datos al nuevo centro de datos. Sin exigir que se migren el almacenamiento: sin el almacenamiento, los componentes principales que necesitamos para coordinar son la migración del servidor y la movilidad de la red. La Figura 1 muestra el entorno donde la aplicación que se ejecuta en un servidor virtual vs debe moverse de un servidor físico en el centro de datos a a un servidor físico en el centro de datos B. Antes del evento de mantenimiento, el Sistema de Gestión de Migración de Coordinación (MMS) indicaría tanto al sistema de gestión del servidor como a la red de que una migración es inminente. El sistema de administración del servidor iniciaría la migración del servidor virtual desde el servidor físico A (¢ ¤ £ ¦ ¥) al servidor físico B (¢ ¤ £ ¦§). Después de una transferencia de estado a granel inicial como preparación para la migración, el sistema de administración del servidor reflejará cualquier cambio de estado entre los dos servidores virtuales. Del mismo modo, para la parte de la red, basada en la señal recibida del MMS, el enrutador del proveedor del proveedor de servicios (¢ © ¨) iniciará una serie de pasos para prepararse para la migración. Específicamente, como se muestra en la Figura 1 (b), el sistema de migración hará que la red cree un túnel entre ¢ © ¨ y ¢ © ¨ que se utilizará posteriormente para transferir datos destinados a Centro de datos B. Cuando el MMS determina un punto conveniente para detener el VS, se envía otra señal tanto al sistema de administración del servidor como a la red. Para el sistema de administración del servidor, esta señal indicará la migración final del VS desde el centro de datos A al centro de datos B, es decir, después de esto, el VS se activa en el centro de datos B. Para la red, esta segunda señal permite que la ruta de datos de la red se conmueva localmente a ¢ © ¨ © ¥ al centro de datos remoto. Específicamente, a partir de este momento, cualquier tráfico destinado a la dirección del servidor virtual que llega a ¢ © ¨ © ¥ se cambiará al túnel a ¢ © ¨ © § para la entrega al centro de datos B. Tenga en cuenta que en este punto, desde la perspectiva del servidor, la migración está completa ya que el VS ahora está activo en el centro de datos B. Sin embargo, el tráfico fluye subóptimamente primero a ¢ © ¨ © ¥ y luego a través del túnel a ¢ © ¨¤§. Para rectificar esta situación, está involucrado otro paso de redes. Específicamente, ¢ © ¨ © § comienza a anunciar una ruta más preferida para alcanzar VS, que la ruta que se anuncia actualmente por ¢ © ¨¤ ¥. De esta manera, como ingresar a la red (¢ © ¨¤ a ¢ © ¨¤ En la Figura 1) Reciba la ruta más preferida, el tráfico comenzará a fluir a ¢ © ¨ © § directamente y el túnel entre ¢ ©¨ © ¥ y ¢ © ¨ © § se puede derribar, lo que conduce al estado final que se muestra en la Figura 1 (c). Requerir migración de almacenamiento: cuando el almacenamiento también debe replicarse, es fundamental que logremos el equilibrio correcto entre el rendimiento (impacto en la aplicación) y el punto de recuperación o la pérdida de datos cuando el cambio se produce al centro de datos remoto. Para lograr esto, permitimos que el almacenamiento se replique de manera asincrónica, antes de cualquier inicio del evento de mantenimiento o, suponiendo que la cantidad de datos a transferir es relativamente pequeña, se puede iniciar una replicación asincrónica en anticipación de una migración que se espera quesuceder en breve. La replicación asincrónica durante esta fase inicial permite que la aplicación no vea un impacto en el rendimiento. Sin embargo, cuando el evento de mantenimiento es inminente, el MMS indicaría al sistema de replicación para cambiar de replicación asincrónica a replicación sincrónica para garantizar que no haya pérdida de datos durante la migración. Cuando los datos se replican sincrónicamente, habrá un impacto de rendimiento en la aplicación.264 Figura 1: Migración del servidor en vivo a través de una WAN Esto requiere que mantengamos la exposición al tiempo que replicamos de forma sincrónica al mínimo. Cuando el MMS señala al sistema de almacenamiento el requisito de cambiar a la replicación sincrónica, el sistema de almacenamiento completa todas las operaciones asíncronas pendientes y luego procede a realizar todas las escrituras posteriores replicándolo sincrónicamente al centro de datos remoto. Por lo tanto, entre la migración del servidor y la replicación sincrónica, tanto el estado de la aplicación como todas las operaciones de almacenamiento se reflejan en los dos entornos en los dos centros de datos. Cuando se copian todas las operaciones de escritura pendientes, como en el caso anterior, confiamos en la aplicación y se le indica que la red cambie el tráfico al centro de datos remoto. A partir de este momento, las operaciones de almacenamiento y migración del servidor se completan y se activan en el centro de datos B. Como se indicó anteriormente, el estado de la red aún debe actualizarse para garantizar un flujo de datos óptimo directamente al centro de datos B. Tenga en cuenta que si bien hemos descrito que el proceso de migración del servidor en vivo que involucra al proveedor de servicios para la parte de redes, es posible que un proveedor de centros de datos realice un conjunto similar de funciones sin involucrar al proveedor de servicios. Específicamente, al crear un túnel entre los enrutadores del borde del cliente (CE) en el centro de datos y realizar la conmutación local en el CE apropiado, en lugar de en el PE, el proveedor del centro de datos puede realizar la misma funcionalidad.3.2 Cottaciones no planificadas Proponemos usar también una migración cooperativa consciente del contexto para tratar con interrupciones de centros de datos no planificadas. Hay múltiples consideraciones que se destinan a administrar las operaciones del centro de datos para planificar y superar las fallas a través de la migración. Algunos de estos son: (1) cantidad de sobrecarga en funcionamiento normal para superar las fallas anticipadas;(2) cantidad de pérdida de datos asequible (objetivo de punto de recuperación - RPO);(3) cantidad de estado que debe migrarse;y (4) tiempo disponible desde la falla anticipada hasta el evento. En el extremo, uno podría incurrir en la sobrecarga de reflejar completamente la aplicación en el sitio remoto. Esto tiene la consecuencia de un procesamiento incurrente y sobrecarga de la red en funcionamiento normal, así como impactar el rendimiento de la aplicación (latencia y rendimiento) en todo momento. El otro extremo es solo garantizar la recuperación de datos e iniciar una nueva copia de la aplicación en el sitio remoto después de una interrupción. En este caso, se pierden el estado de memoria de aplicación, como las sesiones en curso, pero los datos almacenados en el disco se replican y están disponibles en un estado consistente. Ni este Estado en espera ni el enfoque de espera en frío descrito son deseables debido a la sobrecarga o la pérdida del estado de memoria de aplicación. Un enfoque intermedio es recuperar el control y el estado esencial de la aplicación, además de los datos almacenados en el disco, para minimizar aún más las interrupciones a los usuarios. Es posible un espectro de enfoques. En un servidor VoIP, por ejemplo, la información basada en la sesión se puede reflejar sin reflejar los datos que fluyen a través de cada sesión. En términos más generales, esto apunta a la necesidad de verificar algún estado de aplicación además de reflejar datos en el disco. El estado de la aplicación de la aplicación de control implica almacenar el estado de aplicación, ya sea periódicamente o de manera consciente de la aplicación como lo hacen las bases de datos y luego copiarlo en el sitio remoto. Por supuesto, esto tiene la consecuencia de que la aplicación se puede reiniciar de forma remota solo en el límite del punto de control. Del mismo modo, para el almacenamiento, uno puede usar una replicación asincrónica con una instantánea periódica que garantiza que todas las escrituras estén actualizadas en el sitio remoto en el momento del punto de control. Algunas pérdidas de datos pueden ocurrir en una falla catastrófica inesperada, pero el punto de recuperación puede ser bastante pequeño, dependiendo de la frecuencia de la aplicación de la aplicación y el estado de almacenamiento. La coordinación entre 265 el punto de control del estado de aplicación y la instantánea de almacenamiento es clave para la migración exitosa al tiempo que cumple con los RPO deseados. El punto de control incremental de la aplicación y el almacenamiento es clave para la eficiencia, y vemos técnicas existentes para lograr esto [4, 3, 11]. Por ejemplo, en lugar de la reflejo de la aplicación completa, una réplica virtualizada se puede mantener como un cálido inactivo en espera o hibernando que el estado que permite un interruptor rápido al estado de control previamente de control. Para hacer que el conmutador sin costura, además de replicar datos y estado de recuperación, se necesita soporte de red. Específicamente, al detectar la falta de disponibilidad del sitio primario, el sitio secundario se activa, y el mismo mecanismo descrito en la Sección 3.1 se utiliza para cambiar el tráfico para llegar al sitio secundario a través del túnel preestablecido. Tenga en cuenta que, por simplicidad de exposición, suponemos aquí que el PE que realiza el interruptor local no se ve afectado por la falla. Sin embargo, el enfoque se puede extender fácilmente para utilizar un cambio en un enrutador más profundo en la red. La cantidad de estado y almacenamiento que debe migrarse puede variar ampliamente de la aplicación a la aplicación. Puede haber muchas situaciones en las que, en principio, el servidor puede ser apátrate. Por ejemplo, un servidor proxy SIP puede no tener ningún estado persistente y la comunicación entre los clientes y el servidor proxy puede estar utilizando UDP. En tal caso, la actividad principal que se realizará está en la red para trasladar la comunicación al nuevo sitio del centro de datos. Se incurre poco o no sobre la sobrecarga en el funcionamiento normal para permitir la migración a un nuevo centro de datos. La recuperación de fallas no implica pérdida de datos y podemos lidiar con fallas casi instantáneas y catastróficas. A medida que se involucra más y más estado con el servidor, se incurre en más gastos generales en el estado de la aplicación del punto de control y potencialmente para tomar instantáneas de almacenamiento, ya sea periódicamente o a la solicitud de la aplicación. También significa que el RPO es una función del intervalo entre los puntos de control, cuando tenemos que lidiar con fallas instantáneas. Cuanta información más avanzada tengamos de una falla inminente, más efectivos podemos ser para que el estado migre al nuevo centro de datos, para que aún podamos tener un RPO más estricto cuando las operaciones se reanudan en el nuevo sitio.4. Trabajo relacionado El trabajo previo sobre este tema se divide en varias categorías: migración de máquinas virtuales, replicación de almacenamiento y soporte de red. En el núcleo de nuestra técnica está la capacidad de las aplicaciones encapsuladas dentro de las máquinas virtuales que se pueden migrar sin los tiempos de inactividad de la aplicación [15]. La mayoría del software de máquinas virtuales, como Xen [8] y VMware [14] admite la migración en vivo de máquinas virtuales que implican tiempos de inactividad extremadamente cortos que van desde decenas de milisegundos hasta un segundo;Los detalles de las técnicas de migración en vivo de XENS se discuten en [8]. Como se indicó anteriormente, estas técnicas suponen que la migración se está realizando en una LAN. La migración de VM también se ha estudiado en el sistema Shirako [10] y para entornos de cuadrícula [17, 19]. El software de máquina virtual actual admite una función de suspensión y currículum que se puede utilizar para admitir la migración de WAN, pero con tiempos de inactividad [18, 12]. Recientemente, la migración de WAN en vivo utilizando túneles IP se demostró en [21], donde se configura un túnel IP desde el servidor de origen a Destination para reenviar transparentemente los paquetes hacia y desde la aplicación;Abogamos por un enfoque alternativo que asume el soporte del enrutador de borde. En el contexto del almacenamiento, existen numerosos productos comerciales que realizan replicación, como la copia remota extendida de IBM, HP Continuous Access XP y el replista de EMC. En [11] se puede encontrar una excelente descripción de estos y otros, así como una taxonomía detallada de los diferentes enfoques para la replicación. El Sistema Menor URSA argumenta que ningún modelo de falla único es óptimo para todas las aplicaciones y propuesta de compra de selecciones específicas de datos de modelos de fallas y esquemas de codificación para la replicación [1]. Recientemente, propusimos la noción de replicación semántica [13] donde el sistema admite la replicación sincrónica y asincrónica simultáneamente y usa señales del sistema de archivos para determinar si replicar una escritura particular sincrónicamente y asincrónicamente. En el contexto del soporte de la red, nuestro trabajo está relacionado con el enfoque RouterFarm [2], que utiliza cambios de red orquestados para realizar un mantenimiento casi sin éxito en los enrutadores de borde del proveedor. Además de estar en un área de aplicación diferente, nuestro enfoque difiere del trabajo de RouterFarm en dos aspectos. Primero, proponemos que los cambios de red requeridos se activen por la funcionalidad fuera de la red (a diferencia de las funciones de gestión de la red dentro de la red). En segundo lugar, debido a los estrictos requisitos de tiempo de la migración en vivo, esperamos que nuestro enfoque requiera una nueva funcionalidad del enrutador (en lugar de ser realizable a través de las interfaces de configuración existentes). Finalmente, el trabajo informático orientado a la recuperación (ROC) enfatiza la recuperación de fallas en lugar de evitar fallas [6]. En un espíritu similar a ROC, abogamos por el uso de mecanismos desde la migración de VM en vivo hasta la replicación de almacenamiento para admitir interrupciones planificadas y no planificadas en los centros de datos (en lugar de una replicación completa para enmascarar tales fallas).5. Conclusión Una preocupación significativa para los proveedores de servicios basados en Internet es la operación continua y la disponibilidad de servicios frente a las interrupciones, ya sea planificada o no planificada. En este documento abogamos por un enfoque cooperativo y consciente de contexto para la migración del centro de datos a través de WAN para lidiar con interrupciones de manera no disruptiva. Intentamos lograr una alta disponibilidad de servicios de centros de datos frente a interrupciones planificadas e incidentales de las instalaciones de centros de datos. Abogamos a usar tecnologías de virtualización del servidor para habilitar la replicación y la migración de las funciones del servidor. Propusimos nuevas funciones de red para habilitar la migración y replicación del servidor en redes de área amplia (como Internet o una red privada virtual distribuida geográficamente), y finalmente mostró la utilidad de la tecnología de replicación de almacenamiento inteligente y dinámica para garantizar que las aplicaciones tengan acceso a datos en elcara de interrupciones con objetivos de punto de recuperación muy estrictos.6. Referencias [1] M. Abd-El-Malek, W. V. Courtright II, C. Cranor, G. R. Ganger, J. Hendricks, A. J. Klosterman, M. Mesnier, M. Prasad, B. Salmon, R. R. Sambasivan, S. Sinamohideen, J. D. D.Strunk, E. Thereska, M. Wachs y J. J. Wylie. URSA Minor: almacenamiento versátil basado en clúster. Conferencia Usenix sobre File and Storage Technologies, diciembre de 2005. [2] Mukesh Agrawal, Susan Bailey, Albert Greenberg, Jorge Pastor, Panagiotis Sebos, Srinivasan Seshan, Kobus van der Merwe y Jennifer Yates. RouterFarm: hacia una ventaja de red dinámica y manejable. Taller SigComm en Internet Network Management (INM), septiembre de 2006. [3] L. Alvisi. Comprender el paradigma de registro de mensajes para los bloqueos del proceso de enmascaramiento. Tesis doctoral, Cornell, enero de 1996. [4] L. Alvisi y K. Marzullo. Registro de mensajes: pesimista, optimista y causal. En Actas de la 15ª Conferencia Internacional sobre Sistemas de Computación distribuida, páginas 229-236. IEEE Computer Society, junio de 1995. 266 [5] Paul Barham, Boris Dragovic, Keir Fraser, Steven Hand, Tim Harris, Alex Ho, Rolf Neugebar, Ian Pratt y Andrew Warfield. Xen y el arte de la virtualización. En las Actas del Simposio ACM sobre Principios de sistemas operativos (SOSP), octubre de 2003. [6] A. Brown y D. A. Patterson. Falla de abarca: un caso para la computación orientada a la recuperación (ROC).Simposio de procesamiento de transacciones de alto rendimiento 2001, octubre de 2001. [7] K. Brown, J. Katcher, R. Walters y A. Watson. Snapmirror y Snaprestore: avances en la tecnología de instantáneas. Informe técnico del dispositivo de red TR3043.www.NE T APP.c om/t e c h_ l i br ar y/3043.ht ml.[8] C. Clark, K. Fraser, S. Hand, J. Hanse, E. Jul, C. Limpach, I. Pratt y A. Warfiel. Migración en vivo de máquinas virtuales. En Actas de NSDI, mayo de 2005. [9] Journal de recuperación de desastres. Glosario de continuidad del negocio.ht t p: // www.Dr. J.C OM/GL OS S AR Y/DR J GL OS S AR Y.ht ml.[10] Laura Grit, David Irwin, Aydan Yumerefendi y Jeff Chase. Alojamiento de máquinas virtuales para grupos en red: construcción de los cimientos para la orquestación autónoma. En el primer taller internacional sobre tecnología de virtualización en computación distribuida (VTDC), noviembre de 2006. [11] M. Ji, A. Veitch y J. Wilkes. Seneca: Mirroración remota realizada. Conferencia técnica anual de USENIX 2003, junio de 2003. [12] M. Kozuch y M. Satyanarayanan. Suspender y reanudar internet. En Actas del Cuarto Taller IEEE sobre sistemas y aplicaciones informáticas móviles, Calicón, NY, junio de 2002. [13] Xiaotao Liu, Gal Niv, K. K. Ramakrishnan, Prashant Shenoy y Jacobus van der Merwe. El caso de la replicación remota consciente semántica. En Proc.2º Taller Internacional sobre Seguridad de Almacenamiento y Supervivencia (Storagess 2006), Alexandria, VA, octubre de 2006. [14] Michael Nelson, Beng-Hong Lim y Greg Hutchins. Migración transparente rápida para máquinas virtuales. En la Conferencia Técnica Anual de Usenix, 2005. [15] Mendel Rosenblum y Tal Garfinkel. Monitores de máquina virtual: tecnología actual y tendencias futuras. Computer, 38 (5): 39-47, 2005. [16] C. Ruemmler y J. Wilkes. Patrones de acceso a disco Unix. Actas del invierno de 1993 Usenix, enero de 1993. [17] Paul Ruth, Junghwan Rhee, Dongyan Xu, Rick Kennell y Sebastien Goasguen. Adaptación en vivo autónoma de entornos computacionales virtuales en una infraestructura de dominios múltiples. En IEEE International Conference on Autonomic Computing (ICAC), junio de 2006. [18] Constantine P. Sapuntzakis, Ramesh Chandra, Ben Pfaff, Jim Chow, Monica S. Lam y Mendel Rosenblum. Optimización de la migración de computadoras virtuales. En Actas del 5º Simposio sobre el diseño e implementación de sistemas operativos, diciembre de 2002. [19] A. Sundararaj, A. Gupta y P. Dinda. Aumento del rendimiento de la aplicación en entornos virtuales a través de la inferencia y adaptación en el tiempo de ejecución. En el Decimotercer Simposio Internacional sobre Computación distribuida de alto rendimiento (HPDC), julio de 2005. [20] Symantec Corporation. Guía de administradores de replicadores de volumen de Veritas.ht t p: // f t p.apoyo .Ve r i t como.C OM /PUB /S UPPOR T /PRO ODUC T S /VOL UME _ RE PL I C A TA /2%83842.PDF, 5.0 Edición, 2006. [21] F. Travostino, P. Daspit, L. Gommans, C. Jog, C. de Laat, J. Mambretti, I. Monga, B. Van Oudenade, S. Raghunath y P. Wang. Migración en vivo sin interrupciones de máquinas virtuales sobre el hombre/WAN. Elsevier Future Generations Computer Systems, 2006. [22] T. Wood, P. Shenoy, A. Venkataramani y M. Yosif. Estrategias de cajas negras y de cajas grises para la migración de máquinas virtuales. En Actas del Simposio de Usenix sobre el diseño e implementación del sistema en red (NSDI), Cambridge, MA, abril de 2007. [23] ¿Un camino Xen a la virtualización de ISCSI?http://www.internetnews.com/dev-news/article.php/3669246, abril de 2007. 267