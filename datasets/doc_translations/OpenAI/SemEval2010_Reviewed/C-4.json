{
    "id": "C-4",
    "original_text": "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr. FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice. Thus, the loss of packets impairs the application-level utility. For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted. On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets. We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow. These packet-level metrics are then linked to user-level objective speech quality metrics. Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact. For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state. Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however. We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss. We designate these methods as intra-flow loss recovery and control. At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place. Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance. As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable. We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term. Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1. INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow. In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service. Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded). For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video. It translates basically to isolated packet losses versus losses that occur in bursts. Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow. Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames). Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received. Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user. On the other hand, within a lossy service, the above sensitivity constraints must be taken into account. It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application. Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints. Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost. For real-time multimedia traffic, such utility should correspond to perceived video/voice quality. If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal. Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate. Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&. The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area. This results in a graceful degradation of the applications utility. Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled. Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*. To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS. Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement. As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification. The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice. Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow). To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions. The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality. Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate. While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality). So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality. For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]). While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks. The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows. This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181). If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply. Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver. Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms. End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them. Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen. Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place. Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance. We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement. The paper is structured as follows: Section 2 introduces packet- and user-level metrics. We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3. Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control. In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level. Section 6 concludes the paper. 2. METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space. As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost. The number of states of the model is 2. Two state transitions can take place from any of the states. Thus, the number of parameters which have to be computed is 2m+1. Even for relatively small m this amount of parameters is difficult to be evaluated and compared. Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]). It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61. That means that past no loss events do not affect the loss process as much as past loss events. Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief. Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths. They came to the result that such correlation is very weak. This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability). Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability. The number of states of the model can be reduced from 2m to m + 1. This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter. We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event. Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost. With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length. In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place. If a packet is successfully received, the state returns to X = 0. Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc). Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability. Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc. An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate. We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m). The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X). We have the burst loss length rate ga = * as an estimate for P(Y = k). Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]). The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models). For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost). Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,). Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp. For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation). As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system. In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]). These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211). Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values). For all simulations in this paper we employed both schemes. As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3. VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control. The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located. Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure. While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample). This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment). By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition. We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals). Results are shown for the AP/C concealment algorithm ([ll]). Similar results were obtained with other concealment algorithms. Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied. The resulting speech quality is insensitive to the loss distribution parameter (elp). The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits. In Figure 6 the results with loss concealment are depicted. When the loss correlation (dp) is low, loss concealment provides a significant performance improvement. The relative improvement increases with increasing loss (pulp). For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3. Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp). Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3). As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values. Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition. It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp). On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss). On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s. In G.729. a speech fmme is 10 ms in d&ion. For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors. When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame. The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact. When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state. Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones. In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries. Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss. Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment. Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however. This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients. Two G.729 frames are contained in a packet. Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding. Therefore the ADU content is only weakly heterogeneous (Figure 7). Thus, in this section we concentrate on the G.729 coda. The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost. The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB). The error signal energy (and thus the SNR) is computed on a per-frame basis. Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame. We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter. The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender. However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal. We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames. However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them. The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound. Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4. QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss. We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT). Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow. As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels. One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]). With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets. Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets. RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows. In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT). This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense). Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT). The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic). Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED). Figure 10 shows the corresponding drop probability curves. Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes. If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users. The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added. In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient. This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low. As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants. Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5. INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery. The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable. In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.) Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6. We can observe that DiffRED shapes the burst probability curve in the desired way. Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters). With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though. Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10). We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2). This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2. Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation. This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance. Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern. Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data. Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4). We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK). The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames. Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal. The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1). As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately. State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent. Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5). N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected. Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition). In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet). A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model. Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets. Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively. This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses. Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations. This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources. Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms. For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14). We furthermore include related inter-flow loss protection schemes. The first scheme uses full protection (FULL MARK, all packets are marked as +l). The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0). For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK). Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14). For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used. We obtained similar marking percentages for other speech samples. The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc. The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*. The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term. Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2). SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe. These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality. The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates. However, it should be noted that the amount of data sent over the network is increased by 40.4%. Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion. This assumption is only valid if a small fraction of trafhc is voice ([S]). The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses. The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22. The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality. However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK). This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained. The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6. CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss. We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality. While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction. For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity. With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity. Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state. Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity. We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity. Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs. The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames. We have also evaluated the mapping of an end-to-end algorithm to interflow protection. We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets. Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic. This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss. Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator. Also, it is useful for adaptive codecs running at the lowest possible bitrate. Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different. Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics. An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7. ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements. Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8. ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch. Understanding end-to-end internet traffic dynamics. In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998. J.-C. Bolot, S. Fosse-Parisis, and D. Towsley. Adaptive FEC-based error control for interactive audio in the Internet. In Proceedings IEEE INFOCOM, New York, NY, March 1999. D. Clark and W. Fang. Explicit allocation of best effort packet delivery service. Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox and P. Kroon. Low bit-rate speech coders for multimedia communication. IEEE Communications Magazine, pages 34-41, December 1996. J. Ferrandiz and A. Lazar. Consecutive packet loss in real-time packet traffic. In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990. W. Jiang and H. Schulzrinne. QoS measurement of Internet real-time multimedia services. In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley, and J. Bolot. RTP payload for redundant audio data. RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, and S. McCanne. Simulation of FEC-based error control for packet audio on the Internet. In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998. J. Rosenberg. G. 729 error recovery for Internet Telephony. Project report, Columbia University, 1997. J. Rosenberg, L. Qiu, and H. Schulzrinne. Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet. In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000. H. Sanneck. Concealment of lost speech packets using adaptive packetization. In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Packet Loss Recovery and Control for Voice tinsmission over the Internet. PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. H. Sanneck and G. Carle. A queue management algorithm for intracflow service differentiation in the best effort Internet. In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le, and A. Wolisz. Efficient QoS support for Voice-over-IP applications using selective packet marking. In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose, and D. Towsley. Loss correlation for queues with bursty input streams. In Proceedings ICC, pages 219-224, Chicago, IL, 1992. D. Sisalem and A. Wolisz. LDAf TCP-friendly adaptation: A measurement and comparison study. In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union. Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP). Recommendation G.729, ITU-T, March 1996. International Telecommunication Union. Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs. Recommendation P.861, ITU-T, February 1998. M. Yajnik, J. Kurose, and D. Towsley. Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models. Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose, and D. Towsley. Measurement and modelling of the temporal dependence in packet loss. Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998. W. Yang and R. Yantorno. Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS. In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451",
    "original_translation": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451",
    "original_sentences": [
        "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
        "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
        "Thus, the loss of packets impairs the application-level utility.",
        "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
        "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
        "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
        "These packet-level metrics are then linked to user-level objective speech quality metrics.",
        "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
        "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
        "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
        "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
        "We designate these methods as intra-flow loss recovery and control.",
        "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
        "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
        "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
        "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
        "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
        "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
        "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
        "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
        "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
        "It translates basically to isolated packet losses versus losses that occur in bursts.",
        "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
        "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
        "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
        "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
        "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
        "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
        "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
        "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
        "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
        "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
        "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
        "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
        "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
        "This results in a graceful degradation of the applications utility.",
        "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
        "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
        "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
        "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
        "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
        "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
        "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
        "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
        "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
        "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
        "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
        "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
        "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
        "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
        "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
        "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
        "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
        "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
        "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
        "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
        "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
        "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
        "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
        "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
        "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
        "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
        "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
        "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
        "Section 6 concludes the paper. 2.",
        "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
        "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
        "The number of states of the model is 2.",
        "Two state transitions can take place from any of the states.",
        "Thus, the number of parameters which have to be computed is 2m+1.",
        "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
        "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
        "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
        "That means that past no loss events do not affect the loss process as much as past loss events.",
        "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
        "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
        "They came to the result that such correlation is very weak.",
        "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
        "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
        "The number of states of the model can be reduced from 2m to m + 1.",
        "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
        "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
        "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
        "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
        "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
        "If a packet is successfully received, the state returns to X = 0.",
        "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
        "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
        "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
        "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
        "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
        "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
        "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
        "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
        "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
        "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
        "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
        "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
        "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
        "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
        "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
        "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
        "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
        "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
        "For all simulations in this paper we employed both schemes.",
        "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
        "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
        "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
        "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
        "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
        "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
        "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
        "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
        "Results are shown for the AP/C concealment algorithm ([ll]).",
        "Similar results were obtained with other concealment algorithms.",
        "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
        "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
        "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
        "In Figure 6 the results with loss concealment are depicted.",
        "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
        "The relative improvement increases with increasing loss (pulp).",
        "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
        "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
        "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
        "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
        "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
        "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
        "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
        "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
        "In G.729. a speech fmme is 10 ms in d&ion.",
        "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
        "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
        "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
        "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
        "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
        "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
        "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
        "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
        "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
        "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
        "Two G.729 frames are contained in a packet.",
        "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
        "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
        "Thus, in this section we concentrate on the G.729 coda.",
        "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
        "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
        "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
        "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
        "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
        "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
        "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
        "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
        "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
        "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
        "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
        "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
        "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
        "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
        "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
        "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
        "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
        "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
        "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
        "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
        "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
        "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
        "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
        "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
        "Figure 10 shows the corresponding drop probability curves.",
        "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
        "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
        "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
        "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
        "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
        "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
        "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
        "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
        "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
        "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
        "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
        "We can observe that DiffRED shapes the burst probability curve in the desired way.",
        "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
        "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
        "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
        "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
        "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
        "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
        "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
        "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
        "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
        "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
        "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
        "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
        "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
        "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
        "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
        "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
        "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
        "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
        "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
        "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
        "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
        "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
        "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
        "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
        "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
        "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
        "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
        "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
        "We furthermore include related inter-flow loss protection schemes.",
        "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
        "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
        "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
        "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
        "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
        "We obtained similar marking percentages for other speech samples.",
        "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
        "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
        "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
        "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
        "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
        "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
        "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
        "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
        "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
        "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
        "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
        "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
        "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
        "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
        "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
        "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
        "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
        "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
        "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
        "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
        "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
        "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
        "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
        "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
        "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
        "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
        "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
        "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
        "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
        "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
        "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
        "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
        "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
        "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
        "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
        "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
        "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
        "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
        "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
        "Understanding end-to-end internet traffic dynamics.",
        "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
        "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
        "Adaptive FEC-based error control for interactive audio in the Internet.",
        "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
        "D. Clark and W. Fang.",
        "Explicit allocation of best effort packet delivery service.",
        "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
        "R. Cox and P. Kroon.",
        "Low bit-rate speech coders for multimedia communication.",
        "IEEE Communications Magazine, pages 34-41, December 1996.",
        "J. Ferrandiz and A. Lazar.",
        "Consecutive packet loss in real-time packet traffic.",
        "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
        "W. Jiang and H. Schulzrinne.",
        "QoS measurement of Internet real-time multimedia services.",
        "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
        "C. Perkins, I. Kouvelas, 0.",
        "Hodson, M. Handley, and J. Bolot.",
        "RTP payload for redundant audio data.",
        "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
        "M. Podolsky, C. Romer, and S. McCanne.",
        "Simulation of FEC-based error control for packet audio on the Internet.",
        "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
        "J. Rosenberg.",
        "G. 729 error recovery for Internet Telephony.",
        "Project report, Columbia University, 1997.",
        "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
        "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
        "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
        "H. Sanneck.",
        "Concealment of lost speech packets using adaptive packetization.",
        "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
        "H. Sanneck.",
        "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
        "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
        "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
        "H. Sanneck and G. Carle.",
        "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
        "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
        "H. Sanneck, N. Le, and A. Wolisz.",
        "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
        "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
        "H. Schulzrinne, J. Kurose, and D. Towsley.",
        "Loss correlation for queues with bursty input streams.",
        "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
        "D. Sisalem and A. Wolisz.",
        "LDAf TCP-friendly adaptation: A measurement and comparison study.",
        "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
        "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
        "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
        "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
        "Recommendation P.861, ITU-T, February 1998.",
        "M. Yajnik, J. Kurose, and D. Towsley.",
        "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
        "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
        "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
        "Measurement and modelling of the temporal dependence in packet loss.",
        "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
        "W. Yang and R. Yantorno.",
        "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
        "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
    ],
    "translated_text_sentences": [
        "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr.",
        "Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz.",
        "Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin.",
        "Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe.",
        "Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes.",
        "Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo.",
        "Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario.",
        "Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual.",
        "Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador.",
        "A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz.",
        "Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes.",
        "Designamos estos mtodos como recuperacin y control de prdidas intraflujo.",
        "A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor).",
        "Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia.",
        "Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario.",
        "Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo.",
        "Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1.",
        "CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo.",
        "En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio.",
        "Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito).",
        "Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video.",
        "Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas.",
        "Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia.",
        "Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros).",
        "Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes.",
        "El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario.",
        "Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente.",
        "Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin.",
        "Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente.",
        "La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos.",
        "Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz.",
        "Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales.",
        "Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente.",
        "La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&.",
        "La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada.",
        "Esto resulta en una degradacin elegante de la utilidad de las aplicaciones.",
        "Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l.",
        "Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal.",
        "Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos).",
        "Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo.",
        "Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin.",
        "La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz.",
        "Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video).",
        "Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas.",
        "La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente.",
        "Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor.",
        "Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad).",
        "Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual.",
        "Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]).",
        "Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas.",
        "La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos.",
        "Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181).",
        "Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables.",
        "El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor.",
        "Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo.",
        "Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo.",
        "Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada.",
        "Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor).",
        "Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia.",
        "Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz.",
        "El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario.",
        "Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3.",
        "La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo.",
        "En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto.",
        "La seccin 6 concluye el artculo.",
        "MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados.",
        "Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido.",
        "El nmero de estados del modelo es 2.",
        "Dos transiciones de estado pueden tener lugar desde cualquiera de los estados.",
        "Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1.",
        "Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar.",
        "La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]).",
        "Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61.",
        "Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida.",
        "Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin.",
        "Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida.",
        "Llegaron a la conclusin de que dicha correlacin es muy dbil.",
        "Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja).",
        "Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado.",
        "El nmero de estados del modelo se puede reducir de 2m a m + 1.",
        "Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable.",
        "Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga.",
        "Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos.",
        "Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga.",
        "En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado.",
        "Si un paquete es recibido exitosamente, el estado vuelve a X = 0.",
        "Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc).",
        "Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado.",
        "Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc.",
        "Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida.",
        "Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m).",
        "Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
        "Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X).",
        "Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k).",
        "Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]).",
        "El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior).",
        "Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido).",
        "Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,).",
        "Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp.",
        "Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida).",
        "Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano.",
        "En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]).",
        "Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211).",
        "Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes).",
        "Para todas las simulaciones en este artculo utilizamos ambos esquemas.",
        "Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3.",
        "La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto.",
        "Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas.",
        "Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz.",
        "Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz).",
        "Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento).",
        "Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red.",
        "Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos).",
        "Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]).",
        "Se obtuvieron resultados similares con otros algoritmos de ocultacin.",
        "La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert.",
        "La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp).",
        "Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados.",
        "En la Figura 6 se representan los resultados con ocultamiento de prdidas.",
        "Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento.",
        "La mejora relativa aumenta con la prdida (pulpa) creciente.",
        "Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3.",
        "Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp).",
        "Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3).",
        "Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos.",
        "La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva.",
        "Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp).",
        "Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin).",
        "Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s.",
        "En G.729, un tramo de voz es de 10 ms de duracin.",
        "Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin.",
        "Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido.",
        "Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto.",
        "Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador.",
        "Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes.",
        "Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal.",
        "La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes.",
        "Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas.",
        "Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo.",
        "Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal.",
        "Dos tramas G.729 estn contenidas en un paquete.",
        "Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria.",
        "Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7).",
        "Por lo tanto, en esta seccin nos concentramos en el cdice G.729.",
        "El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos.",
        "Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB).",
        "La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro.",
        "La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro.",
        "Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus.",
        "La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor.",
        "Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal.",
        "Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos.",
        "Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas.",
        "El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro.",
        "Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4.",
        "GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas.",
        "Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT).",
        "El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja.",
        "Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad.",
        "Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]).",
        "Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad).",
        "Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN.",
        "RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos.",
        "En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT).",
        "Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico).",
        "La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT).",
        "La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)).",
        "Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED).",
        "La Figura 10 muestra las curvas de probabilidad de cada correspondientes.",
        "Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1.",
        "Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios.",
        "Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin.",
        "En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente.",
        "Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja.",
        "Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT.",
        "Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5.",
        "RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo.",
        "El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable.",
        "En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert).",
        "Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente.",
        "Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada.",
        "La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert).",
        "Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande.",
        "Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10).",
        "Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2).",
        "Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2.",
        "Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin.",
        "Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento.",
        "Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico.",
        "Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz.",
        "Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4).",
        "Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK).",
        "El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas.",
        "La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora.",
        "El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1).",
        "Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1.",
        "Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin.",
        "Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5).",
        "N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos.",
        "Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red).",
        "En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete).",
        "Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo.",
        "Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes.",
        "Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente.",
        "Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1.",
        "Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores.",
        "La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo.",
        "El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB.",
        "Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14).",
        "Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas.",
        "El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l).",
        "El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0).",
        "Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK).",
        "Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14).",
        "Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado.",
        "Obtuvimos porcentajes de marcado similares para otras muestras de habla.",
        "Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc.",
        "El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*.",
        "El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo.",
        "Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2).",
        "SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe.",
        "Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla.",
        "El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas.",
        "Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%.",
        "Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin.",
        "Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]).",
        "La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables.",
        "La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22.",
        "El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual.",
        "Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK).",
        "Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual.",
        "Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6.",
        "CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes.",
        "Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual.",
        "Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante.",
        "Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til.",
        "Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal.",
        "Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador.",
        "A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til.",
        "Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal.",
        "Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas.",
        "El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas.",
        "Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo.",
        "Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios.",
        "Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz.",
        "Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin.",
        "Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia.",
        "Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible.",
        "Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes.",
        "Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario.",
        "Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7.",
        "AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla.",
        "Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8.",
        "AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9.",
        "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch.",
        "Comprendiendo la dinmica del trfico de internet de extremo a extremo.",
        "En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998.",
        "J.-C. Bolot, S. Fosse-Parisis y D. Towsley.",
        "Control de errores basado en FEC adaptativo para audio interactivo en Internet.",
        "En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999.",
        "D. Clark y W. Fang.",
        "Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo.",
        "Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
        "R. Cox y P. Kroon.",
        "Codificadores de voz de baja tasa de bits para comunicacin multimedia.",
        "Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996.",
        "J. Ferrandiz y A. Lazar.",
        "Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real.",
        "En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990.",
        "W. Jiang y H. Schulzrinne.",
        "Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet.",
        "En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000.",
        "C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0.",
        "Hodson, M. Handley y J. Bolot.",
        "Carga til RTP para datos de audio redundantes.",
        "RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
        "M. Podolsky, C. Romer y S. McCanne.",
        "Simulacin de control de errores basado en FEC para audio en paquetes en Internet.",
        "En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998.",
        "J. Rosenberg.",
        "Recuperacin de errores G.729 para la telefona por Internet.",
        "Informe del proyecto, Universidad de Columbia, 1997.",
        "J. Rosenberg, L. Qiu y H. Schulzrinne.",
        "Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet.",
        "En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000.",
        "H. Sanneck.",
        "Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin.",
        "En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
        "H. Sanneck.",
        "Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet.",
        "Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000.",
        "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf.",
        "H. Sanneck y G. Carle.",
        "Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo.",
        "En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
        "H. Sanneck, N. Le y A. Wolisz.",
        "Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes.",
        "En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
        "H. Schulzrinne, J. Kurose y D. Towsley.",
        "Correlacin de prdida para colas con flujos de entrada con rfagas.",
        "En Actas ICC, pginas 219-224, Chicago, IL, 1992.",
        "D. Sisalem y A. Wolisz.",
        "Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin.",
        "En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones.",
        "Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP).",
        "Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones.",
        "Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz).",
        "Recomendacin P.861, ITU-T, febrero de 1998.",
        "M. Yajnik, J. Kurose y D. Towsley.",
        "Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov.",
        "Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995.",
        "M. Yajnik, S. Moon, J. Kurose y D. Towsley.",
        "Medicin y modelado de la dependencia temporal en la prdida de paquetes.",
        "Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998.",
        "W. Yang y R. Yantorno.",
        "Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS.",
        "En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451"
    ],
    "error_count": 5,
    "keys": {
        "end-to-end model": {
            "translated_key": "modelo de extremo a extremo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an <br>end-to-end model</br> based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an <br>end-to-end model</br>.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "We first develop an <br>end-to-end model</br> based on loss runlengths with which we can describe the loss distribution within a flow.",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an <br>end-to-end model</br>."
            ],
            "translated_annotated_samples": [
                "Primero desarrollamos un <br>modelo de extremo a extremo</br> basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo.",
                "Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un <br>modelo de extremo a extremo</br>."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un <br>modelo de extremo a extremo</br> basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un <br>modelo de extremo a extremo</br>. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "sample-based codec": {
            "translated_key": "cdecs basados en muestras",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing <br>sample-based codec</br>s (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to <br>sample-based codec</br>s we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to <br>sample-based codec</br>s we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Using this framework, we find that for low-compressing <br>sample-based codec</br>s (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "Contrary to <br>sample-based codec</br>s we show that the concealment performance may break at transitions within the speech signal however.",
                "Contrary to <br>sample-based codec</br>s we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity."
            ],
            "translated_annotated_samples": [
                "Utilizando este marco de trabajo, encontramos que para los <br>cdecs de muestras</br> de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual.",
                "A diferencia de los <br>cdecs basados en muestras</br>, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz.",
                "A diferencia de los <br>cdecs basados en muestras</br>, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los <br>cdecs de muestras</br> de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los <br>cdecs basados en muestras</br>, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los <br>cdecs basados en muestras</br>, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    "cdecs de muestras",
                    "cdecs basados en muestras",
                    "cdecs basados en muestras"
                ]
            ]
        },
        "loss recovery and control": {
            "translated_key": "recuperacin y control de prdidas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow <br>loss recovery and control</br> for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow <br>loss recovery and control</br>.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop <br>loss recovery and control</br>.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW <br>loss recovery and control</br> 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow <br>loss recovery and control</br> mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet <br>loss recovery and control</br> for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Intra-flow <br>loss recovery and control</br> for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "We designate these methods as intra-flow <br>loss recovery and control</br>.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop <br>loss recovery and control</br>.",
                "INTRA-FLOW <br>loss recovery and control</br> 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "We have then developed intraflow <br>loss recovery and control</br> mechanisms to increase the perceptual quality."
            ],
            "translated_annotated_samples": [
                "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr.",
                "Designamos estos mtodos como <br>recuperacin y control de prdidas</br> intraflujo.",
                "La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de <br>recuperacin y control de prdidas</br> combinadas de extremo a extremo y de salto a salto.",
                "RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo.",
                "Hemos desarrollado mecanismos de <br>recuperacin y control de prdidas</br> intraflujo para aumentar la calidad perceptual."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como <br>recuperacin y control de prdidas</br> intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de <br>recuperacin y control de prdidas</br> combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de <br>recuperacin y control de prdidas</br> intraflujo para aumentar la calidad perceptual. ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "loss sensitivity": {
            "translated_key": "sensibilidad a la prdida",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable <br>loss sensitivity</br>: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of <br>loss sensitivity</br> also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP <br>loss sensitivity</br> Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal <br>loss sensitivity</br>, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal <br>loss sensitivity</br> as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "In the following we distinguish two reasons for such a variable <br>loss sensitivity</br>: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that the presented types of <br>loss sensitivity</br> also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "VOIP <br>loss sensitivity</br> Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal <br>loss sensitivity</br>, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "Thus, considering voice with temporal <br>loss sensitivity</br> as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10)."
            ],
            "translated_annotated_samples": [
                "En lo siguiente distinguimos dos razones para tal <br>sensibilidad variable a la prdida</br>: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio.",
                "Es importante tener en cuenta que los tipos de <br>sensibilidad a la prdida</br> presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo.",
                "La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto.",
                "RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con <br>sensibilidad a prdidas</br> temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo.",
                "Por lo tanto, considerando la voz con <br>sensibilidad a la prdida</br> temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10)."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal <br>sensibilidad variable a la prdida</br>: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de <br>sensibilidad a la prdida</br> presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con <br>sensibilidad a prdidas</br> temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con <br>sensibilidad a la prdida</br> temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). ",
            "candidates": [],
            "error": [
                [
                    "sensibilidad variable a la prdida",
                    "sensibilidad a la prdida",
                    "sensibilidad a prdidas",
                    "sensibilidad a la prdida"
                ]
            ]
        },
        "network support for real-time multimedia": {
            "translated_key": "soporte de red para flujos multimedia en tiempo real",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "<br>network support for real-time multimedia</br> flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "<br>network support for real-time multimedia</br> flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user."
            ],
            "translated_annotated_samples": [
                "El <br>soporte de red para flujos multimedia en tiempo real</br> puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El <br>soporte de red para flujos multimedia en tiempo real</br> puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "quality of service": {
            "translated_key": "calidad del servicio",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel <br>quality of service</br> (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Figure 1 a) shows a generic utility function describing the applicationlevel <br>quality of service</br> (QoS) dependent on the percentage of packets lost."
            ],
            "translated_annotated_samples": [
                "La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                []
            ]
        },
        "service quality": {
            "translated_key": "calidad del servicio",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "end-to-end loss recovery": {
            "translated_key": "recuperacin de prdidas de extremo a extremo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by <br>end-to-end loss recovery</br> mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the <br>end-to-end loss recovery</br>/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the <br>end-to-end loss recovery</br>.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by <br>end-to-end loss recovery</br> mechanisms.",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the <br>end-to-end loss recovery</br>/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the <br>end-to-end loss recovery</br>."
            ],
            "translated_annotated_samples": [
                "Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de <br>recuperacin de prdidas de extremo a extremo</br>.",
                "Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de <br>recuperacin/control de prdida de extremo a extremo</br>. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano.",
                "RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la <br>recuperacin de prdidas de extremo a extremo</br>."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de <br>recuperacin de prdidas de extremo a extremo</br>. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de <br>recuperacin/control de prdida de extremo a extremo</br>. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la <br>recuperacin de prdidas de extremo a extremo</br>. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    "recuperacin de prdidas de extremo a extremo",
                    "recuperacin/control de prdida de extremo a extremo",
                    "recuperacin de prdidas de extremo a extremo"
                ]
            ]
        },
        "voip traffic": {
            "translated_key": "trfico de VoIP",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of <br>voip traffic</br> to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of <br>voip traffic</br> to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "We employ these metrics to describe the sensitivity of <br>voip traffic</br> to packet loss in section 3.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of <br>voip traffic</br> to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss."
            ],
            "translated_annotated_samples": [
                "Empleamos estas mtricas para describir la sensibilidad del <br>trfico de VoIP</br> a la prdida de paquetes en la seccin 3.",
                "GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del <br>trfico de VoIP</br> a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del <br>trfico de VoIP</br> a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del <br>trfico de VoIP</br> a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "intra-flow loss control": {
            "translated_key": "control de prdida intraflujo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for <br>intra-flow loss control</br>.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an <br>intra-flow loss control</br> algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Section 4 briefly introduces a queue management algorithm which can be used for <br>intra-flow loss control</br>.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an <br>intra-flow loss control</br> algorithm performs and to show how loss models can capture this performance."
            ],
            "translated_annotated_samples": [
                "La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el <br>control de prdidas dentro del flujo</br>.",
                "Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de <br>control de prdida intraflujo</br> y para mostrar cmo los modelos de prdida pueden capturar este rendimiento."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el <br>control de prdidas dentro del flujo</br>. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de <br>control de prdida intraflujo</br> y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    "control de prdidas dentro del flujo",
                    "control de prdida intraflujo"
                ]
            ]
        },
        "packet-level metric": {
            "translated_key": "mtricas a nivel de paquete",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These <br>packet-level metric</br>s are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "These <br>packet-level metric</br>s are then linked to user-level objective speech quality metrics."
            ],
            "translated_annotated_samples": [
                "Estas <br>mtricas a nivel de paquete</br> luego se vinculan con mtricas de calidad de voz a nivel de usuario."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas <br>mtricas a nivel de paquete</br> luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "general markov model": {
            "translated_key": "modelo de Markov general",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a <br>general markov model</br> (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A <br>general markov model</br> ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a <br>general markov model</br> of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a <br>general markov model</br> of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a <br>general markov model</br> (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "METRICS 2.1 Packet-level metrics A <br>general markov model</br> ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a <br>general markov model</br> of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "Table 1 shows some values for the state and transition probabilities for a <br>general markov model</br> of third order measured end-to-end in the Internet by Yajnik et. al. ([19])."
            ],
            "translated_annotated_samples": [
                "Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo.",
                "MTRICAS 2.1 Mtricas a nivel de paquete Se define un <br>modelo de Markov general</br> ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un <br>modelo de Markov general</br> de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados.",
                "La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un <br>modelo de Markov general</br> de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19])."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un <br>modelo de Markov general</br> ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un <br>modelo de Markov general</br> de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un <br>modelo de Markov general</br> de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "sensitivity of voip traffic": {
            "translated_key": "sensibilidad del trfico de VoIP",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the <br>sensitivity of voip traffic</br> to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the <br>sensitivity of voip traffic</br> to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "We employ these metrics to describe the <br>sensitivity of voip traffic</br> to packet loss in section 3.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the <br>sensitivity of voip traffic</br> to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss."
            ],
            "translated_annotated_samples": [
                "Empleamos estas mtricas para describir la <br>sensibilidad del trfico de VoIP</br> a la prdida de paquetes en la seccin 3.",
                "GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la <br>sensibilidad del trfico de VoIP</br> a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la <br>sensibilidad del trfico de VoIP</br> a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la <br>sensibilidad del trfico de VoIP</br> a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "voip traffic sensitivity": {
            "translated_key": "Sensibilidad del trfico de VoIP",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "queue management algorithm": {
            "translated_key": "algoritmo de gestin de colas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a <br>queue management algorithm</br> which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this <br>queue management algorithm</br> as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a <br>queue management algorithm</br> which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A <br>queue management algorithm</br> for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Section 4 briefly introduces a <br>queue management algorithm</br> which can be used for intra-flow loss control.",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this <br>queue management algorithm</br> as Differential RED (DiERED).",
                "We have briefly introduced a <br>queue management algorithm</br> which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "A <br>queue management algorithm</br> for intracflow service differentiation in the best effort Internet."
            ],
            "translated_annotated_samples": [
                "La seccin 4 introduce brevemente un <br>algoritmo de gestin de colas</br> que se puede utilizar para el control de prdidas dentro del flujo.",
                "Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este <br>algoritmo de gestin de colas</br> como RED Diferencial (DiERED).",
                "Hemos introducido brevemente un <br>algoritmo de gestin de colas</br> que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal.",
                "Un <br>algoritmo de gestin de colas</br> para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un <br>algoritmo de gestin de colas</br> que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este <br>algoritmo de gestin de colas</br> como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un <br>algoritmo de gestin de colas</br> que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un <br>algoritmo de gestin de colas</br> para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "frame-based codec": {
            "translated_key": "cdec basado en tramas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a <br>frame-based codec</br> (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a <br>frame-based codec</br> (G.729) in the presence of packet loss."
            ],
            "translated_annotated_samples": [
                "CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un <br>cdec basado en tramas</br> (G.729) en presencia de prdida de paquetes."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un <br>cdec basado en tramas</br> (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "voice over ip": {
            "translated_key": "voz sobre protocolo de internet",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "loss concealment": {
            "translated_key": "ocultamiento de prdidas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with <br>loss concealment</br> isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform <br>loss concealment</br> by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as <br>loss concealment</br> (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as <br>loss concealment</br> (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without <br>loss concealment</br>, where the <br>loss concealment</br> repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without <br>loss concealment</br> enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with <br>loss concealment</br> are depicted.",
                "When the loss correlation (dp) is low, <br>loss concealment</br> provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with <br>loss concealment</br> (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with <br>loss concealment</br>, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal <br>loss concealment</br>.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without <br>loss concealment</br> we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With <br>loss concealment</br>, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform <br>loss concealment</br> by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with <br>loss concealment</br> isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform <br>loss concealment</br> by extrapolation of decoder state.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as <br>loss concealment</br> (receiver) takes place.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as <br>loss concealment</br> (receiver) takes place.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without <br>loss concealment</br>, where the <br>loss concealment</br> repairs isolated losses only (speech stationarity can only be assumed for small time intervals)."
            ],
            "translated_annotated_samples": [
                "Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con <br>ocultamiento de prdidas</br>, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual.",
                "Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el <br>encubrimiento de la prdida</br> mediante la extrapolacin del estado del decodificador.",
                "A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la <br>ocultacin de la prdida</br> (receptor).",
                "Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la <br>ocultacin de la prdida</br> (receptor).",
                "Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin <br>ocultamiento de prdidas</br>, donde el <br>ocultamiento de prdidas</br> repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos)."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con <br>ocultamiento de prdidas</br>, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el <br>encubrimiento de la prdida</br> mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la <br>ocultacin de la prdida</br> (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la <br>ocultacin de la prdida</br> (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin <br>ocultamiento de prdidas</br>, donde el <br>ocultamiento de prdidas</br> repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). ",
            "candidates": [],
            "error": [
                [
                    "ocultamiento de prdidas",
                    "encubrimiento de la prdida",
                    "ocultacin de la prdida",
                    "ocultacin de la prdida",
                    "ocultamiento de prdidas",
                    "ocultamiento de prdidas"
                ]
            ]
        },
        "loss metric": {
            "translated_key": "mtrica de prdida",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "objective speech quality measurement": {
            "translated_key": "medicin objetiva de la calidad del habla",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using <br>objective speech quality measurement</br>.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using <br>objective speech quality measurement</br> to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "We employ actual codecs and measure their utility in the presence of packet loss using <br>objective speech quality measurement</br>.",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using <br>objective speech quality measurement</br> to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s."
            ],
            "translated_annotated_samples": [
                "Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando <br>medidas objetivas de calidad de voz</br>.",
                "Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar <br>medidas objetivas de calidad de habla</br> para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando <br>medidas objetivas de calidad de voz</br>. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de gestin de colas que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar <br>medidas objetivas de calidad de habla</br> para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de gestin de colas ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de gestin de colas como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de gestin de colas que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de gestin de colas. 8. AUTORES ADICIONALES Autor adicional: Georg Carle (GMD Fokus, correo electrnico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCIAS J. Andren, M. Hilding y D. Veitch. Comprendiendo la dinmica del trfico de internet de extremo a extremo. En las Actas de IEEE GLOBECOM, Sdney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de errores basado en FEC adaptativo para audio interactivo en Internet. En Actas de IEEE INFOCOM, Nueva York, NY, marzo de 1999. D. Clark y W. Fang. Asignacin explcita del servicio de entrega de paquetes de mejor esfuerzo. Informe tcnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja tasa de bits para comunicacin multimedia. Revista de Comunicaciones de IEEE, pginas 34-41, diciembre de 1996. J. Ferrandiz y A. Lazar. Prdida consecutiva de paquetes en el trfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicacin de Datos, IFIP TC6, pginas 306-324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medicin de la calidad de servicio de servicios multimedia en tiempo real de Internet. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. C. Perkins, I. Kouvelas, 0. \n\nC. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga til RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer y S. McCanne. Simulacin de control de errores basado en FEC para audio en paquetes en Internet. En las Actas de IEEE INFOCOM, pginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. Recuperacin de errores G.729 para la telefona por Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrando FEC de paquetes en algoritmos adaptativos de bfer de reproduccin de voz en Internet. En las Actas de IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultamiento de paquetes de voz perdidos mediante la adaptacin de la paquetizacin. En Actas de los Sistemas Multimedia IEEE, pginas 140-149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Recuperacin y control de prdida de paquetes para la transmisin de voz a travs de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Tcnica de Berln, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. \n\nP31 PI P51 WI P71 P31 w PI PI http://sanneck.net/investigacion/publicaciones/tesis/ SannOOlOLoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestin de colas para la diferenciacin de servicios en el flujo interno en Internet de mejor esfuerzo. En Actas de la Octava Conferencia sobre Comunicaciones y Redes de Computadoras (ICCCN), pginas 419-426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Soporte eficiente de QoS para aplicaciones de Voz sobre IP utilizando marcado selectivo de paquetes. En la Sesin Especial sobre Tcnicas de Control de Errores para la Entrega en Tiempo Real de Datos Multimedia, Primer Taller Internacional sobre Computacin Multimedia Inteligente (IMMCN), pginas 553-556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlacin de prdida para colas con flujos de entrada con rfagas. En Actas ICC, pginas 219-224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptacin amigable con TCP de LDAf: Un estudio de medicin y comparacin. En las Actas de NOSSDAV, Chapel Hill, Carolina del Norte, junio de 2000. Unin Internacional de Telecomunicaciones. Codificacin de voz a 8 kbit/s utilizando prediccin lineal excitada por cdigo algebraico de estructura conjugada (CS-ACELP). Recomendacin G.729, UIT-T, marzo de 1996. Unin Internacional de Telecomunicaciones. Medicin objetiva de la calidad de los cdecs de voz de banda telefnica (300-3400 Hz). Recomendacin P.861, ITU-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlacin de prdida de paquetes en la red de multidifusin MBone: Mediciones experimentales y modelos de cadenas de Markov. Informe tcnico 95-115, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medicin y modelado de la dependencia temporal en la prdida de paquetes. Informe tcnico 98-78, Departamento de Ciencias de la Computacin, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala MBSD y anlisis de correlacin con la diferencia de MOS en lugar de MOS. En Actas ICASSP, pginas 673-676, Phoenix, AZ, marzo de 1999. por 451 ",
            "candidates": [],
            "error": [
                [
                    "medidas objetivas de calidad de voz",
                    "medidas objetivas de calidad de habla"
                ]
            ]
        },
        "queue management": {
            "translated_key": "gestin de colas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a <br>queue management</br> algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "<br>queue management</br> FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a <br>queue management</br> mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this <br>queue management</br> algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a <br>queue management</br> algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the <br>queue management</br> schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A <br>queue management</br> algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [
                "Section 4 briefly introduces a <br>queue management</br> algorithm which can be used for intra-flow loss control.",
                "<br>queue management</br> FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a <br>queue management</br> mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this <br>queue management</br> algorithm as Differential RED (DiERED).",
                "We have briefly introduced a <br>queue management</br> algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Michael Zander, GMD Fokus, helped with the simulations of the <br>queue management</br> schemes. 8."
            ],
            "translated_annotated_samples": [
                "La seccin 4 introduce brevemente un algoritmo de <br>gestin de colas</br> que se puede utilizar para el control de prdidas dentro del flujo.",
                "GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de <br>gestin de colas</br> ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas.",
                "Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de <br>gestin de colas</br> como RED Diferencial (DiERED).",
                "Hemos introducido brevemente un algoritmo de <br>gestin de colas</br> que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal.",
                "Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de <br>gestin de colas</br>. 8."
            ],
            "translated_text": "Recuperacin y control de prdidas intraflujo para VoIP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berln, Alemania D-l 0589 Berln, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Universidad Tcnica de Berln, Grupo de Redes de Telecomunicaciones, Sekr. Las redes de conmutacin de paquetes de mejor esfuerzo, como Internet, no ofrecen una transmisin confiable de paquetes a aplicaciones con restricciones de tiempo real, como la voz. Por lo tanto, la prdida de paquetes afecta la utilidad a nivel de aplicacin. Para la voz, este deterioro de utilidad es doble: por un lado, incluso breves rfagas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la prdida de paquetes y la reproduccin de la seal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la prdida, ya que contienen informacin ms importante en trminos de percepcin del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecucin de prdidas con el cual podemos describir la distribucin de prdidas dentro de un flujo. Estas mtricas a nivel de paquete luego se vinculan con mtricas de calidad de voz a nivel de usuario. Utilizando este marco de trabajo, encontramos que para los cdecs de muestras de baja compresin (PCM) con ocultamiento de prdidas, las prdidas de paquetes aisladas pueden ser ocultadas de manera efectiva, mientras que las prdidas en rfaga tienen un mayor impacto perceptual. Para cdecs basados en cuadros de alta compresin (G.729), por un lado, el impacto de la prdida se amplifica a travs de la propagacin de errores causada por las memorias del filtro del decodificador, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el encubrimiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, demostramos que el rendimiento del ocultamiento puede fallar en las transiciones dentro de la seal de voz. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la prdida de paquetes. Designamos estos mtodos como recuperacin y control de prdidas intraflujo. A nivel de extremo a extremo, se lleva a cabo la identificacin de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten (estadsticamente) intercambiar la prdida de un paquete, que se considera ms importante, por otro de la misma secuencia que es de menor importancia. Dado que ambos paquetes requieren el mismo costo en trminos de transmisin de red, es posible obtener una mejora en la percepcin del usuario. Mostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar costos adicionales de datos y retrasos, manteniendo un servicio de red virtualmente idntico al de mejor esfuerzo a largo plazo. Categoras y Descriptores de Asignaturas C.2.4 [Redes de Comunicacin de Computadoras]: Sistemas Distribuidos-Aplicaciones Distribuidas; (3.2.6 [Redes de Comunicacin de Computadoras]: Interconexin-Enrutadores; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de evaluacin; C.4 [Organizacin de Sistemas de Computadoras]: Rendimiento de Sistemas-Tcnicas de modelado Trminos Generales Diseo, Medicin, Rendimiento, Confiabilidad 1. CONSIDERACIONES Considerando que un flujo en tiempo real puede experimentar prdida de paquetes, el impacto de la prdida puede variar significativamente dependiendo de qu paquetes se pierdan dentro de un flujo. En lo siguiente distinguimos dos razones para tal sensibilidad variable a la prdida: Sensibilidad temporal: La prdida de ADUs que est correlacionada en el tiempo puede provocar interrupciones en el servicio. Se debe tener en cuenta que este efecto se ve an ms agravado por cierta interdependencia entre las Unidades de Datos de Aplicacin (ADUs) (es decir, que una ADU solo puede ser decodificada cuando una ADU anterior ha sido recibida y decodificada con xito). Para la voz, dado que un solo paquete tpicamente contiene varios ADU (cuadros de voz), este efecto es por lo tanto ms significativo que, por ejemplo, para el video. Se traduce bsicamente a prdidas de paquetes aisladas versus prdidas que ocurren en rfagas. Sensibilidad debido a la heterogeneidad de las Unidades de Datos de Aplicacin (ADU): Ciertas ADUs podran contener partes de la seal codificada que son la Unidad de Datos de Aplicacin: la unidad de datos emitida por un codificador fuente como un fotograma de video o voz. Figura 1: Funciones de utilidad esquemticas dependientes de la prdida de paquetes ms (+1) y menos (-1) importantes, siendo ms importante con respecto a la percepcin del usuario que otros de la misma secuencia. Consideremos un flujo con dos tipos de cuadros de gran importancia perceptualmente diferente (asumimos el mismo tamao, frecuencia y ninguna interdependencia entre los cuadros). Bajo la prdida del 50% de los paquetes, la calidad perceptual vara enormemente entre el caso en el que se reciben el 50% de los fotogramas con alta importancia perceptual y el caso en el que se reciben el 50% de los fotogramas menos importantes. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin prdidas, que, sin embargo, para ser implementado en una red de conmutacin de paquetes, resultar costoso para el proveedor de red y, por lo tanto, para el usuario. Por otro lado, dentro de un servicio con prdida de datos, se deben tener en cuenta las restricciones de sensibilidad mencionadas anteriormente. Es nuestra firme creencia que esto debe hacerse de manera genrica, es decir, no se debera requerir conocimiento especfico de la aplicacin (sobre esquemas de codificacin particulares, por ejemplo) dentro de la red y, viceversa, no se debera requerir conocimiento sobre detalles especficos de la red dentro de una aplicacin. Consideremos ahora el caso en el que el 50% de los paquetes de un flujo son identificados como ms importantes (designados con +1) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad mencionadas anteriormente. La Figura 1 a) muestra una funcin de utilidad genrica que describe el Nivel de Servicio de Calidad (QoS) a nivel de aplicacin dependiendo del porcentaje de paquetes perdidos. Para el trfico multimedia en tiempo real, dicha utilidad debera corresponder a la calidad percibida del video/voz. Si el sistema de transmisin no conoce la importancia relativa de los paquetes, las tasas de prdida de los paquetes +1 y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la prdida, as como a la dependencia del rendimiento de recuperacin de prdidas del extremo t* en los paquetes fl, la funcin de utilidad disminuye significativamente de manera no lineal (aproximada en la figura por funciones lineales por tramos) con una tasa de prdida creciente. La figura 1 b) presenta el CBS~ donde todos los paquetes +l estn protegidos a expensas de -1 pa&&. La decadencia de la funcin de utilidad (para tasas de prdida < 50%) se reduce, ya que los paquetes +l estn protegidos y la recuperacin de prdidas de extremo a extremo puede operar correctamente sobre un rango ms amplio de tasas de prdida indicado por el rea sombreada. Esto resulta en una degradacin elegante de la utilidad de las aplicaciones. Ten en cuenta que cuanto mayor sea la no linealidad de la contribucin de utilidad de los paquetes fl (desviacin de la curva punteada en la Fig. 1 a), mayor ser la ganancia potencial en utilidad cuando se habilita la proteccin para los paquetes +l. Los resultados para la calidad percibida actual como utilidad para aplicaciones multimedia muestran un comportamiento no lineal. Para describir este efecto y proporcionar una taxonoma para diferentes enfoques de mejora de la calidad de servicio, introducimos un nuevo trmino: designamos como QoS entre flujos a los mecanismos que influyen en los parmetros de QoS entre Bows (disminuyendo as la tasa de prdida de un flujo a expensas de otros flujos). Los esquemas que, en presencia de prdida, diferencian entre paquetes dentro de un flujo, como se muestra en la Figura 1 arriba, proporcionan mejora de la calidad de servicio intraflujo. Como los mecanismos de QoS deben implementarse dentro de la red (salto a salto) y/o en los sistemas finales (extremo a extremo), tenemos otro eje de clasificacin. La adaptacin de la tasa de bits de los emisores al estado actual de congestin de la red como un esquema de QoS intraflujo (evitacin de prdidas, [IS]) es difcil de aplicar a la voz. Dado que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la informacin de retroalimentacin es alto (en comparacin, por ejemplo, con un flujo de video). Para reducir este costo, sera necesario aumentar el intervalo de retroalimentacin, lo que resultara en una mayor probabilidad de decisiones de adaptacin incorrectas. La principal dificultad, sin embargo, es la falta de un cdec que sea verdaderamente escalable en cuanto a su velocidad de bits de salida y calidad perceptual correspondiente. Actualmente, los cdecs de voz estandarizados generalmente solo tienen una tasa de bits de salida 6 veces mayor. Aunque se ha propuesto cambiar entre los cdecs de voz ([2]), los valores de MOS (calidad subjetiva) para los cdecs empleados no difieren mucho: por ejemplo, los cdecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de velocidad de bits de 5.3 kbit/s a 64 kbit/s, mientras que la calidad subjetiva difiere en menos de 0.25 en una escala MOS de 1 a 5 ([4], 1: mala, 5: excelente calidad). Por lo tanto, cuando se asume la disponibilidad de suficiente potencia de clculo, se puede elegir de forma permanente el cdec de menor velocidad de bits sin disminuir realmente la calidad perceptual. Para la recuperacin de prdidas de extremo a extremo, debido a las restricciones de retraso en tiempo real, se han propuesto esquemas de lazo abierto como la Correccin de Errores Hacia Adelante (FEC) ([2]). Si bien estos esquemas son atractivos porque pueden ser utilizados en Internet hoy en da, tambin tienen varias desventajas. La cantidad de informacin redundante debe ser adaptable para evitar quitar ancho de banda a otros flujos. Esta adaptacin es crucial, especialmente cuando la fraccin de trfico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un cdigo fuente en s mismo, como a menudo se ha propuesto ([7]), los comentarios anteriores sobre la adaptacin tambin son aplicables. El uso de redundancia tambin tiene implicaciones en la adaptacin del retraso de reproduccin ([lo]) empleada para eliminar la variabilidad de los paquetes en el receptor. Es importante tener en cuenta que los tipos de sensibilidad a la prdida presentados tambin se aplican a las aplicaciones que se ven beneficiadas por mecanismos de recuperacin de prdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar tales sensibilidades, pero no pueden eliminarlas por completo. Por lo tanto, en este trabajo asumimos que se elige la tasa de bits ms baja posible que proporcione la calidad deseada. Ni se utiliza retroalimentacin/adaptacin ni redundancia, sin embargo, a nivel de extremo a extremo, se lleva a cabo la identificacin/marcado de paquetes sensibles a la prdida (emisor) as como la ocultacin de la prdida (receptor). Los esquemas de soporte de salto a salto permiten intercambiar la prdida de un paquete, considerado ms importante, por otro de la misma secuencia que tiene menor importancia. Empleamos cdecs reales y medimos su utilidad en presencia de prdida de paquetes utilizando medidas objetivas de calidad de voz. El documento est estructurado de la siguiente manera: La Seccin 2 introduce mtricas a nivel de paquete y de usuario. Empleamos estas mtricas para describir la sensibilidad del trfico de VoIP a la prdida de paquetes en la seccin 3. La seccin 4 introduce brevemente un algoritmo de <br>gestin de colas</br> que se puede utilizar para el control de prdidas dentro del flujo. En la seccin 5, presentamos resultados que documentan el rendimiento de los mecanismos propuestos tanto a nivel de extremo a extremo como de salto a salto. La seccin 6 concluye el artculo. MTRICAS 2.1 Mtricas a nivel de paquete Se define un modelo de Markov general ([19, S]) que describe el proceso de prdida de la siguiente manera: Sea P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) la probabilidad de transicin de estado de un modelo de Markov general de orden m, donde Z(s) es la funcin indicadora de prdida para el paquete con el nmero de secuencia s. Todas las combinaciones de los valores (0 y 1) de las secuencias Z(s-m), . . . , Z(s-2),Z(s-1) aparecen en el espacio de estados. Como ejemplo, P( Z(s) = 1 | Z(s - 2), Z(s - 1) = 0 ) proporciona la probabilidad de transicin de estado cuando el paquete actual s se pierde, el paquete anterior s - 1 tambin se ha perdido y el paquete s - 2 no se ha perdido. El nmero de estados del modelo es 2. Dos transiciones de estado pueden tener lugar desde cualquiera de los estados. Por lo tanto, el nmero de parmetros que deben ser calculados es 2m+1. Incluso para valores relativamente pequeos de m, esta cantidad de parmetros es difcil de evaluar y comparar. La Tabla 1 muestra algunos valores para las probabilidades de estado y transicin para un modelo de Markov general de tercer orden medido de extremo a extremo en Internet por Yajnik et al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0, la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita), mientras que cuando Z(s - 1) = 1, las probabilidades de transicin de estado a ese evento abarcan el rango de 0.15 a 0.61. Eso significa que los eventos pasados de no prdida no afectan tanto el proceso de prdida como los eventos pasados de prdida. Intuitivamente, esto parece tener sentido, ya que un paquete que llega con xito puede ser visto como un indicador de alivio de congestin. Andren et al. ([l]) as como Yajnik et al. ([20]) confirmaron esto midiendo la correlacin cruzada de las longitudes de secuencias con prdida y sin prdida. Llegaron a la conclusin de que dicha correlacin es muy dbil. Esto implica que los patrones de rfagas cortas de prdida intercaladas con breves perodos de llegadas exitosas de paquetes ocurren raramente (ntese en este contexto que en la tabla 1 el patrn 101 tiene de lejos la probabilidad de estado ms baja). Por lo tanto, en lo siguiente empleamos un modelo ([12]) que solo considera los eventos de prdida pasados para la probabilidad de transicin de estado. El nmero de estados del modelo se puede reducir de 2m a m + 1. Esto significa que solo consideramos la probabilidad de transicin de estado P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 1], donde Ic (0 < k 5 m) es un parmetro variable. Definimos una longitud de ejecucin de prdidas lc para una secuencia de Ic paquetes perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O, Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el j-simo evento de prdida en rfaga. Se debe tener en cuenta que los parmetros del modelo se vuelven independientes del nmero de secuencia s y ahora pueden ser descritos por la ocurrencia ok de una longitud de racha de prdida k. Definimos la variable aleatoria X de la siguiente manera: X = 0: ningn paquete perdido, X = k (0 < lc < m): exactamente lc paquetes consecutivos perdidos, y X  k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definicin, establecemos un modelo de longitud de racha de prdidas con un nmero finito de estados (m + 1) que proporciona probabilidades de prdida dependientes de la longitud de la rfaga. En el modelo, por cada paquete adicional perdido que se suma a la longitud de una rfaga de prdida, tiene lugar una transicin de estado. Si un paquete es recibido exitosamente, el estado vuelve a X = 0. Por lo tanto, la probabilidad estatal del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el ltimo estado X = m se define simplemente como m paquetes perdidos consecutivos, con P(X = m) siendo la probabilidad del estado. Dado el caso de un nmero finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok cadas de paquetes, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para a + 00) para la ocurrencia de una rfaga de prdida de longitud lc. Una aproximacin para la esperanza de la variable aleatoria X se puede calcular como pi = cr==, #+L,k y se puede identificar con la tasa media de prdida. Tambin podemos aproximar las probabilidades de estado del modelo mediante la tasa de prdida acumulativa p~,~,,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transicin para 1 < lc < m se pueden calcular fcilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de prdida condicionales nuevamente pueden ser aproximadas por PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. Para la Figura 2 de la Figura 443: Modelo de longitud de ejecucin de prdida con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P. La Figura 2 muestra la cadena de Markov para el modelo. (1) Adems, tambin definimos una variable aleatoria Y que describe la distribucin de las longitudes de prdida de rfaga con respecto a los eventos de prdida de rfaga j (y no a eventos de paquetes como en la definicin de X). Tenemos la tasa de longitud de prdida de rfaga ga = * como una estimacin para P(Y = k). Por lo tanto, la longitud media de prdida de rfaga es g = h = e = CT==, kgb correspondiente a E[Y] (brecha de prdida promedio, [5]). El modelo de longitud de carrera implica una distribucin geomtrica para residir en el estado X = m. Por lo tanto, para la probabilidad de una longitud de prdida de rfaga de k paquetes, podemos calcular estimaciones para los parmetros de rendimiento en una representacin de modelo de orden superior (nota que aqu Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos, por ejemplo, para P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de solo el paquete anterior (m = l), podemos utilizar la distribucin de longitud de racha para un clculo simple de los parmetros del modelo de Gilbert comnmente utilizado (Fig. 3) para caracterizar el proceso de prdida (siendo X la variable aleatoria asociada con X = 0: ningn paquete perdido, X = 1 un paquete perdido). Entonces, la probabilidad de estar en el estado m se puede ver como la probabilidad de prdida incondicional ulp y aproximarse por la prdida media (pr. = pi,,,,). Solo existe una probabilidad de prdida condicional (clp) para la transicin 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las prdidas de un flujo estn correlacionadas (es decir, la probabilidad de prdida de un paquete que llega est influenciada por la contribucin al estado de la cola de un paquete anterior del mismo flujo y/o tanto el paquete anterior como el actual ven llegadas agitadas de otro trfico, [15]) tenemos pal < clp y por lo tanto ulp 5 clp. Para pal = elp, el modelo de Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlacin de prdida). Como en la ecuacin 2 podemos calcular una estimacin para la probabilidad de una longitud de prdida de rfaga de k paquetes para una representacin de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de longitud de ejecucin de prdida (modelo Gilbert) con dos estados Figura 4: Componentes de la configuracin de medicin de recuperacin/control de prdida de extremo a extremo. 2.2 Mtricas de calidad de voz objetivo A diferencia de los mtodos convencionales como la Relacin Seal-Ruido (SNR), las nuevas medidas de calidad objetivo intentan estimar la calidad subjetiva lo ms cercanamente posible mediante la modelizacin del sistema auditivo humano. En nuestra evaluacin utilizamos dos medidas objetivas de calidad: la Distorsin Espectral Mejorada de Mod&d Bark (EMBSD, [21]) y los Bloques Normalizadores de Medicin (MNB) descritos en el Apndice II de la Recomendacin P.861 de la UIT-T ([18]). Estas dos medidas de calidad objetivas se informa que tienen una correlacin muy alta con pruebas subjetivas, su relacin con el rango de valores de resultados de pruebas subjetivas (MOS) es casi lineal y se recomienda que sean adecuadas para la evaluacin del habla degradada por errores de transmisin en entornos de red reales como errores de bits y borrado de tramas ([18, 211). Ambas mtricas son medidas de distancia, es decir, un valor de IB de 0 implica una calidad perfecta, cuanto mayor sea el valor, peor ser la calidad del habla (en la Fig. 5 mostramos un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artculo utilizamos ambos esquemas. Dado que arrojaron resultados muy similares (aunque los resultados de MNB generalmente mostraron menos variabilidad), solo presentamos los resultados de EMBSD. 3. La Figura 4 muestra los componentes del montaje de medicin que utilizaremos para evaluar nuestro enfoque de recuperacin y control de prdidas combinadas de extremo a extremo y de salto a salto. Las 444 casillas sombreadas muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperacin de prdidas. Junto con los parmetros del modelo de red (seccin 2.1) y el modelo perceptual, obtenemos una configuracin de medicin que nos permite mapear una entrada de seal PCM especfica a una medida de calidad de voz. Al utilizar una caracterizacin de prdida simple de extremo a extremo, generamos una gran cantidad de patrones de prdida utilizando diferentes semillas para el generador de nmeros pseudoaleatorios (para los resultados presentados aqu utilizamos 300 patrones para cada condicin simulada para una nica muestra de voz). Este procedimiento tiene en cuenta que el impacto de la prdida en una seal de entrada puede no ser homogneo (es decir, una rfaga de prdida dentro de un segmento de esa seal puede tener un impacto perceptual diferente que una rfaga de prdida del mismo tamao dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de prdida, obtenemos una indicacin confiable del rendimiento del cdec operando bajo una determinada condicin de prdida de red. Empleamos un modelo de Gilbert (Fig. 3) como modelo de red para las simulaciones, ya que hemos encontrado que aqu los modelos de orden superior no proporcionan mucha informacin adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de flujos PCM de ~-ley (64 kbit/s) con y sin ocultamiento de prdidas, donde el ocultamiento de prdidas repara solo prdidas aisladas (la estacionariedad del habla solo se puede asumir para intervalos de tiempo pequeos). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultacin. La Figura 5 muestra el caso sin ocultamiento de prdidas habilitado donde se varan los parmetros del modelo de Gilbert. La calidad del habla resultante es insensible al parmetro de distribucin de prdida (elp). Los resultados estn disminuyendo ligeramente incluso para un aumento de clp, lo que indica una variabilidad significativa de los resultados. En la Figura 6 se representan los resultados con ocultamiento de prdidas. Cuando la correlacin de prdida (dp) es baja, el ocultamiento de prdidas proporciona una mejora significativa en el rendimiento. La mejora relativa aumenta con la prdida (pulpa) creciente. Para valores de clp ms altos, los casos con y sin ocultamiento se vuelven cada vez ms similares y muestran el mismo rendimiento en clp x 0.3. Las figuras 5 y 6 respectivamente tambin contienen una curva que muestra el rendimiento bajo la suposicin de prdidas aleatorias (modelo de Bernoulli, ulp = elp). Por lo tanto, considerando una unidad de punto flotante dada, un patrn de prdida en el peor de los casos de prdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitira una mejora considerable en el rendimiento (con ok = OVk > 1: p~,cond = 0, Ec. 3). Como encontramos mediante inspeccin visual que las distribuciones de los valores de distorsin perceptual para una condicin de prdida parecen seguir aproximadamente una distribucin normal, empleamos la media y la desviacin estndar para describir la variabilidad estadstica de los valores medidos. La Figura 7 presenta la distorsin perceptual como en la figura anterior, pero tambin muestra la desviacin estndar como barras de error para la condicin de prdida respectiva. Muestra la creciente variabilidad de los resultados con la correlacin de prdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de prdida (alp). Por un lado, esto apunta a cierta sensibilidad, aunque dbil, con respecto a la heterogeneidad (es decir, importa en qu rea de la seal de voz (voz/no voz) se produce una prdida de explosin). Por otro lado, se muestra que un gran nmero de patrones de prdida diferentes es necesario para una muestra de habla especfica al utilizar medidas objetivas de calidad de habla para evaluar el impacto de la correlacin de prdida en la percepcin del usuario. G.729 utiliza el esquema de codificacin Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) y opera a 8 kbit/s. En G.729, un tramo de voz es de 10 ms de duracin. Para cada cuadro, el codificador G.7i9 analiza los datos de entrada y extrae los parmetros del modelo de Prediccin Lineal Excitada por Cdigo (CELP) como los coeficientes del filtro de prediccin lineal y los vectores de excitacin. Cuando se pierde o corrompe un cuadro, el decodificador G.729 utiliza los parmetros del cuadro anterior para interpolar los del cuadro perdido. Los coeficientes de pares espectrales de lnea (LSP3) del ltimo cuadro bueno se repiten y los coeficientes de ganancia se toman del cuadro anterior pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una prdida de trama, el decodificador no puede actualizar su estado, lo que resulta en una divergencia del estado del codificador y del decodificador. Por lo tanto, los errores no solo se introducen durante el perodo de tiempo representado por el fotograma actual, sino tambin en los siguientes. Adems del impacto de las palabras de cdigo faltantes, la distorsin se incrementa por la falta de actualizacin de las memorias del filtro predictor para los pares espectrales de lnea y las memorias del filtro de sntesis de prediccin lineal. La Figura 8 muestra que para condiciones de red similares, la calidad de salida del G.729* es peor que la del PCM con ocultamiento de prdida, demostrando el compromiso entre compresin y calidad bajo prdida de paquetes. Curiosamente, la correlacin de prdida (parmetro dp) tiene cierto impacto en la calidad del habla, sin embargo, el efecto es dbil, lo que seala una cierta robustez del cdec G.729 en cuanto a la resistencia a prdidas de paquetes consecutivas debido al ocultamiento interno de prdidas. Rosenberg ha realizado un experimento similar ([9]), mostrando que la diferencia entre la seal original y la seal oculta con el aumento de la prdida de rfagas en trminos de un error cuadrtico medio es significativa, sin embargo. Esto demuestra la importancia de las mtricas perceptuales que pueden incluir LSPs de ocultamiento, que son otra representacin de los coeficientes de prediccin lineal. Dos tramas G.729 estn contenidas en un paquete. Figura 9: Tiempo de resincronizacin (en cuadros) del decodificador G.729 despus de la prdida de k cuadros consecutivos (k  [1,4]) en funcin de la posicin del cuadro. (y no solo la reconstruccin) operaciones en la evaluacin de calidad. 3.2 Sensibilidad debido a la heterogeneidad de la ADU. PCM es una codificacin sin memoria. Por lo tanto, el contenido de ADU es solo dbilmente heterogneo (Figura 7). Por lo tanto, en esta seccin nos concentramos en el cdice G.729. El experimento que llevamos a cabo es medir el tiempo de resincronizacin del decodificador despus de que se pierden k fotogramas consecutivos. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energa de la seal de error cae por debajo del uno por ciento de la energa de la seal decodificada sin prdida de tramas (esto es equivalente a un umbral de relacin seal-ruido (SNR) de 20 dB). La energa de la seal de error (y por lo tanto la relacin seal/ruido) se calcula en funcin de cada cuadro. La Figura 9 muestra el tiempo de resincronizacin (expresado en el nmero de cuadros necesarios hasta que se excede el umbral) trazado en funcin de la posicin de la prdida (es decir, el ndice del primer cuadro perdido) para diferentes valores de k. La muestra de voz es producida por un hablante masculino donde ocurre una transicin no sonora/sonora (au) en el octavo cuadro. Podemos ver en la Figura 9 que la posicin de una prdida de trama tiene una influencia significativa en la degradacin de la seal resultante, mientras que la degradacin no es tan sensible a la longitud de la rfaga de prdida de trama k. La prdida de tramas no sonoras parece tener un impacto bastante pequeo en la degradacin de la seal y el decodificador recupera rpidamente la informacin de estado despus. La prdida de tramas con voz causa una degradacin mayor de la seal de voz y el decodificador necesita ms tiempo para resincronizarse con el emisor. Sin embargo, la prdida de tramas sonoras en una transicin de no sonora a sonora conlleva a una degradacin significativa de la seal. Hemos repetido el experimento con diferentes hablantes masculinos y femeninos y obtuvimos resultados similares. Teniendo en cuenta el esquema de codificacin de voz, el fenmeno anterior podra explicarse de la siguiente manera: Debido a que los sonidos sonoros tienen una energa ms alta que los sonidos sordos, la prdida de cuadros sonoros causa una degradacin de la seal mayor que la prdida de cuadros sordos. Sin embargo, debido a la propiedad peridica de los sonidos sonoros, el decodificador puede ocultar. Mientras por un lado vemos que las medidas de SNR a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado, las grandes diferencias en el tiempo de resincronizacin basado en el umbral de SNR claramente apuntan a un impacto significativo en la calidad subjetiva del habla. Figura 10: Probabilidades diferenciales de cada de RED en funcin de los tamaos promedio de la cola, la prdida de tramas sonoras una vez que ha obtenido suficiente informacin sobre ellas. El decodificador no logra ocultar la prdida de tramas sonoras en una transicin de sonido no sonoro/sonoro porque intenta ocultar la prdida de tramas sonoras utilizando los coeficientes del filtro y la excitacin para un sonido no sonoro. Adems, debido a que el codificador G.729 utiliza un filtro de media mvil para predecir los valores de los pares espectrales de lnea y solo transmite la diferencia entre los valores reales y predichos, lleva mucho tiempo al decodificador resincronizarse con el codificador una vez que ha fallado en construir el filtro de prediccin lineal apropiado. 4. GESTIN DE COLAS PARA EL CONTROL DE PRDIDAS INTRAFLOW Si bien hemos resaltado la sensibilidad del trfico de VoIP a la distribucin de prdidas en las ltimas secciones, ahora queremos introducir brevemente un mecanismo de <br>gestin de colas</br> ([13]) que es capaz de hacer cumplir las preferencias relativas de la aplicacin con respecto a las prdidas. Consideramos los flujos con paquetes marcados con +l e I1 (como se describe en la introduccin) como trfico de primer plano (FT) y otros flujos (mejor esfuerzo) como trfico de fondo (BT). El marcado de paquetes, adems de mantener la propiedad deseable de la agregacin de estado dentro del ncleo de la red segn lo propuesto por la arquitectura de Servicios Diferenciados de la IETF, se explota aqu para transmitir los requisitos de flujo interno de una baja. Dado que se debe evitar introducir el reordenamiento de los paquetes de un flujo en la red, consideramos mecanismos para la gestin de una sola cola con diferentes niveles de prioridad. Un enfoque para lograr la diferenciacin de servicios entre flujos utilizando una sola cola es RIO (RED con ENTRADA y SALIDA, [3]). Con RIO, se calculan dos tamaos de cola promedio como indicadores de congestin: uno solo para los paquetes de ENTRADA (alta prioridad) y otro para los paquetes de ENTRADA y SALIDA (baja prioridad). Los paquetes marcados como OUT se descartan antes (en trminos del tamao promedio de la cola) que los paquetes IN. RIO ha sido diseado para disminuir el retardo visto por arcos particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp tal como se da por otros parmetros mientras modificamos la distribucin de prdidas para el trfico principal (FT). Esto equivale a intercambiar la prdida de un paquete +1 por un paquete -1 de la misma secuencia (en un sentido estadstico). La Fig. 10 muestra la curva convencional de probabilidad de prdida RED (po en funcin del tamao promedio de la cola para todas las llegadas avg), que se aplica a todo el trfico no marcado (0) (trfico de fondo: BT). La relacin necesaria entre las probabilidades de cada para paquetes marcados como -1 y +1 se puede derivar de la siguiente manera (nota que esta relacin es vlida tanto a nivel de extremo a extremo como en cada salto individual): Sea a = a0 + a+ + a- el nmero total de paquetes emitidos por un flujo FT y a[-1,0,+1] el nmero de paquetes pertenecientes a una clase especfica (donde la clase 0 corresponde al trfico de mejor esfuerzo (sin marcar)). Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante debe ser de mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Debido a esta relacin entre la probabilidad de descarte para paquetes +l y -1, designamos este algoritmo de <br>gestin de colas</br> como RED Diferencial (DiERED). La Figura 10 muestra las curvas de probabilidad de cada correspondientes. Debido a la condicin de a+, = (I-L = todo, adems del comportamiento RED convencional, la implementacin de DiffRED tambin debera monitorear los procesos de llegada +l y -1. Si la proporcin de paquetes +1 a -1 en una puerta de enlace no es 1 (ya sea debido a flujos mal comportados o a un nmero significativo de flujos que ya han experimentado prdidas en saltos anteriores), la probabilidad de prdida de -1 disminuye y la probabilidad de +1 aumenta al mismo tiempo, degradando as el servicio para todos los usuarios. Las reas sombreadas arriba y abajo de la curva po(avg) (Fig. 10) muestran el rea de operacin cuando se agrega esta correccin. En [13] se ha demostrado que utilizar solo el tamao promedio de la cola convencional RED (avg) para la operacin DSRED no es suficiente. Esto se debe a la posible falta de correlacin del valor aug calculado entre las llegadas consecutivas de +1 y -1, especialmente cuando la proporcin del trfico FT es baja. Dado que esto podra resultar en una distribucin injusta de prdidas entre las fracciones FT y BT, se calcula un valor avgl especfico muestreando el tamao de la cola solo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciacin de servicio para el trfico de primer plano que no difiere del comportamiento RED convencional en el promedio a largo plazo (es decir, en el ulp). 5. RECUPERACIN Y CONTROL DE PRDIDAS INTRAFLUJO 5.1 Sensibilidad temporal Considerando un flujo con sensibilidad a prdidas temporales, el prrafo 3.1.1 ha demostrado que un patrn de prdida simple y peridico mejora el rendimiento de la recuperacin de prdidas de extremo a extremo. El patrn no est vinculado a paquetes particulares, por lo tanto, una caracterizacin por flujo con las mtricas introducidas es aplicable. En este prrafo asumimos que un flujo expres su sensibilidad temporal marcando su flujo con un patrn alternante de ,c+l,>,c~l,,, 447 Figura 11: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas Figura 12: Comparacin de tasas de longitud de prdida de rfagas reales y estimadas como funcin de la longitud de rfaga k: modelo basado en longitud de ejecucin de tres estados k: modelo basado en longitud de ejecucin de dos estados (Gilbert). Las figuras 11 y 12 muestran las tasas para las longitudes de prdida de rfaga reales y estimadas para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente. Podemos observar que DiffRED moldea la curva de probabilidad de rfagas de la manera deseada. La mayor parte de la masa de probabilidad se concentra en prdidas aisladas (el comportamiento ideal sera la ocurrencia de solo prdidas aisladas (Ic = 1) que se puede expresar con clp = 0 en trminos de los parmetros del modelo de Gilbert). Con Drop Tail se puede obtener una probabilidad de prdida de rfagas aproximadamente decreciente de forma geomtrica con el aumento de la longitud de la rfaga (Ec. 4), aunque el parmetro clp es relativamente grande. Por lo tanto, considerando la voz con sensibilidad a la prdida temporal como el trfico principal de inters, con DifFRED se pueden intercambiar una gran cantidad de rfagas cortas molestas por un mayor nmero de prdidas aisladas y pocas rfagas de prdida largas (que ocurren cuando la cola est temporalmente sobrecargada, es decir, awg > maxth, Fig. 10). Podemos ver que la estimacin del modelo de tres estados (Ec. 2) refleja las dos reas de la operacin de DifFRED (la brusca cada de la tasa de longitud de prdida de rfagas para k = 2 y la disminucin a lo largo de una asntota geomtricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Ec. 4), el cual sobreestima la tasa de longitud de prdida de rfagas para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, aunque ambos modelos capturan la forma de la curva real, el modelo de orden inferior es ms preciso en la estimacin. Esto se puede explicar de la siguiente manera: si las probabilidades de longitud de prdida de rfaga estn de hecho cerca de una distribucin geomtrica, la estimacin es ms robusta si se incluyen todos los datos (nota que la aproximacin basada en la longitud de ejecucin de la probabilidad de prdida condicional P(X = m|X = m) solo incluye ocurrencias de longitud de ejecucin de prdida mayores o iguales a m: Ec. 1). Solo discutimos los resultados cualitativamente aqu para dar un ejemplo de cmo funciona un algoritmo de control de prdida intraflujo y para mostrar cmo los modelos de prdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulacin y parmetros se pueden encontrar en [12]. 5.2 Sensibilidad debido a la heterogeneidad de las unidades de alojamiento (ADU). En el prrafo 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de las ADU resulta en un cierto patrn de prdida no peridico. Por lo tanto, es necesario un mecanismo en (o cerca) del remitente que extraiga ese patrn de los datos de voz. Adems, es necesaria una cooperacin explcita entre los mecanismos de extremo a extremo y de salto a salto (Fig. 4). Utilizamos el resultado del prrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y depende del ocultamiento de los decodificadores para otros fotogramas. La Figura 13 muestra el algoritmo simple escrito en pseudocdigo que se utiliza para detectar una transicin no sonora/sonora (uw) y proteger los cuadros sonoros al principio de una seal sonora. El anlisis del procedimiento0 se utiliza para clasificar un bloque de cuadros Ic como sonoros, sordos o en transicin de uv. send0 se utiliza para enviar un bloque de cuadros Ic como un solo paquete con la prioridad adecuada (ya sea fl, 0 o -1). Dado que el algoritmo central solo proporciona una decisin de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes necesarios de -1 para la compensacin (Ec. 5): despus de que se haya enviado una rfaga de paquetes de +1, se enva inmediatamente un nmero correspondiente de paquetes de -1. Se debe tener en cuenta el nmero necesario de paquetes -1 a enviar en caso de que el algoritmo SPB active el siguiente grupo de paquetes +1 antes de que se enven todos los paquetes -1 necesarios para la compensacin. Por lo tanto, visto en intervalos de tiempo que son largos en comparacin con los tiempos de rfaga +1/-1, la prdida media para el flujo ser igual al caso de mejor esfuerzo (Ec. 5). N es un valor predefinido y define cuntos cuadros al principio de una seal de voz deben ser protegidos. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores apropiados para N (dependiendo de la condicin de prdida de la red). En las simulaciones presentadas a continuacin, elegimos Ic = 2, un tpico 448 proteger = 0 fcm?ach (k frames) clasificar = anlisis(k frames)] si (proteger > 0) si (clasificar == no sonoro) proteger = 0 si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif else enviar(k frames, +l) proteger = proteger-k compensacin = compensacin+k endif else si (clasificar == transicin uvfransition) enviar(k frames, +l) proteger = N - k compensacin = compensacin+k else si (compensacin > 0) compensacin = compensacin-k enviar(k frames, -1) else enviar(k frames, 0) endif endif endif endfor Figura 13: Cdigo Pseudo SPB-DIFFMARK valor para transmisiones de voz interactivas a travs de Internet (20ms de datos de audio por paquete). Un nmero mayor de Ic ayudara a reducir la sobrecarga relativa del encabezado del protocolo, pero tambin aumenta el retraso de paquetizacin y dificulta la clasificacin del remitente y el ocultamiento del receptor en caso de prdida de paquetes (debido a un intervalo de prdida ms grande). 5.2.1 Descripcin de la simulacin de extremo a extremo. Debido al patrn de prdida no peridico, necesitamos asociar explcitamente una probabilidad de prdida con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo de Markov de un solo estado separado (modelo de Bernoulli) para describir el comportamiento de la red tal como es percibido por cada clase de paquetes. Los paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se descartan con una probabilidad pc, mientras que los paquetes marcados con +1 y -1 se descartan con probabilidades de p+i y p-1 respectivamente. Esta es una suposicin razonable con respecto a la interdependencia de las diferentes clases, de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una cantidad justa de decorrelacin de prdidas de paquetes +1 y -1. Sin embargo, para incluir cierta correlacin entre las clases, hemos establecido p+i = 10m3 pc para las simulaciones posteriores. La adecuacin del modelado simple de extremo a extremo utilizado ha sido investigada en [12] con simulacin de eventos discretos utilizando una topologa de mltiples saltos y modelado detallado de fuentes de trfico de primer plano y de fondo. El modelo de red del esquema de marcado N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figura 14: Esquemas de marcado y modelos de red correspondientes. tambin permiten una evaluacin razonable de cmo las prdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparacin directa con SPB-DIFFMARK, evaluamos un esquema en el que los paquetes se marcan alternativamente como -1 o +1 (ALT-DIFFMARK, Figura 14). Adems, incluimos esquemas de proteccin de prdidas interflujo relacionadas. El primer esquema utiliza proteccin total (FULL MARK, todos los paquetes estn marcados como +l). El esquema SPB-MARK opera de manera similar a SPB-DIFFMARK, pero no se envan paquetes -1 para compensacin (esos paquetes tambin se marcan como 0). Para la comparacin, nuevamente utilizamos un esquema en el que los paquetes se marcan alternativamente como 0 o +1 (ALT-MARK). Finalmente, los paquetes de flujos de mejor esfuerzo puro se descartan con la probabilidad po (caso SIN MARCA en la Figura 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l respectivamente es del 40.4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras de habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados. La Figura 15 muestra la distorsin perceptual para los esquemas de marcado dependiendo de la probabilidad de descarte pc. El estuche sin proteccin (SIN MARCA) tiene la mayor distorsin perceptual y, por lo tanto, la peor calidad de voz*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso al utilizar solo un servicio de red que se limita a un esfuerzo ptimo a largo plazo. Ten en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del caso de mejor esfuerzo (lo cual confirma el resultado del prrafo 3.1.2). SPB-DIFFMARK es incluso mejor que el esquema ALT-MARK de QoS entre flujos, especialmente para valores ms altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado de SPB que no marcan de manera equitativa todos los paquetes con una prioridad ms alta, sino que protegen un subconjunto de tramas que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *Tambin hemos realizado pruebas de escucha informales que confirmaron los resultados utilizando las mtricas objetivas. Figura 15: Distorsin perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 empotrada en los paquetes de carga principal (RFC 2198, [7]) para proteger un subconjunto de los paquetes, permite una calidad de voz de salida muy buena para tasas de prdida bajas. Sin embargo, cabe destacar que la cantidad de datos enviados a travs de la red se incrementa en un 40.4%. Ten en cuenta que la simulacin presume que este ancho de banda adicional consumido no contribuye significativamente a la congestin. Esta suposicin solo es vlida si una pequea fraccin del trfico es de voz ([S]). La curva SPB-FEC es convexa con un aumento de po, debido a la creciente correlacin de prdida, un nmero creciente de paquetes consecutivos que llevan redundancia se pierden, lo que conduce a prdidas irreparables. La curva para SPB-DIFFMARK es cncava, sin embargo, produce un mejor rendimiento para pe & 0.22. El esquema de marca ALT-MARK de calidad de servicio inter-flujo (el 50% de los paquetes estn marcados) mejora la calidad perceptual. Sin embargo, la distancia auditiva y la distorsin perceptual del esquema SPB-MARK (con un 40.4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la seal decodificada cuando todos los paquetes estn marcados (FULL MARK). Esto tambin muestra que al proteger todo el flujo, solo se obtiene una mejora mnima en la calidad perceptual. Los resultados del esquema FULL MARK tambin muestran que, si bien la prdida de algunos de los paquetes +l tiene un impacto medible, el impacto en la calidad perceptual an puede considerarse muy bajo. 6. CONCLUSIONES En este documento hemos caracterizado el comportamiento de un cdec basado en muestras (PCM) y un cdec basado en tramas (G.729) en presencia de prdida de paquetes. Hemos desarrollado mecanismos de recuperacin y control de prdidas intraflujo para aumentar la calidad perceptual. Aunque hemos probado otros cdecs solo de manera informal, creemos que nuestros resultados reflejan la diferencia fundamental entre los cdecs que codifican directamente la onda de voz o que se basan en la prediccin lineal. Tambin utilizamos el codificador G.729 para la codificacin de fuente redundante. Para PCM sin ocultamiento de prdidas, hemos encontrado que no muestra una sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de la carga til. Con el ocultamiento de prdidas, sin embargo, la calidad del habla se incrementa, pero la cantidad de aumento muestra una fuerte sensibilidad temporal. Los cdecs basados en cuadros amplifican, por un lado, el impacto de la prdida por propagacin de errores, aunque por otro lado, dichos esquemas de codificacin ayudan a realizar el ocultamiento de la prdida mediante la extrapolacin del estado del decodificador. A diferencia de los cdecs basados en muestras, hemos demostrado que el rendimiento de ocultacin del decodificador G.729 puede fallar en transiciones dentro de la seal de voz, mostrando as una fuerte sensibilidad a la heterogeneidad de la carga til. Hemos introducido brevemente un algoritmo de <br>gestin de colas</br> que es capaz de controlar patrones de prdida sin cambiar la cantidad de prdida y caracterizamos su rendimiento para el control de prdidas de un flujo que exhibe sensibilidad temporal. Luego desarrollamos un nuevo esquema de marcado de paquetes llamado Marcado Diferencial Selectivo Basado en Propiedades del Habla para una proteccin eficiente de cdecs basados en tramas. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los fotogramas esenciales para la seal de voz y confa en el ocultamiento de los decodificadores para otros fotogramas. Tambin hemos evaluado el mapeo de un algoritmo de extremo a extremo para la proteccin de interflujo. Hemos descubierto que el esquema de marcado selectivo funciona casi tan bien como la proteccin de todo el flujo con un nmero significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, parece que los esquemas combinados de flujo interno de extremo a extremo / salto a salto son adecuados para redes con una carga elevada y una fraccin relativamente grande de trfico de voz. Esto se debe a que no necesitan la adicin de redundancia ni retroalimentacin (lo cual incurrira en datos adicionales y retraso) y por lo tanto ofrecen una calidad de voz estable incluso para tasas de prdida ms altas debido a la ausencia de FEC y prdida de retroalimentacin. Tales esquemas pueden adaptarse mejor a cdecs con tasas de bits de salida fijas, que son difciles de integrar en esquemas FEC que requieren adaptabilidad tanto del cdec como del generador de redundancia. Adems, es til para cdecs adaptativos que funcionan con la tasa de bits ms baja posible. Evitar la redundancia y la retroalimentacin tambin es interesante en escenarios de conferencias multicast donde las caractersticas de prdida de extremo a extremo de los diferentes caminos que llevan a los miembros de la sesin son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que pueden ser fcilmente parametrizados con la caracterstica conocida de control de prdida hop-by-hop a mtricas a nivel de usuario. Un anlisis de la implementacin a gran escala de FEC no adaptativo o adaptativo en comparacin con la implementacin de nuestro esquema combinado requiere claramente un estudio adicional. 7. AGRADECIMIENTOS Nos gustara agradecer a Wonho Yang y Robert Yantorno, de la Universidad de Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, de GMD Fokus, ayud con las simulaciones de los esquemas de <br>gestin de colas</br>. 8. ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "differentiate service": {
            "translated_key": "diferenciar el servicio",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr.",
                "FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice.",
                "Thus, the loss of packets impairs the application-level utility.",
                "For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted.",
                "On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets.",
                "We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow.",
                "These packet-level metrics are then linked to user-level objective speech quality metrics.",
                "Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact.",
                "For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however.",
                "We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss.",
                "We designate these methods as intra-flow loss recovery and control.",
                "At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable.",
                "We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term.",
                "Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1.",
                "INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow.",
                "In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service.",
                "Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded).",
                "For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video.",
                "It translates basically to isolated packet losses versus losses that occur in bursts.",
                "Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow.",
                "Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames).",
                "Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received.",
                "Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user.",
                "On the other hand, within a lossy service, the above sensitivity constraints must be taken into account.",
                "It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application.",
                "Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints.",
                "Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost.",
                "For real-time multimedia traffic, such utility should correspond to perceived video/voice quality.",
                "If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal.",
                "Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate.",
                "Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&.",
                "The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area.",
                "This results in a graceful degradation of the applications utility.",
                "Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled.",
                "Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*.",
                "To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS.",
                "Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement.",
                "As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification.",
                "The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice.",
                "Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow).",
                "To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions.",
                "The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality.",
                "Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate.",
                "While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality).",
                "So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality.",
                "For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]).",
                "While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks.",
                "The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows.",
                "This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181).",
                "If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply.",
                "Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver.",
                "Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms.",
                "End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them.",
                "Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen.",
                "Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place.",
                "Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance.",
                "We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement.",
                "The paper is structured as follows: Section 2 introduces packet- and user-level metrics.",
                "We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3.",
                "Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control.",
                "In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level.",
                "Section 6 concludes the paper. 2.",
                "METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space.",
                "As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost.",
                "The number of states of the model is 2.",
                "Two state transitions can take place from any of the states.",
                "Thus, the number of parameters which have to be computed is 2m+1.",
                "Even for relatively small m this amount of parameters is difficult to be evaluated and compared.",
                "Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]).",
                "It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61.",
                "That means that past no loss events do not affect the loss process as much as past loss events.",
                "Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief.",
                "Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths.",
                "They came to the result that such correlation is very weak.",
                "This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability).",
                "Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability.",
                "The number of states of the model can be reduced from 2m to m + 1.",
                "This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter.",
                "We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event.",
                "Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost.",
                "With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length.",
                "In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place.",
                "If a packet is successfully received, the state returns to X = 0.",
                "Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc).",
                "Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability.",
                "Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc.",
                "An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate.",
                "We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m).",
                "The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,.",
                "For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X).",
                "We have the burst loss length rate ga = * as an estimate for P(Y = k).",
                "Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]).",
                "The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models).",
                "For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost).",
                "Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,).",
                "Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp.",
                "For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation).",
                "As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system.",
                "In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]).",
                "These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211).",
                "Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values).",
                "For all simulations in this paper we employed both schemes.",
                "As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3.",
                "VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control.",
                "The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located.",
                "Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure.",
                "While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample).",
                "This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment).",
                "By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition.",
                "We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals).",
                "Results are shown for the AP/C concealment algorithm ([ll]).",
                "Similar results were obtained with other concealment algorithms.",
                "Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied.",
                "The resulting speech quality is insensitive to the loss distribution parameter (elp).",
                "The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits.",
                "In Figure 6 the results with loss concealment are depicted.",
                "When the loss correlation (dp) is low, loss concealment provides a significant performance improvement.",
                "The relative improvement increases with increasing loss (pulp).",
                "For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3.",
                "Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp).",
                "Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3).",
                "As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values.",
                "Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition.",
                "It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp).",
                "On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss).",
                "On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s.",
                "In G.729. a speech fmme is 10 ms in d&ion.",
                "For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors.",
                "When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame.",
                "The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact.",
                "When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state.",
                "Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones.",
                "In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries.",
                "Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss.",
                "Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment.",
                "Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however.",
                "This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients.",
                "Two G.729 frames are contained in a packet.",
                "Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding.",
                "Therefore the ADU content is only weakly heterogeneous (Figure 7).",
                "Thus, in this section we concentrate on the G.729 coda.",
                "The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost.",
                "The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB).",
                "The error signal energy (and thus the SNR) is computed on a per-frame basis.",
                "Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame.",
                "We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter.",
                "The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender.",
                "However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal.",
                "We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames.",
                "However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them.",
                "The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound.",
                "Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4.",
                "QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss.",
                "We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT).",
                "Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow.",
                "As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels.",
                "One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]).",
                "With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets.",
                "Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets.",
                "RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows.",
                "In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT).",
                "This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense).",
                "Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT).",
                "The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic).",
                "Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED).",
                "Figure 10 shows the corresponding drop probability curves.",
                "Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes.",
                "If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users.",
                "The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added.",
                "In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient.",
                "This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low.",
                "As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants.",
                "Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5.",
                "INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery.",
                "The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable.",
                "In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.)",
                "Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6.",
                "We can observe that DiffRED shapes the burst probability curve in the desired way.",
                "Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters).",
                "With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though.",
                "Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10).",
                "We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2).",
                "This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2.",
                "Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation.",
                "This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance.",
                "Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern.",
                "Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data.",
                "Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4).",
                "We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK).",
                "The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal.",
                "The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1).",
                "As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately.",
                "State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent.",
                "Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5).",
                "N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected.",
                "Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition).",
                "In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet).",
                "A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model.",
                "Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets.",
                "Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively.",
                "This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses.",
                "Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations.",
                "This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources.",
                "Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms.",
                "For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14).",
                "We furthermore include related inter-flow loss protection schemes.",
                "The first scheme uses full protection (FULL MARK, all packets are marked as +l).",
                "The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0).",
                "For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK).",
                "Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14).",
                "For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used.",
                "We obtained similar marking percentages for other speech samples.",
                "The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc.",
                "The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*.",
                "The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term.",
                "Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2).",
                "SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe.",
                "These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality.",
                "The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates.",
                "However, it should be noted that the amount of data sent over the network is increased by 40.4%.",
                "Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion.",
                "This assumption is only valid if a small fraction of trafhc is voice ([S]).",
                "The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses.",
                "The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22.",
                "The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality.",
                "However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK).",
                "This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained.",
                "The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6.",
                "CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss.",
                "We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality.",
                "While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction.",
                "For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity.",
                "With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity.",
                "Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state.",
                "Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity.",
                "We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity.",
                "Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs.",
                "The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames.",
                "We have also evaluated the mapping of an end-to-end algorithm to interflow protection.",
                "We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets.",
                "Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic.",
                "This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss.",
                "Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator.",
                "Also, it is useful for adaptive codecs running at the lowest possible bitrate.",
                "Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different.",
                "Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics.",
                "An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7.",
                "ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements.",
                "Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8.",
                "ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9.",
                "PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch.",
                "Understanding end-to-end internet traffic dynamics.",
                "In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998.",
                "J.-C. Bolot, S. Fosse-Parisis, and D. Towsley.",
                "Adaptive FEC-based error control for interactive audio in the Internet.",
                "In Proceedings IEEE INFOCOM, New York, NY, March 1999.",
                "D. Clark and W. Fang.",
                "Explicit allocation of best effort packet delivery service.",
                "Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf.",
                "R. Cox and P. Kroon.",
                "Low bit-rate speech coders for multimedia communication.",
                "IEEE Communications Magazine, pages 34-41, December 1996.",
                "J. Ferrandiz and A. Lazar.",
                "Consecutive packet loss in real-time packet traffic.",
                "In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990.",
                "W. Jiang and H. Schulzrinne.",
                "QoS measurement of Internet real-time multimedia services.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000.",
                "C. Perkins, I. Kouvelas, 0.",
                "Hodson, M. Handley, and J. Bolot.",
                "RTP payload for redundant audio data.",
                "RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt.",
                "M. Podolsky, C. Romer, and S. McCanne.",
                "Simulation of FEC-based error control for packet audio on the Internet.",
                "In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998.",
                "J. Rosenberg.",
                "G. 729 error recovery for Internet Telephony.",
                "Project report, Columbia University, 1997.",
                "J. Rosenberg, L. Qiu, and H. Schulzrinne.",
                "Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet.",
                "In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000.",
                "H. Sanneck.",
                "Concealment of lost speech packets using adaptive packetization.",
                "In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz.",
                "H. Sanneck.",
                "Packet Loss Recovery and Control for Voice tinsmission over the Internet.",
                "PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000.",
                "P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf.",
                "H. Sanneck and G. Carle.",
                "A queue management algorithm for intracflow service differentiation in the best effort Internet.",
                "In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz.",
                "H. Sanneck, N. Le, and A. Wolisz.",
                "Efficient QoS support for Voice-over-IP applications using selective packet marking.",
                "In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz.",
                "H. Schulzrinne, J. Kurose, and D. Towsley.",
                "Loss correlation for queues with bursty input streams.",
                "In Proceedings ICC, pages 219-224, Chicago, IL, 1992.",
                "D. Sisalem and A. Wolisz.",
                "LDAf TCP-friendly adaptation: A measurement and comparison study.",
                "In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union.",
                "Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP).",
                "Recommendation G.729, ITU-T, March 1996. International Telecommunication Union.",
                "Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs.",
                "Recommendation P.861, ITU-T, February 1998.",
                "M. Yajnik, J. Kurose, and D. Towsley.",
                "Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models.",
                "Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995.",
                "M. Yajnik, S. Moon, J. Kurose, and D. Towsley.",
                "Measurement and modelling of the temporal dependence in packet loss.",
                "Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998.",
                "W. Yang and R. Yantorno.",
                "Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS.",
                "In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        }
    }
}