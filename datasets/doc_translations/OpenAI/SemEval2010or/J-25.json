{
    "id": "J-25",
    "original_text": "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic. Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions. A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum. The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems. We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples. We then analyze in detail the auctioneers matching problem. We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case. We show that the latter hardness result holds even under severe language restrictions on bids. With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case. We briefly discuss matching algorithms and tractable special cases. Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1. INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions. Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25]. The economic value of securities markets is two-fold. First, they allow traders to hedge risk, or to insure against undesirable outcomes. For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn. Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house. Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes. For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price. Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28]. Real securities markets have complex payoff structures with various triggers. However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20]. One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur. So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004. An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals. For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each. Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5]. Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all. Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price. Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk. We examine the computational complexity of the auctioneers matching problem. Let the length of the description of all the available securities be O(n). With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case. This Σp 2-complete hardness holds even when the bidding language is significantly restricted. With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case. Section 2 presents some necessary background information, motivation, and related work. Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem. Section 4 briefly discusses natural algorithms for solving the matching problem. Section 5 proves our central computational complexity results. Section 6 discusses the possibility of tractable special cases. Section 7 concludes with a summary and some ideas of future directions. 2. PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100. In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100. Hedging risk can be thought of as an action of moving money between various possible future states. For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is. Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not. Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk. For example, betting on a football team moves money from the team loses state to the team wins state. In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18]. All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω. Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily. So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events. Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes. Conversely, any state space Ω can be factored into log |Ω| events. Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon). Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires. Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally. If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20]. In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable. No truly complete market exists or will ever exist. One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible. Compound securities allow a high degree of expressivity in constructing bids. The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1]. The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation. In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization. Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete. For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options. Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness. Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities. The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23]. They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete. For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient. Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities. If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders. The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation. Note that CVT differs significantly from compound securities trading. CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events. For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B . Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures. Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods. In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions. Compound securities differ from combinatorial auctions in concept and complexity. Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events. Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum). The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk. Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods. Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered. The central auctioneer problem is to maximize social welfare. Also note that the problems lie in different complexity classes. While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case. In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2). There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size. Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods. The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk. Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods. Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes. The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation. At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution. In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution. In the limit of many traders, it produces a combined estimate. Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments. The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded. Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms. Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent. Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3. If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match. However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes. We address these issues below. 146 3. FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A. There are no predefined securities. Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations. Combination operators may include conjunctions, disjunctions, and conditionals. For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed. In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept. At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices. In between these two formulations are other possible interesting optimization problems. Approximation algorithms might also be pursued. The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled). For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1. Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities. In general, a single security might qualify for multiple matches, but only one can be transacted. So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways. Again, approximation algorithms might be considered. In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk. Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A. We denote securities φ|ψ . Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false. We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false. We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order. We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p). We distinguish between divisible and indivisible orders. Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1. Agents submitting indivisible orders will accept only exactly q units, or none at all. We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders. Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω. The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise. Recall that the 2n states correspond to the 2n possible combinations of event outcomes. We index multiple orders with subscripts (e.g., oi and Υi). Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3. Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8. The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O. Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1). If αi = 0, then order oi is considered rejected and no transactions take place concerning this order. For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi. We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled. Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even). Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0? In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars. Let m = minω[Υ ω auc]. In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities. Example 2. (Indivisible order matching) Suppose |A| = 2. Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3. The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 . Since all components are nonnegative, the two orders match. The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled. Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2. Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4. The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer). However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match. The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 . In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match. However, there may be multiple matches from which the auctioneer can choose. Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective. Example 4. (Auctioneer alternatives I) Suppose |A| = 2. Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4. The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case. The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together. Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2. Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5. The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case. The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ). Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 . Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another. For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances. One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint. Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0. Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y). Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y). Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint. In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes. Still other variations and other optimization criteria seem reasonable, including social welfare, etc. It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer. This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer. The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents. Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4. MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1. The straightforward algorithm for solving the indivisible matching problem is integer programming. With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space. There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity. For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors. So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid. Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5. THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem. Here n refers to the problems input size that includes descriptions of all of the buy and sell orders. We also assume that n bounds the number of base securities. We consider four cases based on two parameters: 1. Whether to allow divisible or indivisible orders. 2. The number of securities. We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states. We show the following results. Theorem 1. The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3. NP-complete for O(log n) base securities with indivisible orders. 4. Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2. We have variables αi. For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0. Given these constraints we maximize X i αi. A set of orders has a matching exactly when P i αi > 0. With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time. Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus. However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations. Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders. By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints. So if no matching exists there must exist m + 1 constraints that force all the αi to zero. In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program. This shows that matching is in co-NP. To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching. Fix a formula φ. Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5. If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching. If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching. One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5. We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each. If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist. If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0. Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time. To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities. The input to X3C consists of a set X and a collection C of 3-element subsets of X. The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C . Karp showed that X3C is NP-complete. Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}. We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5. We claim that a matching exists if and only if (X, C) is in X3C. If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once. Note that |C | = q. We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching. In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Suppose now that (X, C) is not in X3C but there is a matching. Consider the number q of the φi in that matching and q the number of ψj in the matching. Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0. We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching. There must be some state ek not in any of the ci or C would be an exact cover. The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy. A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A. The class Σp 2 contains both NP and coNP. Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP. We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP. While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP. If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice. Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching. But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct. Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω. We prove a stronger theorem which implies that matching is in Σp 2. Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied. The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost. Theorem 2. The 0−1-matching problem is Σp 2-complete. Furthermore, the problem remains Σp 2-complete under the following two special cases: 1. For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2. For all i, Ci is a conjunction of at most 2 base securities (or their negations). These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost. To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF. Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · . This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF. We reduce T∃∀BF to finding a matching. For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations. The auctioneer has the option of accepting either 0 or 1 of each of the given securities. We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations). By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff. Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition. The T∃∀BFproblem may be viewed as a game between a selector and an adversary. The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ. We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities. We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost). The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off. Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game. The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game. Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage. Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events. For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels). For each existential variable xi we add additional base securities, ni and zi. We also include a base security Q. In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1. We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1. That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1. We at times refer to a security by its payoff clause. Remark: We may loosely think of as 0. However, this would allow one to buy a security for nothing that pays (in the worst case) nothing. By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss. Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost. For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi). For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn. Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finally, we have a cheap security with payoff clause ( ¯Q). We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win. The resulting reasonable strategies correspond exactly to the game version of T∃∀BF. First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit. The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off. Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off. Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities. This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off. As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint. Suppose that the buyer buys (¯xi ∧Q). Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off. It must then set zi to be true or (xi∧¯zi) will pay off. Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false. Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false. Note that the adversary must in all cases set each zi event to be true. Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary. Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi. Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off. The adversary also decides the value of the y1, . . . , ym base events. Recall that for each clause C ∈ φ there is a corresponding security SC. Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness. Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time. If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security). Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied. Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables. By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables. We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ). Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities. One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction. A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable. Essentially the same analysis as given above applies to this case. The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs . Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q). Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically). Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1). Clearly, buying none of the new securities is equivalent to not buying the original security. We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational. We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off. To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true. Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out. If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q). So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational. If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted. If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q. Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q. Thus, buying a proper subset of these securities will not increase ones payoff. We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables. With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations. Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later. By a simple case analysis, we have the following. Observations: 1. For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2. For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3. If w1, w2 and w3 are all false, all of the S securities will pay off. 4. Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off. By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security. By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true. We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1. Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all. Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities. Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true. For the rest of the discussion, we assume that the players follow these constraints. We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them. If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z. Hence, there is no point in buying either S2 or S3 if one doesnt buy S1. Applying the same argument to S2 and S3 establishes the claim. Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z. First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1. If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off. The same argument holds if Y or Z are false. 6. TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms. Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists. Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1. Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2. Single negative events: ¯Ai . Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts. This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward. Although this example is contrived, its application is not entirely implausible. For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss. The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7. CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas. Many possible avenues for future work exist, including 1. Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2. Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3. Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4. We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility. With few exceptions [3, 22], little is known about computational equilibriums. A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur. Acknowledgments We thank Rahul Sami for his help with Section 5.4.4. We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8. REFERENCES [1] Kenneth J. Arrow. The role of securities in the optimal allocation of risk-bearing. Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard. Inducing liquidity in thin financial markets through combined-value trading mechanisms. European Economic Review, 46:1671-1695, 2002. [3] Paul J. Brewer. Decentralized computation procurement and computational robustness in a smart market. Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman. Forecasting uncertain events with small groups. In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti. Theory of Probability: A Critical Introductory Treatment, volume 1. Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra. Combinatorial auctions: A survey. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence. Information incorporation in online in-game sports betting markets. In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze. Market allocation under uncertainty. In Essays on Economic Decisions under Uncertainty, pages 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo. A logic for reasoning about probabilities. Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm. Information aggregation in an experimental market. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright. Anatomy of an experimental political stock market. American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross. Wishes, expectations, and actions: A survey on price formation in election stock markets. Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber. Informed traders and price variations in the betting market for professional basketball games. Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson. Decision markets. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson. Combinatorial information market design. Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson. Could gambling save science? Encouraging an honest consensus. Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein. Recovering probability distributions from options prices. Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler. Separating probability elicitation from utilities. Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii. Theory of Incomplete Markets, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green. Microeconomic Theory. Oxford University Press, New York, 1995. [21] Noam Nisan. Bidding and allocation in combinatorial auctions. In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen. Computationally feasible VCG mechanisms. In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl. Probabilistic Reasoning in Intelligent Systems. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen. The real power of artificial markets. Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles. Extracting collective probabilistic forecasts from web games. In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman. Compact securities markets for Pareto optimal reallocation of risk. In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang. Parimutuel betting markets as information aggregation devices: Experimental results. Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott. Markets as information gathering tools. Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder. Rational expectations and the aggregation of diverse information in laboratory security markets. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. Orange juice and weather. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine. Winner determination in combinatorial auction generalizations. In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz. How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment. Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba. Anomalies: Parimutuel betting markets: Racetracks and lotteries. Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian. The arbitrage principle in financial economics. J. Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy. Good probability assessors. J. Applied Meteorology, 7:751-758, 1968. 155",
    "original_translation": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155",
    "original_sentences": [
        "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
        "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
        "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
        "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
        "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
        "We then analyze in detail the auctioneers matching problem.",
        "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
        "We show that the latter hardness result holds even under severe language restrictions on bids.",
        "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
        "We briefly discuss matching algorithms and tractable special cases.",
        "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
        "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
        "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
        "The economic value of securities markets is two-fold.",
        "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
        "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
        "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
        "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
        "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
        "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
        "Real securities markets have complex payoff structures with various triggers.",
        "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
        "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
        "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
        "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
        "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
        "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
        "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
        "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
        "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
        "We examine the computational complexity of the auctioneers matching problem.",
        "Let the length of the description of all the available securities be O(n).",
        "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
        "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
        "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
        "Section 2 presents some necessary background information, motivation, and related work.",
        "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
        "Section 4 briefly discusses natural algorithms for solving the matching problem.",
        "Section 5 proves our central computational complexity results.",
        "Section 6 discusses the possibility of tractable special cases.",
        "Section 7 concludes with a summary and some ideas of future directions. 2.",
        "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
        "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
        "Hedging risk can be thought of as an action of moving money between various possible future states.",
        "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
        "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
        "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
        "For example, betting on a football team moves money from the team loses state to the team wins state.",
        "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
        "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
        "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
        "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
        "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
        "Conversely, any state space Ω can be factored into log |Ω| events.",
        "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
        "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
        "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
        "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
        "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
        "No truly complete market exists or will ever exist.",
        "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
        "Compound securities allow a high degree of expressivity in constructing bids.",
        "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
        "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
        "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
        "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
        "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
        "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
        "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
        "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
        "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
        "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
        "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
        "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
        "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
        "Note that CVT differs significantly from compound securities trading.",
        "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
        "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
        "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
        "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
        "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
        "Compound securities differ from combinatorial auctions in concept and complexity.",
        "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
        "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
        "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
        "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
        "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
        "The central auctioneer problem is to maximize social welfare.",
        "Also note that the problems lie in different complexity classes.",
        "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
        "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
        "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
        "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
        "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
        "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
        "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
        "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
        "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
        "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
        "In the limit of many traders, it produces a combined estimate.",
        "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
        "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
        "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
        "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
        "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
        "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
        "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
        "We address these issues below. 146 3.",
        "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
        "There are no predefined securities.",
        "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
        "Combination operators may include conjunctions, disjunctions, and conditionals.",
        "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
        "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
        "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
        "In between these two formulations are other possible interesting optimization problems.",
        "Approximation algorithms might also be pursued.",
        "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
        "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
        "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
        "In general, a single security might qualify for multiple matches, but only one can be transacted.",
        "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
        "Again, approximation algorithms might be considered.",
        "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
        "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
        "We denote securities φ|ψ .",
        "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
        "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
        "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
        "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
        "We distinguish between divisible and indivisible orders.",
        "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
        "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
        "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
        "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
        "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
        "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
        "We index multiple orders with subscripts (e.g., oi and Υi).",
        "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
        "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
        "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
        "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
        "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
        "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
        "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
        "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
        "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
        "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
        "Let m = minω[Υ ω auc].",
        "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
        "Example 2. (Indivisible order matching) Suppose |A| = 2.",
        "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
        "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
        "Since all components are nonnegative, the two orders match.",
        "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
        "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
        "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
        "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
        "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
        "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
        "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
        "However, there may be multiple matches from which the auctioneer can choose.",
        "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
        "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
        "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
        "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
        "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
        "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
        "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
        "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
        "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
        "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
        "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
        "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
        "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
        "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
        "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
        "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
        "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
        "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
        "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
        "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
        "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
        "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
        "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
        "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
        "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
        "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
        "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
        "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
        "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
        "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
        "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
        "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
        "We also assume that n bounds the number of base securities.",
        "We consider four cases based on two parameters: 1.",
        "Whether to allow divisible or indivisible orders. 2.",
        "The number of securities.",
        "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
        "We show the following results.",
        "Theorem 1.",
        "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
        "NP-complete for O(log n) base securities with indivisible orders. 4.",
        "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
        "We have variables αi.",
        "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
        "Given these constraints we maximize X i αi.",
        "A set of orders has a matching exactly when P i αi > 0.",
        "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
        "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
        "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
        "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
        "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
        "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
        "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
        "This shows that matching is in co-NP.",
        "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
        "Fix a formula φ.",
        "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
        "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
        "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
        "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
        "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
        "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
        "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
        "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
        "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
        "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
        "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
        "Karp showed that X3C is NP-complete.",
        "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
        "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
        "We claim that a matching exists if and only if (X, C) is in X3C.",
        "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
        "Note that |C | = q.",
        "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
        "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
        "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
        "Suppose now that (X, C) is not in X3C but there is a matching.",
        "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
        "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
        "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
        "There must be some state ek not in any of the ci or C would be an exact cover.",
        "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
        "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
        "The class Σp 2 contains both NP and coNP.",
        "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
        "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
        "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
        "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
        "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
        "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
        "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
        "We prove a stronger theorem which implies that matching is in Σp 2.",
        "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
        "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
        "Theorem 2.",
        "The 0−1-matching problem is Σp 2-complete.",
        "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
        "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
        "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
        "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
        "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
        "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
        "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
        "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
        "We reduce T∃∀BF to finding a matching.",
        "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
        "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
        "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
        "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
        "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
        "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
        "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
        "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
        "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
        "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
        "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
        "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
        "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
        "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
        "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
        "For each existential variable xi we add additional base securities, ni and zi.",
        "We also include a base security Q.",
        "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
        "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
        "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
        "We at times refer to a security by its payoff clause.",
        "Remark: We may loosely think of as 0.",
        "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
        "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
        "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
        "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
        "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
        "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
        "Finally, we have a cheap security with payoff clause ( ¯Q).",
        "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
        "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
        "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
        "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
        "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
        "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
        "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
        "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
        "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
        "Suppose that the buyer buys (¯xi ∧Q).",
        "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
        "It must then set zi to be true or (xi∧¯zi) will pay off.",
        "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
        "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
        "Note that the adversary must in all cases set each zi event to be true.",
        "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
        "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
        "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
        "The adversary also decides the value of the y1, . . . , ym base events.",
        "Recall that for each clause C ∈ φ there is a corresponding security SC.",
        "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
        "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
        "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
        "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
        "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
        "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
        "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
        "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
        "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
        "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
        "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
        "Essentially the same analysis as given above applies to this case.",
        "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
        "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
        "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
        "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
        "Clearly, buying none of the new securities is equivalent to not buying the original security.",
        "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
        "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
        "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
        "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
        "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
        "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
        "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
        "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
        "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
        "Thus, buying a proper subset of these securities will not increase ones payoff.",
        "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
        "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
        "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
        "By a simple case analysis, we have the following.",
        "Observations: 1.",
        "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
        "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
        "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
        "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
        "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
        "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
        "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
        "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
        "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
        "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
        "For the rest of the discussion, we assume that the players follow these constraints.",
        "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
        "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
        "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
        "Applying the same argument to S2 and S3 establishes the claim.",
        "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
        "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
        "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
        "The same argument holds if Y or Z are false. 6.",
        "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
        "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
        "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
        "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
        "Single negative events: ¯Ai .",
        "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
        "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
        "Although this example is contrived, its application is not entirely implausible.",
        "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
        "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
        "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
        "Many possible avenues for future work exist, including 1.",
        "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
        "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
        "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
        "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
        "With few exceptions [3, 22], little is known about computational equilibriums.",
        "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
        "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
        "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
        "REFERENCES [1] Kenneth J. Arrow.",
        "The role of securities in the optimal allocation of risk-bearing.",
        "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
        "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
        "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
        "Brewer.",
        "Decentralized computation procurement and computational robustness in a smart market.",
        "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
        "Forecasting uncertain events with small groups.",
        "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
        "Theory of Probability: A Critical Introductory Treatment, volume 1.",
        "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
        "Combinatorial auctions: A survey.",
        "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
        "Information incorporation in online in-game sports betting markets.",
        "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
        "Market allocation under uncertainty.",
        "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
        "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
        "A logic for reasoning about probabilities.",
        "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
        "Information aggregation in an experimental market.",
        "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
        "Anatomy of an experimental political stock market.",
        "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
        "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
        "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
        "Informed traders and price variations in the betting market for professional basketball games.",
        "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
        "Decision markets.",
        "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
        "Combinatorial information market design.",
        "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
        "Could gambling save science?",
        "Encouraging an honest consensus.",
        "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
        "Recovering probability distributions from options prices.",
        "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
        "Separating probability elicitation from utilities.",
        "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
        "Theory of Incomplete Markets, Vol. 1.",
        "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
        "Microeconomic Theory.",
        "Oxford University Press, New York, 1995. [21] Noam Nisan.",
        "Bidding and allocation in combinatorial auctions.",
        "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
        "Computationally feasible VCG mechanisms.",
        "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
        "Probabilistic Reasoning in Intelligent Systems.",
        "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
        "The real power of artificial markets.",
        "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
        "Extracting collective probabilistic forecasts from web games.",
        "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
        "Compact securities markets for Pareto optimal reallocation of risk.",
        "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
        "Parimutuel betting markets as information aggregation devices: Experimental results.",
        "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
        "Markets as information gathering tools.",
        "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
        "Rational expectations and the aggregation of diverse information in laboratory security markets.",
        "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
        "Orange juice and weather.",
        "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
        "Winner determination in combinatorial auction generalizations.",
        "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
        "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
        "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
        "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
        "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
        "The arbitrage principle in financial economics.",
        "J.",
        "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
        "Good probability assessors.",
        "J.",
        "Applied Meteorology, 7:751-758, 1968. 155"
    ],
    "translated_text_sentences": [
        "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional.",
        "Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas.",
        "Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social.",
        "El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores.",
        "Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos.",
        "Luego analizamos en detalle el problema de emparejamiento de subastadores.",
        "Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible.",
        "Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas.",
        "Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible.",
        "Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables.",
        "Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1.",
        "Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas.",
        "Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25].",
        "El valor económico de los mercados de valores es doble.",
        "Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados.",
        "Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción.",
        "O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa.",
        "En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros.",
        "Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción.",
        "Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28].",
        "Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores.",
        "Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20].",
        "Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre.",
        "Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004.",
        "Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales.",
        "Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno.",
        "Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5].",
        "Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto.",
        "Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio.",
        "Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo.",
        "Examinamos la complejidad computacional del problema de emparejamiento de subastadores.",
        "Que la longitud de la descripción de todos los valores disponibles sea O(n).",
        "Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible.",
        "Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido.",
        "Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible.",
        "La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado.",
        "La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores.",
        "La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento.",
        "La sección 5 demuestra nuestros resultados centrales de complejidad computacional.",
        "La sección 6 discute la posibilidad de casos especiales tratables.",
        "La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2.",
        "PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100.",
        "En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100.",
        "La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros.",
        "Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es.",
        "Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está.",
        "Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo.",
        "Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana.",
        "En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18].",
        "Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω.",
        "A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente.",
        "Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos.",
        "Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos.",
        "Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos.",
        "Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular).",
        "Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee.",
        "Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto.",
        "Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20].",
        "En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable.",
        "Ningún mercado verdaderamente completo existe o existirá nunca.",
        "Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible.",
        "Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas.",
        "El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1].",
        "El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa.",
        "En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal.",
        "Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo.",
        "Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones.",
        "Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud.",
        "Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores.",
        "Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23].",
        "Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo.",
        "Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente.",
        "Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales.",
        "Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes.",
        "Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes.",
        "Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos.",
        "CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos.",
        "Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B.",
        "Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación.",
        "Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales.",
        "De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales.",
        "Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad.",
        "Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos.",
        "Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum).",
        "El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo.",
        "Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes.",
        "Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera.",
        "El problema central del subastador es maximizar el bienestar social.",
        "También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad.",
        "Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible.",
        "De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2).",
        "Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial.",
        "Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes.",
        "La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo.",
        "Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes.",
        "Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados.",
        "El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta.",
        "En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución.",
        "En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad.",
        "En el límite de muchos comerciantes, se produce una estimación combinada.",
        "Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas.",
        "El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado.",
        "Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales.",
        "Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes.",
        "Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3.",
        "Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia.",
        "Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo.",
        "Abordamos estos problemas a continuación. 146 3.",
        "MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A.",
        "No hay valores predeterminados.",
        "En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos.",
        "Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales.",
        "Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables.",
        "En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán.",
        "En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales.",
        "Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes.",
        "Los algoritmos de aproximación también podrían ser considerados.",
        "El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas).",
        "Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1.",
        "O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores.",
        "En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada.",
        "Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas.",
        "Nuevamente, se podrían considerar algoritmos de aproximación.",
        "En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo.",
        "Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A.",
        "Denotamos los valores φ|ψ.",
        "Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso.",
        "Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso.",
        "Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta.",
        "Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p).",
        "Distinguimos entre órdenes divisibles e indivisibles.",
        "Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1.",
        "Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto.",
        "Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles.",
        "Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω.",
        "La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario.",
        "Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos.",
        "Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi).",
        "Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3.",
        "Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8.",
        "El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O.",
        "Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1).",
        "Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido.",
        "Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi.",
        "También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas.",
        "Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero).",
        "Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0?",
        "En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares.",
        "Que m = minω[Υ ω auc].",
        "En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores.",
        "Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2.",
        "Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3.",
        "Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1.",
        "Dado que todos los componentes son no negativos, los dos pedidos coinciden.",
        "El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada.",
        "Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2.",
        "Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4.",
        "Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador).",
        "Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia.",
        "El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2.",
        "En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia.",
        "Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir.",
        "A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo.",
        "Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2.",
        "Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4.",
        "Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles.",
        "El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas.",
        "Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2.",
        "Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5.",
        "Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible.",
        "El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2).",
        "Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1.",
        "Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra.",
        "Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias.",
        "Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje.",
        "Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0.",
        "Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y).",
        "Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y).",
        "Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje).",
        "En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados.",
        "Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc.",
        "También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador.",
        "Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador.",
        "El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes.",
        "Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones.",
        "ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1.",
        "El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera.",
        "Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n).",
        "Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio.",
        "Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos.",
        "Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta.",
        "Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5.",
        "En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores.",
        "Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta.",
        "También asumimos que n limita el número de valores base.",
        "Consideramos cuatro casos basados en dos parámetros: 1.",
        "Ya sea permitir órdenes divisibles o indivisibles. 2.",
        "El número de valores.",
        "Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados.",
        "Mostramos los siguientes resultados.",
        "Teorema 1.",
        "El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3.",
        "NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4.",
        "Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2.",
        "Tenemos variables αi.",
        "Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0.",
        "Dadas estas restricciones, maximizamos X i αi.",
        "Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0.",
        "Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico.",
        "Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente.",
        "Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción.",
        "Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta.",
        "Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones.",
        "Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero.",
        "En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido.",
        "Esto muestra que el emparejamiento está en co-NP.",
        "Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento.",
        "Corrija una fórmula φ.",
        "Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5.",
        "Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia.",
        "Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia.",
        "Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5.",
        "Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno.",
        "Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible.",
        "Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0.",
        "Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico.",
        "Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores.",
        "La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X.",
        "La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C.",
        "Karp demostró que X3C es NP-completo.",
        "Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}.",
        "Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5.",
        "Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C.",
        "Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez.",
        "Ten en cuenta que |C | = q.",
        "Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia.",
        "En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
        "En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
        "Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento.",
        "Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento.",
        "Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0.",
        "Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia.",
        "Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta.",
        "El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico.",
        "Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A.",
        "La clase Σp 2 contiene tanto NP como coNP.",
        "A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP.",
        "Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP.",
        "Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP.",
        "Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica.",
        "Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento.",
        "Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta.",
        "De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω.",
        "Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2.",
        "Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci.",
        "El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total.",
        "Teorema 2.",
        "El problema de emparejamiento 0-1 es Σp 2-completo.",
        "Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1.",
        "Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2.",
        "Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones).",
        "Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo.",
        "Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF.",
        "Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
        "El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·.",
        "Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF.",
        "Reducimos T∃∀BF a encontrar un emparejamiento.",
        "Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones.",
        "El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados.",
        "Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones).",
        "Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago.",
        "Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición.",
        "El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario.",
        "El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ.",
        "Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores.",
        "Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo).",
        "El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague.",
        "Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original.",
        "Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original.",
        "Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial.",
        "En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles.",
        "Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas).",
        "Para cada variable existencial xi, agregamos valores base adicionales, ni y zi.",
        "También incluimos una pregunta de seguridad base.",
        "En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1.",
        "Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1.",
        "Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1.",
        "A veces nos referimos a una seguridad por su cláusula de pago.",
        "Observación: Podemos considerar de manera aproximada como 0.",
        "Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada.",
        "Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva.",
        "Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo.",
        "Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi).",
        "Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn.",
        "Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
        "Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q).",
        "Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
        "Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar.",
        "Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF.",
        "Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia.",
        "El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará.",
        "Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos.",
        "A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q).",
        "Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán.",
        "Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción.",
        "Supongamos que el comprador compra (¯xi ∧Q).",
        "Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida.",
        "Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado.",
        "Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso.",
        "De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso.",
        "Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero.",
        "Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario.",
        "Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi.",
        "Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar.",
        "El adversario también decide el valor de los eventos base y1, . . . , ym.",
        "Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC.",
        "Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud.",
        "Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
        "Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado.",
        "Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad).",
        "Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan.",
        "Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables.",
        "Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables.",
        "Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos.",
        "En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos.",
        "Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar.",
        "Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar.",
        "Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso.",
        "El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta .",
        "Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q).",
        "Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica).",
        "Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1).",
        "Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original.",
        "Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional.",
        "Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará.",
        "Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera.",
        "Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague.",
        "Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q).",
        "Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional.",
        "Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado.",
        "Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q.",
        "De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q.",
        "Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia.",
        "Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables.",
        "Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones.",
        "Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante.",
        "Mediante un análisis de caso simple, tenemos lo siguiente.",
        "Observaciones: 1.",
        "Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga.",
        "Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3.",
        "Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4.",
        "Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague.",
        "Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S.",
        "Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero.",
        "Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1.",
        "Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto.",
        "También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S.",
        "Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera.",
        "Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones.",
        "A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos.",
        "Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z.",
        "Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1.",
        "Aplicar el mismo argumento a S2 y S3 establece la afirmación.",
        "Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z.",
        "Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1.",
        "Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla.",
        "El mismo argumento se sostiene si Y o Z son falsos. 6.",
        "CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables.",
        "Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables.",
        "Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1.",
        "Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2.",
        "Eventos negativos individuales: ¯Ai.",
        "Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas.",
        "Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo.",
        "Aunque este ejemplo es artificial, su aplicación no es del todo improbable.",
        "Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo.",
        "Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7.",
        "CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas.",
        "Existen muchas posibles vías para trabajos futuros, incluyendo 1.",
        "Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc.",
        "Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3.",
        "Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4.",
        "Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad.",
        "Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales.",
        "Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir.",
        "Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4.",
        "Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8.",
        "REFERENCIAS [1] Kenneth J. Arrow.",
        "El papel de los valores en la asignación óptima de la carga de riesgo.",
        "Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard.",
        "Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado.",
        "Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J.",
        "Cervecero.",
        "Adquisición descentralizada de computación y robustez computacional en un mercado inteligente.",
        "Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman.",
        "Pronóstico de eventos inciertos con grupos pequeños.",
        "En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti.",
        "Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1.",
        "Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra.",
        "Subastas combinatorias: Un estudio.",
        "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence.",
        "Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego.",
        "En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze.",
        "Asignación de mercado bajo incertidumbre.",
        "En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143.",
        "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo.",
        "Una lógica para razonar sobre probabilidades.",
        "Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm.",
        "Agregación de información en un mercado experimental.",
        "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright.",
        "Anatomía de un mercado bursátil político experimental.",
        "Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross.",
        "Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales.",
        "Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber.",
        "Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional.",
        "Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson.",
        "Mercados de decisión.",
        "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson.",
        "Diseño de mercado de información combinatoria.",
        "Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
        "¿Podría el juego salvar a la ciencia?",
        "Fomentando un consenso honesto.",
        "Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein.",
        "Recuperando distribuciones de probabilidad a partir de los precios de opciones.",
        "Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler.",
        "Separando la elicitación de probabilidades de las utilidades.",
        "Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii.",
        "Teoría de los Mercados Incompletos, Vol. 1.",
        "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green.",
        "Teoría microeconómica.",
        "Oxford University Press, Nueva York, 1995. [21] Noam Nisan.",
        "Subasta y asignación en subastas combinatorias.",
        "En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen.",
        "Mecanismos VCG computacionalmente factibles.",
        "En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl.",
        "Razonamiento probabilístico en sistemas inteligentes.",
        "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen.",
        "El verdadero poder de los mercados artificiales.",
        "Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles.",
        "Extrayendo pronósticos probabilísticos colectivos de juegos en línea.",
        "En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman.",
        "Mercados de valores compactos para la reasignación óptima de riesgos de Pareto.",
        "En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang.",
        "Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales.",
        "Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott.",
        "Mercados como herramientas de recopilación de información.",
        "Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder.",
        "Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio.",
        "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
        "Jugo de naranja y clima.",
        "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine.",
        "Determinación del ganador en generalizaciones de subastas combinatorias.",
        "En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz.",
        "¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000.",
        "Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba.",
        "Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías.",
        "Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian.",
        "El principio de arbitraje en economía financiera.",
        "I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish?",
        "Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy.",
        "Buenos evaluadores de probabilidad.",
        "I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate?",
        "Meteorología Aplicada, 7:751-758, 1968. 155"
    ],
    "error_count": 9,
    "keys": {
        "combinatorial betting": {
            "translated_key": "apuestas combinatorias",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "effective probability assessment": {
            "translated_key": "evaluaciones efectivas de probabilidad",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make <br>effective probability assessment</br>s, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Because traders stand to earn a profit if they can make <br>effective probability assessment</br>s, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28]."
            ],
            "translated_annotated_samples": [
                "Debido a que los operadores pueden obtener ganancias si pueden realizar <br>evaluaciones efectivas de probabilidad</br>, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar <br>evaluaciones efectivas de probabilidad</br>, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "arbitrary logical combination": {
            "translated_key": "combinaciones lógicas arbitrarias",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on <br>arbitrary logical combination</br>s of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on <br>arbitrary logical combination</br>s of events, including conditionals."
            ],
            "translated_annotated_samples": [
                "Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a <br>combinaciones lógicas arbitrarias</br> de eventos, incluyendo condicionales."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a <br>combinaciones lógicas arbitrarias</br> de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "compound security": {
            "translated_key": "valor compuesto",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a <br>compound security</br> A ∧ B that pays off $1 iff both A and B occur, or a <br>compound security</br> A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a <br>compound security</br> A ∧ B that pays off $1 iff both A and B occur, or a <br>compound security</br> A|B ."
            ],
            "translated_annotated_samples": [
                "Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un <br>valor compuesto</br> A ∧ B que se paga $1 si ocurren tanto A como B, o un <br>valor compuesto</br> A|B."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un <br>valor compuesto</br> A ∧ B que se paga $1 si ocurren tanto A como B, o un <br>valor compuesto</br> A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "bayesian network": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to <br>bayesian network</br> representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a <br>bayesian network</br> or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "The authors show that in some cases the market can be structured and compacted in analogy to <br>bayesian network</br> representations of joint probability distributions [23].",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a <br>bayesian network</br> or other compact representation."
            ],
            "translated_annotated_samples": [
                "Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de <br>redes Bayesianas</br> de distribuciones de probabilidad conjunta [23].",
                "El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una <br>red bayesiana</br> u otra representación compacta."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de <br>redes Bayesianas</br> de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una <br>red bayesiana</br> u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    "redes Bayesianas",
                    "red bayesiana"
                ]
            ]
        },
        "combined-value trading": {
            "translated_key": "negociación de valor combinado",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call <br>combined-value trading</br> (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through <br>combined-value trading</br> mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call <br>combined-value trading</br> (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "Inducing liquidity in thin financial markets through <br>combined-value trading</br> mechanisms."
            ],
            "translated_annotated_samples": [
                "Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman <br>negociación de valor combinado</br> (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales.",
                "Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de <br>negociación de valor combinado</br>."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman <br>negociación de valor combinado</br> (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de <br>negociación de valor combinado</br>. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "approximation algorithm": {
            "translated_key": "algoritmos de aproximación",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, <br>approximation algorithm</br>s might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Again, <br>approximation algorithm</br>s might be considered."
            ],
            "translated_annotated_samples": [
                "Nuevamente, se podrían considerar <br>algoritmos de aproximación</br>."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar <br>algoritmos de aproximación</br>. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "payoff vector": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a <br>payoff vector</br> Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding <br>payoff vector</br> is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers <br>payoff vector</br> is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers <br>payoff vector</br> the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers <br>payoff vector</br> (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers <br>payoff vector</br> is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Every order o can be translated into a <br>payoff vector</br> Υ across all states ω ∈ Ω.",
                "The corresponding <br>payoff vector</br> is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers <br>payoff vector</br> is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers <br>payoff vector</br> the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers <br>payoff vector</br> (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 ."
            ],
            "translated_annotated_samples": [
                "Cada orden o puede ser traducido en un <br>vector de pagos</br> Υ a través de todos los estados ω ∈ Ω.",
                "El <br>vector de pagos</br> correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O.",
                "Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el <br>vector de pago</br> del subastador es: Υsub = X Υi∈P −αiΥi.",
                "También llamamos al <br>vector de pago</br> de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas.",
                "Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El <br>vector de pago</br> del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un <br>vector de pagos</br> Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El <br>vector de pagos</br> correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el <br>vector de pago</br> del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al <br>vector de pago</br> de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El <br>vector de pago</br> del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. ",
            "candidates": [],
            "error": [
                [
                    "vector de pagos",
                    "vector de pagos",
                    "vector de pago",
                    "vector de pago",
                    "vector de pago"
                ]
            ]
        },
        "tractable case": {
            "translated_key": "casos útiles y manejables",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful <br>tractable case</br>s certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Although we have not systematically explored the possibilities, the potential for useful <br>tractable case</br>s certainly exists."
            ],
            "translated_annotated_samples": [
                "Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para <br>casos útiles y manejables</br>."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para <br>casos útiles y manejables</br>. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "base security": {
            "translated_key": "seguridad base",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding <br>base security</br> (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a <br>base security</br> Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "For each of the variables {xi}, {yi} in φ, we add a corresponding <br>base security</br> (with the same labels).",
                "We also include a <br>base security</br> Q."
            ],
            "translated_annotated_samples": [
                "Para cada una de las variables {xi}, {yi} en φ, agregamos una <br>seguridad base</br> correspondiente (con las mismas etiquetas).",
                "También incluimos una pregunta de <br>seguridad base</br>."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una <br>seguridad base</br> correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de <br>seguridad base</br>. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "compound security market": {
            "translated_key": "mercado de valores compuesto",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "computational complexity of match": {
            "translated_key": "complejidad computacional del emparejamiento",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the <br>computational complexity of match</br>ing for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the <br>computational complexity of match</br>ing for securities based on logical formulas."
            ],
            "translated_annotated_samples": [
                "CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la <br>complejidad computacional del emparejamiento</br> de valores basado en fórmulas lógicas."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la <br>complejidad computacional del emparejamiento</br> de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "combinatorial bet": {
            "translated_key": "apuesta combinatoria",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "trade in financial instrument base on logical formula": {
            "translated_key": "negociar instrumentos financieros basados en fórmulas lógicas",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "risk allocation": {
            "translated_key": "asignación de riesgos",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "information aggregation": {
            "translated_key": "agregación de información",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "<br>information aggregation</br> in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as <br>information aggregation</br> devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "<br>information aggregation</br> in an experimental market.",
                "Parimutuel betting markets as <br>information aggregation</br> devices: Experimental results."
            ],
            "translated_annotated_samples": [
                "Agregación de información en un mercado experimental.",
                "Mercados de apuestas parimutuas como dispositivos de <br>agregación de información</br>: Resultados experimentales."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de <br>agregación de información</br>: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "hedge": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to <br>hedge</br> risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to <br>hedge</br> risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to <br>hedge</br> against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to <br>hedge</br> against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any <br>hedge</br> or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to <br>hedge</br> risk and to profit (in expectation) on subjective predictions.",
                "First, they allow traders to <br>hedge</br> risk, or to insure against undesirable outcomes.",
                "Or the owner of a house may purchase an insurance contract to <br>hedge</br> against unforeseen damage to the house.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to <br>hedge</br> against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any <br>hedge</br> or speculation it desires."
            ],
            "translated_annotated_samples": [
                "Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto <br>cubrir el riesgo</br> como obtener beneficios (en expectativa) en base a predicciones subjetivas.",
                "Primero, permiten a los comerciantes <br>cubrir el riesgo</br>, o asegurarse contra resultados no deseados.",
                "O el propietario de una casa puede adquirir un contrato de seguro para <br>protegerse</br> contra daños imprevistos en la casa.",
                "Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular).",
                "Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier <br>cobertura</br> o especulación que desee."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto <br>cubrir el riesgo</br> como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes <br>cubrir el riesgo</br>, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para <br>protegerse</br> contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier <br>cobertura</br> o especulación que desee. ",
            "candidates": [],
            "error": [
                [
                    "cubrir el riesgo",
                    "cubrir el riesgo",
                    "protegerse",
                    "cobertura"
                ]
            ]
        },
        "speculate": {
            "translated_key": "especular",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to <br>speculate</br>, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or <br>speculate</br> upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Second, securities markets allow traders to <br>speculate</br>, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or <br>speculate</br> upon)."
            ],
            "translated_annotated_samples": [
                "En segundo lugar, los mercados de valores permiten a los operadores <br>especular</br>, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros.",
                "Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o <br>especular</br>)."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores <br>especular</br>, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o <br>especular</br>). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una apuesta arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "bet": {
            "translated_key": "apuesta",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary <br>bet</br> on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [
                "Compound securities allow bidders to construct an arbitrary <br>bet</br> on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events."
            ],
            "translated_annotated_samples": [
                "Los valores compuestos permiten a los postores construir una <br>apuesta</br> arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos."
            ],
            "translated_text": "Apuestas al estilo booleano: Un marco para negociar en valores basados en fórmulas lógicas. Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 RESUMEN Desarrollamos un marco para negociar en valores compuestos: instrumentos financieros que pagan en función de los resultados de afirmaciones arbitrarias en lógica proposicional. Comprar o vender valores, que pueden considerarse como apostar a favor o en contra de un resultado futuro particular, permite a los agentes tanto cubrir el riesgo como obtener beneficios (en expectativa) en base a predicciones subjetivas. Un mercado de valores compuestos permite a los agentes realizar apuestas sobre combinaciones booleanas arbitrarias de eventos, lo que les permite alcanzar de manera más cercana su exposición óptima al riesgo, y permite que el mercado en su conjunto se acerque más al óptimo social. El intercambio por permitir tal expresividad radica en la complejidad de los problemas de optimización de los agentes y subastadores. Desarrollamos y motivamos el concepto de un mercado de valores compuestos, presentando el marco a través de una serie de definiciones formales y ejemplos. Luego analizamos en detalle el problema de emparejamiento de subastadores. Mostramos que, con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Mostramos que este último resultado de dificultad se mantiene incluso bajo severas restricciones de lenguaje en las ofertas. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. Breve discusión sobre algoritmos de emparejamiento y casos especiales manejables. Categorías y Descriptores de Asignaturas F.2.2 [Teoría de la Computación]: Análisis de Algoritmos y Complejidad de Problemas-Algoritmos y Problemas No Numéricos; J.4 [Aplicaciones Informáticas]: Ciencias Sociales y del Comportamiento-Economía Términos Generales Algoritmos, Economía, Teoría. 1. Los mercados de valores permiten a los traders apostar efectivamente sobre los resultados de proposiciones futuras inciertas. Ejemplos incluyen mercados de valores como NASDAQ, mercados de opciones como CBOE [17], mercados de futuros como CME [30], otros mercados de derivados, mercados de seguros, mercados de valores políticos [11, 12], mercados de apuestas deportivas [7, 13, 32], mercados de carreras de caballos [33], mercados de futuros de ideas [16], mercados de decisiones [14] e incluso juegos de mercado [4, 24, 25]. El valor económico de los mercados de valores es doble. Primero, permiten a los comerciantes cubrir el riesgo, o asegurarse contra resultados no deseados. Por ejemplo, el propietario de una acción podría comprar una opción de venta (el derecho a vender la acción a un precio específico) para protegerse contra una caída en el valor de la acción. O el propietario de una casa puede adquirir un contrato de seguro para protegerse contra daños imprevistos en la casa. En segundo lugar, los mercados de valores permiten a los operadores especular, o obtener una ganancia esperada subjetiva cuando los precios de mercado no reflejan su evaluación de la probabilidad de los resultados futuros. Por ejemplo, un operador podría comprar una opción de compra si cree que es muy probable que el precio de la acción subyacente aumente, independientemente de la exposición al riesgo por cambios en el precio de la acción. Debido a que los operadores pueden obtener ganancias si pueden realizar evaluaciones efectivas de probabilidad, a menudo los precios en los mercados financieros generan pronósticos agregados muy precisos sobre eventos futuros [10, 29, 27, 28]. Los mercados de valores reales tienen estructuras de pagos complejas con varios disparadores. Sin embargo, todos estos pueden ser modelados como colecciones de valores más básicos o atómicos de Arrow-Debreu [1, 8, 20]. Una unidad de un valor de Arrow-Debreu paga un dólar si y solo si ocurre un evento binario correspondiente; no paga nada si el evento no ocurre. Por ejemplo, una unidad de un valor denominado Acme100 podría pagar $1 si las acciones de Acme están por encima de $100 el 4 de enero de 2004. Una opción de acciones de Acme, tal como se definiría en un intercambio financiero, puede ser considerada como un portafolio de valores atómicos. En este documento, desarrollamos y analizamos un marco para operar en mercados de valores compuestos con pagos contingentes a combinaciones lógicas arbitrarias de eventos, incluyendo condicionales. Por ejemplo, dado los eventos binarios A, B y C, un operador podría ofertar para comprar tres unidades de un valor denominado A ∧ ¯B ∨ C que paga $1 si el evento compuesto A ∧ ¯B ∨ C ocurre por treinta centavos cada uno. Otro comerciante puede ofertar vender seis unidades de un valor A|C que paga $1 si y solo si A ocurre por cincuenta y cinco centavos cada uno, condicionado al evento C ocurriendo, lo que significa que la transacción se revoca si C no ocurre (es decir, no se otorga ningún pago y se reembolsa el precio del valor) [5]. Las ofertas también pueden ser divisibles, lo que significa que los licitadores están dispuestos a aceptar menos de la cantidad solicitada, o indivisibles, lo que significa que las ofertas deben ser cumplidas ya sea completamente o no en absoluto. Dado un conjunto de tales ofertas, el subastador se enfrenta a un problema de emparejamiento complejo para decidir qué ofertas son aceptadas, cuántas unidades y a qué precio. Normalmente, el subastador busca no asumir ningún riesgo propio, simplemente emparejando intercambios aceptables entre los postores, pero también consideramos formulaciones alternativas donde el subastador actúa como creador de mercado dispuesto a aceptar cierto riesgo. Examinamos la complejidad computacional del problema de emparejamiento de subastadores. Que la longitud de la descripción de todos los valores disponibles sea O(n). Con n eventos, el problema de emparejamiento es co-NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. Esta dureza completa Σp 2 se mantiene incluso cuando el lenguaje de las ofertas está significativamente restringido. Con log n eventos, el problema es polinómico en el caso divisible y NP-completo en el caso indivisible. La sección 2 presenta información de antecedentes necesaria, motivación y trabajo relacionado. La sección 3 describe formalmente nuestro marco para los valores compuestos y define el problema de emparejamiento de los subastadores. La sección 4 discute brevemente los algoritmos naturales para resolver el problema de emparejamiento. La sección 5 demuestra nuestros resultados centrales de complejidad computacional. La sección 6 discute la posibilidad de casos especiales tratables. La sección 7 concluye con un resumen y algunas ideas sobre direcciones futuras. 2. PRELIMINARES 2.1 Antecedentes y notación Imagina un mundo donde solo hay dos eventos futuros inciertos de alguna consecuencia: (1) el evento de que la casa de alguien sea alcanzada por un rayo antes del 31 de diciembre de 2003, denotado como alcanzada, y (2) el evento de que el precio de las acciones de Acme supere los $100 antes del 4 de enero de 2004, denotado como acme100. En este mundo simple hay cuatro posibles estados futuros: todas las combinaciones posibles de los resultados de los eventos binarios: golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100, golpeado ∧ acme100. La cobertura del riesgo puede ser considerada como una acción de mover dinero entre varios posibles estados futuros. Por ejemplo, técnicamente, una opción es un portafolio de infinitos valores atómicos, aunque puede ser modelada aproximadamente con un número finito. Asegurar una casa transfiere dinero de estados futuros donde la huelga no es verdadera a estados donde sí lo es. Vender un valor denominado acme100, que paga $1 si y solo si ocurre el evento acme100, transfiere dinero de estados futuros donde el precio de Acme está por encima de $100 el 4 de enero a estados donde no lo está. Especular también es un acto de transferir dinero entre estados futuros, aunque generalmente se asocia con maximizar el rendimiento esperado en lugar de reducir el riesgo. Por ejemplo, apostar en un equipo de fútbol traslada dinero del estado en el que el equipo pierde al estado en el que el equipo gana. En la práctica, los agentes se dedican a una mezcla de cobertura y especulación, y no hay una línea divisoria clara entre ambas [18]. Todos los posibles resultados futuros forman un espacio de estados Ω, que consiste en estados mutuamente excluyentes y exhaustivos ω ∈ Ω. A menudo, una forma más natural de pensar en posibles resultados futuros es como un espacio de eventos A de eventos linealmente independientes A ∈ A que pueden superponerse arbitrariamente. Entonces, en nuestro ejemplo de juguete, struck ∧ acme100 es uno de los cuatro estados disjuntos, mientras que struck es uno de los dos eventos. Ten en cuenta que un conjunto de n eventos linealmente independientes define un espacio de estados Ω de tamaño 2n que consiste en todas las posibles combinaciones de resultados de eventos. Por el contrario, cualquier espacio de estados Ω puede ser descompuesto en log |Ω| eventos. Supongamos que A cubre exhaustivamente todos los resultados futuros significativos (es decir, abarca todas las eventualidades contra las que los agentes puedan querer protegerse y/o especular). Entonces, la existencia de 2n valores seguros linealmente independientes, llamados un mercado completo, permite a los agentes distribuir su riqueza de manera arbitraria entre los estados futuros. Un agente puede crear cualquier cobertura o especulación que desee. Bajo condiciones clásicas, los agentes que operan en un mercado completo forman un equilibrio donde el riesgo se asigna de manera óptima de Pareto. Si el mercado es incompleto, lo que significa que consta de menos de 2n valores seguros linealmente independientes, entonces en general los agentes no pueden construir coberturas arbitrarias y las asignaciones de equilibrio pueden no ser óptimas [1, 8, 19, 20]. En entornos del mundo real, el número de eventos significativos n es grande y, por lo tanto, el número de valores requeridos para la completitud es intratable. Ningún mercado verdaderamente completo existe o existirá nunca. Una de las motivaciones detrás de los mercados de valores de activos compuestos es proporcionar un mecanismo que respalde la transferencia de riesgos utilizando el menor número de transacciones posible. Los valores compuestos permiten un alto grado de expresividad en la construcción de ofertas. El intercambio por una mayor expresividad es una mayor complejidad computacional, tanto desde el punto de vista de los postores como de los subastadores. 2.2 Trabajo relacionado La búsqueda de reducir el número de instrumentos financieros necesarios para respaldar una asignación óptima de riesgos se remonta al trabajo original de Arrow [1]. El requisito mencionado anteriormente de solo 2n valores mobiliarios linealmente independientes es en sí mismo una reducción de la formulación más directa. En una economía con k bienes estándar, el mercado completo más sencillo contiene k·2n valores, cada uno pagando en un bien bajo una realización estatal. Arrow [1] demostró que un mercado donde los valores y bienes están esencialmente separados, con 2n valores que se pagan en un único bien numerario más k mercados al contado en los bienes estándar, también es completo. Para nuestros propósitos, solo necesitamos considerar el mercado de valores. Por valores linealmente independientes, nos referimos a que los vectores de pagos en todos los estados futuros de estos valores son linealmente independientes. Varian [34] muestra que un mercado completo se puede construir utilizando menos de 2n valores, reemplazando los valores faltantes con opciones. Sin embargo, el número de instrumentos financieros-valores linealmente independientes más opciones debe ser 2n para garantizar la completitud. Aunque el requisito de 2n instrumentos financieros no puede relajarse si se quiere garantizar la completitud en todas las circunstancias, Pennock y Wellman [26] exploran condiciones bajo las cuales un mercado de valores más pequeño puede ser operacionalmente completo, lo que significa que su equilibrio es óptimo de Pareto con respecto a los agentes involucrados, incluso si el mercado contiene menos de 2n valores. Los autores demuestran que en algunos casos el mercado puede estar estructurado y compactado de manera análoga a las representaciones de redes Bayesianas de distribuciones de probabilidad conjunta [23]. Muestran que, si todas las independencias de los agentes neutrales al riesgo coinciden con las independencias codificadas en la estructura del mercado, entonces el mercado es operacionalmente completo. Para colecciones de agentes, todos con aversión constante al riesgo absoluto, el acuerdo sobre independencias de Markov es suficiente. Bossaerts, Fine y Ledyard [2] desarrollan un mecanismo al que llaman negociación de valor combinado (CVT) que permite a los operadores ordenar un portafolio arbitrario de valores en una sola oferta, en lugar de dividir la orden en una secuencia de ofertas en valores individuales. Si se acepta el pedido de cartera, todas las operaciones implícitas en los valores individuales se ejecutan simultáneamente, eliminando así el llamado riesgo de ejecución de que los precios cambien en medio de una secuencia planificada de órdenes. Los autores realizan experimentos de laboratorio que demuestran que, incluso en mercados con poca liquidez donde el comercio secuencial ordinario falla, el CVT respalda una fijación de precios y asignación eficientes. Ten en cuenta que el CVT difiere significativamente del comercio de valores compuestos. CVT permite el comercio instantáneo de cualquier combinación lineal de valores, mientras que los valores compuestos permiten valores más expresivos que pueden codificar combinaciones booleanas no lineales de eventos. Por ejemplo, CVT puede permitir que un agente ordene los valores A y B en un paquete que se paga como una combinación lineal de A y B, pero CVT no permitirá la construcción de un valor compuesto A ∧ B que se paga $1 si ocurren tanto A como B, o un valor compuesto A|B. Relacionados con CVT se encuentran las subastas combinatorias [6, 21] y los intercambios [31], mecanismos que recientemente han recibido bastante atención en las literaturas de economía y ciencias de la computación. Las subastas combinatorias permiten a los postores asignar valores distintos a todos los posibles conjuntos de bienes en lugar de solo a bienes individuales. De esta manera, los postores pueden expresar relaciones de sustitución y complementariedad entre bienes que no pueden ser expresadas en subastas estándar paralelas o secuenciales. Los valores compuestos difieren de las subastas combinatorias en concepto y complejidad. Los valores compuestos permiten a los postores construir una <br>apuesta</br> arbitraria sobre cualquiera de los 22n posibles eventos compuestos expresables como funciones lógicas de los n eventos base, condicionales a cualquier otro de los 22n eventos compuestos. Los agentes optimizan en función de sus propias probabilidades subjetivas y actitud hacia el riesgo (y en general, sus creencias sobre las creencias y utilidades de otros agentes, ad infinitum). El problema central del subastador es identificar oportunidades de arbitraje: es decir, emparejar apuestas sin asumir ningún riesgo. Las subastas combinatorias, por otro lado, permiten ofertas en cualquiera de los 2n paquetes de n bienes. Normalmente, una unidad de cada uno paga $2 si ocurren tanto A como B, $1 si ocurre A o B (pero no ambos), y $0 en caso contrario. La incertidumbre, y por lo tanto el riesgo, no se considera. El problema central del subastador es maximizar el bienestar social. También hay que tener en cuenta que los problemas se encuentran en diferentes clases de complejidad. Si bien despejar una subasta combinatoria es polinomial en el caso divisible y NP-completo en el caso indivisible, el emparejamiento en un mercado de valores compuestos es NP-completo en el caso divisible y Σp 2-completo en el caso indivisible. De hecho, incluso el problema de decidir si dos ofertas de valores compuestos coinciden, incluso en el caso divisible, es NP-completo (ver Sección 5.2). Existe una forma en la que es posible traducir nuestro problema de emparejamiento para valores compuestos en un problema análogo para liquidar intercambios combinatorios de dos lados [31] de tamaño exponencial. Específicamente, si consideramos la recompensa en un estado particular como un bien, entonces los valores compuestos pueden ser vistos como paquetes de (cantidades fraccionarias de) tales bienes. La restricción del balance de material que enfrenta el subastador combinatorio corresponde a una limitación que impide al subastador de valores compuestos asumir cualquier riesgo. Ten en cuenta que esta traducción no es útil para abordar el problema de coincidencia de seguridad compuesta, ya que el intercambio combinatorio resultante tiene un número exponencial de bienes. Hanson [15] desarrolla un mecanismo de mercado llamado regla de puntuación de mercado que es especialmente adecuado para permitir apuestas en un número combinatorio de resultados. El mecanismo mantiene una distribución de probabilidad conjunta sobre los 2n estados, ya sea de forma explícita o implícita utilizando una red bayesiana u otra representación compacta. En cualquier momento, cualquier operador que crea que las probabilidades son incorrectas puede cambiar cualquier parte de la distribución al aceptar un boleto de lotería que paga de acuerdo con una regla de puntuación (por ejemplo, la regla de puntuación logarítmica), siempre y cuando ese operador también esté de acuerdo en pagarle a la persona más reciente que cambió la distribución. En el límite de un único operador, el mecanismo se comporta como una regla de puntuación, adecuada para sondear a un único agente sobre su distribución de probabilidad. En el límite de muchos comerciantes, se produce una estimación combinada. Dado que el mercado siempre tiene un conjunto completo de precios publicados para todos los posibles resultados, el mecanismo evita el problema de los mercados poco líquidos, o la falta de liquidez, que inevitablemente afecta a cualquier mercado que contenga un número exponencial de inversiones alternativas. El mecanismo requiere que un patrocinador pague a la última persona para cambiar la distribución, aunque el pago del patrocinador está limitado. Aunque Hanson ofrece algunas sugerencias iniciales, varios problemas abiertos permanecen, incluyendo métodos eficientes para representar y actualizar la distribución conjunta y registrar las posiciones y carteras de los traders, sin recurrir a algoritmos de tiempo y espacio exponenciales. Fagin, Halpern y Megiddo [9] proporcionan una axiomatización sólida y completa para decidir si los conjuntos de desigualdades probabilísticas son consistentes. Las ofertas para valores compuestos pueden ser consideradas como expresiones de desigualdades probabilísticas: por ejemplo, una oferta para comprar A ∧ B a un precio de 0.3 es una afirmación de que la probabilidad de A ∧ B es mayor a 0.3. Si un conjunto de ofertas de unidades individuales corresponde a un conjunto de desigualdades probabilísticas inconsistentes, entonces hay una coincidencia. Sin embargo, debido a que están interesados en un marco muy diferente, Fagin et al. no consideran varios factores complicados específicos del marco del mercado de valores: a saber, manejar cantidades de oferta multiunidad o fraccionarias, identificar coincidencias, elegir entre múltiples coincidencias y optimizar basándose en probabilidades y actitudes de riesgo. Abordamos estos problemas a continuación. 146 3. MARCO PARA OPERAR CON VALORES COMPUESTOS 3.1 Descripción de alto nivel El conocimiento común entre los agentes es el conjunto de eventos A. No hay valores predeterminados. En cambio, los agentes ofrecen comprar o vender valores de su propio diseño que se pagan en función de combinaciones lógicas de eventos y negaciones de eventos. Los operadores de combinación pueden incluir conjunciones, disyunciones y condicionales. Para todos los propósitos prácticos, es imposible para los agentes comerciar con suficientes valores (2n) para formar un mercado completo, por lo que los agentes deben idear su mejor equilibrio entre el número y la complejidad de sus ofertas, y el grado en que sus riesgos están cubiertos y se realizan apuestas deseables. En su forma más general, el problema es de naturaleza teórica de juegos, ya que lo que un agente debería ofrecer depende de lo que cree que otros agentes aceptarán. En el otro extremo del espectro, una versión simplificada del problema consiste en optimizar ofertas solo en valores actualmente disponibles a precios actuales. Entre estas dos formulaciones hay otros posibles problemas de optimización interesantes. Los algoritmos de aproximación también podrían ser considerados. El subastador se enfrenta a un problema no trivial de emparejar órdenes de compra y venta para maximizar el excedente (el efectivo y los valores restantes después de que se cumplen las ofertas aceptadas). Por ejemplo, las ofertas para vender A1A2 a $0.2 y A1 ¯A2 a $0.1 pueden coincidir con una oferta para comprar A1 a $0.4, con un excedente de $0.1. O una oferta de vender A1 a $0.3 puede coincidir con una oferta de comprar A1A2 a $0.4, con un excedente de $0.1 en efectivo y A1 ¯A2 en valores. En general, un solo valor puede calificar para múltiples coincidencias, pero solo una puede ser transada. Por lo tanto, el subastador debe encontrar el conjunto óptimo de emparejamientos que maximice el excedente, lo cual podría medirse de varias formas. Nuevamente, se podrían considerar algoritmos de aproximación. En otra formulación, el subastador actúa como un creador de mercado dispuesto a asumir cierta cantidad de riesgo. Informalmente, nuestra motivación es proporcionar un mecanismo que permita un alto grado de expresividad en la colocación de coberturas y apuestas, y que también sea capaz de aproximar la asignación óptima de riesgo (mercado completo), equilibrando el número y la complejidad de los valores y transacciones necesarios. 3.2 Descripción formal 3.2.1 Valores Usamos φ y ψ para denotar fórmulas booleanas arbitrarias, o combinaciones lógicas de eventos en A. Denotamos los valores φ|ψ. Los valores pagan $1 si y solo si (iff) φ y ψ son verdaderos, pagan $0 si φ es falso y ψ es verdadero, y son cancelados (es decir, cualquier precio pagado es reembolsado) si ψ es falso. Definimos T ≡ Ω como el evento verdadero y F ≡ ∅ como el evento falso. Abreviamos φ|T como φ. 3.2.2 Órdenes Los Agentes realizan órdenes, denotadas como o, de la forma q unidades de φ|ψ a un precio p por unidad, donde q > 0 implica una orden de compra y q < 0 implica una orden de venta. Suponemos que los agentes que envían órdenes de compra (venta) aceptarán cualquier precio p∗ ≤ p (p∗ ≥ p). Distinguimos entre órdenes divisibles e indivisibles. Los agentes que envíen pedidos divisibles aceptarán cualquier cantidad αq donde 0 < α ≤ 1. Los agentes que envíen pedidos indivisibles aceptarán solo exactamente q unidades, o ninguna en absoluto. Creemos que, dada la naturaleza de lo que se está negociando (dólares contingentes al estado), la mayoría de los agentes estarán contentos de negociar utilizando órdenes divisibles. Cada orden o puede ser traducido en un vector de pagos Υ a través de todos los estados ω ∈ Ω. La ganancia Υ ω en el estado ω es q · 1ω∈ψ(1ω∈φ − p), donde 1ω∈E es igual a 1 si ω ∈ E y cero en caso contrario. Recuerda que los 2n estados corresponden a las 2n posibles combinaciones de resultados de eventos. Indexamos múltiples órdenes con subíndices (por ejemplo, oi y Υi). Deje que el conjunto de todas las órdenes sea O y el conjunto de todos los vectores de pagos correspondientes sea P. Ejemplo 1. (Traduciendo órdenes en vectores de pagos) Supongamos que |A| = 3. Considera una orden de compra de dos unidades de A2 ∨ A3|A1 a un precio de $0.8. El vector de pagos correspondiente es: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 El problema de emparejamiento La tarea del subastador, llamada el problema de emparejamiento, es determinar qué órdenes aceptar entre todas las órdenes o ∈ O. Sea αi la fracción del orden oi aceptada por el subastador (en el caso de no divisibilidad, αi debe ser 0 o 1; en el caso de divisibilidad, αi puede variar de 0 a 1). Si αi = 0, entonces se considera que el pedido oi ha sido rechazado y no se realizan transacciones relacionadas con este pedido. Para pedidos aceptados (αi > 0), el subastador recibe el dinero perdido por los postores y paga el dinero ganado por los postores, por lo que el vector de pago del subastador es: Υsub = X Υi∈P −αiΥi. También llamamos al vector de pago de los subastadores el vector de excedente, ya que es el dinero (posiblemente contingente al estado) que queda después de que se llenen todas las órdenes aceptadas. Supongamos que el subastador quiere elegir un conjunto de órdenes de manera que esté garantizado no perder dinero en ningún estado futuro, pero que el subastador no necesariamente insiste en obtener un beneficio positivo de la transacción (es decir, el subastador está contento con no perder dinero). Definición 1. (Problema de emparejamiento, caso indivisible) Dado un conjunto de órdenes O, ¿existe αi ∈ {0, 1} con al menos un αi = 1 tal que ∀ω, Υ ω auc ≥ 0? En otras palabras, ¿existe un subconjunto no vacío de órdenes que el subastador pueda aceptar sin riesgo? Si ∀ω, Υ ω auc = c donde c es no negativo, entonces el excedente restante después de procesar esta coincidencia es de c dólares. Que m = minω[Υ ω auc]. En general, procesar una transacción deja m dólares en efectivo y Υ ω auc − m en dólares contingentes al estado, los cuales pueden luego ser convertidos en valores. Ejemplo 2. (Emparejamiento de orden indivisible) Supongamos que |A| = 2. Considera una orden de compra de una unidad de A1A2 a un precio de 0.4 y una orden de venta de una unidad de A1 a un precio de 0.3. Los 147 vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 El vector de pago del subastador (la negación de la suma componente a componente de los dos vectores anteriores) es: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1. Dado que todos los componentes son no negativos, los dos pedidos coinciden. El subastador puede procesar ambas órdenes, dejando un excedente de $0.1 en efectivo y una unidad de A1 ¯A2 en valores. Ahora consideremos el caso divisible, donde la orden puede ser parcialmente completada. Definición 2. (Problema de emparejamiento, caso divisible) Dado un conjunto de órdenes O, ¿existe αi ∈ [0, 1] con al menos un αi > 0 tal que ∀ω, Υ ω auc ≥ 0, 2 Ejemplo 3. (Emparejamiento de órdenes divisibles) Supongamos |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.5, una orden de comprar una unidad de A1A2|A1 ∨ A2 a un precio de $0.5, y una orden de comprar una unidad de A1| ¯A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 Es claro por inspección que ningún subconjunto no vacío de órdenes completas constituye una coincidencia: en todos los casos donde αi ∈ {0, 1} (excepto cuando todos los αi = 0), al menos un estado suma una cantidad positiva (negativa para el subastador). Sin embargo, si α1 = α2 = 3/5 y α3 = 1, entonces el vector de pagos del subastador es: Υsub = − 3/5 Υ1 − 3/5 Υ2 − Υ3 = 0, 0, 0, 0.1, constituyendo una coincidencia. El subastador puede procesar 3/5 de los pedidos primero y segundo, y todos del tercer pedido, dejando un excedente de 0.1 unidades de ¯A1 ¯A2. En este ejemplo, existe una coincidencia divisible aunque una coincidencia indivisible no sea posible; examinamos la distinción en detalle en la Sección 5, donde separamos los dos problemas de coincidencia en clases de complejidad distintas. Los problemas de coincidencia definidos anteriormente son problemas de decisión: la tarea es solo mostrar la existencia o no existencia de una coincidencia. Sin embargo, puede haber múltiples opciones entre las cuales el subastador puede elegir. A veces las opciones son equivalentes desde la perspectiva de los subastadores; alternativamente, se puede utilizar una función objetivo para encontrar una coincidencia óptima de acuerdo con ese objetivo. Ejemplo 4. (Alternativas de subastador I) Supongamos que |A| = 2. Considerar una orden de vender una unidad de A1 a un precio de $0.7, una orden de vender una unidad de A2 a un precio de $0.7, una orden de comprar una unidad de A1A2 a un precio de $0.4, una orden de comprar una unidad de A1 ¯A2 a un precio de $0.4, y una orden de comprar una unidad de ¯A1A2 a un precio de $0.4. Los vectores de pago correspondientes son: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Considera el caso de bienes indivisibles. El subastador podría optar por aceptar las ofertas 1, 3 y 4 juntas, o el subastador podría optar por aceptar las ofertas 2, 3 y 5 juntas. Ambos constituyen partidos, y de hecho ambos generan ganancias idénticas (Υauc = 0.1, 0.1, 0.1, 0.1, o $0.1 en efectivo) para el subastador. Ejemplo 5. (Alternativas del subastador II) Supongamos que |A| = 2. Considerar una orden de vender dos unidades de A1 a un precio de $0.6, una orden de comprar una unidad de A1A2 a un precio de $0.3, y una orden de comprar una unidad de A1 ¯A2 a un precio de $0.5. Los vectores de pago correspondientes son: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Considera el caso divisible. El subastador podría optar por aceptar una unidad de cada una de las tres ofertas, lo que resultaría en un pago al subastador de $0.2 en efectivo (Υsub = 0.2, 0.2, 0.2, 0.2). Alternativamente, el subastador podría optar por aceptar 4/3 unidades de la oferta 1, y una unidad de cada una de las ofertas 2 y 3, lo que resultaría en un beneficio para el subastador de 1/3 unidades de la seguridad A1. Ambas opciones constituyen coincidencias (de hecho, aceptar cualquier cantidad de unidades de oferta 1 entre 1 y 4/3 puede ser parte de una coincidencia), aunque dependiendo del objetivo del subastador, una opción podría ser preferida sobre la otra. Por ejemplo, si el subastador cree que A1 es muy probable que ocurra, puede preferir aceptar 4/3 unidades de la oferta 1. Hay muchos criterios posibles para que el subastador decida entre las coincidencias, todos los cuales parecen razonables en algunas circunstancias. Una cantidad natural a maximizar es el volumen de comercio entre postores; otra es la utilidad del subastador, ya sea con o sin la restricción de arbitraje. Definición 3. (Problema de maximización del comercio) Dado un conjunto de pedidos indivisibles (divisibles) O, elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X i αiqi, bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Otra variación razonable es maximizar el porcentaje total de pedidos completados, o P i αi, bajo la misma restricción (libre de riesgo) de que ∀ω, Υ ω auc ≥ 0. Definición 4. (Problema de maximización de utilidad sin riesgo para el subastador) Permita que la probabilidad subjetiva del subastador para cada estado ω sea Pr(ω), y permita que la utilidad del subastador para y dólares sea u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u(Υ ω auc), 148 bajo la restricción de que ∀ω, Υ ω auc ≥ 0. Definición 5. (Problema de maximización de utilidad estándar del subastador) Sea la probabilidad subjetiva del subastador para cada estado ω Pr(ω), y sea la utilidad del subastador para y dólares u(y). Dado un conjunto de órdenes O indivisibles (divisibles), elige αi ∈ {0, 1} (αi ∈ [0, 1]) para maximizar X ω∈Ω Pr(ω)u Υ ω auc. Esta última función objetivo elimina la restricción libre de riesgo (arbitraje). En este caso, el subastador es un creador de mercado con creencias sobre la probabilidad de resultados, y el subastador puede llegar a perder dinero en algunos resultados. Otras variaciones y otros criterios de optimización parecen razonables, incluyendo el bienestar social, etc. También parece razonable suponer que el excedente se comparta entre los postores y el subastador, en lugar de ser retenido únicamente por el subastador. Esto es análogo a elegir un precio de transacción común en una subasta doble (por ejemplo, el punto medio entre el precio de la oferta y el precio de la demanda), en lugar de que el comprador pague el precio de la oferta y el vendedor reciba el precio de la demanda, con la diferencia yendo al subastador. El problema se vuelve más complicado al dividir los valores excedentes, en parte porque son valorados de manera diferente por distintos agentes. Formular reglas de reparto razonables y examinar las propiedades de incentivos resultantes parece ser un camino rico y prometedor para futuras investigaciones. ALGORITMOS DE EMPAREJAMIENTO El algoritmo directo para resolver el problema de emparejamiento divisible es la programación lineal; establecemos un programa lineal apropiado en la Sección 5.1. El algoritmo directo para resolver el problema de emparejamiento indivisible es la programación entera. Con n eventos, para configurar los programas lineales o enteros apropiados, simplemente escribir los vectores de pago de manera directa requiere un espacio de O(2n). Existe la esperanza de que algoritmos especializados que aprovechan la estructura entre las ofertas puedan tener un mejor rendimiento en términos de complejidad temporal y espacial en el caso promedio. Por ejemplo, en algunos casos se pueden identificar coincidencias utilizando técnicas de reducción lógica, sin necesidad de escribir los vectores completos de pagos. Por lo tanto, se puede identificar una coincidencia entre las siguientes ofertas: • vender 1 de A1A2 a $0.2 • vender 1 de A1 ¯A2 a $0.1 • comprar 1 de A1 a $0.4 al reducir las dos primeras ofertas a una oferta equivalente de vender A1 a $0.3 que coincide claramente con la tercera oferta. Formalizar un algoritmo de reducción lógica para el emparejamiento, u otros algoritmos que puedan explotar la estructura especial entre las ofertas, es un camino prometedor para trabajos futuros. 5. En esta sección examinamos la complejidad computacional del problema de emparejamiento de subastadores. Aquí n se refiere al tamaño de la entrada de problemas que incluye descripciones de todas las órdenes de compra y venta. También asumimos que n limita el número de valores base. Consideramos cuatro casos basados en dos parámetros: 1. Ya sea permitir órdenes divisibles o indivisibles. 2. El número de valores. Consideramos dos posibilidades: (a) valores base O(log n) que producen un número polinómico de estados. (b) Un número ilimitado de valores base que producen un número exponencial de estados. Mostramos los siguientes resultados. Teorema 1. El problema de emparejamiento es 1. computable en tiempo polinómico para valores de seguridad en base O(log n) con órdenes divisibles. 2. co-NP-completo para valores de seguridad ilimitados con órdenes divisibles. 3. NP-completo para valores de seguridad base O(log n) con órdenes indivisibles. 4. Σp 2-completo para valores ilimitados con órdenes indivisibles. 5.1 Pequeño número de valores con órdenes divisibles. Podemos construir un programa lineal basado en la Definición 2. Tenemos variables αi. Para cada i, tenemos 0 ≤ αi ≤ 1 y para cada estado ω en Ω tenemos la restricción Υ ω auc = X i −αiΥ ω i ≥ 0. Dadas estas restricciones, maximizamos X i αi. Un conjunto de órdenes tiene una coincidencia exacta cuando P i αi > 0. Con seguridad de base O(log n), tenemos |Ω| acotado por un polinomio, por lo que podemos resolver este programa lineal en tiempo polinómico. Se debe tener en cuenta que se podría argumentar que se debe maximizar alguna combinación lineal de los −Υ ω i para maximizar el excedente. Sin embargo, este enfoque no encontrará emparejamientos que tengan un excedente cero. 5.2 Gran cantidad de valores con órdenes divisibles. Con un número ilimitado de valores base, el programa lineal presentado en la Sección 5.1 tiene un número exponencial de ecuaciones de restricción. Cada restricción es breve para describir y fácilmente computable dado ω. Deje m ≤ n ser el número total de órdenes de compra y venta. Según la teoría de la programación lineal, se puede imponer un límite superior a la función objetivo mediante una colección de m + 1 restricciones. Entonces, si no existe ninguna coincidencia, deben existir m + 1 restricciones que obliguen a que todos los αi sean cero. En tiempo polinómico no determinista podemos adivinar estas restricciones y resolver el programa lineal reducido. Esto muestra que el emparejamiento está en co-NP. Para demostrar la co-NP-completitud reducimos el problema NP-completo de la satisfactibilidad de fórmulas booleanas a la no existencia de un emparejamiento. Corrija una fórmula φ. Que las bases de seguridad sean las variables de φ y considera la seguridad única φ con una orden de compra de 0.5. Si la fórmula φ es satisfacible, entonces hay algún estado con una ganancia de 0.5 y ninguna unidad fraccionaria del valor φ es una coincidencia. Si la fórmula φ no es satisfacible, entonces cada estado tiene una ganancia del subastador de 0.5 y una unidad única de la seguridad φ es una coincidencia. Se podría argumentar que si la fórmula φ no es satisfacible, entonces ningún comprador completamente racional querría comprar φ por un costo de 0.5. Podemos resolver este problema añadiendo valores base auxiliares, A y B, y definiendo dos valores τ = (φ ∧ A) ∨ (A ∧ B) con órdenes de compra separadas de 0.5 en cada uno. Si φ fuera satisfacible, entonces en el estado correspondiente a la asignación satisfactoria y tanto A como B fueran verdaderos, τ y τ tendrían un beneficio para los subastadores de -0.5, por lo que ni siquiera puede existir un emparejamiento no divisible. Si φ no fuera satisfacible, entonces una unidad de cada uno sería una coincidencia, ya que en cada estado al menos uno de τ o τ es falso. 5.3 Pequeño número de valores con órdenes indivisibles. Este caso se ve fácilmente que está en NP: simplemente adivine no determinísticamente un subconjunto no vacío S de órdenes y verifique para cada estado ω en Ω que Υ ω auc = X i∈S −Υ ω i ≥ 0. Dado que |Ω| y |S| están acotados por un polinomio en n, la verificación se puede realizar en tiempo polinómico. Para demostrar que el emparejamiento es NP-completo, reducimos el problema NP-completo EXACT COVER BY 3-SETS (X3C) a un emparejamiento de valores. La entrada para X3C consiste en un conjunto X y una colección C de subconjuntos de 3 elementos de X. La entrada (X, C) está en X3C si C contiene una cobertura exacta de X, es decir, existe una subcolección C de C tal que cada elemento de X ocurre exactamente en un miembro de C. Karp demostró que X3C es NP-completo. Supongamos que tenemos una instancia (X, C) con el vector X = {x1, . . . , x3q} y C = {c1, . . . , cm}. Establecemos Ω = {e1, . . . , e3q, r, s} y definimos los valores de los títulos como φ1 , . . . , φm , ψ1 , . . . , ψq y τ, de la siguiente manera: • El título φi es verdadero en el estado r, y es verdadero en el estado ek si k no está en ci. • El título ψj es verdadero solo en el estado s. • El título τ es verdadero en cada estado ek pero no en r o s. Tenemos órdenes de compra en cada título φi y ψj por 0.5 − 1 8q y una orden de compra en τ por 0.5. Sostenemos que existe una correspondencia si y solo si (X, C) está en X3C. Si (X, C) está en X3C, dejemos que C sea la subcolección que cubre cada elemento de X exactamente una vez. Ten en cuenta que |C | = q. Reclamamos que la colección que consiste en φi para cada ci en C, cada ψj y τ tiene una correspondencia. En cada estado ek tenemos un pago de subastadores de (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0. En los estados r y s, las ganancias de los subastadores son −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0. Supongamos ahora que (X, C) no está en X3C pero hay un emparejamiento. Considera el número q de los φi en ese emparejamiento y q el número de ψj en el emparejamiento. Dado que un emparejamiento requiere un subconjunto no vacío de los pedidos y τ por sí solo no es un emparejamiento, tenemos q + q > 0. Tenemos tres casos. q > q: En el estado r, la ganancia del subastador es −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : En el estado s, la ganancia del subastador es −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Considera el conjunto C que consiste en los ci donde φi está en la coincidencia. Debe haber algún estado ek que no esté en ninguno de los ci o C para que sea una cobertura exacta. El beneficio de los subastadores en ek es a lo sumo −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Gran número de valores con órdenes indivisibles. La clase Σp 2 es el segundo nivel de la jerarquía de tiempo polinómico. Un lenguaje L está en Σp 2 si existe un polinomio p y un conjunto A en P tal que x está en L si y solo si hay un y con |y| = p(|x|) tal que para todo z, con |z| = p(|x|), (x, y, z) está en A. La clase Σp 2 contiene tanto NP como coNP. A menos que la jerarquía de tiempo polinómico colapse (lo cual se considera poco probable), un problema que es completo para Σp 2 no está contenido en NP o co-NP. Mostraremos que calcular un emparejamiento es Σp 2-completo, y sigue siéndolo incluso para tipos muy restringidos de valores, por lo que (probablemente) no está en NP ni en co-NP. Aunque pueda parecer que ser NP-completo o co-NP-completo es lo suficientemente difícil, existen más consecuencias prácticas al estar fuera de NP y co-NP. Si el problema de emparejamiento estuviera en NP, se podrían usar heurísticas para buscar y verificar un emparejamiento si existe; incluso si dichas heurísticas fallan en el peor de los casos, podrían tener éxito para la mayoría de los ejemplos en la práctica. Del mismo modo, si el problema de emparejamiento estuviera en co-NP, uno podría esperar al menos descartar heurísticamente la posibilidad de emparejamiento. Pero para problemas fuera de NP o co-NP, no existe un marco de trabajo para verificar que una respuesta derivada heurísticamente sea correcta. De manera menos formal, para problemas NP (o co-NP)-completos, tienes que tener suerte; para problemas Σp 2-completos, ni siquiera puedes saber si has tenido suerte. Notamos que la existencia de un emparejamiento está en Σp 2: Usamos y para elegir un subconjunto de las órdenes y z para representar un estado ω con (x, y, z) en A si el conjunto de órdenes tiene un pago total no positivo para los subastadores en el estado ω. Demostramos un teorema más fuerte que implica que el emparejamiento está en Σp 2. Sea S1, . . . , Sn un conjunto de valores, donde cada valor Si tiene un costo ci y paga pi siempre que se cumpla la fórmula Ci. El problema de emparejamiento 0-1 pregunta si se puede, al aceptar ya sea 0 o 1 de cada seguridad, garantizar un pago en el peor de los casos estrictamente mayor que el costo total. Teorema 2. El problema de emparejamiento 0-1 es Σp 2-completo. Además, el problema sigue siendo Σp 2-completo en los siguientes dos casos especiales: 1. Para todo i, Ci es una conjunción de 3 eventos base (o sus negaciones), pi = 1, y ci = cj para todo i y j. 2. Para todo i, Ci es una conjunción de como máximo 2 valores de seguridad base (o sus negaciones). Estos resultados de dureza se mantienen incluso si hay una promesa de que ningún subconjunto de los valores garantiza un pago en el peor de los casos idéntico a su costo. Para demostrar el Teorema 2, reducimos desde el problema estándar Σp 2 que llamamos T∃∀BF. Dada una fórmula booleana φ con variables x1, . . . , xn e y1, . . . , yn, ¿es verdadera la siguiente fórmula completamente cuantificada ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)? El problema sigue siendo Σp 2-completo cuando φ(x1, . . . , xn, y1, . . . , yn) se restringe a ser una disyunción de conjunciones de como máximo 3 variables (o sus negaciones), por ejemplo, φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · ·. Esta forma, sin la restricción en el tamaño de la conjunción, se conoce como forma normal disyuntiva (DNF); la restricción a conjunciones de 3 variables es 3-DNF. Reducimos T∃∀BF a encontrar un emparejamiento. Para la reducción más simple, consideramos el problema de emparejamiento donde se tiene un conjunto de valores de Arrow-Debreu cuyos eventos de pago son conjunciones de los valores base, o sus negaciones. El subastador tiene la opción de aceptar 0 o 1 de cada uno de los valores dados. Primero reducimos al caso en el que los eventos de pago son conjunciones de un número arbitrario de eventos base (o sus negaciones). Mediante un truco estándar podemos reducir el número de eventos base en cada conjunción a 3, y con un ligero giro incluso podemos asegurar que todos los valores tengan el mismo precio, así como el mismo pago. Finalmente, demostramos que el problema sigue siendo difícil incluso si solo se permiten conjunciones de 2 variables, aunque con valores que se desvían ligeramente de los valores de Arrow-Debreu en el sentido de que pueden tener pagos variables y no unitarios. 5.4.1 La reducción básica Antes de describir los valores, ofrecemos algo de intuición. El problema T∃∀BF puede ser visto como un juego entre un selector y un adversario. El selector establece las variables xi, y luego el adversario establece las variables yi de manera que falsifique la fórmula φ. Podemos ver el problema de emparejamiento 0-1 como uno en el que el subastador es un comprador que compra valores correspondientes a disyunciones de los eventos base, y luego el adversario establece los valores de los eventos base para minimizar la ganancia de los valores. Construimos nuestros valores de manera que la estrategia óptima de compra sea adquirir n valores caros junto con un conjunto de valores baratos, de costo insignificante (en algunos casos podemos modificar la construcción para que todos los valores tengan el mismo costo). El costo total de los valores será ligeramente inferior a 1, y cada valor paga 1, por lo que el adversario debe asegurarse de que ninguno de los valores pague. Cada medida de seguridad costosa obliga al adversario a establecer alguna variable, xi, a un valor particular para evitar que la seguridad se active; esto corresponde a establecer las variables xi en el juego original. Los valores baratos son tales que prevenir que cada uno de estos valores se pague es equivalente a falsificar φ en el juego original. Entre las dificultades técnicas que enfrentamos está cómo evitar que el comprador compre valores conflictivos, por ejemplo, uno que obliga a xi = 0 y otro que obliga a xi = 1, lo que permite un arbitraje trivial. En segundo lugar, para nuestro análisis necesitamos asegurarnos de que un operador no pueda gastar más para obtener más, por ejemplo, gastando 1.5 en un conjunto de valores con la propiedad de que al menos 2 valores reditúen bajo todos los eventos posibles. Para cada una de las variables {xi}, {yi} en φ, agregamos una seguridad base correspondiente (con las mismas etiquetas). Para cada variable existencial xi, agregamos valores base adicionales, ni y zi. También incluimos una pregunta de seguridad base. En nuestra construcción básica, cada valor caro cuesta C y cada valor barato cuesta ; todos los valores pagan 1. Requerimos que Cn+ (|valores baratos|) < 1 y C(n+1) > 1. Es decir, se pueden comprar n valores caros y todos los valores baratos por menos de 1, pero no se pueden comprar n + 1 valores caros por menos de 1. A veces nos referimos a una seguridad por su cláusula de pago. Observación: Podemos considerar de manera aproximada como 0. Sin embargo, esto permitiría a alguien comprar un valor sin costo alguno que no paga (en el peor de los casos) nada. Al hacer > 0, podemos demostrar que es difícil distinguir entre las carteras que garantizan una ganancia positiva de aquellas que corren el riesgo de sufrir una pérdida positiva. Establecer > 0 también nos permitirá mostrar resultados de dureza para el caso en que todos los valores tienen el mismo costo. Para 1 ≤ i ≤ n, tenemos dos valores caros con cláusulas de pago (¯xi ∧Q) y (¯ni ∧Q) y dos valores baratos con cláusulas de pago (xi ∧ ¯zi) y (ni ∧ ¯zi). Para cada cláusula C ∈ φ, convertimos cada variable negada ¯xi en ni y agregamos la conjunción z1 ∧ · · · ∧ zn. Por lo tanto, para una cláusula C = (x2 ∧ ¯x7 ∧ ¯y5) construimos una seguridad económica SC, con cláusula de pago (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5). Finalmente, tenemos una seguridad barata con cláusula de pago ( ¯Q). Ahora sostenemos que existe una correspondencia si y solo si ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn). Lo hacemos restringiendo sucesivamente al comprador y al adversario, eliminando comportamientos que permitirían al otro jugador ganar. Las estrategias razonables resultantes corresponden exactamente a la versión del juego de T∃∀BF. Primero, observa que si el adversario establece todas las garantías base en falso (0), entonces solo la garantía ( ¯Q) pagará. Por lo tanto, ningún comprador puede comprar más de n garantías costosas y garantizar una ganancia. El problema radica en si se pueden comprar n valores caros y todos los valores baratos, de manera que para cualquier configuración de los eventos base al menos un valor pagará. Claramente, el adversario debe hacer que Q se cumpla, o la seguridad de ( ¯Q) dará sus frutos. A continuación, afirmamos que para cada i, 1 ≤ i ≤ i, el subastador debe comprar al menos uno de los valores (¯xi ∧ Q) y (¯ni ∧ Q). Esto se sigue del hecho de que si el adversario establece xi, ni y zi como falsos, y todos los demás eventos base como verdaderos, entonces solo los valores de seguridad (¯xi ∧ Q) y (¯ni ∧ Q) pagarán. Dado que ningún subastador puede comprar más de n valores caros, por lo tanto debe comprar exactamente uno de (¯xi ∧ Q) o (¯ni ∧ Q), para cada i, 1 ≤ i ≤ n. Para el resto del análisis, asumimos que el subastador sigue esta restricción. Supongamos que el comprador compra (¯xi ∧Q). Entonces, el adversario debe establecer xi como verdadero (ya que debe establecer Q como verdadero), o la seguridad se verá comprometida. Entonces, debe establecer zi como verdadero o (xi∧¯zi) dará resultado. Dado que el comprador no compra (¯ni ∧ Q) (por la restricción anterior), y todos los demás valores pagan lo mismo o menos cuando ni es falso, podemos asumir sin pérdida de generalidad que el adversario establece ni como falso. De manera similar, si el comprador compra (¯ni ∧ Q), entonces el adversario debe establecer ni y zi como verdaderos, y podemos asumir sin pérdida de generalidad que el adversario establece xi como falso. Ten en cuenta que el adversario debe en todos los casos establecer que cada evento zi sea verdadero. Resumiendo el argumento anterior, existe una correspondencia exacta entre las estrategias racionales del comprador y las configuraciones de las variables xi impuestas al adversario. Además, el adversario también está obligado a establecer las variables Q, z1, . . . , zn como verdaderas, y sin pérdida de generalidad se puede suponer que establece ni = ¯xi. Bajo estas restricciones, aquellos valores que no correspondan a las cláusulas en φ están garantizados de no pagar. El adversario también decide el valor de los eventos base y1, . . . , ym. Recuerde que para cada cláusula C ∈ φ hay una seguridad correspondiente SC. Dado que zi es verdadero y ni = ¯xi (sin pérdida de generalidad), se sigue de la construcción de SC que el ajuste de los yis hace que SC pague si y solo si satisface C. Esto establece la reducción del problema T∃∀BF al problema de emparejamiento, cuando los valores están restringidos a ser una conjunción de eventos base o sus negaciones en cantidad polinómica. 5.4.2 Reducción a conjunciones de 3 variables. Existen métodos estándar para reducir fórmulas DNF a fórmulas 3-DNF, que son trivialmente modificables a nuestro marco de valores; incluimos la reducción para completitud. Dado un valor de seguridad S cuya cláusula de pago es C = (v1 ∧ v2 ∧ · · · ∧ vk) (las negaciones de variables son irrelevantes para esta discusión), costo c y pago p, introduzca una nueva variable auxiliar, w, y reemplace la seguridad con dos valores de seguridad, S1 y S2, con cláusulas de pago, C1 = (v1 ∧ v2 ∧ w) y C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk). Los valores de los activos tienen un rendimiento p, y sus costos pueden ser cualquier valor positivo que sume c. Tenga en cuenta que a lo sumo uno de los activos puede tener un rendimiento en un momento dado. Si solo se compra un valor de seguridad, entonces el adversario siempre puede establecer w de manera que no pague; por lo tanto, el subastador comprará ambos o ninguno, por un costo total de c (aquí usamos el hecho de que solo se permite comprar 0 o 1 acciones de cada valor de seguridad). Entonces, se puede verificar que, dado la capacidad de establecer w arbitrariamente, el adversario puede hacer que C no se cumpla si y solo si puede hacer que tanto C1 como C2 no se cumplan. Por lo tanto, poseer una acción de S1 y una acción de S2 es equivalente a poseer una acción de S. Tenga en cuenta que C1 tiene tres variables y C2 tiene k-1 variables. Aplicando la transformación sucesivamente, se obtiene un conjunto equivalente de valores, de tamaño polinómico, cuyas cláusulas de pago tienen como máximo 3 variables. Observamos que en la construcción básica, todas las cláusulas con más de 3 variables están asociadas con valores (costos) baratos. En lugar de subdividir los costos, simplemente podemos hacer que todos los valores resultantes tengan un costo ; las restricciones en C y deben reflejar el nuevo y mayor número de valores baratos. Se puede asegurar que todas las cláusulas de pago tengan exactamente 3 variables, con una construcción similar. Un valor de seguridad S con costo c, ganancia p y cláusula definitoria (x ∧ y) puede ser reemplazado por los valores de seguridad S1 y S2 con costo c/2, ganancia p y cláusulas definitorias (x∧y∧w) y (x∧y∧ ¯w), donde w es una nueva variable auxiliar. Esencialmente, el mismo análisis que se proporcionó anteriormente se aplica a este caso. El caso de cláusulas de pago de una sola variable se maneja mediante dos aplicaciones de esta técnica. 5.4.3 Reducción a valores de seguridad equicostosos Al establecer C y de manera apropiada, se puede garantizar que en la reducción básica cada valor de seguridad cueste un múltiplo entero de un polinomio acotado; llamemos a esta proporción r. Ahora mostramos cómo reducir este caso al caso donde cada valor de seguridad cuesta . Recuerde que los valores caros tienen cláusulas de pago (¯xi ∧ Q) o (¯ni ∧ Q). Suponga que la seguridad S tiene una cláusula de pago (¯xi ∧ Q) (el otro caso se maneja de manera idéntica). Reemplace S con la cláusula de seguridad (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 son variables auxiliares; se eligen variables nuevas para cada cláusula), y también S1, . . . , Sr−1, con las cláusulas de pago ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), y ( ¯wr−1 ∧ ¯w1). Claramente, no comprar ninguno de los nuevos valores es equivalente a no comprar el valor original. Mostramos que comprar todos los nuevos valores es equivalente a comprar el valor original, y que comprar un subconjunto adecuado y no vacío de los valores es irracional. Primero observamos que si el comprador compra los valores S1, . . . , Sr−1, entonces el adversario debe establecer que w1 sea verdadero, o uno de los valores pagará. Para ver esto, observe que si wi se establece como falso, entonces (¯wi ∧ wi+1) será verdadero a menos que wi+1 se establezca como falso; por lo tanto, al establecer w1 como falso se obliga al adversario a establecer wr−1 como falso, haciendo que la cláusula final sea verdadera. Habiendo establecido w1 como verdadero, el adversario puede establecer w2, . . . , wr−1 como falso, asegurándose de que ninguna de las garantías S1, . . . , Sr−1 pague. Si wi es verdadero, entonces (¯xi ∧ Q ∧ w1) es equivalente a (¯xi ∧ Q). Por lo tanto, comprar todos los valores de reemplazo para cada uno es equivalente a comprar el valor original para r. Queda por demostrar que comprar un subconjunto adecuado y no vacío de los valores es irracional. Si uno no compra S, entonces el adversario puede establecer las variables w de manera que ninguno de S1, . . . , Sr−1 genere ganancias; cualquier dinero gastado en estos valores es desperdiciado. Si uno no compra Sr−1, el adversario puede establecer todos los w como falsos, en cuyo caso ninguna de las nuevas cláusulas dará beneficios, independientemente del valor de xi y Q. De manera similar, si uno de los 152 no compra, para 1 ≤ i ≤ r −2, el adversario puede establecer wi+1 como verdadero, todas las demás variables w como falsas, y nuevamente no hay ganancia, independientemente del valor de xi y Q. Por lo tanto, comprar un subconjunto adecuado de estos valores no aumentará la ganancia. Observamos que esta reducción se puede combinar trivialmente con la reducción que garantiza que todas las cláusulas definitorias tengan 3 o menos variables. Con un argumento ligeramente más desordenado, todas las cláusulas definitorias se pueden configurar para tener exactamente 3 variables. 5.4.4 Reducción a cláusulas de como máximo 2 variables. Si permitimos que los valores y precios de los títulos sean variables, podemos reducir al caso en el que la cláusula de pago de cada título sea una conjunción de como máximo 2 variables o sus negaciones. Dado un valor de seguridad s con cláusula de pago (X ∧ Y ∧ Z), costo c y pago 1, introducimos variables auxiliares frescas, w1, w2 y w3 (se utilizan nuevas variables para cada cláusula) y reemplazamos S con los siguientes valores de seguridad: • Valores de seguridad S1, S2 y S3, cada uno con costo c/3 y pago 1, con cláusulas de pago respectivas (X ∧ w1), (Y ∧ w2) y (Z ∧ w3). • Valores de seguridad S1, . . . , S6, cada uno con costo 4 y pago 24 − 2, con cláusulas de pago, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Aquí, 2 es una cantidad positiva muy pequeña, que se describe más adelante. Mediante un análisis de caso simple, tenemos lo siguiente. Observaciones: 1. Para cualquier i, existe una configuración de w1, w2 y w3 tal que de los S valores solo Si paga. Para cualquier configuración de w1, w2 y w3, al menos uno de los S valores pagará. 3. Si w1, w2 y w3 son todos falsos, todos los valores S pagarán. 4. Establecer uno de w1, w2 o w3 como verdadero, y los otros como 0, hará que exactamente uno de los valores S pague. Según la Observación 1, no tiene sentido comprar un subconjunto propio no vacío de los S valores: El adversario puede asegurarse de que ninguno de los valores comprados genere ganancias, y aunque todos los S valores generen ganancias, no será suficiente para recuperar el costo de comprar un solo valor de S. Según la Observación 2, si se compran todos los S valores, se garantiza recuperar casi toda la inversión (excepto por 2), en cuyo caso, según las Observaciones 3 y 4, la estrategia óptima del adversario es hacer que exactamente uno de w1, w2 o w3 sea verdadero. Establecemos C y 2 de manera que Cn + (|valores baratos|) + 2(|cláusulas|) < 1. Por lo tanto, las pérdidas acumuladas de 2 nunca pueden marcar la diferencia entre obtener una ganancia garantizada y no obtener ninguna ganancia en absoluto. También hay que tener en cuenta que al hacer 2 positivo evitamos la existencia de estrategias de compra de equilibrio en las que el comprador solo adquiere valores S. Resumiendo el argumento anterior, podemos asumir sin pérdida de generalidad que el comprador compra todas las S valores (para todas las cláusulas), y que para cada cláusula el adversario establece exactamente una de las variables auxiliares w1, w2 o w3 de esa cláusula como verdadera. Para el resto de la discusión, asumimos que los jugadores siguen estas restricciones. A continuación afirmamos que un comprador racional comprará o bien todo S1, S2 o S3, o ninguno de ellos. Si el comprador no compra S1, entonces si el adversario hace que w1 sea verdadero y w2 y w3 falsos, ni S2 ni S3 darán beneficios, independientemente de cómo el adversario configure X, Y y Z. Por lo tanto, no tiene sentido comprar ni S2 ni S3 si no se compra S1. Aplicar el mismo argumento a S2 y S3 establece la afirmación. Claramente, comprar ninguno de S1, S2 y S3 tiene, hasta en 2 factores despreciables, el mismo comportamiento de precio/ganancia que no comprar S. A continuación, argumentamos que, sujeto a las restricciones establecidas en los comportamientos de los jugadores, comprar todos los S1, S2 y S3 tiene el mismo comportamiento de precio/ganancia (ignorando nuevamente 2 factores) que comprar S, independientemente de cómo el adversario establezca X, Y y Z. Primero, en ambos casos, el costo es c. Si el adversario hace que X, Y y Z sean verdaderos, entonces S paga 1, y (asumiendo que exactamente uno de w1, w2 y w3 es verdadero), exactamente uno de S1, S2 o S3 pagará 1. Si X es falso, entonces S no se cumple, y el adversario puede establecer w1 como verdadero (y w2 y w3 como falsos), asegurando que ninguno de S1, S2 y S3 se cumpla. El mismo argumento se sostiene si Y o Z son falsos. 6. CASOS TRACTABLES La pregunta lógica que surge a la luz de estos resultados de complejidad es si restricciones adicionales, más severas, en el espacio de los valores pueden permitir algoritmos de emparejamiento tratables. Aunque no hemos explorado sistemáticamente las posibilidades, ciertamente existe el potencial para casos útiles y manejables. Supongamos, por ejemplo, que las ofertas están limitadas a cantidades unitarias de valores de las siguientes dos formas: 1. Disyunciones de eventos positivos: A1 ∨ · · · ∨ Ak . 2. Eventos negativos individuales: ¯Ai. Sea p el precio ofrecido para una disyunción A1 ∨ · · · ∨ Ak, y qi el precio máximo ofrecido para las respectivas disyunciones negadas. Esta oferta de disyunción es parte de un partido si y solo si p + P i qi ≥ k. Evaluar si esta condición es satisfecha por un subconjunto de ofertas es bastante sencillo. Aunque este ejemplo es artificial, su aplicación no es del todo improbable. Por ejemplo, las disyunciones pueden corresponder a clientes de seguros, quienes desean un contrato de seguro que cubra todas las posibles causas de pérdida de su activo. Los seguros atómicos son vendidos por aseguradoras, cada una de las cuales se especializa en una forma diferente de causa de desastre. 7. CONCLUSIONES Y DIRECCIONES FUTURAS Hemos analizado la complejidad computacional del emparejamiento de valores basado en fórmulas lógicas. Existen muchas posibles vías para trabajos futuros, incluyendo 1. Analizando el problema de optimización de los agentes: • Cómo elegir cantidades y precios de oferta/demanda para una colección de valores para maximizar la utilidad esperada, tanto para funciones de utilidad lineales como no lineales. • Cómo elegir valores; es decir, decidir qué colección de fórmulas booleanas ofrecer para negociar, sujeto a restricciones o penalizaciones en el número o complejidad de las ofertas. • Cómo tomar las decisiones anteriores de una manera teóricamente sólida, teniendo en cuenta las decisiones de otros operadores, su razonamiento sobre otros operadores, etc. Aunque el emparejamiento probablemente sea intratable, ¿existen heurísticas efectivas que logren emparejamientos en muchos casos o que aproximen un emparejamiento? 3. Explorando reglas de reparto para dividir el excedente, y propiedades de incentivo de los mecanismos resultantes. 4. Podemos considerar que un mercado se encuentra en equilibrio computacional si ningún jugador limitado computacionalmente puede encontrar una estrategia que aumente la utilidad. Con pocas excepciones [3, 22], se sabe poco sobre los equilibrios computacionales. Una pregunta natural es determinar si un mercado puede alcanzar un equilibrio computacional que no sea un equilibrio real, y en qué circunstancias esto puede ocurrir. Agradecimientos Agradecemos a Rahul Sami por su ayuda con la Sección 5.4.4. Agradecemos a Rahul, Joan Feigenbaum y Robin Hanson por las útiles discusiones. 8. REFERENCIAS [1] Kenneth J. Arrow. El papel de los valores en la asignación óptima de la carga de riesgo. Revisión de Estudios Económicos, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine y John Ledyard. Induciendo liquidez en mercados financieros con poca actividad a través de mecanismos de negociación de valor combinado. Revisión Económica Europea, 46:1671-1695, 2002. [3] Paul J. Cervecero. Adquisición descentralizada de computación y robustez computacional en un mercado inteligente. Teoría Económica, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine y Bernardo A. Huberman. Pronóstico de eventos inciertos con grupos pequeños. En la Tercera Conferencia ACM sobre Comercio Electrónico (EC01), páginas 58-64, 2001. [5] Bruno de Finetti. Teoría de la Probabilidad: Un Tratamiento Introductorio Crítico, volumen 1. Wiley, Nueva York, 1974. [6] Sven de Vries y Rakesh V. Vohra. Subastas combinatorias: Un estudio. INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles y Steve Lawrence. Incorporación de información en los mercados de apuestas deportivas en línea dentro del juego. En la Cuarta Conferencia ACM sobre Comercio Electrónico (EC03), 2003. [8] Jacques H. Dreze. Asignación de mercado bajo incertidumbre. En Ensayos sobre Decisiones Económicas bajo Incertidumbre, páginas 119-143. Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, y Nimrod Megiddo. Una lógica para razonar sobre probabilidades. Información y Computación, 87(1/2):78-128, 1990. [10] Robert Forsythe y Russell Lundholm. Agregación de información en un mercado experimental. Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann y Jack Wright. Anatomía de un mercado bursátil político experimental. Revista Económica Americana, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz y Thomas W. Ross. Deseos, expectativas y acciones: Una encuesta sobre la formación de precios en los mercados de valores electorales. Revista de Comportamiento Económico y Organización, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown y Richard A. Zuber. Traders informados y variaciones de precios en el mercado de apuestas para juegos de baloncesto profesional. Revista de Finanzas, LIII(1):385-401, 1998. [14] Robin Hanson. Mercados de decisión. IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.\n\nSistemas Inteligentes del IEEE, 14(3):16-19, 1999. [15] Robin Hanson. Diseño de mercado de información combinatoria. Sistemas de Información Frontiers, 5(1), 2002. [16] Robin D. Hanson. ¿Podría el juego salvar a la ciencia? Fomentando un consenso honesto. Epistemología Social, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth y Mark Rubinstein. Recuperando distribuciones de probabilidad a partir de los precios de opciones. Revista de Finanzas, 51(5):1611-1631, 1996. [18] Joseph B. Kadane y Robert L. Winkler. Separando la elicitación de probabilidades de las utilidades. Revista de la Asociación Estadística Americana, 83(402):357-363, 1988. [19] Michael Magill y Martine Quinzii. Teoría de los Mercados Incompletos, Vol. 1. MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston y Jerry R. Green. Teoría microeconómica. Oxford University Press, Nueva York, 1995. [21] Noam Nisan. Subasta y asignación en subastas combinatorias. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 1-12, 2000. [22] Noam Nisan y Amir Ronen. Mecanismos VCG computacionalmente factibles. En la Segunda Conferencia ACM sobre Comercio Electrónico (EC00), páginas 242-252, 2000. [23] J. Pearl. Razonamiento probabilístico en sistemas inteligentes. Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles y Finn ˚Arup Nielsen. El verdadero poder de los mercados artificiales. Ciencia, 291:987-988, 9 de febrero de 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen y C. Lee Giles. Extrayendo pronósticos probabilísticos colectivos de juegos en línea. En la Séptima Conferencia Internacional sobre Descubrimiento de Conocimiento y Minería de Datos, páginas 174-183, 2001. [26] David M. Pennock y Michael P. Wellman. Mercados de valores compactos para la reasignación óptima de riesgos de Pareto. En la Decimosexta Conferencia sobre Incertidumbre en Inteligencia Artificial, páginas 481-488, 2000. [27] C. R. Plott, J. Wit y W. C. Yang. Mercados de apuestas parimutuas como dispositivos de agregación de información: Resultados experimentales. Documento de trabajo de ciencias sociales 986, Instituto de Tecnología de California, abril de 1997. 154 [28] Charles R. Plott. Mercados como herramientas de recopilación de información. Revista de Economía del Sur, 67(1):1-15, 2000. [29] Charles R. Plott y Shyam Sunder. Expectativas racionales y la agregación de información diversa en mercados de seguridad de laboratorio. Econometrica, 56(5):1085-1118, 1988. [30] R. Roll. \n\nEconometrica, 56(5):1085-1118, 1988. [30] R. Roll. Jugo de naranja y clima. American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin y David Levine. Determinación del ganador en generalizaciones de subastas combinatorias. En la Primera Conferencia Internacional Conjunta sobre Agentes Autónomos y Sistemas Multiagente (AAMAS), julio de 2002. [32] Carsten Schmidt y Axel Werwatz. ¿Qué tan precisos son los mercados para predecir el resultado de un evento? el experimento de los campeonatos de fútbol Euro 2000. Informe técnico 09-2002, Instituto Max Planck de Investigación en Sistemas Económicos, 2002. [33] Richard H. Thaler y William T. Ziemba. Anomalías: Mercados de apuestas parimutuas: Hipódromos y loterías. Revista de Perspectivas Económicas, 2(2):161-174, 1988. [34] Hal R. Varian. El principio de arbitraje en economía financiera. I'm sorry, but \"J.\" is not a complete sentence. Could you please provide more context or a full sentence for me to translate into Spanish? Perspectivas Económicas, 1(2):55-72, 1987. [35] Robert L. Winkler y Allan H. Murphy. Buenos evaluadores de probabilidad. I'm sorry, but the sentence \"J.\" does not have a clear meaning or context for translation. Could you please provide more information or a complete sentence for me to translate? Meteorología Aplicada, 7:751-758, 1968. 155 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "gamble": {
            "translated_key": "apostar",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Betting Boolean-Style: A Framework for Trading in Securities Based on Logical Formulas Lance Fortnow Joe Kilian NEC Laboratories America 4 Independence Way Princeton, NJ 08540 David M. Pennock ∗ Overture Services, Inc., 3rd floor 74 N. Pasadena Ave Pasadena, CA 91103 Michael P. Wellman University of Michigan AI Laboratory 1101 Beal Avenue Ann Arbor, MI 48109 ABSTRACT We develop a framework for trading in compound securities: financial instruments that pay off contingent on the outcomes of arbitrary statements in propositional logic.",
                "Buying or selling securities-which can be thought of as betting on or against a particular future outcome-allows agents both to hedge risk and to profit (in expectation) on subjective predictions.",
                "A compound securities market allows agents to place bets on arbitrary boolean combinations of events, enabling them to more closely achieve their optimal risk exposure, and enabling the market as a whole to more closely achieve the social optimum.",
                "The tradeoff for allowing such expressivity is in the complexity of the agents and auctioneers optimization problems.",
                "We develop and motivate the concept of a compound securities market, presenting the framework through a series of formal definitions and examples.",
                "We then analyze in detail the auctioneers matching problem.",
                "We show that, with n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "We show that the latter hardness result holds even under severe language restrictions on bids.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "We briefly discuss matching algorithms and tractable special cases.",
                "Categories and Subject Descriptors F.2.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity-Nonnumerical Algorithms and Problems; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory. 1.",
                "INTRODUCTION Securities markets effectively allow traders to place bets on the outcomes of uncertain future propositions.",
                "Examples include stock markets like NASDAQ, options markets like CBOE [17], futures markets like CME [30], other derivatives markets, insurance markets, political stock markets [11, 12], sports betting markets [7, 13, 32], horse racing markets [33], idea futures markets [16], decision markets [14] and even market games [4, 24, 25].",
                "The economic value of securities markets is two-fold.",
                "First, they allow traders to hedge risk, or to insure against undesirable outcomes.",
                "For example, the owner of a stock might buy a put option (the right to sell the stock at a particular price) in order to insure against a stock downturn.",
                "Or the owner of a house may purchase an insurance contract to hedge against unforeseen damage to the house.",
                "Second, securities markets allow traders to speculate, or to obtain a subjective expected profit when market prices do not reflect their assessment of the likelihood of future outcomes.",
                "For example, a trader might buy a call option if he believes that the likelihood is high that the price of the underlying stock will go up, regardless of risk exposure to changes in the stock price.",
                "Because traders stand to earn a profit if they can make effective probability assessments, often prices in financial markets yield very accurate aggregate forecasts of future events [10, 29, 27, 28].",
                "Real securities markets have complex payoff structures with various triggers.",
                "However, these can all be modeled as collections of more basic or atomic Arrow-Debreu securities [1, 8, 20].",
                "One unit of one Arrow-Debreu security pays off one dollar if and only if (iff) a corresponding binary event occurs; it pays nothing if the event does not occur.",
                "So, for example, one unit of a security denoted Acme100 might pay $1 iff Acmes stock is above $100 on January 4, 2004.",
                "An Acme stock option as it would be defined on a finan144 cial exchange can be though of as a portfolio of such atomic securities.1 In this paper, we develop and analyze a framework for trading in compound securities markets with payoffs contingent on arbitrary logical combinations of events, including conditionals.",
                "For example, given binary events A, B, and C, one trader might bid to buy three units of a security denoted A ∧ ¯B ∨ C that pays off $1 iff the compound event A ∧ ¯B ∨ C occurs for thirty cents each.",
                "Another trader may bid to sell six units of a security A|C that pays off $1 iff A occurs for fifty-five cents each, conditional on event C occurring, meaning that the transaction is revoked if C does not occur (i.e., no payoff is given and the price of the security is refunded) [5].",
                "Bids may also be divisible, meaning that bidders are willing to accept less than the requested quantity, or indivisible, meaning that bids must be fulfilled either completely or not at all.",
                "Given a set of such bids, the auctioneer faces a complex matching problem to decide which bids are accepted for how many units at what price.",
                "Typically, the auctioneer seeks to take on no risk of its own, only matching up agreeable trades among the bidders, but we also consider alternative formulations where the auctioneer acts as a market maker willing to accept some risk.",
                "We examine the computational complexity of the auctioneers matching problem.",
                "Let the length of the description of all the available securities be O(n).",
                "With n events, the matching problem is co-NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "This Σp 2-complete hardness holds even when the bidding language is significantly restricted.",
                "With log n events, the problem is polynomial in the divisible case and NP-complete in the indivisible case.",
                "Section 2 presents some necessary background information, motivation, and related work.",
                "Section 3 formally describes our framework for compound securities, and defines the auctioneers matching problem.",
                "Section 4 briefly discusses natural algorithms for solving the matching problem.",
                "Section 5 proves our central computational complexity results.",
                "Section 6 discusses the possibility of tractable special cases.",
                "Section 7 concludes with a summary and some ideas of future directions. 2.",
                "PRELIMINARIES 2.1 Background and notation Imagine a world where there are only two future uncertain events of any consequence: (1) the event that ones house is struck by lightning by December 31, 2003, denoted struck, and (2) the event that Acmes stock price goes above $100 by January 4, 2004, denoted acme100.",
                "In this simple world there are four possible future states-all possible combinations of the binary events outcomes: struck ∧ acme100, struck ∧ acme100, struck ∧ acme100, struck ∧ acme100.",
                "Hedging risk can be thought of as an action of moving money between various possible future states.",
                "For example, insur1 Technically, an option is a portfolio of infinitely many atomic securities, though it can be approximately modeled with a finite number. ing ones house transfers money from future states where struck is not true to states where it is.",
                "Selling a security denoted acme100 -that pays off $1 iff the event acme100 occurs-transfers money from future states where Acmes price is above $100 on January 4 to states where its not.",
                "Speculating is also an act of transferring money between future states, though usually associated with maximizing expected return rather than reducing risk.",
                "For example, betting on a football team moves money from the team loses state to the team wins state.",
                "In practice, agents engage in a mixture of hedging and speculating, and there is no clear dividing line between the two [18].",
                "All possible future outcomes form a state space Ω, consisting of mutually exclusive and exhaustive states ω ∈ Ω.",
                "Often a more natural way to think of possible future outcomes is as an event space A of linearly independent events A ∈ A that may overlap arbitrarily.",
                "So in our toy example struck ∧ acme100 is one of the four disjoint states, while struck is one of the two events.",
                "Note that a set of n linearly independent events defines a state space Ω of size 2n consisting of all possible combinations of event outcomes.",
                "Conversely, any state space Ω can be factored into log |Ω| events.",
                "Suppose that A exhaustively covers all meaningful future outcomes (i.e., covers all eventualities that agents may wish to hedge against and/or speculate upon).",
                "Then the existence of 2n linearly independent securities-called a complete market-allows agents to distribute their wealth arbitrarily across future states.2 An agent may create any hedge or speculation it desires.",
                "Under classical conditions, agents trading in a complete market form an equilibrium where risk is allocated Pareto optimally.",
                "If the market is incomplete, meaning it consists of fewer than 2n linearly independent securities, then in general agents cannot construct arbitrary hedges and equilibrium allocations may be nonoptimal [1, 8, 19, 20].",
                "In real-world settings, the number of meaningful events n is large and thus the number of securities required for completeness is intractable.",
                "No truly complete market exists or will ever exist.",
                "One motivation behind compound securities markets is to provide a mechanism that supports the most transfer of risk using the least number of transactions possible.",
                "Compound securities allow a high degree of expressivity in constructing bids.",
                "The tradeoff for increased expressivity is increased computational complexity, from both the bidders and auctioneers point of view. 2.2 Related work The quest to reduce the number of financial instruments required to support an optimal allocation of risk dates to Arrows original work [1].",
                "The requirement stated above of only 2n linearly-independent securities is itself a reduction from the most straightforward formulation.",
                "In an economy with k standard goods, the most straightforward complete market contains k·2n securities, each paying off in one good under one state realization.",
                "Arrow [1] showed that a market where securities and goods are essentially separated, with 2n securities paying off in a single numeraire good plus k spot markets in the standard goods, is also complete.",
                "For our purposes, we need consider only the securities market. 2 By linearly independent securities, we mean that the vectors of payoffs in all future states of these securities are linearly independent. 145 Varian [34] shows that a complete market can be constructed using fewer than 2n securities, replacing the missing securities with options.",
                "Still, the number of linearly independent financial instruments-securities plus optionsmust be 2n to guarantee completeness.",
                "Though the requirement of 2n financial instruments cannot be relaxed if one wants to guarantee completeness in all circumstances, Pennock and Wellman [26] explore conditions under which a smaller securities market may be operationally complete, meaning that its equilibrium is Pareto optimal with respect to the agents involved, even if the market contains less than 2n securities.",
                "The authors show that in some cases the market can be structured and compacted in analogy to Bayesian network representations of joint probability distributions [23].",
                "They show that, if all agents risk-neutral independencies agree with the independencies encoded in the market structure, then the market is operationally complete.",
                "For collections of agents all with constant absolute risk aversion, agreement on Markov independencies is sufficient.",
                "Bossaerts, Fine, and Ledyard [2] develop a mechanism they call combined-value trading (CVT) that allows traders to order an arbitrary portfolio of securities in one bid, rather than breaking up the order into a sequence of bids on individual securities.",
                "If the portfolio order is accepted, all of the implied trades on individual securities are executed simultaneously, thus eliminating so-called execution risk that prices will change in the middle of a planned sequence of orders.",
                "The authors conduct laboratory experiments showing that, even in thin markets where ordinary sequential trading breaks down, CVT supports efficient pricing and allocation.",
                "Note that CVT differs significantly from compound securities trading.",
                "CVT allows instantaneous trading of any linear combination of securities, while compound securities allow more expressive securities that can encode nonlinear boolean combinations of events.",
                "For example, CVT may allow an agent to order securities A and B in a bundle that pays off as a linear combination of A and B,3 but CVT wont allow the construction of a compound security A ∧ B that pays off $1 iff both A and B occur, or a compound security A|B .",
                "Related to CVT are combinatorial auctions [6, 21] and exchanges [31], mechanisms that have recently received quite a bit of attention in the economics and computer science literatures.",
                "Combinatorial auctions allow bidders to place distinct values on all possible bundles of goods rather than just on individual goods.",
                "In this way bidders can express substitutability and complementarity relationships among goods that cannot be expressed in standard parallel or sequential auctions.",
                "Compound securities differ from combinatorial auctions in concept and complexity.",
                "Compound securities allow bidders to construct an arbitrary bet on any of the 22n possible compound events expressible as logical functions of the n base events, conditional on any other of the 22n compound events.",
                "Agents optimize based on their own subjective probabilities and risk attitude (and in general, their beliefs about other agents beliefs and utilities, ad infinitum).",
                "The central auctioneer problem is identifying arbitrage opportunities: that is, to match bets together without taking on any risk.",
                "Combinatorial auctions, on the other hand, allow bids on any of the 2n bundles of n goods.",
                "Typically, 3 Specifically, one unit of each pays off $2 iff both A and B occur, $1 iff A or B occurs (but not both), and $0 otherwise. uncertainty-and thus risk-is not considered.",
                "The central auctioneer problem is to maximize social welfare.",
                "Also note that the problems lie in different complexity classes.",
                "While clearing a combinatorial auction is polynomial in the divisible case and NP-complete in the indivisible case, matching in a compound securities market is NP-complete in the divisible case and Σp 2-complete in the indivisible case.",
                "In fact, even the problem of deciding whether two bids on compound securities match, even in the divisible case, is NP-complete (see Section 5.2).",
                "There is a sense in which it is possible to translate our matching problem for compound securities into an analogous problem for clearing two-sided combinatorial exchanges [31] of exponential size.",
                "Specifically, if we regard payoff in a particular state as a good, then compound securities can be viewed as bundles of (fractional quantities of) such goods.",
                "The material balance constraint facing the combinatorial auctioneer corresponds to a restriction that the compoundsecurity auctioneer be disallowed from assuming any risk.",
                "Note that this translation is not at all useful for addressing the compound-security matching problem, as the resulting combinatorial exchange has an exponential number of goods.",
                "Hanson [15] develops a market mechanism called a market scoring rule that is especially well suited for allowing bets on a combinatorial number of outcomes.",
                "The mechanism maintains a joint probability distribution over all 2n states, either explicitly or implicitly using a Bayesian network or other compact representation.",
                "At any time any trader who believes the probabilities are wrong can change any part of the distribution by accepting a lottery ticket that pays off according to a scoring rule (e.g., the logarithmic scoring rule) [35], as long as that trader also agrees to pay off the most recent person to change the distribution.",
                "In the limit of a single trader, the mechanism behaves like a scoring rule, suitable for polling a single agent for its probability distribution.",
                "In the limit of many traders, it produces a combined estimate.",
                "Since the market essentially always has a complete set of posted prices for all possible outcomes, the mechanism avoids the problem of thin markets, or illiquidity, that necessarily plagues any market containing an exponential number of alternative investments.",
                "The mechanism requires a patron to pay off the final person to change the distribution, though the patrons payment is bounded.",
                "Though Hanson offers some initial suggestions, several open problems remain, including efficient methods for representing and updating the joint distribution and recording traders positions and portfolios, without resorting to exponential time and space algorithms.",
                "Fagin, Halpern, and Megiddo [9] give a sound and complete axiomatization for deciding whether sets of probabilistic inequalities are consistent.",
                "Bids for compound securities can be thought of as expressions of probabilistic inequalities: for example, a bid to buy A ∧ B at price 0.3 is a statement that the probability of A ∧ B is greater than 0.3.",
                "If a set of single-unit bids correspond to a set of inconsistent probabilistic inequalities, then there is a match.",
                "However, because they are interested in a much different framework, Fagin et al. do not consider several complicating factors specific to the securities market framework: namely, handling multi-unit or fractional bid quantities, identifying matches, choosing among multiple matches, and optimizing based on probabilities and risk attitudes.",
                "We address these issues below. 146 3.",
                "FRAMEWORK FOR TRADING IN COMPOUND SECURITIES 3.1 High-level description Common knowledge among agents is the set of events A.",
                "There are no predefined securities.",
                "Instead, agents offer to buy or sell securities of their own design that pay off contingent on logical combinations of events and event negations.",
                "Combination operators may include conjunctions, disjunctions, and conditionals.",
                "For all practical purposes, it is impossible for agents to trade in enough securities (2n ) to form a complete market, so agents must devise their best tradeoff between the number and complexity of their bids, and the extent to which their risks are hedged and desirable bets are placed.",
                "In its most general form, the problem is game-theoretic in nature, since what an agent should offer depends on what it believes other agents will accept.",
                "At the other end of the spectrum, a simplified version of the problem is to optimize bids only on currently available securities at current prices.",
                "In between these two formulations are other possible interesting optimization problems.",
                "Approximation algorithms might also be pursued.",
                "The auctioneer faces a nontrivial problem of matching buy and sell orders to maximize surplus (the cash and securities left over after accepted bids are fulfilled).",
                "For example, offers to sell A1A2 at $0.2 and A1 ¯A2 at $0.1 can match with an offer to buy A1 at $0.4, with surplus $0.1.",
                "Or an offer to sell A1 at $0.3 can match with an offer to buy A1A2 at $0.4, with surplus $0.1 in cash and A1 ¯A2 in securities.",
                "In general, a single security might qualify for multiple matches, but only one can be transacted.",
                "So the auctioneer must find the optimal set of matches that maximizes surplus, which could be measured in a number of ways.",
                "Again, approximation algorithms might be considered.",
                "In another formulation, the auctioneer functions as a market maker willing to take on a certain amount of risk.",
                "Informally, our motivation is to provide a mechanism that allows a very high degree of expressivity in placing hedges and bets, and is also capable of approximating the optimal (complete-market) allocation of risk, trading off the number and complexity of securities and transactions needed. 3.2 Formal description 3.2.1 Securities We use φ and ψ to denote arbitrary boolean formulas, or logical combinations of events in A.",
                "We denote securities φ|ψ .",
                "Securities pay off $1 if and only if (iff) φ and ψ are true, pay off $0 iff φ is false and ψ is true, and are canceled (i.e., any price paid is refunded) iff ψ is false.",
                "We define T ≡ Ω to be the event true and F ≡ ∅ to be the event false.",
                "We abbreviate φ|T as φ . 3.2.2 Orders Agents place orders, denoted o, of the form q units of φ|ψ at price p per unit, where q > 0 implies a buy order and q < 0 implies a sell order.",
                "We assume agents submitting buy (sell) orders will accept any price p∗ ≤ p (p∗ ≥ p).",
                "We distinguish between divisible and indivisible orders.",
                "Agents submitting divisible orders will accept any quantity αq where 0 < α ≤ 1.",
                "Agents submitting indivisible orders will accept only exactly q units, or none at all.",
                "We believe that, given the nature of what is being traded (state-contingent dollars), most agents will be content to trade using divisible orders.",
                "Every order o can be translated into a payoff vector Υ across all states ω ∈ Ω.",
                "The payoff Υ ω in state ω is q · 1ω∈ψ(1ω∈φ − p), where 1ω∈E equals 1 iff ω ∈ E and zero otherwise.",
                "Recall that the 2n states correspond to the 2n possible combinations of event outcomes.",
                "We index multiple orders with subscripts (e.g., oi and Υi).",
                "Let the set of all orders be O and the set of all corresponding payoff vectors be P. Example 1. (Translating orders into payoff vectors) Suppose that |A| = 3.",
                "Consider an order to buy two units of A2 ∨ A3|A1 at price $0.8.",
                "The corresponding payoff vector is: Υ = Υ A1A2A3 , Υ A1A2 ¯A3 , Υ A1 ¯A2A3 , . . . , Υ ¯A1 ¯A2 ¯A3 = 2 · 0.2, 0.2, 0.2, −0.8, 0, 0, 0, 0 2 3.2.3 The matching problem The auctioneers task, called the matching problem, is to determine which orders to accept among all orders o ∈ O.",
                "Let αi be the fraction of order oi accepted by the auctioneer (in the indivisible case, αi must be either 0 or 1; in the divisible case, αi can range from 0 to 1).",
                "If αi = 0, then order oi is considered rejected and no transactions take place concerning this order.",
                "For accepted orders (αi > 0), the auctioneer receives the money lost by bidders and pays out the money won by bidders, so the auctioneers payoff vector is: Υauc = X Υi∈P −αiΥi.",
                "We also call the auctioneers payoff vector the surplus vector, since it is the (possibly state-contingent) money left over after all accepted orders are filled.",
                "Assume that the auctioneer wants to choose a set of orders so that it is guaranteed not to lose any money in any future state, but that the auctioneer does not necessarily insist on obtaining a positive benefit from the transaction (i.e., the auctioneer is content to break even).",
                "Definition 1. (Matching problem, indivisible case) Given a set of orders O, does there exist αi ∈ {0, 1} with at least one αi = 1 such that ∀ω, Υ ω auc ≥ 0?",
                "In other words, does there exist a nonempty subset of orders that the auctioneer can accept without risk? 2 If ∀ω, Υ ω auc = c where c is nonnegative, then the surplus leftover after processing this match is c dollars.",
                "Let m = minω[Υ ω auc].",
                "In general, processing a match leaves m dollars in cash and Υ ω auc − m in state-contingent dollars, which can then be translated into securities.",
                "Example 2. (Indivisible order matching) Suppose |A| = 2.",
                "Consider an order to buy one unit of A1A2 at price 0.4 and an order to sell one unit of A1 at price 0.3.",
                "The 147 corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = 0.6, −0.4, −0.4, −0.4 Υ2 = −0.7, −0.7, 0.3, 0.3 The auctioneers payoff vector (the negative of the componentwise sum of the above two vectors) is: Υauc = −Υ1 − Υ2 = 0.1, 1.1, 0.1, 0.1 .",
                "Since all components are nonnegative, the two orders match.",
                "The auctioneer can process both orders, leaving a surplus of $0.1 in cash and one unit of A1 ¯A2 in securities. 2 Now consider the divisible case, where order can be partially filled.",
                "Definition 2. (Matching problem, divisible case) Given a set of orders O, does there exist αi ∈ [0, 1] with at least one αi > 0 such that ∀ω, Υ ω auc ≥ 0, 2 Example 3. (Divisible order matching) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.5, an order to buy one unit of A1A2|A1 ∨ A2 at price $0.5, and an order to buy one unit of A1| ¯A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = Υ A1A2 1 ,Υ A1 ¯A2 1 ,Υ ¯A1A2 1 ,Υ ¯A1 ¯A2 1 = −0.5, −0.5, 0.5, 0.5 Υ2 = 0.5, −0.5, −0.5, 0 Υ3 = 0, 0.6, 0, −0.4 It is clear by inspection that no non-empty subset of whole orders constitutes a match: in all cases where αi ∈ {0, 1} (other than all αi = 0), at least one state sums to a positive amount (negative for the auctioneer).",
                "However, if α1 = α2 = 3/5 and α3 = 1, then the auctioneers payoff vector is: Υauc = − 3 5 Υ1 − 3 5 Υ2 − Υ3 = 0, 0, 0, 0.1 , constituting a match.",
                "The auctioneer can process 3/5 of the first and second orders, and all of the third order, leaving a surplus of 0.1 units of ¯A1 ¯A2 .",
                "In this example, a divisible match exists even though an indivisible match is not possible; we examine the distinction in detail in Section 5, where we separate the two matching problems into distinct complexity classes. 2 The matching problems defined above are decision problems: the task is only to show the existence or nonexistence of a match.",
                "However, there may be multiple matches from which the auctioneer can choose.",
                "Sometimes the choices are equivalent from the auctioneers perspective; alternatively, an objective function can be used to find an optimal match according to that objective.",
                "Example 4. (Auctioneer alternatives I) Suppose |A| = 2.",
                "Consider an order to sell one unit of A1 at price $0.7, an order to sell one unit of A2 at price $0.7, an order to buy one unit of A1A2 at price $0.4, an order to buy one unit of A1 ¯A2 at price $0.4, and an order to buy one unit of ¯A1A2 at price $0.4.",
                "The corresponding payoff vectors are: Υ1 = −0.3,−0.3, 0.7, 0.7 Υ2 = −0.3, 0.7,−0.3, 0.7 Υ3 = 0.6,−0.4,−0.4,−0.4 Υ4 = −0.4, 0.6,−0.4,−0.4 Υ5 = −0.4,−0.4, 0.6,−0.4 Consider the indivisible case.",
                "The auctioneer could choose to accept bids 1, 3, and 4 together, or the auctioneer could choose to accept bids 2, 3, and 5 together.",
                "Both constitute matches, and in fact both yield identical payoffs (Υauc = 0.1, 0.1, 0.1, 0.1 , or $0.1 in cash) for the auctioneer. 2 Example 5. (Auctioneer alternatives II) Suppose |A| = 2.",
                "Consider an order to sell two units of A1 at price $0.6, an order to buy one unit of A1A2 at price $0.3, and an order to buy one unit of A1 ¯A2 at price $0.5.",
                "The corresponding payoff vectors are: Υ1 = −0.4,−0.4, 0.6, 0.6 Υ2 = 0.7,−0.3,−0.3,−0.3 Υ3 = −0.5, 0.5,−0.5,−0.5 Consider the divisible case.",
                "The auctioneer could choose to accept one unit each of all three bids, yielding a payoff to the auctioneer of $0.2 in cash (Υauc = 0.2, 0.2, 0.2, 0.2 ).",
                "Alternatively, the auctioneer could choose to accept 4/3 units of bid 1, and one unit each of bids 2 and 3, yielding a payoff to the auctioneer of 1/3 units of security A1 .",
                "Both choices constitute matches (in fact, accepting any number of units of bid 1 between 1 and 4/3 can be part of a match), though depending on the auctioneers objective, one choice might be preferred over another.",
                "For example, if the auctioneer believes that A1 is very likely to occur, it may prefer to accept 4/3 units of bid 1. 2 There are many possible criteria for the auctioneer to decide among matches, all of which seem reasonable in some circumstances.",
                "One natural quantity to maximize is the volume of trade among bidders; another is the auctioneers utility, either with or without the arbitrage constraint.",
                "Definition 3. (Trade maximization problem) Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X i αiqi, under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Another reasonable variation is to maximize the total percent of orders filled, or P i αi, under the same (risk-free) constraint that ∀ω, Υ ω auc ≥ 0.",
                "Definition 4. (Auctioneer risk-free utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u(Υ ω auc), 148 under the constraint that ∀ω, Υ ω auc ≥ 0. 2 Definition 5. (Auctioneer standard utility-maximization problem) Let the auctioneers subjective probability for each state ω be Pr(ω), and let the auctioneers utility for y dollars be u(y).",
                "Given a set of indivisible (divisible) orders O, choose αi ∈ {0, 1} (αi ∈ [0, 1]) to maximize X ω∈Ω Pr(ω)u Υ ω auc . 2 This last objective function drops the risk-free (arbitrage) constraint.",
                "In this case, the auctioneer is a market maker with beliefs about the likelihood of outcomes, and the auctioneer may actually lose money is some outcomes.",
                "Still other variations and other optimization criteria seem reasonable, including social welfare, etc.",
                "It also seems reasonable to suppose that the surplus be shared among bidders and the auctioneer, rather than retained solely by the auctioneer.",
                "This is analogous to choosing a common transaction price in a double auction (e.g., the midpoint between the bid and ask prices), rather than the buyer paying the bid price and the seller receiving the ask price, with the difference going to the auctioneer.",
                "The problem becomes more complicated when dividing surplus securities, in part because they are valued differently by different agents.",
                "Formulating reasonable sharing rules and examining the resulting incentive properties seems a rich and promising avenue for further investigation. 4.",
                "MATCHING ALGORITHMS The straightforward algorithm for solving the divisible matching problem is linear programming; we set up an appropriate linear program in Section 5.1.",
                "The straightforward algorithm for solving the indivisible matching problem is integer programming.",
                "With n events, to set up the appropriate linear or integer programs, simply writing out the payoff vectors in the straightforward way requires O(2n ) space.",
                "There is some hope that specialized algorithms that exploit structure among bids can perform better in terms of average-case time and space complexity.",
                "For example, in some cases matches can be identified using logical reduction techniques, without writing down the full payoff vectors.",
                "So a match between the following bids: • sell 1 of A1A2 at $0.2 • sell 1 of A1 ¯A2 at $0.1 • buy 1 of A1 at $0.4 can be identified by reducing the first two bids to an equivalent offer to sell A1 at $0.3 that clearly matches with the third bid.",
                "Formalizing a logical-reduction algorithm for matching, or other algorithms that can exploit special structure among the bids, is a promising avenue for future work. 5.",
                "THE COMPUTATIONAL COMPLEXITY OF MATCHING In this section we examine the computational complexity of the auctioneers matching problem.",
                "Here n refers to the problems input size that includes descriptions of all of the buy and sell orders.",
                "We also assume that n bounds the number of base securities.",
                "We consider four cases based on two parameters: 1.",
                "Whether to allow divisible or indivisible orders. 2.",
                "The number of securities.",
                "We consider two possibilities: (a) O(log n) base securities yielding a polynomial number of states. (b) An unlimited number of base securities yielding an exponential number of states.",
                "We show the following results.",
                "Theorem 1.",
                "The matching problem is 1. computable in polynomial-time for O(log n) base securities with divisible orders. 2. co-NP-complete for unlimited securities with divisible orders. 3.",
                "NP-complete for O(log n) base securities with indivisible orders. 4.",
                "Σp 2-complete for unlimited securities with indivisible orders. 5.1 Small number of securities with divisible orders We can build a linear program based on Definition 2.",
                "We have variables αi.",
                "For each i, we have 0 ≤ αi ≤ 1 and for each state ω in Ω we have the constraint Υ ω auc = X i −αiΥ ω i ≥ 0.",
                "Given these constraints we maximize X i αi.",
                "A set of orders has a matching exactly when P i αi > 0.",
                "With O(log n) base securities, we have |Ω| bounded by a polynomial so we can solve this linear program in polynomial time.",
                "Note that one might argue that one should maximize some linear combination of the −Υ ω i s to maximize the surplus.",
                "However this approach will not find matchings that have zero surplus. 5.2 Large number of securities with divisible orders With unlimited base securities, the linear program given in Section 5.1 has an exponential number of constraint equations.",
                "Each constraint is short to describe and easily computable given ω. 149 Let m ≤ n be the total number of buy and sell orders.",
                "By the theory of linear programming, an upper bound on the objective function can be forced by a collection of m + 1 constraints.",
                "So if no matching exists there must exist m + 1 constraints that force all the αi to zero.",
                "In nondeterministic polynomial-time we can guess these constraints and solve the reduced linear program.",
                "This shows that matching is in co-NP.",
                "To show co-NP-completeness we reduce the NP-complete problem of Boolean formula satisfiability to the nonexistence of a matching.",
                "Fix a formula φ.",
                "Let the base securities be the variables of φ and consider the single security φ with a buy order of 0.5.",
                "If the formula φ is satisfiable then there is some state with payoff 0.5 and no fractional unit of the security φ is a matching.",
                "If the formula φ is not satisfiable then every state has an auctioneers payoff of 0.5 and a single unit of the security φ is a matching.",
                "One could argue that if the formula φ is not satisfiable then no fully rational buyer would want to buy φ for a cost of 0.5.",
                "We can get around this problem by adding auxiliary base securities, A and B, and defining two securities τ = (φ ∧ A) ∨ (A ∧ B) τ = (φ ∧ A) ∨ (A ∧ B) with separate buy orders of 0.5 on each.",
                "If φ were satisfiable then in the state corresponding to the satisfying assignment and both A and B to be true, τ and τ both have an auctioneers payoff of −0.5 so even no divisible matching can exist.",
                "If φ were not satisfiable then one unit of each would be a matching since in every state at least one of τ or τ are false. 5.3 Small number of securities with indivisible orders This case is easily seen to be in NP: Just nondeterministically guess a nonempty subset S of orders and check for each state ω in Ω that Υ ω auc = X i∈S −Υ ω i ≥ 0.",
                "Since |Ω| and |S| are bounded by a polynomial in n, the verification can be done in polynomial time.",
                "To show that matching is NP-complete we reduce the NPcomplete problem EXACT COVER BY 3-SETS (X3C) to a matching of securities.",
                "The input to X3C consists of a set X and a collection C of 3-element subsets of X.",
                "The input (X, C) is in X3C if C contains an exact cover of X, i.e., there is a subcollection C of C such that every element of X occurs in exactly one member of C .",
                "Karp showed that X3C is NP-complete.",
                "Suppose we have an instance (X, C) with the vector X = {x1, . . . , x3q} and C = {c1, . . . , cm}.",
                "We set Ω = {e1, . . . , e3q, r, s} and define securities labelled φ1 , . . . , φm , ψ1 , . . . , ψq and τ , as follows: • Security φi is true in state r, and is true in state ek if k is not in ci. • Security ψj is true only in state s. • Security τ is true in each state ek but not r or s. We have buy orders on each φi and ψj security for 0.5 − 1 8q and a buy order on τ for 0.5.",
                "We claim that a matching exists if and only if (X, C) is in X3C.",
                "If (X, C) is in X3C, let C be the subcollection that covers each element of X exactly once.",
                "Note that |C | = q.",
                "We claim the collection consisting of φi for each ci in C , every ψj and τ has a matching.",
                "In each state ek we have an auctioneers payoff of (.5 − 1 8q ) + (q − 1)(−.5 − 1 8q ) + q(.5 − 1 8q ) − .5 = .5 − 2q 1 8q = .25 ≥ 0.",
                "In states r and s the auctioneers payoffs are −q(.5 + 1 8q ) + −q(−.5 + 1 8q ) + .5 = −5 − 2q 1 8q = .25 ≥ 0.",
                "Suppose now that (X, C) is not in X3C but there is a matching.",
                "Consider the number q of the φi in that matching and q the number of ψj in the matching.",
                "Since a matching requires a nonempty subset of the orders and τ by itself is not a matching we have q + q > 0.",
                "We have three cases. q > q: In state r, the auctioneers payoff is −q (.5 + 1 8q ) − q(−.5 + 1 8q ) + .5 ≤ −(q + q) 1 8q < 0. q > q : In state s, the auctioneers payoff is −q (.5 + 1 8q ) − q (−.5 + 1 8q ) + .5 ≤ −(q + q ) 1 8q < 0. q ≤ q ≤ q: Consider the set C consisting of the ci where φi is in the matching.",
                "There must be some state ek not in any of the ci or C would be an exact cover.",
                "The auctioneers payoff in ek is at most −q (.5 + 1 8q ) − q (−.5 + 1 8q ) ≤ −(q + q ) 1 8q < 0. 5.4 Large Number of Securities with Indivisible Orders The class Σp 2 is the second level of the polynomial-time hierarchy.",
                "A language L is in Σp 2 if there exists a polynomial p and a set A in P such that x is in L if and only if there is a y with |y| = p(|x|) such that for all z, with |z| = p(|x|), (x, y, z) is in A.",
                "The class Σp 2 contains both NP and coNP.",
                "Unless the polynomial-time hierarchy collapses (which is considered unlikely), a problem that is complete for Σp 2 is not contained in NP or co-NP.",
                "We will show that computing a matching is Σp 2-complete, and remains so even for quite restricted types of securities, and hence is (likely) neither in NP or co-NP.",
                "While it may seem that being NP-complete or co-NP-complete is hard enough, there are further practical consequences of being outside of NP and co-NP.",
                "If the matching problem were in NP, one could use heuristics to search for and verify a match if it exists; even if such heuristics fail in the worst case, they may succeed for most examples in practice.",
                "Similarly, if the matching problem were in co-NP, one might hope to at least heuristically rule out the possibility of matching.",
                "But for problems outside of NP or co-NP, there is no framework for verifying that a heuristically derived answer is correct.",
                "Less formally, for NP (or co-NP)-complete problems, you have to be lucky; for Σp 2-complete problems, you cant even tell if youve been lucky. 150 We note that the existence of a matching is in Σp 2: We use y to choose a subset of the orders and z to represent a state ω with (x, y, z) in A if the set of orders has a total nonpositive auctioneers payoff in state ω.",
                "We prove a stronger theorem which implies that matching is in Σp 2.",
                "Let S1, . . . , Sn be a set of securities, where each security Si has cost ci and pays off pi whenever formula Ci is satisfied.",
                "The 0 − 1-matching problem asks whether one can, by accepting either 0 or 1 of each security, guarantee a worst-case payoff strictly larger than the total cost.",
                "Theorem 2.",
                "The 0−1-matching problem is Σp 2-complete.",
                "Furthermore, the problem remains Σp 2-complete under the following two special cases: 1.",
                "For all i, Ci is a conjunction of 3 base events (or their negations), pi = 1, and ci = cj for all i and j. 2.",
                "For all i, Ci is a conjunction of at most 2 base securities (or their negations).",
                "These hardness results hold even if there is a promise that no subset of the securities guarantees a worst-case payoff identical to their cost.",
                "To prove Theorem 2, we reduce from the standard Σp 2 problem that we call T∃∀BF.",
                "Given a boolean formula φ with variables x1, . . . , xn and y1, . . . , yn is the following fullyquantified formula true ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn)?",
                "The problem remains Σp 2-complete when φ(x1, . . . , xn, y1, . . . , yn) is restricted to being a disjunction of conjunctions of at most 3 variables (or their negations), e.g., φ(x1, . . . , xn, y1, . . . , yn) = (x1 ∧ ¯x3 ∧ y2) ∨ (x2 ∧ y3 ∧ y7) ∨ · · · .",
                "This form, without the bound on the conjunction size, is known as disjunctive normal form (DNF); the restriction to conjunctions of 3 variables is 3-DNF.",
                "We reduce T∃∀BF to finding a matching.",
                "For the simplest reduction, we consider the matching problem where one has a set of Arrow-Debreu securities whose payoff events are conjunctions of the base securities, or their negations.",
                "The auctioneer has the option of accepting either 0 or 1 of each of the given securities.",
                "We first reduce to the case where the payoff events are conjunctions of arbitrarily many base events (or their negations).",
                "By a standard trick we can reduce the number of base events in each conjunction to 3, and with a slight twist we can even ensure that all securities have the same price as well as the same payoff.",
                "Finally, we show that the problem remains hard even if only conjunctions of 2 variables are allowed, though with securities that deviate slightly from Arrow-Debreu securities in that they may have varying, non unit payoffs. 5.4.1 The basic reduction Before describing the securities, we give some intuition.",
                "The T∃∀BFproblem may be viewed as a game between a selector and an adversary.",
                "The selector sets the xi variables, and then the adversary sets the yi variables so as to falsify the formula φ.",
                "We can view the 0 − 1-matching problem as one in which the auctioneer is a buyer who buys securities corresponding to disjunctions of the base events, and then the adversary sets the values of the base events to minimize the payoff from the securities.",
                "We construct our securities so that the optimal buying strategy is to buy n expensive securities along with a set of cheap securities, of negligible cost (for some cases we can modify the construction so that all securities have the same cost).",
                "The total cost of the securities will be just under 1, and each security pays off 1, so the adversary must ensure that none of the securities pays off.",
                "Each expensive security forces the adversary to set some variable, xi to a particular value to prevent the security from paying off; this corresponds to setting the xi variables in the original game.",
                "The cheap securities are such that preventing every one of of these securities from paying off is equivalent to falsifying φ in the original game.",
                "Among the technical difficulties we face is how to prevent the buyer from buying conflicting securities, e.g., one that forces xi = 0 and the other that forces xi = 1, allowing for a trivial arbitrage.",
                "Secondly, for our analysis we need to ensure that a trader cannot spend more to get more, say by spending 1.5 for a set of securities with the property that at least 2 securities pay off under all possible events.",
                "For each of the variables {xi}, {yi} in φ, we add a corresponding base security (with the same labels).",
                "For each existential variable xi we add additional base securities, ni and zi.",
                "We also include a base security Q.",
                "In our basic construction, each expensive security costs C and each cheap security costs ; all securities pay off 1.",
                "We require that Cn+ (|cheap securities|) < 1 and C(n+1) > 1.",
                "That is, one can buy n expensive securities and all of the cheap securities for less than 1, but one cannot buy n + 1 expensive securities for less than 1.",
                "We at times refer to a security by its payoff clause.",
                "Remark: We may loosely think of as 0.",
                "However, this would allow one to buy a security for nothing that pays (in the worst case) nothing.",
                "By making > 0 , we can show it hard to distinguish portfolios that guarantee a positive profit from those that risk a positive loss.",
                "Setting > 0 will also allow us to show hardness results for the case where all securities have the same cost.",
                "For 1 ≤ i ≤ n, we have two expensive securities with payoff clauses (¯xi ∧Q) and (¯ni ∧Q) and two cheap securities with payoff clauses (xi ∧ ¯zi) and (ni ∧ ¯zi).",
                "For each clause C ∈ φ, we convert every negated variable ¯xi into ni and add the conjunction z1 ∧ · · · ∧ zn.",
                "Thus, for a clause C = (x2 ∧ ¯x7 ∧ ¯y5) we construct a cheap security SC, with payoff clause (z1 ∧ · · · ∧ zn ∧ x2 ∧ n7 ∧ ¯y5).",
                "Finally, we have a cheap security with payoff clause ( ¯Q).",
                "We now argue that a matching exists iff ∃x1 . . . ∃xn∀y1 . . . ∀yn φ(x1, . . . , xn, y1, . . . , yn).",
                "We do this by successively constraining the buyer and the adversary, eliminating behaviors that would cause the other player to win.",
                "The resulting reasonable strategies correspond exactly to the game version of T∃∀BF.",
                "First, observe that if the adversary sets all of the base securities to false (0), then only the ( ¯Q) security will pay off. 151 Thus, no buyer can buy more than n expensive securities and guarantee a profit.",
                "The problem is thus whether one can buy n expensive securities and all the cheap securities, so that at for any setting of the base events at least one security will pay off.",
                "Clearly, the adversary must make Q hold, or the ( ¯Q) security will pay off.",
                "Next, we claim that for each i, 1 ≤ i ≤ i, the auctioneer must buy at least one of the (¯xi ∧ Q) and (¯ni ∧ Q) securities.",
                "This follow from the fact that if the adversary sets xi, ni and zi to be false, and every other base event to be true, then only the (¯xi ∧ Q) and (¯ni ∧ Q) securities will pay off.",
                "As no auctioneer can buy more than n expensive securities, it must therefore buy exactly one of (¯xi ∧ Q) or (¯ni ∧ Q), for each i, 1 ≤ i ≤ n. For the rest of the analysis, we assume that the auctioneer follows this constraint.",
                "Suppose that the buyer buys (¯xi ∧Q).",
                "Then the adversary must set xi to be true (since it must set Q to be true), or the security will pay off.",
                "It must then set zi to be true or (xi∧¯zi) will pay off.",
                "Since the buyer doesnt buy (¯ni ∧ Q) (by the above constraint), and all the other securities pay the same or less when ni is made false, we can assume without loss of generality that the adversary sets ni to be false.",
                "Similarly, if the buyer buys (¯ni ∧ Q), then the adversary must set ni and zi to be true, and we can assume without loss of generality that the adversary sets xi to be false.",
                "Note that the adversary must in all cases set each zi event to be true.",
                "Summarizing the preceding argument, there is an exact correspondence between the rational strategies of the buyer and settings for the xi variables forced on the adversary.",
                "Furthermore, the adversary is also constrained to set the variables Q, z1, . . . , zn to be true, and without loss of generality may be assumed to set ni = ¯xi.",
                "Under these constraints, those securities not corresponding to clauses in φ are guaranteed to not pay off.",
                "The adversary also decides the value of the y1, . . . , ym base events.",
                "Recall that for each clause C ∈ φ there is a corresponding security SC.",
                "Given that zi is true and ni = ¯xi (without loss of generality), it follows from the construction of SC that the setting of the yis causes SC to pay off iff it satisfies C. This establishes the reduction from T∃∀BF to the matching problem, when the securities are constrained to be a conjunction of polynomially many base events or their negations. 5.4.2 Reducing to 3-variable conjunctions There are standard methods for reducing DNF formulae to 3-DNF formulae, which are trivially modifiable to our securities framework; we include the reduction for completeness.",
                "Given a security S whose payoff clause is C = (v1 ∧ v2 ∧ · · · ∧ vk) (variable negations are irrelevant to this discussion), cost c and payoff p, introduce a new auxiliary variable, w, and replace the security with two securities, S1 and S2, with payoff clauses, C1 = (v1 ∧ v2 ∧ w) and C2 = ( ¯w ∧ v3 ∧ · · · ∧ vk).",
                "The securities both have payoff p, and their costs can be any positive values that sum to c. Note that at most one of the securities can pay off at a time.",
                "If only one security is bought, then the adversary can always set w so that it wont pay off; hence the auctioneer will buy either both or neither, for a total cost of c (here we use the fact that one is only allowed to buy either 0 or 1 shares of each security).",
                "Then, it may be verified that, given the ability to set w arbitrarily, the adversary can cause C to be unsatisfied iff it can cause both C1 and C2 to be unsatisfied.",
                "Hence, owning one share each of S1 and S2 is equivalent to owning one share of S. Note that C1 has three variables and C2 has k−1 variables.",
                "By applying the transformation successively, one obtains an equivalent set of securities, of polynomial size, whose payoff clauses have at most 3 variables.",
                "We note that in the basic construction, all of the clauses with more than 3 variables are associated with cheap securities (cost ).",
                "Instead of subdividing costs, we can simply make all of the resulting securities have cost ; the constraints on C and must reflect the new, larger number of cheap securities.",
                "One can ensure that all of the payoff clauses have exactly 3 variables, with a similar construction.",
                "A security S with cost c, payoff p and defining clause (x ∧ y) can be replaced by securities S1 and S2 with cost c/2, payoff p and defining clauses (x∧y∧w) and (x∧y∧ ¯w), where w is a new auxiliary variable.",
                "Essentially the same analysis as given above applies to this case.",
                "The case of single-variable payoff clauses is handled by two applications of this technique. 5.4.3 Reducing to equi-cost securities By setting C and appropriately, one can ensure that in the basic reduction every security costs a polynomially bounded integer multiple of ; call this ratio r. We now show how to reduce this case to the case where every security costs .",
                "Recall that the expensive securities have payoff clauses (¯xi ∧ Q) or (¯ni ∧ Q).",
                "Assume that security S has payoff clause (¯xi ∧ Q) (the other case is handled identically).",
                "Replace S with security S , with payoff clause (¯xi ∧ Q ∧ w1) (w1, . . . , wr−1 are auxiliary variables; fresh variables are chosen for each clause), and also S1, . . . , Sr−1, with payoff clauses ( ¯w1 ∧ w2), ( ¯w2 ∧ w3), . . . , ( ¯wr−2 ∧ wr−1), and( ¯wr−1 ∧ ¯w1).",
                "Clearly, buying none of the new securities is equivalent to not buying the original security.",
                "We show that buying all of the new securities is equivalent to buying the original security, and that buying a proper, nonempty subset of the securities is irrational.",
                "We first note that if the buyer buys securities S1, . . . , Sr−1, then the adversary must set w1 to be true, or one of the securities will pay off.",
                "To see this, note that if wi is set to false, then ( ¯wi ∧wi+1) will be true unless wi+1 is set to false; thus, setting w1 to false forces the adversary to set wr−1 to false, causing the final clause to be true.",
                "Having set w1 true, the adversary can set w2, . . . , wr−1 to false, ensuring that none of the securities S1, . . . , Sr−1 pays out.",
                "If wi is true, then (¯xi ∧ Q ∧ w1) is equivalent to (¯xi ∧ Q).",
                "So buying all of the replacement securities for each is equivalent to buying the original security for r. It remains to show that buying a proper, nonempty subset of the securities is irrational.",
                "If one doesnt buy S , then the adversary can set the w variables so that none of S1, . . . , Sr−1 will pay off; any money spent on these securities is wasted.",
                "If one doesnt buy Sr−1, the adversary can set all w to false, in which case none of the new clauses will pay off, regardless of the value of xi and Q.",
                "Similarly, if one 152 doesnt buy Si, for 1 ≤ i ≤ r −2, the adversary can set wi+1 to be true, all the other w variables to be false, and again there is no payoff, regardless of the value of xi and Q.",
                "Thus, buying a proper subset of these securities will not increase ones payoff.",
                "We note that this reduction can be combined trivially with the reduction that ensures that all of the defining clauses have 3 or fewer variables.",
                "With a slightly messier argument, all of the defining clauses can be set up to have exactly 3 variables. 5.4.4 Reducing to clauses of at most 2 variables If we allow securities to have variable payoffs and prices, we can reduce to the case where each securitys payoff clause is a conjunction of at most 2 variables or their negations.",
                "Given a security s with payoff clause (X ∧ Y ∧ Z), cost c and payoff 1, we introduce fresh auxiliary variables, w1, w2 and w3 (new variables are used for each clause) and replace S with the following securities: • Securities S1, S2 and S3, each with cost c/3 and payoff 1, with respective payoff clauses (X ∧ w1), (Y ∧ w2) and (Z ∧ w3). • Securities S1, . . . , S6, each with cost 4 and payoff 24 − 2, with payoff clauses, (w1 ∧ w2) (w1 ∧ w3) (w2 ∧ w3) ( ¯w1 ∧ ¯w2) ( ¯w1 ∧ ¯w3) ( ¯w2 ∧ ¯w3) Here, 2 is a tiny positive quantity, described later.",
                "By a simple case analysis, we have the following.",
                "Observations: 1.",
                "For any i, there exists a setting of w1, w2 an w3 such that of the S securities only Si pays off. 2.",
                "For any setting of w1, w2 and w3, at least one of the S securities will pay off. 3.",
                "If w1, w2 and w3 are all false, all of the S securities will pay off. 4.",
                "Setting one of w1, w2 or w3 to be true, and the others to be 0, will cause exactly one of the S securities to pay off.",
                "By Observation 1, there is no point in buying a nonempty proper subset of the S securities: The adversary can ensure that none of the bought securities will pay off, and even if all the S securities pay off, it will not be sufficient to recoup the cost of buying a single S security.",
                "By Observation 2, if one buys all the S securities, one is guaranteed to almost make back ones investment (except for 2), in which case by Observations 3 and 4, the adversaries optimal strategy is to make exactly one of w1, w2 or w3 true.",
                "We set C, and 2 so that Cn + (|cheap securities|) + 2(|clauses|) < 1.",
                "Thus, the accumulated losses of 2 can never spell the difference between making a guaranteed profit and making no profit at all.",
                "Note also that by making 2 positive we prevent the existence of break-even buying strategies in which the buyer only purchases S securities.",
                "Summarizing the previous argument, we may assume without loss of generality that the buyer buys all of the S securities (for all clauses), and that for each clause the adversary sets exactly one of that clauses auxiliary variables w1, w2 or w3 to be true.",
                "For the rest of the discussion, we assume that the players follow these constraints.",
                "We next claim that a rational buyer will either buy all of S1, S2 or S3, or none of them.",
                "If the buyer doesnt buy S1, then if the adversary makes w1 true and w2 and w3 false, neither S2 nor S3 will pay off, regardless of how the adversary sets X, Y and Z.",
                "Hence, there is no point in buying either S2 or S3 if one doesnt buy S1.",
                "Applying the same argument to S2 and S3 establishes the claim.",
                "Clearly, buying none of S1, S2 and S3 has, up to negligible 2 factors, the same price/payoff behavior as not buying S. We next argue that, subject to the established constraints put on the players behaviors, buying all of S1, S2 and S3 has the same price/payoff behavior (again ignoring 2 factors) as buying S, regardless of how the adversary sets X, Y and Z.",
                "First, in both cases, the cost is c. If the adversary makes X, Y and Z true, then S pays off 1, and (assuming that exactly one of w1, w2 and w3 is true), exactly one of S1, S2 or S3 will pay off 1.",
                "If X is false, then S doesnt pay off, and the adversary can set w1 true (and w2 and w3 false), ensuring that none of S1, S2 and S3 pays off.",
                "The same argument holds if Y or Z are false. 6.",
                "TRACTABLE CASES The logical question to ask in light of these complexity results is whether further, more severe restrictions on the space of securities can enable tractable matching algorithms.",
                "Although we have not systematically explored the possibilities, the potential for useful tractable cases certainly exists.",
                "Suppose, for example, that bids are limited to unit quantities of securities of the following two forms: 1.",
                "Disjunctions of positive events: A1 ∨ · · · ∨ Ak . 2.",
                "Single negative events: ¯Ai .",
                "Let p be the price offered for a disjunction A1 ∨ · · · ∨ Ak , and qi the maximal price offered for the respective negated disjuncts.",
                "This disjunction bid is part of a match iff p +P i qi ≥ k. Evaluating whether this condition is satisfied by a subset of bids is quite straightforward.",
                "Although this example is contrived, its application is not entirely implausible.",
                "For example, the disjunctions may correspond to insurance customers, who want an insurance contract to cover all the potential causes of their asset loss.",
                "The atomic securities are sold by insurers, each of whom specialize in a different form of disaster cause. 7.",
                "CONCLUSIONS AND FUTURE DIRECTIONS We have analyzed the computational complexity of matching for securities based on logical formulas.",
                "Many possible avenues for future work exist, including 1.",
                "Analyzing the agents optimization problem: • How to choose quantities and bid/ask prices for a collection of securities to maximizes ones expected utility, both for linear and nonlinear utility functions. 153 • How to choose securities; that is, deciding on what collection of boolean formulas to offer to trade, subject to constraints or penalties on the number or complexity of bids. • How do make the above choices in a game theoretically sound way, taking into account the choices of other traders, their reasoning about other traders, etc. 2.",
                "Although matching is likely intractable, are there good heuristics that achieve matches in many cases or approximate a matching? 3.",
                "Exploring sharing rules for dividing the surplus, and incentive properties of the resulting mechanisms. 4.",
                "We may consider a market to be in computational equilibrium if no computationally-bounded player can find a strategy that increases utility.",
                "With few exceptions [3, 22], little is known about computational equilibriums.",
                "A natural question is to determine whether a market can achieve a computational equilibrium that is not a true equilibrium, and under what circumstances this may occur.",
                "Acknowledgments We thank Rahul Sami for his help with Section 5.4.4.",
                "We thank Rahul, Joan Feigenbaum and Robin Hanson for useful discussions. 8.",
                "REFERENCES [1] Kenneth J. Arrow.",
                "The role of securities in the optimal allocation of risk-bearing.",
                "Review of Economic Studies, 31(2):91-96, 1964. [2] Peter Bossaerts, Leslie Fine, and John Ledyard.",
                "Inducing liquidity in thin financial markets through combined-value trading mechanisms.",
                "European Economic Review, 46:1671-1695, 2002. [3] Paul J.",
                "Brewer.",
                "Decentralized computation procurement and computational robustness in a smart market.",
                "Economic Theory, 13:41-92, 1999. [4] Kay-Yut Chen, Leslie R. Fine, and Bernardo A. Huberman.",
                "Forecasting uncertain events with small groups.",
                "In Third ACM Conference on Electronic Commerce (EC01), pages 58-64, 2001. [5] Bruno de Finetti.",
                "Theory of Probability: A Critical Introductory Treatment, volume 1.",
                "Wiley, New York, 1974. [6] Sven de Vries and Rakesh V. Vohra.",
                "Combinatorial auctions: A survey.",
                "INFORMS J. of Computing, 2003. [7] Sandip Debnath, David M. Pennock, C. Lee Giles, and Steve Lawrence.",
                "Information incorporation in online in-game sports betting markets.",
                "In Fourth ACM Conference on Electronic Commerce (EC03), 2003. [8] Jacques H. Dreze.",
                "Market allocation under uncertainty.",
                "In Essays on Economic Decisions under Uncertainty, pages 119-143.",
                "Cambridge University Press, 1987. [9] Ronald Fagin, Joseph Y. Halpern, and Nimrod Megiddo.",
                "A logic for reasoning about probabilities.",
                "Information and Computation, 87(1/2):78-128, 1990. [10] Robert Forsythe and Russell Lundholm.",
                "Information aggregation in an experimental market.",
                "Econometrica, 58(2):309-347, 1990. [11] Robert Forsythe, Forrest Nelson, George R. Neumann, and Jack Wright.",
                "Anatomy of an experimental political stock market.",
                "American Economic Review, 82(5):1142-1161, 1992. [12] Robert Forsythe, Thomas A. Rietz, and Thomas W. Ross.",
                "Wishes, expectations, and actions: A survey on price formation in election stock markets.",
                "Journal of Economic Behavior and Organization, 39:83-110, 1999. [13] John M. Gandar, William H. Dare, Craig R. Brown, and Richard A. Zuber.",
                "Informed traders and price variations in the betting market for professional basketball games.",
                "Journal of Finance, LIII(1):385-401, 1998. [14] Robin Hanson.",
                "Decision markets.",
                "IEEE Intelligent Systems, 14(3):16-19, 1999. [15] Robin Hanson.",
                "Combinatorial information market design.",
                "Information Systems Frontiers, 5(1), 2002. [16] Robin D. Hanson.",
                "Could gambling save science?",
                "Encouraging an honest consensus.",
                "Social Epistemology, 9(1):3-33, 1995. [17] Jens Carsten Jackwerth and Mark Rubinstein.",
                "Recovering probability distributions from options prices.",
                "Journal of Finance, 51(5):1611-1631, 1996. [18] Joseph B. Kadane and Robert L. Winkler.",
                "Separating probability elicitation from utilities.",
                "Journal of the American Statistical Association, 83(402):357-363, 1988. [19] Michael Magill and Martine Quinzii.",
                "Theory of Incomplete Markets, Vol. 1.",
                "MIT Press, 1996. [20] Andreu Mas-Colell, Michael D. Whinston, and Jerry R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, New York, 1995. [21] Noam Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 1-12, 2000. [22] Noam Nisan and Amir Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Second ACM Conference on Electronic Commerce (EC00), pages 242-252, 2000. [23] J. Pearl.",
                "Probabilistic Reasoning in Intelligent Systems.",
                "Morgan Kaufmann, 1988. [24] David M. Pennock, Steve Lawrence, C. Lee Giles, and Finn ˚Arup Nielsen.",
                "The real power of artificial markets.",
                "Science, 291:987-988, February 9 2001. [25] David M. Pennock, Steve Lawrence, Finn ˚Arup Nielsen, and C. Lee Giles.",
                "Extracting collective probabilistic forecasts from web games.",
                "In Seventh International Conference on Knowledge Discovery and Data Mining, pages 174-183, 2001. [26] David M. Pennock and Michael P. Wellman.",
                "Compact securities markets for Pareto optimal reallocation of risk.",
                "In Sixteenth Conference on Uncertainty in Artificial Intelligence, pages 481-488, 2000. [27] C. R. Plott, J. Wit, and W. C. Yang.",
                "Parimutuel betting markets as information aggregation devices: Experimental results.",
                "Social Science Working Paper 986, California Institute of Technology, April 1997. 154 [28] Charles R. Plott.",
                "Markets as information gathering tools.",
                "Southern Economic Journal, 67(1):1-15, 2000. [29] Charles R. Plott and Shyam Sunder.",
                "Rational expectations and the aggregation of diverse information in laboratory security markets.",
                "Econometrica, 56(5):1085-1118, 1988. [30] R. Roll.",
                "Orange juice and weather.",
                "American Economic Review, 74(5):861-880, 1984. [31] Tuomas Sandholm, Subhash Suri, Andrew Gilpin, and David Levine.",
                "Winner determination in combinatorial auction generalizations.",
                "In First International Joint Conference on Autonomous Agents and Multiagent Systems (AAMAS), July 2002. [32] Carsten Schmidt and Axel Werwatz.",
                "How accurate do markets predict the outcome of an event? the Euro 2000 soccer championships experiment.",
                "Technical Report 09-2002, Max Planck Institute for Research into Economic Systems, 2002. [33] Richard H. Thaler and William T. Ziemba.",
                "Anomalies: Parimutuel betting markets: Racetracks and lotteries.",
                "Journal of Economic Perspectives, 2(2):161-174, 1988. [34] Hal R. Varian.",
                "The arbitrage principle in financial economics.",
                "J.",
                "Economic Perspectives, 1(2):55-72, 1987. [35] Robert L. Winkler and Allan H. Murphy.",
                "Good probability assessors.",
                "J.",
                "Applied Meteorology, 7:751-758, 1968. 155"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        }
    }
}