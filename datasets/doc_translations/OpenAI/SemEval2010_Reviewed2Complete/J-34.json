{
    "id": "J-34",
    "original_text": "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets. We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence. We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask). We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability. Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks. Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1. INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets. This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software. The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges. On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage). The vast majority of equity trading is done via the standard limit order market mechanism. In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered. Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.) While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange. With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics. It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature. The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals. In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics. Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence? To examine this question, we consider two stylized but natural models of the limit order arrival process. In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc. This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price. In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell). Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆. Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information. The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book. A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid. More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state. Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point. We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders. How do these two models differ? Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results. The differences arise when we consider the stability question introduced above. Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently. For the relative model this intuition is less clear. It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events. Our main results demonstrate that these two models do indeed have dramatically different stability properties. We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books. In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps. We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations. In contrast, we show that the relative model enjoys no such stability properties. After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical. Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two. The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments. In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data). They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model. Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs. Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past. The outline of the paper follows. In Section 2 we briefly review the large literature on market microstructure. In Section 3 we describe the limit order mechanism and our formal models. Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model. This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model. Section 6 presents specific examples establishing the worstcase instability of the relative model. Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2. RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature. Here we have space only to summarize the main themes of this literature and to provide pointers to further readings. To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets. These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors. Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers. An excellent and comprehensive survey of results in this area can be found in [2]. There is a similarly large body of empirical work on microstructure. Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4]. A good overview of the empirical work can be found in [7]. Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets. This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions. There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution. Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading. Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3. MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9]. The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order. Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock. In a limit order, we specify not only the desired volume (1000 shares), but also the desired price. Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower. We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid). If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book). In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours. Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top. Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders. The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread. By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction. Figure 1: Sample INET order books for MSFT. How then do orders get (partially) executed? If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books. For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08. This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed. The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08. It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed. Thus in this example, the 1700 executed shares would be at different prices. Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values. In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution. Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously. This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order. It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above. In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell). Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution. Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences. Definition 3.1. Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi . Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value. In the case that ti is a cancel, ni matches a previously placed order and vi is ignored. We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative). In the absolute model, we do indeed interpret vi as simply being the price of the limit order. In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.) Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics. For simplicity we consider only modifications to the limit order values, but our results generalize to any modification. Definition 3.2. A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij . For every = ij , j ∈ {1, . . . , k} σ = σ . We now define the various quantities whose stability properties we examine in the absolute and relative models. All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4. THE 1-MODIFICATION THEOREM In this section we provide our most important technical result. It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited. We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model. Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ. At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i. We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close. Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same. Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical. Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences. Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders. Definition 4.1. Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2. Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2. Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2. Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}. Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states. Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ. Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change. The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states. This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ. The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2. If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof. Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2. If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b. The analysis of an arriving buy order is similar. Following the arrival of their only differing order, Σ and Σ are identical. We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab. This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence. We first show that from state ¯ab we remain in S regardless the next order. The intuition of this lemma is demonstrated in Figure 3. Lemma 4.3. If the current state is in the set ¯ab, then for any order the state will remain in S. Proof. We first provide the analysis for the case of an arriving sell order. Note that in ¯ab the buy books are identical (B1 = B2). Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books. For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged. For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order). Next we provide an analysis of the more subtle case where the arriving item is a buy order. For this case we need to take care of several different scenarios. The first is when the top of both sell books (the ask) is identical. Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order). We are left to deal with case where ask(A1) and ask(A2) are different. Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a . Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price. For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price. For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b. Lemma 4.4. If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5. If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3. The next and final lemma deals with cancellations. Lemma 4.6. If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof. When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them. For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged. For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1. Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled. Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5. ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model. We begin with an examination of the executed volume. Lemma 5.1. Let Σ be any sequence and Σ be any 1modification of Σ. Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2. Proof. By Theorem 4.1 we know that at each stage the books differ by at most two orders. Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two. Corollary 5.2. Let Σ be any sequence and Σ be any kmodification of Σ. Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k. An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ . Lemma 5.3. Let Σ be any sequence and let Σ be any kextension of Σ. Then the set of the executed orders generated by Σ and Σ differ by at most 2k. This lemma is the key to obtain our main absolute model volume result below. We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ . Theorem 5.4. Let Σ and Σ be any absolute model order sequences. Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k. In particular, |volume(Σ) − volume(Σ )| ≤ 4k. Proof. We first define the sequence ˜Σ which is the intersection of Σ and Σ . Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each. Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model. We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ). For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur. This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers. We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5. There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x. Proof. Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell. Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x. This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x. Similar instability results can be shown to hold for the other price-based quantities. This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread). We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread. In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change. We define s2(Σ) to be the maximum second spread in the sequence Σ following the change. Theorem 5.6. Let Σ be a sequence and let Σ be any 1modification of Σ. Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification. Proof. We provide the proof for the last bid; the proof for the last ask is similar. The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical. Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X. Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order. Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ). Now it remains to bound bid(Σ). Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order. Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired. In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order. First suppose that the books containing the additional orders are the original sequence Σ. Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order. Now assume that the books with the additional orders are for the modified sequence Σ . We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order. Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order. We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times. Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence. Lemma 5.7. Let Σ be a sequence and let Σ be any 1modification of Σ. Then the spread of Σ is bounded by s2(Σ). Proof. By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell). Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence. We are now ready to state a stability result for the average execution price in the absolute model. It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable. Theorem 5.8. Let Σ be a sequence and let Σ be any 1modification of Σ. Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ. Proof. The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ . Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a. Without loss of generality we assume that the sequence with the additional orders is Σ. If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ . Suppose that it involves a; there are two possibilities. Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a. By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ). In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ). If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b. If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b. If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ). We next give a stability result for the closing price. We first provide a technical lemma regarding the prices of consecutive executions. Lemma 5.9. Let Σ be any sequence. Then the prices of two consecutive executions in Σ differ by at most s2(Σ). Proof. Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask. Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise. Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10. Let Σ be any sequence and let Σ be a 1modification of Σ. If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof. We first deal with case where the last execution occurs in both sequences simultaneously. By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done. Next we deal with the case where the last execution among the two sequences occurs only in Σ. In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9). Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t). If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9. Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified. Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.) We use sk(Σ) to denote the k-spread. As before, we assume that the k-spread is always defined after an initialization period. We first state the following generalization of Lemma 5.7. Lemma 5.11. Let Σ be a sequence and let Σ be any 1modification of Σ. For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ). The proof is similar to the proof of Lemma 5.7 and omitted. A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ. Then we have s2(Σ ) ≤ s +2(Σ). Now using the above lemma and by simple induction we can obtain the following theorem. Theorem 5.12. Let Σ be a sequence and let Σ be any k-modification of Σ. Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification. We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model. Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6. RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders. Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on. While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price. In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions. In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed. Theorem 6.1. There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ). Proof. For concreteness we assume that at the beginning the ask is 10 and the bid is 8. The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n. Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1. After the first 2n orders there are still no executions; however, the books are different. Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8. Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n. The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model. Before providing the proof, we give its intuition. At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price. Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price. Theorem 6.2. For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof. Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar. We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis. The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1. We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12. Next we analyze a modified sequence. We change the first buy order from ∆ = 0 to ∆ = +1. Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y. Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1. Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Setting y = x + 2, we obtain the lemma for every property. We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7. SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model. The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets. In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data. By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market. These simulations provide an empirical counterpart to the theory we have developed. We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation. Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation. We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks. Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds. It is data sufficient to recreate the precise INET order book in a given stock on a given day and time. We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM). These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties. We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data. The basic format of each experiment was the following: 1. Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2. Make a small modification to a single order, and recompute the resulting value of the quantity of interest. In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction. For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values. The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence. Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4. For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM. These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day. We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data. In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves). The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price. Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects. Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market. However, the results both from the raw data and the clean data are qualitatively similar. The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings. Each row of the tables below contains a ticker (e.g. AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed). For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence. For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion. The results confirm rather strikingly the qualitative conclusions of the theory we have developed. In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market. As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point. This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares. Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models. Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured. As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure). For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently. We conclude with an examination of experiments with a mixture model. Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both. We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α. Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA. Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders. Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis). The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004. Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect. Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis). Each curve corresponds to a single day of trading during a month of 2004. Curves represent averages over 1000 trials. For the executed volume in the mixture model, however, the findings are more curious. In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations. We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above. But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α. It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data. We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8. ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis). The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data. Each curve corresponds to a single day of trading during June 2004. Curves represent averages over 1000 trials. here. Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9. REFERENCES [1] D. Bertsimas and A. Lo. Optimal control of execution costs. Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt. Market microstructure: a survey of microfoundations, empirical results and policy implications. Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters. Statistical properties of stock order books: empirical results and models. Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang. The informational content of an open limit order book, 2004. AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken. Optimal trade execution of equities in a limit order market. In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi. The price dynamics of common trading strategies. Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck. Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004. Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz. Optimal Trading Strategies. Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz. Competitive algorithms for VWAP and limit order trading. In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns. Reinforcement learning for optimized trade execution, 2006. Preprint. 129",
    "original_translation": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129",
    "original_sentences": [
        "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
        "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
        "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
        "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
        "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
        "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
        "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
        "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
        "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
        "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
        "The vast majority of equity trading is done via the standard limit order market mechanism.",
        "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
        "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
        "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
        "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
        "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
        "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
        "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
        "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
        "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
        "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
        "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
        "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
        "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
        "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
        "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
        "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
        "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
        "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
        "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
        "How do these two models differ?",
        "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
        "The differences arise when we consider the stability question introduced above.",
        "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
        "For the relative model this intuition is less clear.",
        "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
        "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
        "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
        "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
        "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
        "In contrast, we show that the relative model enjoys no such stability properties.",
        "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
        "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
        "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
        "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
        "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
        "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
        "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
        "The outline of the paper follows.",
        "In Section 2 we briefly review the large literature on market microstructure.",
        "In Section 3 we describe the limit order mechanism and our formal models.",
        "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
        "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
        "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
        "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
        "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
        "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
        "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
        "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
        "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
        "An excellent and comprehensive survey of results in this area can be found in [2].",
        "There is a similarly large body of empirical work on microstructure.",
        "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
        "A good overview of the empirical work can be found in [7].",
        "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
        "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
        "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
        "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
        "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
        "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
        "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
        "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
        "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
        "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
        "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
        "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
        "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
        "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
        "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
        "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
        "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
        "Figure 1: Sample INET order books for MSFT.",
        "How then do orders get (partially) executed?",
        "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
        "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
        "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
        "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
        "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
        "Thus in this example, the 1700 executed shares would be at different prices.",
        "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
        "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
        "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
        "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
        "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
        "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
        "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
        "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
        "Definition 3.1.",
        "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
        "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
        "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
        "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
        "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
        "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
        "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
        "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
        "Definition 3.2.",
        "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
        "For every = ij , j ∈ {1, . . . , k} σ = σ .",
        "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
        "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
        "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
        "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
        "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
        "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
        "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
        "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
        "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
        "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
        "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
        "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
        "Definition 4.1.",
        "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
        "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
        "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
        "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
        "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
        "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
        "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
        "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
        "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
        "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
        "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
        "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
        "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
        "The analysis of an arriving buy order is similar.",
        "Following the arrival of their only differing order, Σ and Σ are identical.",
        "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
        "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
        "We first show that from state ¯ab we remain in S regardless the next order.",
        "The intuition of this lemma is demonstrated in Figure 3.",
        "Lemma 4.3.",
        "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
        "We first provide the analysis for the case of an arriving sell order.",
        "Note that in ¯ab the buy books are identical (B1 = B2).",
        "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
        "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
        "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
        "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
        "For this case we need to take care of several different scenarios.",
        "The first is when the top of both sell books (the ask) is identical.",
        "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
        "We are left to deal with case where ask(A1) and ask(A2) are different.",
        "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
        "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
        "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
        "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
        "Lemma 4.4.",
        "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
        "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
        "The next and final lemma deals with cancellations.",
        "Lemma 4.6.",
        "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
        "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
        "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
        "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
        "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
        "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
        "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
        "We begin with an examination of the executed volume.",
        "Lemma 5.1.",
        "Let Σ be any sequence and Σ be any 1modification of Σ.",
        "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
        "Proof.",
        "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
        "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
        "Corollary 5.2.",
        "Let Σ be any sequence and Σ be any kmodification of Σ.",
        "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
        "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
        "Lemma 5.3.",
        "Let Σ be any sequence and let Σ be any kextension of Σ.",
        "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
        "This lemma is the key to obtain our main absolute model volume result below.",
        "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
        "Theorem 5.4.",
        "Let Σ and Σ be any absolute model order sequences.",
        "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
        "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
        "Proof.",
        "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
        "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
        "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
        "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
        "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
        "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
        "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
        "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
        "Proof.",
        "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
        "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
        "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
        "Similar instability results can be shown to hold for the other price-based quantities.",
        "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
        "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
        "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
        "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
        "Theorem 5.6.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
        "Proof.",
        "We provide the proof for the last bid; the proof for the last ask is similar.",
        "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
        "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
        "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
        "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
        "Now it remains to bound bid(Σ).",
        "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
        "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
        "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
        "First suppose that the books containing the additional orders are the original sequence Σ.",
        "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
        "Now assume that the books with the additional orders are for the modified sequence Σ .",
        "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
        "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
        "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
        "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
        "Lemma 5.7.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then the spread of Σ is bounded by s2(Σ).",
        "Proof.",
        "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
        "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
        "We are now ready to state a stability result for the average execution price in the absolute model.",
        "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
        "Theorem 5.8.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
        "Proof.",
        "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
        "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
        "Without loss of generality we assume that the sequence with the additional orders is Σ.",
        "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
        "Suppose that it involves a; there are two possibilities.",
        "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
        "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
        "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
        "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
        "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
        "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
        "We next give a stability result for the closing price.",
        "We first provide a technical lemma regarding the prices of consecutive executions.",
        "Lemma 5.9.",
        "Let Σ be any sequence.",
        "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
        "Proof.",
        "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
        "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
        "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
        "Let Σ be any sequence and let Σ be a 1modification of Σ.",
        "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
        "We first deal with case where the last execution occurs in both sequences simultaneously.",
        "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
        "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
        "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
        "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
        "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
        "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
        "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
        "We use sk(Σ) to denote the k-spread.",
        "As before, we assume that the k-spread is always defined after an initialization period.",
        "We first state the following generalization of Lemma 5.7.",
        "Lemma 5.11.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
        "The proof is similar to the proof of Lemma 5.7 and omitted.",
        "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
        "Then we have s2(Σ ) ≤ s +2(Σ).",
        "Now using the above lemma and by simple induction we can obtain the following theorem.",
        "Theorem 5.12.",
        "Let Σ be a sequence and let Σ be any k-modification of Σ.",
        "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
        "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
        "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
        "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
        "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
        "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
        "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
        "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
        "Theorem 6.1.",
        "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
        "Proof.",
        "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
        "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
        "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
        "After the first 2n orders there are still no executions; however, the books are different.",
        "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
        "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
        "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
        "Before providing the proof, we give its intuition.",
        "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
        "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
        "Theorem 6.2.",
        "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
        "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
        "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
        "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
        "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
        "Next we analyze a modified sequence.",
        "We change the first buy order from ∆ = 0 to ∆ = +1.",
        "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
        "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
        "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
        "Setting y = x + 2, we obtain the lemma for every property.",
        "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
        "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
        "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
        "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
        "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
        "These simulations provide an empirical counterpart to the theory we have developed.",
        "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
        "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
        "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
        "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
        "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
        "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
        "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
        "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
        "The basic format of each experiment was the following: 1.",
        "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
        "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
        "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
        "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
        "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
        "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
        "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
        "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
        "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
        "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
        "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
        "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
        "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
        "However, the results both from the raw data and the clean data are qualitatively similar.",
        "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
        "Each row of the tables below contains a ticker (e.g.",
        "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
        "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
        "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
        "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
        "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
        "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
        "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
        "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
        "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
        "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
        "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
        "We conclude with an examination of experiments with a mixture model.",
        "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
        "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
        "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
        "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
        "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
        "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
        "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
        "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
        "Each curve corresponds to a single day of trading during a month of 2004.",
        "Curves represent averages over 1000 trials.",
        "For the executed volume in the mixture model, however, the findings are more curious.",
        "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
        "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
        "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
        "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
        "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
        "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
        "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
        "Each curve corresponds to a single day of trading during June 2004.",
        "Curves represent averages over 1000 trials. here.",
        "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
        "REFERENCES [1] D. Bertsimas and A.",
        "Lo.",
        "Optimal control of execution costs.",
        "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
        "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
        "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
        "Statistical properties of stock order books: empirical results and models.",
        "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
        "The informational content of an open limit order book, 2004.",
        "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
        "Optimal trade execution of equities in a limit order market.",
        "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
        "The price dynamics of common trading strategies.",
        "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
        "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
        "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
        "Optimal Trading Strategies.",
        "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
        "Competitive algorithms for VWAP and limit order trading.",
        "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
        "Reinforcement learning for optimized trade execution, 2006.",
        "Preprint. 129"
    ],
    "translated_text_sentences": [
        "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos.",
        "Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes.",
        "Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual).",
        "Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad.",
        "Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ.",
        "Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1.",
        "En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos.",
        "Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software.",
        "Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios.",
        "En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico).",
        "La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite.",
        "En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido.",
        "Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3).",
        "Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio.",
        "Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite.",
        "Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas.",
        "Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia.",
        "En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica.",
        "Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes?",
        "Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite.",
        "En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc.",
        "Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite.",
        "Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta).",
        "Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆.",
        "Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena.",
        "El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro.",
        "Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual.",
        "Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes.",
        "Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado.",
        "Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos.",
        "¿En qué se diferencian estos dos modelos?",
        "Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos.",
        "Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente.",
        "De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente.",
        "Para el modelo relativo, esta intuición es menos clara.",
        "Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos.",
        "Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes.",
        "Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros.",
        "En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes.",
        "Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones.",
        "Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad.",
        "Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica.",
        "Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos.",
        "Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores.",
        "Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos).",
        "Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto.",
        "Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias.",
        "Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético.",
        "El esquema del documento sigue.",
        "En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado.",
        "En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales.",
        "La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto.",
        "Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto.",
        "La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo.",
        "La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2.",
        "TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente.",
        "Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales.",
        "Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite.",
        "Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes.",
        "Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado.",
        "Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2].",
        "Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura.",
        "Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4].",
        "Una buena visión general del trabajo empírico se puede encontrar en [7].",
        "De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes.",
        "Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes.",
        "También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas.",
        "Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta.",
        "Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3.",
        "PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9].",
        "El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite.",
        "Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT).",
        "En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado.",
        "Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos.",
        "Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta).",
        "Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro).",
        "En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra.",
        "De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior.",
        "Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas.",
        "Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread.",
        "Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección.",
        "Figura 1: Libros de órdenes de muestra de INET para MSFT.",
        "¿Entonces, cómo se ejecutan las órdenes (parcialmente)?",
        "Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros.",
        "Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08.",
        "Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas.",
        "Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08.",
        "Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato.",
        "Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios.",
        "Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos.",
        "En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución.",
        "Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente.",
        "Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden.",
        "Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente.",
        "En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta).",
        "Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución.",
        "Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción.",
        "Definición 3.1.",
        "Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi.",
        "Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite.",
        "En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado.",
        "Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo).",
        "En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite.",
        "En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo).",
        "Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante.",
        "Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación.",
        "Definición 3.2.",
        "Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij.",
        "Para cada = ij , j ∈ {1, . . . , k} σ = σ .",
        "Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos.",
        "Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4.",
        "EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante.",
        "Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados.",
        "Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto.",
        "A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ.",
        "En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i.",
        "Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca.",
        "Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales.",
        "De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos.",
        "Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada.",
        "Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite.",
        "Definición 4.1.",
        "Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2.",
        "Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2.",
        "Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2.",
        "Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}.",
        "Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables.",
        "Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ.",
        "Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio.",
        "La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables.",
        "Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren.",
        "Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2.",
        "Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración.",
        "Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2.",
        "Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b.",
        "El análisis de una orden de compra que llega es similar.",
        "Tras la llegada de su único pedido diferente, Σ y Σ son idénticos.",
        "Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab.",
        "Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica).",
        "Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido.",
        "La intuición de este lema se demuestra en la Figura 3.",
        "Lema 4.3.",
        "Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración.",
        "Primero proporcionamos el análisis para el caso de una orden de venta que llega.",
        "Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2).",
        "Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra.",
        "Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios.",
        "Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden).",
        "A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra.",
        "Para este caso necesitamos tener en cuenta varios escenarios diferentes.",
        "La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica.",
        "Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega).",
        "Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes.",
        "Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a.",
        "Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio.",
        "Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega.",
        "Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b.",
        "Lema 4.4.",
        "Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5.",
        "Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3.",
        "El siguiente y último lema trata sobre cancelaciones.",
        "Lema 4.6.",
        "Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba.",
        "Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos.",
        "Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado.",
        "Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1.",
        "En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente.",
        "Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5.",
        "ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto.",
        "Comenzamos con un examen del volumen ejecutado.",
        "Lema 5.1.",
        "Sea Σ cualquier secuencia y Σ cualquier modificación de Σ.",
        "Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2.",
        "Prueba.",
        "Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes.",
        "Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos.",
        "Corolario 5.2.",
        "Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ.",
        "Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k.",
        "Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ.",
        "Lema 5.3.",
        "Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ.",
        "Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k.",
        "Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación.",
        "Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ.",
        "Teorema 5.4.",
        "Dejen Σ y Σ ser secuencias de orden de modelo absoluto.",
        "Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k.",
        "En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k.",
        "Prueba.",
        "Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ .",
        "Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno.",
        "Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto.",
        "Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ).",
        "Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad.",
        "Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores.",
        "Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5.",
        "Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x.",
        "Prueba.",
        "Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta.",
        "Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x.",
        "Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x.",
        "Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios.",
        "Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread).",
        "Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión.",
        "En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio.",
        "Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio.",
        "Teorema 5.6.",
        "Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ.",
        "Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación.",
        "Prueba.",
        "Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar.",
        "La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica.",
        "Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X.",
        "Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente.",
        "Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ).",
        "Ahora queda por acotar la oferta de Σ.",
        "Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden.",
        "Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba.",
        "En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional.",
        "Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ.",
        "Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional.",
        "Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ.",
        "Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional.",
        "De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional.",
        "Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento.",
        "A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original.",
        "Lema 5.7.",
        "Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ.",
        "Entonces la dispersión de Σ está acotada por s2(Σ).",
        "Prueba.",
        "Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta).",
        "Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada.",
        "Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto.",
        "Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable.",
        "Teorema 5.8.",
        "Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ.",
        "Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ.",
        "Prueba.",
        "La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ.",
        "Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a.",
        "Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ.",
        "Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ.",
        "Supongamos que implica un; hay dos posibilidades.",
        "O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a.",
        "Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ).",
        "En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ).",
        "Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b.",
        "Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b.",
        "Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ).",
        "A continuación, presentamos un resultado de estabilidad para el precio de cierre.",
        "Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas.",
        "Lema 5.9.",
        "Sea Σ cualquier secuencia.",
        "Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ).",
        "Prueba.",
        "Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual.",
        "Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario.",
        "De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10.",
        "Sea Σ cualquier secuencia y sea Σ una modificación de Σ.",
        "Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba.",
        "Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias.",
        "Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado.",
        "A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ.",
        "En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9).",
        "De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t).",
        "Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9.",
        "Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes.",
        "Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también).",
        "Usamos sk(Σ) para denotar la k-extensión.",
        "Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización.",
        "Primero establecemos la siguiente generalización del Lema 5.7.",
        "Lema 5.11.",
        "Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ.",
        "Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ).",
        "La prueba es similar a la prueba del Lema 5.7 y se omite.",
        "Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ.",
        "Entonces tenemos s2(Σ) ≤ s + 2(Σ).",
        "Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema.",
        "Teorema 5.12.",
        "Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ.",
        "Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación.",
        "Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción.",
        "Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6.",
        "INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes.",
        "Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente.",
        "Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución.",
        "En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales.",
        "En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas.",
        "Teorema 6.1.",
        "Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ).",
        "Prueba.",
        "Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8.",
        "La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n.",
        "Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1.",
        "Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes.",
        "Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8.",
        "Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n.",
        "El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo.",
        "Antes de proporcionar la prueba, damos su intuición.",
        "Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto.",
        "Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto.",
        "Teorema 6.2.",
        "Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba.",
        "Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar.",
        "Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis.",
        "La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1.",
        "Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12.",
        "A continuación analizamos una secuencia modificada.",
        "Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1.",
        "Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y.",
        "Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1.",
        "Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
        "Al establecer y = x + 2, obtenemos el lema para cada propiedad.",
        "Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7.",
        "Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo.",
        "La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales.",
        "En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real.",
        "Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado.",
        "Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado.",
        "Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación.",
        "Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto.",
        "También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ.",
        "En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos.",
        "Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados.",
        "Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM).",
        "Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación.",
        "Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes.",
        "El formato básico de cada experimento era el siguiente: 1.",
        "Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2.",
        "Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés.",
        "En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes.",
        "Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos.",
        "El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia.",
        "Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4.",
        "Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM.",
        "Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día.",
        "Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos.",
        "En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas).",
        "La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente.",
        "No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad.",
        "Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real.",
        "Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares.",
        "Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad.",
        "Cada fila de las tablas a continuación contiene un ticker (por ejemplo,",
        "AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados).",
        "Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET.",
        "Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos.",
        "Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado.",
        "En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo.",
        "Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo.",
        "Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones.",
        "En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos.",
        "En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio.",
        "Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura).",
        "Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente.",
        "Concluimos con un examen de experimentos con un modelo de mezcla.",
        "Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos.",
        "Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α.",
        "Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA.",
        "Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos.",
        "Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x).",
        "El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004.",
        "Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande.",
        "Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x).",
        "Cada curva corresponde a un solo día de operaciones durante un mes de 2004.",
        "Las curvas representan promedios de 1000 pruebas.",
        "Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos.",
        "En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones.",
        "Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior.",
        "Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α.",
        "De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado.",
        "Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones.",
        "AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado.",
        "El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios.",
        "Cada curva corresponde a un solo día de operaciones durante junio de 2004.",
        "Las curvas representan promedios de 1000 pruebas aquí.",
        "Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9.",
        "REFERENCIAS [1] D. Bertsimas y A.",
        "I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish?",
        "Control óptimo de los costos de ejecución.",
        "Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt.",
        "Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas.",
        "Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters.",
        "Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos.",
        "Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang.",
        "El contenido informativo de un libro de órdenes abiertas, 2004.",
        "Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken.",
        "Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas.",
        "En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi.",
        "La dinámica de precios de estrategias comunes de trading.",
        "Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck.",
        "Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004.",
        "Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz.",
        "Estrategias óptimas de trading.",
        "Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz.",
        "Algoritmos competitivos para VWAP y trading de órdenes límite.",
        "En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns.",
        "Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006.",
        "Preimpresión. 129"
    ],
    "error_count": 2,
    "keys": {
        "standard continuous limit-order mechanism": {
            "translated_key": "mecanismo estándar de órdenes límite continuas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the <br>standard continuous limit-order mechanism</br> that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the <br>standard continuous limit-order mechanism</br> that is used in modern equity markets."
            ],
            "translated_annotated_samples": [
                "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del <br>mecanismo estándar de órdenes límite continuas</br> que se utiliza en los mercados de valores modernos."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del <br>mecanismo estándar de órdenes límite continuas</br> que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "modern equity market": {
            "translated_key": "mercados de valores modernos",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in <br>modern equity market</br>s.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of <br>modern equity market</br>s.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in <br>modern equity market</br>s.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of <br>modern equity market</br>s."
            ],
            "translated_annotated_samples": [
                "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los <br>mercados de valores modernos</br>.",
                "En los últimos años ha habido un aumento explosivo en la automatización de los <br>mercados de valores modernos</br>."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los <br>mercados de valores modernos</br>. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los <br>mercados de valores modernos</br>. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "absolute trader model": {
            "translated_key": "modelo de trader absoluto",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the <br>absolute trader model</br> enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "We prove that while the <br>absolute trader model</br> enjoys provably strong stability properties, the relative trader model is vulnerable to great instability."
            ],
            "translated_annotated_samples": [
                "Demostramos que mientras el <br>modelo de trader absoluto</br> disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el <br>modelo de trader absoluto</br> disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "relative trader model": {
            "translated_key": "modelo de trader relativo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the <br>relative trader model</br> is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "We prove that while the absolute trader model enjoys provably strong stability properties, the <br>relative trader model</br> is vulnerable to great instability."
            ],
            "translated_annotated_samples": [
                "Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el <br>modelo de trader relativo</br> es vulnerable a una gran inestabilidad."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el <br>modelo de trader relativo</br> es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "electronic communication network": {
            "translated_key": "red de comunicación electrónica",
            "is_in_text": false,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        },
        "market microstructure": {
            "translated_key": "microestructura del mercado",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that <br>market microstructure</br>, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on <br>market microstructure</br>.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, <br>market microstructure</br> is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining <br>market microstructure</br> topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "<br>market microstructure</br>: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical <br>market microstructure</br>: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "It is fair to say that <br>market microstructure</br>, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "In Section 2 we briefly review the large literature on <br>market microstructure</br>.",
                "RELATED WORK As was mentioned in the Introduction, <br>market microstructure</br> is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "There is also a small but growing number of works examining <br>market microstructure</br> topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "<br>market microstructure</br>: a survey of microfoundations, empirical results and policy implications."
            ],
            "translated_annotated_samples": [
                "Es justo decir que la <br>microestructura del mercado</br>, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas.",
                "En la Sección 2 revisamos brevemente la extensa literatura sobre <br>microestructura de mercado</br>.",
                "TRABAJO RELACIONADO Como se mencionó en la Introducción, la <br>microestructura del mercado</br> es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente.",
                "También hay un número pequeño pero creciente de trabajos que examinan temas de <br>microestructura de mercado</br> desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas.",
                "Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la <br>microestructura del mercado</br>, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre <br>microestructura de mercado</br>. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la <br>microestructura del mercado</br> es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de <br>microestructura de mercado</br> desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. ",
            "candidates": [],
            "error": [
                [
                    "microestructura del mercado",
                    "microestructura de mercado",
                    "microestructura del mercado",
                    "microestructura de mercado"
                ]
            ]
        },
        "high-frequency microstructure signal": {
            "translated_key": "señales de microestructura de alta frecuencia",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from <br>high-frequency microstructure signal</br>s.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from <br>high-frequency microstructure signal</br>s."
            ],
            "translated_annotated_samples": [
                "Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de <br>señales de microestructura de alta frecuencia</br>."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de <br>señales de microestructura de alta frecuencia</br>. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "relative price model": {
            "translated_key": "modelo de precio relativo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the <br>relative price model</br>, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The <br>relative price model</br> can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "In contrast, in the <br>relative price model</br>, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "The <br>relative price model</br> can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book."
            ],
            "translated_annotated_samples": [
                "Por el contrario, en el <br>modelo de precio relativo</br>, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta).",
                "El <br>modelo de precio relativo</br> puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el <br>modelo de precio relativo</br>, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El <br>modelo de precio relativo</br> puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "modern execution optimization": {
            "translated_key": "optimización de ejecución moderna",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of <br>modern execution optimization</br> [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "More generally, the entire area of <br>modern execution optimization</br> [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state."
            ],
            "translated_annotated_samples": [
                "Más generalmente, toda el área de <br>optimización de ejecución moderna</br> [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de <br>optimización de ejecución moderna</br> [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "bid": {
            "translated_key": "oferta",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current <br>bid</br> and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the <br>bid</br> and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current <br>bid</br> pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current <br>bid</br>.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current <br>bid</br> and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current <br>bid</br>, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the <br>bid</br>).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The <br>bid</br> and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the <br>bid</br>, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new <br>bid</br> of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and <br>bid</br>(B) + vi if ti is buy, where by ask(X) and <br>bid</br>(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): <br>bid</br> at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the <br>bid</br> is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the <br>bid</br>, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the <br>bid</br>-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last <br>bid</br>; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the <br>bid</br> is identical.",
                "Let <br>bid</br>(X), sb(X), ask(X), be the <br>bid</br>, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus <br>bid</br>(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ <br>bid</br>(Σ ).",
                "Now it remains to bound <br>bid</br>(Σ).",
                "Here we use the fact that the <br>bid</br> of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since <br>bid</br>(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ <br>bid</br>(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the <br>bid</br> is not the additional order we are done, otherwise we have the following: <br>bid</br>(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have <br>bid</br>(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ <br>bid</br>(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that <br>bid</br>(Σ) ≤ <br>bid</br>(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the <br>bid</br> and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the <br>bid</br> in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current <br>bid</br> and above by the current ask.",
                "Now after this execution the <br>bid</br> is at least the second highest buy order at time t, if the former <br>bid</br> was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second <br>bid</br> at time t and at most the second ask at time t, which is at most s2(Σ) away from the <br>bid</br>/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the <br>bid</br> of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current <br>bid</br> and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last <br>bid</br>, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and <br>bid</br> are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the <br>bid</br> is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last <br>bid</br> is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the <br>bid</br> is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the <br>bid</br> is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current <br>bid</br> and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last <br>bid</br>), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last <br>bid</br>. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current <br>bid</br> and ask).",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the <br>bid</br> and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current <br>bid</br> pb, which is then translated to the limit price pb +∆.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current <br>bid</br>.",
                "Note that such positioning may depend on more complex features of the order books than just the current <br>bid</br> and ask, but the relative model is a natural and simplified starting point."
            ],
            "translated_annotated_samples": [
                "Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la <br>oferta y demanda</br> actual).",
                "Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la <br>oferta y la demanda</br>), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio.",
                "Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la <br>oferta</br> actual pb, que luego se traduce al precio límite pb + ∆.",
                "Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la <br>oferta</br> actual.",
                "Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del <br>bid</br> y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la <br>oferta y demanda</br> actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la <br>oferta y la demanda</br>), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la <br>oferta</br> actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la <br>oferta</br> actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del <br>bid</br> y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. ",
            "candidates": [],
            "error": [
                [
                    "oferta y demanda",
                    "oferta y la demanda",
                    "oferta",
                    "oferta",
                    "bid"
                ]
            ]
        },
        "quantitative trading strategies": {
            "translated_key": "estrategias de trading cuantitativo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of <br>quantitative trading strategies</br> (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of <br>quantitative trading strategies</br> (the attempt to determine hypothetical past performance using historical data)."
            ],
            "translated_annotated_samples": [
                "Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de <br>estrategias de trading cuantitativo</br> (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos)."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"penny-jumping\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de <br>estrategias de trading cuantitativo</br> (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el penny-jumping parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "penny-jumping": {
            "translated_key": "penny-jumping",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as <br>penny-jumping</br> on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as <br>penny-jumping</br> would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [
                "A common example of such strategic behavior is known as <br>penny-jumping</br> on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as <br>penny-jumping</br> would seem to cast doubts on such beliefs."
            ],
            "translated_annotated_samples": [
                "Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"<br>penny-jumping</br>\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual.",
                "Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el <br>penny-jumping</br> parecerían poner en duda tales creencias."
            ],
            "translated_text": "Propiedades de estabilidad de la dinámica de órdenes límite. Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § RESUMEN Estudiamos las propiedades de estabilidad de la dinámica del mecanismo estándar de órdenes límite continuas que se utiliza en los mercados de valores modernos. Nos preguntamos si dichos mecanismos son susceptibles a los efectos mariposa: la imposición de grandes cambios en medidas comunes de la actividad del mercado mediante solo pequeñas perturbaciones en la secuencia de órdenes. Mostramos que la respuesta depende fuertemente de si el mercado está compuesto por traders absolutos (que determinan sus precios de forma independiente del estado actual del libro de órdenes) o traders relativos (que determinan sus precios en relación con la oferta y demanda actual). Demostramos que mientras el modelo de trader absoluto disfruta de propiedades de estabilidad fuertes comprobadas, el modelo de trader relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de órdenes límite de INET, un gran intercambio electrónico para acciones de NASDAQ. Categorías y Descriptores de Asignaturas J.4 [Ciencias Sociales y del Comportamiento]: Economía Términos Generales Economía, Teoría 1. En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más informatizados y ofrecen interfaces sofisticadas para la colocación y gestión de órdenes, como en la actividad comercial en sí, que cada vez se realiza con más frecuencia mediante software. Los llamados Electronic Communication Networks (o ECNs) que dominan el comercio de acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. En el ámbito del trading, los programas informáticos ahora son responsables no solo de la ejecución cuidadosa de grandes operaciones en bloque para los clientes (a veces denominadas en Wall Street como trading programático), sino también de la selección autónoma de acciones, dirección (larga o corta) y volúmenes a negociar con fines de lucro (comúnmente conocido como arbitraje estadístico). La gran mayoría de las operaciones de acciones se realizan a través del mecanismo estándar del mercado de órdenes límite. En este mecanismo, se lleva a cabo una negociación continua a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite que llegan y que son totalmente o parcialmente ejecutables con las mejores ofertas en el otro lado se ejecutan de inmediato, con cualquier volumen no ejecutable de inmediato siendo colocado en una cola (o libro) ordenada por precio en el lado correspondiente (compra o venta). (Una descripción detallada del mecanismo de órdenes límite se proporciona en la Sección 3). Si bien los operadores siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocidos como la oferta y la demanda), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de órdenes: la distribución completa de órdenes, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha surgido la oportunidad, y cada vez más la necesidad, de modelar y explotar los datos y la dinámica de las órdenes límite. Es justo decir que la microestructura del mercado, como generalmente se conoce esta área, es un tema que despierta gran interés tanto en los mercados reales como en la literatura académica de finanzas. Las oportunidades y necesidades abarcan desde la ejecución optimizada de grandes operaciones hasta la creación de estrategias propietarias independientes que intentan obtener beneficios a partir de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente no explorado pero fundamental de la microestructura de órdenes límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: ¿Hasta qué punto los modelos simples de mercados de órdenes límite son susceptibles o inmunes a los efectos mariposa, es decir, la infligencia de grandes cambios en estadísticas de actividad importantes (como el número de acciones negociadas o el precio promedio por acción) mediante solo perturbaciones menores en la secuencia de órdenes? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada de órdenes límite. En el modelo de precio absoluto, los compradores y vendedores llegan con precios de órdenes límite que se determinan de forma independiente del estado actual del mercado (representado por los libros de órdenes), aunque pueden depender de toda clase de información exógena o shocks, como el tiempo, eventos de noticias, anuncios de la empresa cuyas acciones se están negociando, señales privadas o estado de los traders individuales, etc. Este proceso modela el comercio tradicional basado en fundamentos, en el que los participantes del mercado tienen cada uno una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. Por el contrario, en el modelo de precio relativo, los operadores expresan sus precios de órdenes límite en relación al mejor precio ofrecido en su respectivo libro (compra o venta). Por lo tanto, un comprador codificaría su precio de orden límite como un desfase ∆ (que puede ser positivo, negativo o cero) desde la oferta actual pb, que luego se traduce al precio límite pb + ∆. Nuevamente, además de depender ahora del estado de los libros de órdenes, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede ser visto como un modelo que representa a los operadores que, además de posiblemente incorporar información externa fundamental sobre la acción, también pueden posicionar estratégicamente sus órdenes en relación con las otras órdenes en su lado del libro. Un ejemplo común de este tipo de comportamiento estratégico se conoce como \"<br>penny-jumping</br>\" en Wall Street, en el cual un operador que tiene interés en comprar acciones rápidamente, pero aún a un precio inferior al de realizar una orden de mercado, colocará deliberadamente su orden justo por encima de la oferta actual. Más generalmente, toda el área de optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida de la cuidadosa colocación de órdenes límite en relación al estado actual del libro de órdenes. Ten en cuenta que tal posicionamiento puede depender de características más complejas de los libros de órdenes que solo del bid y ask actuales, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los operadores se comportan de manera relativa, pero los operadores absolutos solo pueden actuar en una escala de tiempo considerablemente más lenta que los operadores relativos más rápidos. ¿En qué se diferencian estos dos modelos? Claramente, dada cualquier secuencia fija de precios de órdenes límite que llegan, podemos elegir expresar estos precios ya sea como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico del libro de órdenes y transformar cada orden en una diferencia relativa con la parte superior de su libro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. De manera intuitiva, en el modelo absoluto una pequeña perturbación en la secuencia de precios límite que llegan debería tener efectos limitados (aunque algunos) en la evolución posterior de los libros de órdenes, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación podría (por ejemplo) modificar ligeramente la oferta actual, lo que a su vez podría modificar ligeramente el precio del próximo pedido que llegue, lo que a su vez podría modificar ligeramente el precio del pedido siguiente, y así sucesivamente, dando lugar a una secuencia amplificadora de eventos. Nuestros resultados principales demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero demostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre libros de órdenes y mostramos que pequeñas modificaciones pueden resultar en una distancia constante respecto a los libros originales para todos los pasos de tiempo subsiguientes. Luego demostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado - el volumen ejecutado, el precio promedio de ejecución y muchos otros - la estadística solo puede ser influenciada infinitesimalmente por pequeñas perturbaciones. Por el contrario, demostramos que el modelo relativo no posee tales propiedades de estabilidad. Después de proporcionar secuencias de precios relativos específicas (peores casos) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de los dos modelos es más que meramente teórica. Utilizando datos extensos de órdenes límite de INET (una ECN importante para acciones de NASDAQ) y código de reconstrucción de libro de órdenes, investigamos las propiedades de estabilidad empírica cuando los datos se interpretan como conteniendo precios absolutos, precios relativos o mezclas de ambos. Las predicciones teóricas de estabilidad e inestabilidad son fuertemente respaldadas por los experimentos posteriores. Además de la estabilidad ser de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí ofrecen material para reflexionar sobre los temas del impacto en el mercado y la prueba retrospectiva de estrategias de trading cuantitativo (el intento de determinar el rendimiento hipotético pasado utilizando datos históricos). Sugieren que la confianza de uno en que operar en silencio y en pequeños volúmenes tendrá un impacto mínimo en el mercado está vinculada a una creencia implícita en un modelo de precio absoluto. Nuestros resultados y el hecho de que en los mercados reales existe una gran cantidad creciente de comportamientos relativos como el <br>penny-jumping</br> parecerían poner en duda tales creencias. Del mismo modo, en un mundo pura o mayoritariamente de precios relativos, probar incluso estrategias de baja frecuencia y bajo volumen podría resultar en estimaciones históricas de rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de un pasado hipotético. El esquema del documento sigue. En la Sección 2 revisamos brevemente la extensa literatura sobre microestructura de mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el Teorema de Modificación 1 para el modelo de precio absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de propiedades de estabilidad sólida en el modelo absoluto. La sección 6 presenta ejemplos específicos que establecen la inestabilidad en el peor de los casos del modelo relativo. La sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado de INET. 2. TRABAJO RELACIONADO Como se mencionó en la Introducción, la microestructura del mercado es un tema importante y oportuno tanto en la financiación académica como en Wall Street, y en consecuencia tiene una amplia y variada literatura reciente. Aquí solo tenemos espacio para resumir los temas principales de esta literatura y proporcionar referencias para lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica detallada de la microestructura de órdenes límite no han sido consideradas previamente. (Sin embargo, consulte Farmer y Joshi [6] para un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). En un plano más teórico, existe una amplia línea de trabajo que examina lo que podría considerarse las propiedades teóricas de tipo juego de los mercados de órdenes límite. Estos trabajos modelan a los traders y creadores de mercado (quienes proporcionan liquidez al ofrecer cotizaciones de compra y venta, y obtienen beneficios de la diferencia) mediante funciones de utilidad que incorporan tolerancia al riesgo de movimientos de precios, posiciones grandes y otros factores, y examinan los precios y comportamientos de equilibrio resultantes. Los hallazgos comunes predicen impactos negativos en los precios para operaciones grandes, y efectos en los precios para grandes tenencias de inventario por parte de los creadores de mercado. Una excelente y completa encuesta de resultados en esta área se puede encontrar en [2]. Existe un cuerpo igualmente extenso de trabajo empírico sobre microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de órdenes límite y los intentos de establecer el valor informativo de los libros de órdenes [4]. Una buena visión general del trabajo empírico se puede encontrar en [7]. De particular interés para nuestros intereses es [3], que estudia empíricamente la distribución de los precios de las órdenes límite que llegan en varios mercados prominentes. Este trabajo adopta una perspectiva de los precios de llegada análoga a nuestro modelo relativo, y establece una forma de ley de potencia para las distribuciones resultantes. También hay un número pequeño pero creciente de trabajos que examinan temas de microestructura de mercado desde una perspectiva de ciencias de la computación, incluidos algunos centrados en el uso de la microestructura en algoritmos para la ejecución de operaciones comerciales optimizadas. Kakade et al. [9] introdujeron la dinámica de órdenes límite en el análisis competitivo para el trading de precio promedio ponderado por volumen (VWAP) de ida y vuelta. Algunos artículos recientes han aplicado métodos de aprendizaje por refuerzo a la ejecución de operaciones comerciales utilizando las propiedades del libro de órdenes como variables de estado [1, 5, 10]. 3. PRELIMINARES DE MICROESTRUCTURA El siguiente material de antecedentes expositivos está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el simple y estándar concepto de una orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden limitada, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Supongamos que MSFT actualmente se está negociando a aproximadamente $24.07 por acción (ver Figura 1, que muestra una captura real de un libro de órdenes de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $24.04 por acción o menos. Podemos optar por enviar una orden con límite con esta especificación, y nuestra orden se colocará en una cola llamada libro de órdenes de compra, que está ordenado por precio, con el precio de compra no ejecutado más alto en la parte superior (a menudo referido como la oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por orden de llegada (con las órdenes más antiguas en la parte superior del libro). En el ejemplo proporcionado por la Figura 1, nuestra orden se colocaría inmediatamente después de la orden existente de 5,503 acciones a $24.04; aunque ofrecemos el mismo precio, esta orden ha llegado antes que la nuestra. De igual manera, se mantiene un libro de órdenes de venta para órdenes de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo conocido como el ask) en la parte superior. Por lo tanto, los libros de órdenes se ordenan desde las órdenes límite más competitivas en la parte superior (altos precios de compra y bajos precios de venta) hasta las órdenes límite menos competitivas. Los precios de oferta y demanda juntos a veces se conocen como el mercado interno, y la diferencia entre ellos como el spread. Por definición, los libros de órdenes siempre consisten exclusivamente de órdenes no ejecutadas: son colas de órdenes que esperan con esperanza a que el precio se mueva en su dirección. Figura 1: Libros de órdenes de muestra de INET para MSFT. ¿Entonces, cómo se ejecutan las órdenes (parcialmente)? Si una orden de límite de compra (venta, respectivamente) llega por encima del precio de venta (por debajo del precio de compra, respectivamente), entonces la orden se empareja con las órdenes en los libros opuestos hasta que se llene el volumen de las órdenes entrantes, o no sea posible realizar más emparejamientos, en cuyo caso el volumen restante de las órdenes entrantes se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 llegó una orden de compra de 2000 acciones con un precio límite de $24.08. Esta orden sería parcialmente completada por las dos órdenes de venta de 500 acciones a $24.069 en los libros de venta, la orden de venta de 500 acciones a $24.07 y la orden de venta de 200 acciones a $24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compras a $24.08. Es importante tener en cuenta que los precios de ejecución son los precios especificados en las órdenes límite que ya están en los libros, no los precios de la orden entrante que se ejecuta de inmediato. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas estarían a diferentes precios. Ten en cuenta que esto también significa que en un intercambio de órdenes límite puro como INET, las órdenes de mercado pueden ser simuladas por órdenes límite con valores de precio extremos. En intercambios como INET, cualquier orden puede ser retirada o cancelada por la parte que la colocó en cualquier momento antes de su ejecución. Cada orden límite llega de forma atómica e instantánea: existe una estricta secuencia temporal en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio de la bolsa, que es simplemente el último precio al cual la bolsa ejecutó una orden. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (ticker) de una acción. 3.1 Definiciones Formales Ahora proporcionamos un modelo formal para el proceso de órdenes límite descrito anteriormente. En este modelo, las órdenes límite llegan en una secuencia temporal, con cada orden especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que en los intercambios reales, también permitimos la cancelación de una orden pendiente (no ejecutada) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos nuestra atención a un modelo en el que cada orden es por una sola acción; los volúmenes de órdenes grandes pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea Σ = σ1, ...σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí ni es un identificador de orden, ti es el tipo de orden (compra, venta o cancelación), y vi es el valor de la orden límite. En el caso de que ti sea cancelado, ni coincide con un pedido previamente realizado y vi es ignorado. Hemos llamado deliberadamente vi en la definición anterior el valor de la orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de vi (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos vi como simplemente siendo el precio de la orden límite. En el modelo relativo, si la configuración actual del libro de órdenes es (A, B) (donde A es el libro de ventas y B el libro de compras), el precio de la orden es ask(A) + vi si ti es una venta, y bid(B) + vi si ti es una compra, donde por ask(X) y bid(X) denotamos el precio de la orden en la parte superior del libro X. (Nota: vi puede ser negativo). Nuestro principal interés en este artículo son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones en los valores de las órdenes límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una k-modificación de Σ es una secuencia Σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij , j ∈ {1, . . . , k} σ = σ . Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros. • volumen(Σ): Número de acciones ejecutadas (negociadas) en la secuencia Σ. • promedio(Σ): Precio promedio de ejecución. • cierre(Σ): Precio de la última ejecución (de cierre). • última oferta(Σ): Oferta al final de la secuencia. • última demanda(Σ): Demanda al final de la secuencia. 4. EL TEOREMA DE LA MODIFICACIÓN 1 En esta sección presentamos nuestro resultado técnico más importante. Se muestra que en el modelo absoluto, los efectos que la modificación de un solo pedido tiene en la evolución resultante de los libros de órdenes son extremadamente limitados. Luego aplicamos este resultado para derivar resultados de estabilidad sólida para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria Σ en el modelo absoluto, y cualquier 1-modificación Σ de Σ. En cualquier punto (índice) i en las dos secuencias utilizaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en Σ, y (A2, B2) para denotar los libros de venta y compra en Σ; por conveniencia notacional omitimos explícitamente la superíndice por el índice actual i. Pronto estableceremos que en todo momento i, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de órdenes están ordenados por precio, utilizaremos (por ejemplo) A1 ∪ {a2} = A2 para indicar que A2 contiene una orden a algún precio a2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos; por lo tanto, eliminar la orden en a2 en A2 haría que los libros fueran iguales. De manera similar, B1 ∪ {b2} = B2 ∪ {b1} significa que B1 contiene un pedido al precio b1 que no está presente en B2, B2 contiene un pedido al precio b2 que no está presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, definimos ahora un conjunto de estados estables del sistema, donde cada estado está compuesto por los libros de órdenes de las secuencias original y modificada. Pronto demostraremos que si cambiamos solo el valor de una orden (precio), permanecemos en este conjunto para cualquier secuencia de órdenes límite. Definición 4.1. Sea ab el conjunto de todos los estados (A1, B1) y (A2, B2) tales que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que A1 ∪ {a2} = A2 ∪ {a1}, donde a1 = a2, y B1 = B2. Sea a¯b el conjunto de estados tal que B1∪{b2} = B2∪{b1}, donde b1 = b2, y A1 = A2. Sea ¯a¯b el conjunto de estados en los que A1 = A2∪{a1} y B1 = B2∪{b1}, o en los que A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}. Finalmente definimos S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1. (Teorema de Modificación 1) Considere cualquier secuencia de órdenes Σ y cualquier 1-modificación Σ de Σ. Entonces, los libros de órdenes (A1, B1) y (A2, B2) determinados por Σ y Σ se encuentran en el conjunto S de estados estables en todo momento. Figura 2: Diagrama que representa el conjunto S de estados estables y las posibles transiciones de movimientos en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estados etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del pedido en el que Σ y Σ difieren. Lo siguiente establece que inmediatamente después de la llegada de este orden diferente, el estado yace en S. Lema 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto ab (y por lo tanto son idénticos), entonces modificar el precio del próximo pedido mantiene el estado en S. Demostración. Supongamos que la orden de llegada es una orden de venta y la cambiamos de a1 a a2; asumamos sin pérdida de generalidad que a1 > a2. Si ninguno de los pedidos se ejecuta de inmediato, entonces pasamos al estado ¯ab; si ambos se ejecutan, entonces permanecemos en el estado ab; y si solo se ejecuta a2, entonces pasamos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Tras la llegada de su único pedido diferente, Σ y Σ son idénticos. Ahora presentamos una secuencia de lemas que muestran 123 Ejecutado con dos órdenes No ejecutado en ambas Órdenes de compra que llegan Orden de compra que llega Orden de compra que llega Orden de compra que llega Orden de venta que llega ¯ab ab ¯a¯b Ejecutado solo con a1 (no a1 y a2) Ejecutado con a1 y a2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición del Lema 4.3 de que después de seguir la diferencia inicial cubierta por el Lema 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero demostramos que desde el estado ¯ab permanecemos en S independientemente del próximo pedido. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯ab, entonces para cualquier orden el estado permanecerá en S. Demostración. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Ten en cuenta que en ¯ab los libros comprados son idénticos (B1 = B2). Por lo tanto, la orden de venta que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ninguno de los libros de compra. Para el primer caso, los libros de compra permanecen idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros comprados permanecen sin cambios e idénticos, y los libros vendidos tienen la nueva orden de venta agregada a ambos (y por lo tanto siguen diferenciándose por una orden). A continuación, proporcionamos un análisis del caso más sutil en el que el artículo que llega es una orden de compra. Para este caso necesitamos tener en cuenta varios escenarios diferentes. La primera es cuando la parte superior de ambos vende libros (el precio de venta) es idéntica. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯ab (el análisis es similar al de una orden de venta que llega). Nos queda tratar el caso en el que ask(A1) y ask(A2) son diferentes. Aquí discutimos dos subcasos: (a) ask(A1) = a1 y ask(A2) = a2, y (b) ask(A1) = a1 y ask(A2) = a. Aquí a1 y a2 son como en la definición de ¯ab en la Definición 4.1, y a es algún otro precio. Para el subcaso (a), según nuestra suposición a1 < a2, entonces o bien (1) ambas órdenes se ejecutan, los libros de venta se vuelven idénticos y pasamos al estado ab; (2) ninguna orden se ejecuta y permanecemos en el estado ¯ab; o (3) solo se ejecuta la orden a1, en cuyo caso pasamos al estado ¯a¯b con A2 = A1 ∪ {a2} y B2 = B1 ∪ {b2}, donde b2 es el precio de la orden de compra que llega. Para el subcaso (b), o bien (1) la orden de compra no se ejecuta en ninguno de los libros de venta y permanecemos en el estado ¯ab; o (2) la orden de compra se ejecuta en ambos libros de venta y permanecemos en el estado ¯ab con A1 ∪ {a} = A2 ∪ {a2}; o (3) solo se ejecuta ask(A1) = a1 y nos movemos al estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto a¯b, entonces para cualquier orden el estado permanecerá en S. Lema 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden el estado permanecerá en S. Las pruebas de estos dos lemas se omiten, pero son similares en espíritu a la del Lema 4.3. El siguiente y último lema trata sobre cancelaciones. Lema 4.6. Si el estado actual del libro de órdenes se encuentra en S, entonces después de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se cumple: (1) la orden todavía está en ambos conjuntos de libros, (2) no está en ninguno de ellos y (3) está solo en uno de ellos. Para los dos primeros casos es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros, por lo que el estado permanece inalterado. Para el caso en que la orden aparezca solo en un conjunto de libros, sin pérdida de generalidad asumimos que la cancelación cancela una orden de compra en b1. En lugar de eliminar b1 del libro, podemos cambiarlo para que tenga un precio de 0, lo que significa que esta orden de compra nunca se ejecutará y se cancelará efectivamente. Ahora, independientemente del estado en el que nos encontrábamos, b1 sigue estando solo en un libro de compras (pero con un precio diferente), por lo que permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se sigue de los lemas anteriores. 5. ESTABILIDAD ABSOLUTA DEL MODELO En esta sección aplicamos el Teorema de la 1-Modificación para mostrar propiedades de estabilidad sólidas para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea Σ cualquier secuencia y Σ cualquier modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren en un máximo de dos órdenes. Ahora, dado que la unión de los IDs de las órdenes ejecutadas y los libros de órdenes siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir en un máximo de dos. Corolario 5.2. Sea Σ cualquier secuencia y Σ cualquier k-modificación de Σ. Entonces, el conjunto de órdenes ejecutadas (números de identificación) generadas por las dos secuencias difiere en un máximo de 2k. Una secuencia de órdenes Σ es una k-extensión de Σ si Σ se puede obtener al eliminar cualquier k órdenes en Σ. Lema 5.3. Sea Σ cualquier secuencia y sea Σ cualquier k-extensión de Σ. Entonces, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 2k. Este lema es la clave para obtener nuestro principal resultado de volumen absoluto del modelo que se muestra a continuación. Usamos edit(Σ, Σ) para denotar la distancia de edición estándar entre las secuencias Σ y Σ, el número mínimo de sustituciones, inserciones y eliminaciones u órdenes necesarios para cambiar Σ a Σ. Teorema 5.4. Dejen Σ y Σ ser secuencias de orden de modelo absoluto. Entonces, si edit(Σ, Σ) ≤ k, el conjunto de órdenes ejecutadas generadas por Σ y Σ difieren en un máximo de 4k. En particular, |volumen(Σ) − volumen(Σ )| ≤ 4k. Prueba. Primero definimos la secuencia ˜Σ que es la intersección de Σ y Σ . Dado que Σ y Σ están separados por lo sumo k, tenemos que con k inserciones cambiamos ˜Σ a cualquiera de Σ o Σ, y por el Lema 5.3 su conjunto de órdenes ejecutadas está separado por lo sumo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en Σ y Σ está separado como máximo por 4k. El Teorema 5.4 de los Límites de Spread establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora nos enfocamos en las cantidades que involucran precios de ejecución en lugar de solo volumen, a saber, promedio(Σ), cierre(Σ), última oferta(Σ) y última demanda(Σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe cumplirse en Σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la dispersión del mercado, o la brecha entre los compradores y vendedores. Motivamos esta condición mostrando primero que sin ella, al cambiar un orden, podemos cambiar el promedio(Σ) por cualquier valor positivo x. Lema 5.5. Existe un conjunto Σ tal que para cualquier x ≥ 0, existe una 1-modificación Σ de Σ tal que el promedio de Σ es igual al promedio de Σ más x. Prueba. Sea Σ una secuencia de órdenes alternadas de venta y compra en la que cada vendedor ofrece p y cada comprador p + x, y la primera orden es una venta. Entonces todas las ejecuciones tienen lugar en el precio de la oferta, que siempre es p, y por lo tanto el promedio(Σ) = p. Ahora supongamos que modificamos solo la primera orden de venta para que sea a un precio p+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones se realizan al precio de la oferta, que siempre es p + x. Resultados similares de inestabilidad pueden demostrarse que se aplican a las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos la segunda dispersión de los libros de órdenes, la cual se define como la diferencia entre los precios de la segunda orden en el libro de ventas y la segunda orden en el libro de compras (a diferencia de la diferencia entre la oferta y la demanda, comúnmente llamada el spread). Observamos que en una acción líquida, como las que examinamos experimentalmente en la Sección 7, la segunda dispersión suele ser bastante pequeña y de hecho casi siempre es igual a la dispersión. En esta subsección consideramos cambios en la secuencia solo después de un período de inicialización, y secuencias tales que la segunda propagación siempre está definida después del momento en que realizamos un cambio. Definimos s2(Σ) como la máxima segunda dispersión en la secuencia Σ después del cambio. Teorema 5.6. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ s2(Σ) 2. |últimapregunta(Σ) − últimapregunta(Σ )| ≤ s2(Σ) donde s2(Σ) es el máximo sobre el segundo spread en Σ siguiendo la 1-modificación. Prueba. Proporcionamos la prueba para la última oferta; la prueba para la última demanda es similar. La prueba se basa en el Teorema 4.1 y considera estados en el conjunto estable S. Para los estados ab y ¯ab, tenemos que la oferta es idéntica. Sea bid(X), sb(X), ask(X), la oferta, la segunda orden de compra más alta, y la pregunta de una secuencia X. Ahora recuerda que en el estado a¯b tenemos que los libros en venta son idénticos, y que los dos libros comprados son idénticos excepto por un orden diferente. Por lo tanto, bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ) ≥ bid(Σ). Ahora queda por acotar la oferta de Σ. Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido a que los libros difieren solo en una orden. Dado que bid(Σ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ), tenemos que |bid(Σ) − bid(Σ)| ≤ s2(Σ) como se deseaba. En el estado ¯a¯b tenemos que para una secuencia los libros contienen una orden de compra adicional y una orden de venta adicional. Primero supongamos que los libros que contienen los pedidos adicionales son la secuencia original Σ. Ahora, si la oferta no es la orden adicional, hemos terminado; de lo contrario, tenemos lo siguiente: oferta(Σ) ≤ demanda(Σ) ≤ sb(Σ) + s2(Σ) = oferta(Σ) + s2(Σ), donde sb(Σ) ≤ oferta(Σ) ya que el libro de compra original tiene solo una orden adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada Σ. Tenemos oferta(Σ) + s2(Σ) ≥ demanda(Σ) ≥ demanda(Σ) ≥ oferta(Σ), donde utilizamos el hecho de que demanda(Σ) ≥ demanda(Σ) ya que la secuencia modificada tiene un pedido adicional. De manera similar, tenemos que bid(Σ) ≤ bid(Σ) ya que el libro de compra modificado contiene una orden adicional. Observamos que la demostración del Teorema 5.6 realmente establece que la oferta y la demanda de las secuencias originales y modificadas están dentro de s2(Σ) en todo momento. A continuación proporcionamos un lema técnico que relaciona la propagación (primera) de la secuencia modificada con la propagación segunda de la secuencia original. Lema 5.7. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces la dispersión de Σ está acotada por s2(Σ). Prueba. Por el Teorema de la 1-Modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir en un máximo de un orden en cada libro (compra y venta). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es a lo sumo la oferta en la secuencia modificada, y la segunda orden de venta más baja en la secuencia original siempre es al menos el precio de venta en la secuencia modificada. Estamos listos para presentar un resultado de estabilidad para el precio promedio de ejecución en el modelo absoluto. Se establece que en mercados altamente líquidos, donde el volumen ejecutado es grande y el spread es pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Entonces |promedio(Σ) − promedio(Σ )| ≤ 2(pmax + s2(Σ)) volumen(Σ) + s2(Σ) donde pmax es el precio de ejecución más alto en Σ. Prueba. La prueba demostrará que cada ejecución en Σ, aparte de la ejecución de la orden modificada y la última ejecución, tiene una ejecución correspondiente en Σ con un precio diferente en un máximo de s2(Σ), y utilizará el hecho de que pmax + s2(Σ) es un límite en el precio en Σ. Refiriéndonos a la prueba del Teorema de la Modificación 1, supongamos que estamos en el estado ¯a¯b, donde tenemos en una secuencia (que puede ser tanto Σ como Σ) una orden de compra adicional b y una orden de venta adicional a. Sin pérdida de generalidad, asumimos que la secuencia con las órdenes adicionales es Σ. Si la próxima ejecución no implica a o b, entonces claramente tenemos la misma ejecución en ambos Σ y Σ. Supongamos que implica un; hay dos posibilidades. O bien a es el orden modificado, en cuyo caso cambiamos la diferencia de precio promedio 125 por (pmax + s2(Σ))/volumen(Σ), y esto solo puede ocurrir una vez; o a fue ejecutado anteriormente en Σ y las ejecuciones involucran a un orden cuyo precio límite es a. Según el Lema 5.7, la dispersión de ambas secuencias está limitada por s2(Σ), lo que implica que el precio de la ejecución en Σ fue como máximo a + s2(Σ), mientras que la ejecución en Σ tiene un precio de a, por lo que los precios difieren en un máximo de s2(Σ). En los estados ¯ab, a¯b siempre y cuando tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en un máximo de s2(Σ). Si tenemos una ejecución solo en una secuencia, o bien la emparejamos en el estado ¯a¯b, o la cargamos con (pmax + s2(Σ))/volumen(Σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se emparejó con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución que no coincide y, por lo tanto, la cobramos (pmax + s2(Σ))/volumen(Σ). A continuación, presentamos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico sobre los precios de las ejecuciones consecutivas. Lema 5.9. Sea Σ cualquier secuencia. Entonces, los precios de dos ejecuciones consecutivas en Σ difieren en un máximo de s2(Σ). Prueba. Supongamos que la primera ejecución se realiza en el tiempo t; su precio está limitado por debajo por la oferta actual y por encima por la demanda actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento t, si la oferta anterior fue ejecutada y no llegaron órdenes de compra más altas, y más alta en caso contrario. De manera similar, la oferta es como máximo la segunda orden de venta más baja en el tiempo t. Por lo tanto, el precio de ejecución siguiente es al menos la segunda oferta en el tiempo t y como máximo la segunda oferta en el tiempo t, que está como máximo a s2(Σ) de la oferta/demanda en el tiempo t. Lema 5.10. Sea Σ cualquier secuencia y sea Σ una modificación de Σ. Si el volumen (Σ) ≥ 2, entonces |close(Σ) − close(Σ)| ≤ s2(Σ) Prueba. Primero abordamos el caso en el que la última ejecución ocurre simultáneamente en ambas secuencias. Según el Teorema 5.6, tanto la oferta como la demanda de Σ y Σ están separadas por un máximo de s2(Σ) en todo momento t. Dado que el precio de la última ejecución es su oferta (demanda) en el momento t, hemos terminado. A continuación, nos ocupamos del caso en el que la última ejecución entre las dos secuencias ocurre solo en Σ. En este caso sabemos que o bien la ejecución anterior ocurrió simultáneamente en ambas secuencias en el tiempo t, y por lo tanto las tres ejecuciones están dentro de la segunda propagación de Σ en el tiempo t (la primera ejecución en Σ por definición, la ejecución en Σ con argumentos idénticos al caso anterior, y la tercera según el Lema 5.9). De lo contrario, la ejecución anterior ocurrió solo en Σ en el tiempo t, en cuyo caso las dos ejecuciones están dentro de la dispersión de Σ en el tiempo t (la ejecución de Σ a partir de los mismos argumentos que antes, y la ejecución en Σ debe estar dentro de su dispersión en el tiempo t). Si la última ejecución ocurre solo en Σ, sabemos que la próxima ejecución de Σ estará a lo sumo a s2(Σ) de distancia de su ejecución anterior según el Lema 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre y cuando las secuencias sean de 1-modificación, la prueba se completa. 5.2 Límites de propagación para k-Modificaciones Al igual que en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para cantidades basadas en precios al caso en el que se modifican múltiples órdenes. Aquí nuestros resultados son más débiles y dependen del k-spread, la distancia entre la k-ésima orden de compra más alta y la k-ésima orden de venta más baja, en lugar del segundo spread. (Mirando hacia la Sección 7, observamos que en datos de mercado reales para acciones líquidas, esta cantidad suele ser muy pequeña también). Usamos sk(Σ) para denotar la k-extensión. Como antes, asumimos que el k-spread siempre está definido después de un período de inicialización. Primero establecemos la siguiente generalización del Lema 5.7. Lema 5.11. Sea Σ una secuencia y sea Σ cualquier 1modificación de Σ. Para ≥ 1, si s +1(Σ) siempre está definido después del cambio, entonces s (Σ) ≤ s +1(Σ). La prueba es similar a la prueba del Lema 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea Σ cualquier secuencia que sea una -modificación de Σ. Entonces tenemos s2(Σ) ≤ s + 2(Σ). Ahora, utilizando el lema anterior y mediante una simple inducción, podemos obtener el siguiente teorema. Teorema 5.12. Sea Σ una secuencia y sea Σ cualquier k-modificación de Σ. Entonces 1. |últimapuja(Σ) − últimapuja(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |últimapregunta(Σ)−últimapregunta(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |cierre(Σ) − cierre(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |promedio(Σ) − promedio(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volumen(Σ) + s +1(Σ) donde s (Σ) es el máximo sobre el -spread en Σ siguiendo la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de dispersión para modificaciones adicionales, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde las órdenes individuales contienen cientos o miles de acciones, el k-spread incluso para k grande podría ser bastante pequeño y cercano al spread estándar de 1 en acciones líquidas. 6. INESTABILIDAD DEL MODELO RELATIVO En el modelo relativo, la suposición subyacente es que los operadores intentan aprovechar su conocimiento de los libros para colocar estratégicamente sus órdenes. Por lo tanto, si un trader desea que su orden de compra se ejecute rápidamente, puede posicionarla por encima de la oferta actual y ser la primera en la cola; si el trader es paciente y cree que la tendencia del precio va a ser a la baja, colocará órdenes más profundas en el libro de compras, y así sucesivamente. Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última demanda, el precio promedio de ejecución y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones con datos de mercado reales que demuestran que esta inestabilidad es inherente al modelo relativo, y no se debe a construcciones artificiales. En el modelo relativo asumimos que para cada secuencia la oferta y la demanda siempre están definidas, por lo que los libros tienen una configuración inicial no vacía. Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Existe una secuencia Σ y una 1-modificación Σ de Σ tal que el volumen(Σ) ≥ 2volumen(Σ). Prueba. Para concretar, asumimos que al principio la oferta es de 10 y la demanda es de 8. La secuencia Σ está compuesta por n órdenes de compra con ∆ = 0, seguidas por n órdenes de venta con ∆ = 0, y finalmente una secuencia alternante de órdenes de compra con ∆ = +1 y órdenes de venta con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alternante contienen n + 1 órdenes de venta a 10 y n + 1 órdenes de compra a 8, tenemos que cada par de órdenes de compra y venta en la parte alternante se empareja y se ejecuta, pero ninguna de las órdenes iniciales 2n se ejecuta, y por lo tanto el volumen(Σ) = n. Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras 2n órdenes todavía no hay ejecuciones; sin embargo, los libros son diferentes. Ahora hay n + 1 órdenes de venta a 10, n órdenes de compra a 9 y una orden de compra a 8. Ahora cada orden en la secuencia alternante se ejecuta con una de las órdenes anteriores y tenemos un volumen (Σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en el spread de la Sección 5.1 no se cumplen en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de ventas contiene solo dos precios que están muy separados y ambos contienen solo dos órdenes, ahora llegan varias órdenes de compra, en la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejarán el libro de ventas solo con las órdenes al precio alto. Ahora llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de tal manera que en la secuencia original solo se ejecutarán a un precio bajo y en la secuencia modificada se ejecutarán a un precio alto. Teorema 6.2. Para cualquier número positivo s y x, existe una secuencia Σ tal que s2(Σ) = s y una Σ de modificación 1 de Σ tal que • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios son valores enteros, en cuyo caso el valor más pequeño posible para la segunda diferencia es 1; proporcionamos la prueba para el caso s2(Σ) = 2, pero el caso s2(Σ) = 1 es similar. Consideramos una secuencia Σ tal que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 órdenes a un precio de 10, y el libro de venta tiene dos órdenes a un precio de 12 y 2 órdenes con valor 12+y, donde y es un entero positivo que será determinado por el análisis. La secuencia original Σ es una orden de compra con ∆ = 0, seguida de dos órdenes de compra con ∆ = +1, luego 2y órdenes de venta con ∆ = 0, y luego 2y órdenes de compra con ∆ = +1. Primero notamos que s2(Σ) = 2, hay 2 ejecuciones, todas a un precio de 12, la última oferta es 11 y la última demanda es 12. A continuación analizamos una secuencia modificada. Cambiamos la primera orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, se ejecutan las próximas dos órdenes de compra con ∆ = +1, y después tenemos que la oferta es 11 y la demanda es 12 + y. Ahora las órdenes de venta de 2y se acumulan en 12+y, y después de las próximas y órdenes de compra, la oferta está en 12+y−1. Por lo tanto, al final tenemos que lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, y average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Al establecer y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basaba en el hecho de que hay dos órdenes consecutivas en los libros que están muy separadas, podemos proporcionar un ejemplo ligeramente más complicado en el que todas las órdenes están cerca (a lo sumo 2 de diferencia), sin embargo, un cambio resulta en diferencias significativas. 7. Estudios de simulación. Hasta ahora, los resultados presentados muestran un contraste llamativo entre los modelos de precio absoluto y relativo: mientras que el modelo absoluto goza de una estabilidad sólida demostrable sobre cualquier secuencia de eventos fija, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza de peor caso de estos resultados plantea la pregunta de hasta qué punto tales diferencias podrían ocurrir realmente en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta al presentar resultados de simulación que explotan una rica fuente de datos históricos de secuencias de órdenes límite del mercado real. Al interpretar los precios de las órdenes límite que llegan como valores absolutos, o transformándolos en diferencias con la oferta y la demanda actuales (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo serían diferentes varios resultados (volumen negociado, precio promedio, etc.) de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan un contraparte empírica a la teoría que hemos desarrollado. Enfatizamos que todas esas simulaciones interpretan los datos históricos reales como encajando en el modelo absoluto o relativo, y solo tienen sentido dentro de los límites de dicha interpretación. Sin embargo, consideramos que ofrecen una valiosa visión empírica sobre las propiedades de estabilidad (in) de los modernos mercados de órdenes límite de acciones, y demuestran que la creencia o esperanza en la estabilidad depende en gran medida de una interpretación de modelo absoluto. También investigamos el comportamiento empírico de mezclas de precios absolutos y relativos. 7.1 Datos Los datos históricos utilizados en nuestras simulaciones son datos de órdenes límite disponibles comercialmente de INET, la bolsa electrónica mencionada anteriormente para acciones de NASDAQ. En términos generales, estos datos consisten prácticamente en cada evento en INET relacionado con la negociación de una acción individual: cada orden límite entrante (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden pendiente, todo con marca de tiempo en milisegundos. Es suficiente con los datos para recrear el libro de órdenes INET preciso en una acción específica en un día y hora determinados. Informaremos sobre las propiedades de estabilidad de tres acciones: Amazon, Nvidia y Qualcomm (identificadas en lo sucesivo por sus símbolos bursátiles, AMZN, NVDA y QCOM). Estos tres proporcionan cierto rango de liquidez (siendo QCOM el que tiene la mayor liquidez y NVDA la menor en INET) y otras propiedades de negociación. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos. 127 7.2 Metodología Para nuestras simulaciones utilizamos un código de reconstrucción del libro de órdenes que opera sobre los datos brutos subyacentes. El formato básico de cada experimento era el siguiente: 1. Ejecuta el código de reconstrucción del libro de órdenes en los datos originales de INET y calcula la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Realiza una pequeña modificación a un solo pedido y vuelve a calcular el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el Paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de órdenes. Para el modelo relativo, primero debemos preprocesar los datos en bruto y convertir sus precios a valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de órdenes en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de órdenes realizadas en estas acciones: específicamente, la eliminación de una sola orden elegida al azar de la secuencia. Aunque una eliminación no es una modificación de grado 1, su distancia de edición es 1 y podemos aplicar el Teorema 5.4. Para cada día de negociación examinado, se seleccionó esta única orden eliminada entre aquellas que llegaron entre las 10 AM y las 3 PM, y las cantidades de interés fueron medidas y comparadas a las 3 PM. Estos horarios fueron elegidos para incluir la parte más activa del día de negociación, pero evitar la media hora alrededor de la apertura y cierre del mercado oficial de NASDAQ (9:30 AM y 3:30 PM respectivamente), que se sabe que tienen dinámicas diferentes a la parte central del día. Realizamos simulaciones del modelo absoluto y relativo tanto en los datos INET originales como en una versión depurada de estos datos. En el proceso de limpieza eliminamos todas las órdenes límite que fueron canceladas en el mercado real antes de su ejecución (junto con las cancelaciones mismas). La razón es que dichas cancelaciones a menudo pueden ser el primer paso en la reposición de pedidos, es decir, cancelaciones del pedido que son seguidas por la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede magnificar los efectos de inestabilidad. Una vez más, está claro que ni los datos sin procesar ni los datos limpios pueden reflejar perfectamente lo que habría sucedido bajo las órdenes eliminadas en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como era de esperar, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar. 7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (por ejemplo, AMZN) seguido de -R (para los datos sin limpiar o crudos) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se realizaron 1000 pruebas en las que se eliminaba un pedido seleccionado al azar de la secuencia de eventos de INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto el valor absoluto como el modelo relativo del cambio porcentual promedio en la cantidad inducido por la eliminación. Aquí \"mismo\" está entre comillas ya que las dos órdenes tendrán números de identificación de secuencia diferentes, lo que hace que sea imposible detectar de manera confiable dicha actividad de reposicionamiento en los datos. Los resultados confirman de manera bastante sorprendente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (datos de acciones, datos sin procesar o limpios, y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchas órdenes de magnitud mayor que en el modelo absoluto, lo que demuestra que de hecho pueden ocurrir efectos mariposa en un mercado de modelo relativo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto relativo del modelo de solo una eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto en el mercado completamente separada del tipo más tradicional y esperado generado por la negociación de un gran volumen de acciones. En la Figura 4 examinamos cómo cambia una de las cantidades, el precio de ejecución promedio, con la introducción de mayores perturbaciones en la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 AM y las 3 PM, en estos experimentos se realizó un número creciente de eliminaciones elegidas al azar, y se midió el cambio porcentual en el precio promedio. Como sugiere la teoría que hemos desarrollado, para el modelo absoluto el cambio en el precio promedio crece de forma lineal con el número de eliminaciones y permanece muy pequeño (observe las escalas muy diferentes del eje y en los paneles para los modelos absoluto y relativo en la figura). Para el modelo relativo, es interesante notar que mientras que pequeños números de cambios tienen efectos grandes (a menudo causando cambios en el precio de ejecución promedio muy superiores al 0.1 por ciento), los efectos de grandes números de cambios se estabilizan bastante rápidamente y de manera consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Aunque se acepte un mundo en el que los comerciantes se comporten de manera absoluta o relativa, es probable que se afirme que el mercado contiene una mezcla de ambos. Así que realizamos simulaciones en las que cada orden que llegaba en los flujos de eventos de INET se trataba como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1-α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como era de esperar, observamos una disminución monótona en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de traders absolutos, con la mayor parte de la reducción ya realizada con la introducción de solo una pequeña población de traders absolutos. Así, incluso en un mundo de precios mayormente relativos, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R junio de 2004: Número absoluto de cambios Precio promedio 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R junio de 2004: Número relativo de cambios Precio promedio Figura 4: Cambio porcentual al precio de ejecución promedio (eje y) en función del número de eliminaciones en la secuencia (eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de 1000 pruebas. Una pequeña minoría de traders absolutos puede tener un efecto estabilizador muy grande. Se encuentra un comportamiento similar para el precio de cierre y la última oferta. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Febrero de 2004 α Precio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R Junio de 2004 α Precio promedio Figura 5: Cambio porcentual al precio promedio de ejecución (eje y) vs. probabilidad de tratar las órdenes INET entrantes como precios absolutos (eje x). Cada curva corresponde a un solo día de operaciones durante un mes de 2004. Las curvas representan promedios de 1000 pruebas. Para el volumen ejecutado en el modelo de mezcla, sin embargo, los hallazgos son más curiosos. En la Figura 6, mostramos cómo varía el cambio porcentual en el volumen ejecutado con la fracción absoluta de traders α, para los datos de NVDA tanto en crudo como limpios de cancelaciones. Primero observamos que para esta cantidad, a diferencia de las demás, la diferencia inducida por los datos limpios y no limpios es realmente dramática, como ya sugerido por la tabla de estadísticas resumen anterior. Pero lo más intrigante es el hecho de que la estabilidad no aumenta de forma monótona con α ni para los datos limpios ni para los no limpios. El mercado con máxima inestabilidad no es un mercado de precios relativos puros, sino que ocurre a algún valor distinto de cero para α. De hecho, no nos resultaba obvio que secuencias con esta propiedad pudieran ser construidas artificialmente, y mucho menos que ocurrieran como datos reales de mercado. Todavía no hemos encontrado una explicación satisfactoria para este fenómeno y lo dejamos para futuras investigaciones. AGRADECIMIENTOS Agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por permitirnos utilizar su código de reconstrucción del libro de órdenes de INET, y por sus valiosos comentarios sobre el trabajo presentado. El panel izquierdo es para NVDA utilizando los datos en bruto que incluyen cancelaciones, mientras que el panel derecho es con los datos limpios. Cada curva corresponde a un solo día de operaciones durante junio de 2004. Las curvas representan promedios de 1000 pruebas aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, en el marco de la Red de Excelencia PASCAL, IST-2002-506778, mediante una subvención de la Fundación Científica de Israel y un premio de la facultad de IBM. 9. REFERENCIAS [1] D. Bertsimas y A. I'm sorry, but \"Lo.\" is not a complete sentence. Could you please provide more context or a complete sentence for me to translate into Spanish? Control óptimo de los costos de ejecución. Revista de Mercados Financieros, 1:1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: un estudio de microfundamentos, resultados empíricos e implicaciones políticas. Revista de Mercados Financieros, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de órdenes de acciones: resultados empíricos y modelos. Finanzas Cuantitativas, 2:251-256, 2002. [4] C. Cao, O. Hansch y X. Wang. El contenido informativo de un libro de órdenes abiertas, 2004. Reuniones de AFA 2005 en Filadelfia, Documento No. 4311 de las Reuniones de EFA en Maastricht. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución óptima de operaciones de valores en un mercado de órdenes limitadas. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de precios de estrategias comunes de trading. Revista de Comportamiento Económico y Organización, 29:149-171, 2002. [7] J. Hasbrouck. Microestructura de mercado empírica: Perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Apuntes del curso, Escuela de Negocios Stern, Universidad de Nueva York. [8] R. Kissell y M. Glantz. Estrategias óptimas de trading. Amacom, 2003. [9] S. Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y trading de órdenes límite. En Actas de la Conferencia de la ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y. Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje por refuerzo para la ejecución de operaciones optimizada, 2006. Preimpresión. 129 ",
            "candidates": [],
            "error": [
                [
                    ""
                ]
            ]
        },
        "computational finance": {
            "translated_key": "finanzas computacionales",
            "is_in_text": false,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": [
                []
            ]
        }
    }
}