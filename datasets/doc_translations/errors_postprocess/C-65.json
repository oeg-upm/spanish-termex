{
    "id": "C-65",
    "original_text": "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system. A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA. A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface. The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors. The system estimates the trajectory, the range, the caliber and the weapon type. The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center. The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested. Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1. INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East. In October 2006 CNN reported on a new tactic employed by insurgents. A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic. By the time the soldiers can react, they are gone. A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers. Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003. The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network. The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot. PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots. The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time. This capability is due to the widely distributed sensing and the unique sensor fusion approach [8]. The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities. The obvious disadvantage of such a system is its static nature. Once the sensors are distributed, they cover a certain area. Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance. It is not practical to gather and reuse the sensors, especially under combat conditions. Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place. As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves. While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers. A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges. The sensor positions and orientation need to be constantly monitored. As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before. Moreover, the system should be useful to even a single soldier. Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization. The paper presents the design and evaluation of our soldierwearable mobile countersniper system. It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12]. Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously. The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2. APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena. The muzzle blast is generated at the muzzle of the gun and travels at the speed sound. The supersonic projectile generates an acoustic shockwave, a kind of sonic boom. The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound. The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec. The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor. It is typically a few hundred μsec. Once a trajectory estimate is available, the shockwave length can be used for caliber estimation. Our system is based on four microphones connected to a sensorboard. The board detects shockwaves and muzzle blasts and measures their ToA. If at least three acoustic channels detect the same event, its AoA is also computed. If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6. As the microphones are close to each other, typically 2-4, we cannot expect very high precision. Also, this method does not estimate a trajectory. In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations. However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9]. A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations. The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer. A wired USB connection is also available. The sensorfusion algorithm and the user interface get their data through one of these channels. The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass. Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself. However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system. Refer to Section 7 for an analysis. The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7]. However, we leave the integration of the two technologies for future work. 3. HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11]. Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate. Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1). The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2). The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line. Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA. The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds). These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables. This partitioning enables the use of truly different audio channels (eg.: slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths. The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways. An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs. The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote). The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station. The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC. The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities. The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events. Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote. We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements). The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator. The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio. The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power. The first prototype of our system employed 10 sensor nodes. Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a). The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4. SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4. Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration. The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java. The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels. The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module. Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses. Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch. Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm. Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram. The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link. Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link. Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network. The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard. The results of the sensor fusion are displayed on the PDA screen with low latency. Since, the application is implemented in pure Java, it is portable across different PDA platforms. The border between software and hardware is considerably blurred on the sensor board. The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks. However, some of them-most notably the soft processor cores-execute true software programs. The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces. As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals. Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces. This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface). The same set of registers are also accessible through a UART link with a terminal emulation program. Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg.: the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs). The most important results are the time stamps of the detected events. These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA. The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface. Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains. The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it. The maximum effective bandwidth is 100 Kbps through this interface. The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector. The control, status and data registers of the UART modules are available through the register file. The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs. One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings. By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel). Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block. The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller. The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM. These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example. The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently. The signal paths meet only just before the register file. Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain. Each channel has its own shockwave and muzzle blast detector, which are described in Section 5. The detectors fetch run-time parameter values from the register file and store their results there as well. The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection. The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources. This component receives the samples from all channels and stores them in circular buffers in the PSRAM device. If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link. The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file. Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line. The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly. The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz). The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node. Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal. The messages need to be propagated in the ad-hoc multihop network using a routing service. We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application. Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies. Routing policies are state machines that govern how received messages are stored, resent or discarded. Example policies include spanning tree routing, broadcast, geographic routing, etc. Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg.: because of the changing RF environment or power budget). In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field. Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network. The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself. That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node. Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference. The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application. Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier. The mote application is implemented in nesC [5] and is running on top of TinyOS [6]. With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5. DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications. Both events are transient by their nature and present very intense stimuli to the microphones. This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music. Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects. The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations. Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event. Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection. Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware). These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections. Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic. The detectors are implemented as independent IP cores within the FPGA-one pair for each channel. The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors. Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote. At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards. The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal. Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs). The shockwave detection core is continuously looking for two rising edges within a given interval. The state machine of the algorithm is shown in Figure 5(b). The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax). The only feature calculated by the core is the length of the observed shockwave signal. In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4]. Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a). Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly. The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder. After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain. After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period. If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise. Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently. The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one. The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections). The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b). The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities. Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite. The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6. SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon. The algorithm consists of well separated computational tasks outlined below: 1. Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2. Compute range estimates. This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3. Compute a single trajectory from all shockwave measurements (see 6.3). 4. If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5. If trajectory available compute caliber (see 6.5). 6. If caliber available compute weapon type (see 6.6). We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard. Each sensorboard has four microphones that measure the ToA-s. Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption). Let us formalize the problem for 3 microphones first. Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3. First we apply a simple geometry validation step. The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error. If this condition does not hold, the corresponding detections are discarded. Let v(x, y, z) be the normal vector of the unknown direction of arrival. We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3. Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c). This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long. There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide). We use the fourth microphones measurement-if there is one-to eliminate one of them. Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2). One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals. Consider the situation in Figure 7. A shot was fired from P at time t. Both P and t are unknown. We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available. The muzzle blast detection is at position P1 with time t1 and AoA u. The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors. It is shown below that these measurements are sufficient to compute the position of the shooter (P). Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface. Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2). The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t). P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t). P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 . From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA). In this case: t = uvt1−t2 uv−1 . Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range. Here we assumed that the shockwave is a cone which is only true for constant projectile speeds. In reality, the angle of the cone slowly grows; the surface resembles one half of an American football. The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet. A smaller time difference results in a smaller range, so the above formula underestimates the true range. However, it can still be used with a proper deceleration correction function. We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2]. The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other. In the special case when both directions are the same, the trajectory cannot be computed. In a real world application, the sensors are typically deployed on a plane approximately. In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA. To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold. We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave). Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold. We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory. Assume that we have N individual shockwave AoA measurements. Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each. This gives us at most N(N−1) 2 trajectories. A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index). We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter. The largest neighbor set is considered to be the core set C, all other trajectories are outliers. The core set can be found in O(N2 ) time. The trajectories in the core set are then averaged to get the final trajectory. It can happen that we cannot form any sensor pairs because of the direction difference threshold. It means all sensors are on the same side of the trajectory. In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown. To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions. We have made experiments to utilize the measured shockwave length in the trajectory estimation. There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available). Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor. For an example, refer to Figure 8. Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave. Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm. All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes. It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8]. The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes. For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box. The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes. The box with the maximum consistency is divided until the desired precision is reached. Backtracking is possible to avoid getting stuck in a local maximum. This approach has been shown to be fast enough for online processing. Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster. Next let us describe how the consistency function is calculated in detail. Consider B, a three dimensional box, we would like to compute the consistency value of. First we consider only the ToA information. If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate. For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B. Since it is a box and not a single point, this gives us an interval for the shot time. The maximum number of overlapping time intervals gives us the value of the consistency function for B. For a detailed description of the consistency function and search algorithm, refer to [8]. Here we extend the approach the following way. We modify the consistency function based on the bearing and range data from individual sensors. A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box. A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B. Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error. The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20]. He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship. Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels. Three different caliber projectiles have been tested (196 shots, 10 sensors). To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length. For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance. This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors. The experimental data is shown in Figure 9. Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent). Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings. This method has less than 1% caliber estimation error when an accurate trajectory estimate is available. In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information. Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes. The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself. Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements. Both weapons have the same caliber. Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements. All weapons have the same caliber. Data is approximated using simple linear regression. However, the measured speed of the projectile and its caliber showed good correlation with the weapon type. This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant. In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons. In the supersonic speed range, the bullet deceleration can be approximated with a linear function. In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10). Unfortunately, this is not necessarily true for the 5.56 mm caliber. The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11). However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began. More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat. The system carries out weapon classification in the following manner. Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry. To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7. RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19]. The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects. Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area. There were five fixed targets behind the sensor network. Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters. These positions were known to the evaluators, but not to the operators of the system. Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107. Note that the sensors remained static during the test. The primary reason for this is that nobody is allowed downrange during live fire tests. Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test. The experiment, therefore, did not test the mobility aspect of the system. During the one day test, there were 196 shots fired. The results are summarized in Table 1. The system detected all shots successfully. Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust. There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range. Shooter Local- Caliber Trajectory Trajectory Distance No. Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations. All shots were successfully detected, so the detection rate is omitted. Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of. The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory. The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory. The distance error shows the distance between the real shooter position and the estimated shooter position. As such, it includes the error caused by both the trajectory and that of the range estimation. Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup. The 10 sensor nodes are labeled by their ID and marked by dark circles. The targets are black squares marked T-1 through T-5. The long white arrows point to the shooter position estimated by each sensor. Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both. The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network. This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network. The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone. Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case. The localization rate characterizes the systems ability to successfully estimate the trajectory of shots. Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either. There were 7 shots out of 196 that were not localized. The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors. In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3). Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all. It is better not to give an answer other than a shot alarm than misleading the soldier. Localization accuracy is broken down to trajectory accuracy and range estimation precision. The angle of the estimated trajectory was better than 1 degree except for the 300 m range. Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day. This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots. As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer. Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory. These indicate an error which is about 1-2% of the range. To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at. Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming. As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system. We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term. The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances. We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts. These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges. This resulted in underestimating the range, since the system measured shorter times than the real ones. Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem. Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results. The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range. Note that the difference is small; there were 189 shots localized out of the total 196. The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized. Note that there was a single shot that was falsely classified by the caliber estimator. The 73% overall weapon classification accuracy does not seem impressive. But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2. For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%. There were only two shots out of approximately 140 that were missed. The M4 and M249 proved to be too similar and they were mistaken for each other most of the time. One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function. Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x. If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%. Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm). That is, the system is able to differentiate between weapons of the same caliber. We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels. While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation. Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor. Table 3 summarizes the results broken down by the ten sensors utilized. Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided. Note that many of the common error sources of the networked system do not play a role here. Time synchronization is not applicable. The sensors absolute location is irrelevant (just as the relative location of multiple sensors). The sensors orientation is still important though. There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon. Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters. Localization rate refers to the percentage of shots the given sensor alone was able to localize. The bearing and range values are average errors. They characterize the accuracy of localization from the given sensors perspective. The data indicates that the performance of the sensors varied significantly especially considering the localization rate. One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was. Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting. In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent. We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error). Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look. The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%. Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines. Hence, not all sensors had line-of-sight to all shooting positions. We estimate that 10% of the sensors had obstructed view to the shooter on average. Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor. The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections. Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network. It would be misleading to interpret these results as the system missing half the shots. As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot. Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system. In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference. Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds. As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system. On the other hand, node location and orientation can have a direct effect on the overall system performance. Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen. But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion. This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations. Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors. Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes. The following experiment was carried out. The number of sensors were varied from 2 to 10 in increments of 2. Each run picked the sensors randomly using a uniform distribution. At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution. Finally, the node orientations were perturbed using a zeromean Gaussian distribution. Each combination of parameters were generated 100 times and utilized for all 196 shots. The results are summarized in Figure 14. There is one 3D barchart for each of the experiment sets with the given fixed number of sensors. The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters. The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees. The z-axis is the resulting trajectory azimuth error. Note that the elevation angles showed somewhat larger errors than the azimuth. Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system. There are many interesting observation one can make by analyzing these charts. Node location errors in this range have a small effect on accuracy. Node orientation errors, on the other hand, noticeably degrade the performance. Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good. Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate. See Table 4 for a summary. Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors. This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes. If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network. See Section 6.3.) As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased. This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes. Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer. However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors. A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm. This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors. Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors. One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors. This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned. The speed of sound depends on the ambient temperature. The current prototype considers it constant that is typically set before a test. It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation. Note also that wind may adversely affect the accuracy of the system. The sensor fusion, however, could incorporate wind speed into its calculations. It would be more complicated than temperature compensation, but could be done. Other practical issues also need to be looked at before a real world deployment. Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at. However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately. The range and weapon type could not be estimated without muzzle blast detections. Subsonic weapons do not produce a shockwave. However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality. Hence, their use is not widespread and they pose less danger in any case. Another issue is the type of ammunition used. Irregular armies may use substandard, even hand manufactured bullets. This effects the muzzle velocity of the weapon. For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8. RELATED WORK Acoustic detection and recognition has been under research since the early fifties. The area has a close relevance to the topic of supersonic flow mechanics [20]. Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast. Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4]. Experiments with greater distances from the muzzle were conducted by Stoughton [18]. The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made. Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger. Another area of research is the signal processing of gunfire acoustics. The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts. Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT). Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency. Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10]. The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics. A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector. It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile. Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform. A related topic is the research and development of experimental and prototype shooter location systems. Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers. The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing. The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other. The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet. There is a low speed RF connection from the helmet to the processing body. An extensive test has been conducted to measure the performance of both type of systems. The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched. The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one. The range accuracy was around 5 percent for both of the systems. The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter. A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8]. This is especially important for operation in acoustically reverberant urban areas. Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1]. The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds. The goal of the system is significantly different than that of military systems. Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond. They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9. CONCLUSIONS The main contribution of this work is twofold. First, the performance of the overall distributed networked system is excellent. Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested. The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple. The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements. It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons. We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test. Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good. While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes. Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode. We believe that the technology is mature enough that a next revision of the system could be a commercial one. However, important aspects of the system would still need to be worked on. We have not addresses power management yet. A current node runs on 4 AA batteries for about 12 hours of continuous operation. A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs. An analog trigger circuit could solve this problem, however, the system would miss the first shot. Instead, the acoustic channels would need to be sampled and stored in a circular buffer. The rest of the board could be turned off. When a trigger wakes up the board, the acoustic data would be immediately available. Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life. Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10. REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki. Acoustic sniper localization. Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al. Fixed and wearable acoustic counter-sniper systems for law enforcement. In E. M. Carapezza and D. B. Law, editors, Proc. SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler. Description of muzzle blast by modified scaling models. Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler. The nesC language: a holistic approach to networked embedded systems. Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A. Woo, S. Hollar, D. Culler, and K. Pister. System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens. Node-density independent localization. Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon. Countersniper system for urban warfare. ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti. Directed flood-routing framework for wireless sensor networks. In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004. Springer-Verlag New York, Inc. [10] B. Mays. Shockwave and muzzle blast classification via joint time frequency and wavelet analysis. Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler. Optimal and wavelet-based shock wave detection and estimation. Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta. On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton. Sensor network-based countersniper system. In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004. ACM Press. [18] R. Stoughton. Measurements of small-caliber ballistic shock waves in air. Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B. A. Weiss, C. Schlenoff, M. Shneier, and A. Virts. Technology evaluations and performance metrics for soldier-worn sensors for assist. In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham. Flow pattern of a supersonic projectile. Communications on pure and applied mathematics, 5(3):301, 1952. 126",
    "original_translation": "Localización de tiradores y clasificación de armas con sensores en red que usan soldados Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, EE. UU.Presenta un sistema de anticipación móvil basado en la red de sensores inalámbricos. Un nodo del sensor consiste en una matriz de micrófono montada en el casco, un cots Micaz Mote para la comunicación del internodo y un tablero de sensores personalizado que implementa la detección acústica y el tiempo de llegada de los algoritmos de estimación en un FPGA. Una brújula de 3 ejes proporciona una auto orientación y Bluetooth se utiliza para la comunicación con los soldados PDA que ejecuta la fusión de datos y la interfaz de usuario. El algoritmo de fusión del sensor heterogéneo puede funcionar con datos de un solo sensor o puede fusionar TOA o ángulo de llegada (AOA) observaciones de explosiones de hocico y ondas de choque balísticas de múltiples sensores. El sistema estima la trayectoria, el rango, el calibre y el tipo de arma. El documento presenta el diseño del sistema y los resultados de una evaluación independiente en el Centro de Pruebas de Aberdeen del Ejército de EE. UU. El rendimiento del sistema se caracteriza por la precisión de la trayectoria de 1 grado y la precisión de la estimación de calibre más del 95% para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas. Categorías y descriptores de sujetos C.2.4 [Redes de comunicación por computadora]: sistemas distribuidos;J.7 [Computadoras en otros sistemas]: Términos generales militares: diseño, medición, rendimiento 1. INTRODUCCIÓN La importancia de los sistemas de contratsniper está subrayado por la corriente constante de informes de noticias provenientes de Oriente Medio. En octubre de 2006, CNN informó sobre una nueva táctica empleada por insurgentes. Un equipo de francotirador móvil se mueve por las concurridas calles de la ciudad en un automóvil, se posiciona a una buena distancia de personal militar desmontado, toma un solo disparo bien dirigido e inmediatamente se derrite en el tráfico de la ciudad. Cuando los soldados pueden reaccionar, se han ido. Un sistema de contratación que proporciona una ubicación de tiradores casi inmediato a cada soldado en las cercanías proporcionaría claros beneficios a los frandeos. Nuestro equipo presentó PinPTR, el primer sistema de contratsniper basado en la red de sensores [17, 8] en 2003. El sistema se basa en cientos de nodos sensores de bajo costo desplegados en el área de interés que forma una red multihop ad-hoc. Los sensores acústicos miden el tiempo de llegada (TOA) de las explosiones de hocico y las ondas de choque balísticas, las ondas de presión inducidas por el proyectil supersónico, envían los datos a una estación base donde un algoritmo de fusión de sensores determina el origen del disparo. PINPTR se caracteriza por alta precisión: precisión 3D promedio de 1M para tomas que se originan dentro o cerca de la red de sensores y precisión de 1 grado para el acimut y la elevación y la precisión del 10% en la estimación de rango para disparos de rango más largos. La característica verdaderamente única del sistema es que funciona en entornos tan reverberantes como el terreno urbano desordenado y que puede resolver múltiples tomas simultáneas al mismo tiempo. Esta capacidad se debe a la detección ampliamente distribuida y al enfoque único de fusión del sensor [8]. El sistema ha sido probado varias veces en las instalaciones de Mout (operaciones militares en terreno urbano). La desventaja obvia de dicho sistema es su naturaleza estática. Una vez que se distribuyen los sensores, cubren una cierta área. Dependiendo de la operación, el despliegue puede ser necesario durante una hora o un mes, pero finalmente el área pierde su importancia. No es práctico reunir y reutilizar los sensores, especialmente en condiciones de combate. Incluso si los sensores son baratos, sigue siendo un desperdicio y un problema logístico proporcionar una corriente continua de sensores a medida que las operaciones se mueven de un lugar a otro. Como son principalmente los soldados que protege el sistema, una extensión natural es montar los sensores de los mismos soldados. Si bien hay sistemas de contraportador de vehículos [1] disponibles comercialmente, no conocemos un sistema desplegado que proteja a los soldados desmontados. BBN [3] desarrolló un sistema montado en el casco a mediados de los 90, pero no continuó más allá del programa DARPA lo que lo financió.113 para pasar de una solución basada en la red de sensores estáticos a uno altamente móvil presenta desafíos significativos. Las posiciones y la orientación del sensor deben ser monitoreadas constantemente. Como los soldados pueden trabajar en grupos de tan solo cuatro personas, el número de sensores que miden los fenómenos acústicos pueden ser un orden de magnitud más pequeño que antes. Además, el sistema debería ser útil para incluso un solo soldado. Finalmente, los requisitos adicionales requerían la estimación del calibre y la clasificación de armas, además de la localización de la fuente. El documento presenta el diseño y la evaluación de nuestro sistema de mostrador móvil de soldado. Describe la arquitectura de hardware y software, incluida la placa de sensor personalizada equipada con una pequeña matriz de micrófono y conectado a un Cots Micaz Mote [12]. Se paga especial énfasis a la técnica de fusión del sensor que estima la trayectoria, el rango, el calibre y el tipo de arma simultáneamente. También se presentan los resultados y el análisis de una evaluación independiente del sistema en el Centro de Prueba del Ejército de EE. UU.2. Acercarse al disparo de un rifle militar típico, como el AK47 o M16, produce dos fenómenos acústicos distintos. La explosión del hocico se genera en el hocico de la pistola y viaja al sonido de velocidad. El proyectil supersónico genera una onda de choque acústica, una especie de boom sónico. El frente de onda tiene una forma cónica, cuyo ángulo depende del número de Mach, la velocidad de la bala en relación con la velocidad del sonido. La onda de choque tiene una forma característica que se asemeja a una capital N. El tiempo de elevación tanto en el inicio como en el final de la señal es muy rápido, por debajo de 1 μsec. La longitud está determinada por el calibre y la distancia de la falla, la distancia entre la trayectoria y el sensor. Por lo general, es de unos cientos de μsec. Una vez que está disponible una estimación de trayectoria, la longitud de la onda de choque se puede usar para la estimación del calibre. Nuestro sistema se basa en cuatro micrófonos conectados a un tablero de sensores. El tablero detecta ondas de choque y explosiones de hocico y mide sus TOA. Si al menos tres canales acústicos detectan el mismo evento, su AOA también se calcula. Si tanto la ondas de choque como la explosión de hocico están disponibles, una solución analítica simple le da a la ubicación del tirador como se muestra en la Sección 6. Como los micrófonos están cerca uno del otro, típicamente 2-4, no podemos esperar una precisión muy alta. Además, este método no estimula una trayectoria. De hecho, un número infinito de pares de velocidad de cena de trayectoria satisface las observaciones. Sin embargo, los tableros de sensor también están conectados a Cots Micaz Motes y comparten sus mediciones AOA y TOA, así como su propia ubicación y orientación, entre sí utilizando un servicio de enrutamiento de MultiHop [9]. Un algoritmo de fusión del sensor híbrido luego estima la trayectoria, el rango, el calibre y el tipo de arma en función de todas las observaciones disponibles. El Sensorboard también es Bluetooth para la comunicación con los soldados PDA o la computadora portátil. También está disponible una conexión USB con cable. El algoritmo SensorFusion y la interfaz de usuario obtienen sus datos a través de uno de estos canales. La orientación de la matriz de micrófono en el momento de la detección es proporcionada por una brújula digital de 3 ejes. Actualmente, el sistema supone que el PDA de los soldados tiene capacidad para GPS y no proporciona el servicio de autoalocalización en sí. Sin embargo, la precisión de GPS es de unos pocos metros degradando la Figura 1: conjunto de sensor acústico/ensamblaje de moto.precisión general del sistema. Consulte la Sección 7 para obtener un análisis. El Sensorboard de última generación presenta una radio CC-1000 de Texas Instruments que permite el enfoque de autoalocalización interferométrica de radio de alta precisión que hemos desarrollado por separado [7]. Sin embargo, dejamos la integración de las dos tecnologías para el trabajo futuro.3. Hardware Desde la primera versión estática de nuestro sistema en 2003, los nodos sensores se han construido sobre la línea de productos UC Berkeley/Bebow Mica [11]. Aunque el procesamiento de señal acústica rudimentaria se puede realizar en estas placas basadas en microcontroladores, no proporcionan el rendimiento computacional requerido para la detección de ondas de choque y las mediciones de ángulo de llegada, donde múltiples señales de diferentes micrófonos deben procesarse en paralelo a una alta tasa de muestreo. Nuestro tablero de sensores de tercera generación está diseñado para usarse con Micaz Motes, de hecho, tiene casi el mismo tamaño que la mota misma (ver Figura 1). La placa utiliza un poderoso chip XC3S1000 FPGA Xilinx con varios núcleos IP periféricos estándar, múltiples núcleos de procesador suave y lógica personalizada para los detectores acústicos (Figura 2). Los módulos a bordo de flash (4MB) y PSRAM (8MB) permiten almacenar muestras crudas de varios eventos acústicos, que pueden usarse para construir bibliotecas de varias firmas acústicas y para refinar los núcleos de detección fuera de línea. Además, los bloques de memoria externos pueden almacenar el código de programa y los datos utilizados por los núcleos de procesador Soft en el FPGA. La Junta admite cuatro canales analógicos independientes muestreados a hasta 1 ms/s (millones de muestras por segundo). Estos canales, con un micrófono electret (Panasonic WM64PNT), amplificadores con ganancia controlable (30-60 dB) y un ADC serial de 12 bits (dispositivos analógicos AD7476), residen en pequeños tableros que están conectados a la placa sensorial principal con cable de cinta con cables de cinta. Esta partición permite el uso de canales de audio realmente diferentes (por ejemplo: frecuencia de muestreo más lenta, ganancia diferente o rango dinámico) y también da como resultado mediciones menos ruidosas al evitar largas rutas de señal analógica. La plataforma de sensores ofrece un rico conjunto de interfaces y puede integrarse con los sistemas existentes de diversas maneras. Un puerto RS232 y un enlace inalámbrico Bluetooth (BlueGiga WT12) con emulación UART virtual están directamente disponibles en la placa y proporcionan medios simples para conectar el sensor a PC y PDA. La interfaz MOTE consiste en un bus I2 C junto con una línea de interrupción y GPIO (la última se usa 114 Figura 2: diagrama de bloques del tablero de sensores. Para una sincronización precisa de tiempo entre la placa y la mota). Las motas están equipadas con transceptores de radio que cumplen con IEEE 802.15.4 y admiten redes inalámbricas ad-hoc entre los nodos y hacia/desde la estación base. El Sensorboard también admite transferencias USB de velocidad completa (con dongles USB personalizados) para cargar muestras de audio grabadas a la PC. La cadena JTAG a bordo accesible directamente a través de un conector dedicado contiene la parte y la memoria de configuración FPGA y proporciona instalaciones de programación y depuración en el sistema. El módulo integrado de brújula digital Honeywell HMR3300 proporciona información de encabezado, tono y rollo con una precisión de 1 °, que es esencial para calcular y combinar estimaciones direccionales de los eventos detectados. Debido a los complejos requisitos de voltaje del FPGA, los circuitos de fuente de alimentación se implementan en el tablero de sensores y proporciona energía tanto localmente como a la mota. Utilizamos un paquete cuádruple de baterías AA recargables como fuente de alimentación (aunque cualquier otra configuración es viable que cumpla con los requisitos de voltaje). Los voltajes Core (1.2 V) y E/S (3.3 V) FPGA se generan mediante un regulador de conmutación de dólar altamente eficiente. La configuración FPGA (2.5 V) y una red de potencia separada de 3.3 V son alimentadas por LDoS de baja corriente, esta última se utiliza para proporcionar energía independiente a la mota y la radio Bluetooth. Los reguladores-excepto que se enciendan/apagan de una vez desde la moto o a través de la radio Bluetooth (a través de líneas GPIO) para ahorrar energía. El primer prototipo de nuestro sistema empleó 10 nodos de sensores. Algunos de estos nodos se montaron en cascos militares Kevlar con los micrófonos directamente unidos a la superficie a una separación de aproximadamente 20 cm como se muestra en la Figura 3 (a). El resto de los nodos se montaron en recintos de plástico (Figura 3 (b)) con los micrófonos colocados cerca de las esquinas de las cajas para formar rectángulos de aproximadamente 5 cm × 10 cm.4. Arquitectura de software La aplicación del sensor se basa en tres subsistemas que explotan tres paradigmas informáticos diferentes como se muestran en la Figura 4. Aunque cada uno de estos modelos de ejecución se adapta extremadamente bien a sus tareas específicas de su dominio, esta diversidad (a) (b) Figura 3: Prototipos de sensores montados en un casco Kevlar (A) y en una caja de plástico en un trípode (B).presenta un desafío para el desarrollo de software e integración del sistema. El subsistema de fusión de sensores y interfaz de usuario se ejecuta en PDA y se implementó en Java. Las tareas de detección y procesamiento de señales son ejecutadas por un FPGA, que también actúa como un puente entre varios canales de comunicación cableados e inalámbricos. La comunicación ad-hoc de la comunicación, la sincronización del tiempo y el intercambio de datos son las responsabilidades de un módulo de radio basado en microcontroladores. Del mismo modo, la aplicación emplea una amplia variedad de protocolos de comunicación como Bluetooth e IEEE 802.14.5 enlaces inalámbricos, así como UART opcionales, I2 C y/o buses USB. Dispositivo operado por soldado (PDA/laptop) FPGA Sensor Board MICA Radio Module 2.4 GHz Enlace inalámbrico Control de radio Enrutamiento de mensajes ACOUStic Event Sensor Synch. Tiempo de red Synch. Remote Control El estampado de tiempo interrumpe la interfaz de registro virtual C o o r d i n a t o r a n a l o g c h a n n e l s compass Picoblaze Comm. Interfaz Picoblaze WT12 Bluetooth Radio Mote if: I2C, interrumpe USB PSRAM U A R T U A R T MB DET SW DET REC BLUETOOTH Interface de usuario Sensor de fusión de fusión Mensaje GPS GPS (Dis-) Control de sensores de ensamblaje Figura 4: Diagrama de arquitectura de software. El módulo de fusión del sensor recibe y desempaqueta las mediciones sin procesar (marcas de tiempo y vectores de características) desde la placa sensorial a través del enlace Bluetooth. Además, sintoniza la ejecución de los núcleos de procesamiento de señal estableciendo parámetros a través del mismo enlace. Tenga en cuenta que las mediciones de otros nodos junto con su información de ubicación e orientación también llegan desde el tablero de sensores que actúa como una puerta de enlace entre el PDA y la red de sensores. El dispositivo portátil obtiene sus propios datos de ubicación GPS y DI115 recibe información de orientación a través de la placa de sensores. Los resultados de la fusión del sensor se muestran en la pantalla PDA con baja latencia. Dado que la aplicación se implementa en Java puro, es portátil en diferentes plataformas PDA. El borde entre el software y el hardware está considerablemente borroso en la placa de sensores. Los núcleos IP implementados en los lenguajes de descripción de hardware (HDL) en la red reconfigurable FPGA se parecen a los bloques de construcción de hardware. Sin embargo, algunos de ellos más notablemente los núcleos de procesador suave, ejecutan los programas de software verdaderos. Las tareas principales del software de placa de sensor son 1) adquirir muestras de datos de los canales analógicos, 2) procesar datos acústicos (detección) y 3) proporcionar acceso a los resultados y los parámetros de tiempo de ejecución a través de diferentes interfaces. Como se muestra en la Figura 4, un archivo de registro virtual centralizado contiene la lógica de decodificación de la dirección, los registros para almacenar valores y resultados de parámetros y los buses de datos de punto a punto hacia y desde los periféricos. Por lo tanto, integra de manera efectiva los bloques de construcción dentro del tablero de sensores y desacopla las diversas interfaces de comunicación. Esta arquitectura nos permitió desplegar el mismo conjunto de sensores en un escenario centralizado, donde la red de mote ad-hoc (usando la interfaz i2 C) recopiló y reenvió los resultados a una estación base o construye un sistema descentralizado donde los PDA locales ejecutanLa fusión del sensor en los datos obtenidos a través de la interfaz Bluetooth (y opcionalmente de otros sensores a través de la interfaz MOTE). También se puede acceder al mismo conjunto de registros a través de un enlace UART con un programa de emulación terminal. Además, debido a que las interfaces de bajo nivel están ocultas por el archivo de registro, uno puede agregar fácilmentelas fácilmente con otras nuevas (por ejemplo: la primera generación de motas admitió un bus de interfaz estándar μP en el conector del sensor, que se dejó caer más tardediseños). Los resultados más importantes son las sellos de tiempo de los eventos detectados. Estas marcas de tiempo y toda la otra información de tiempo (parámetros, características del evento acústico) se basan en un reloj de 1 MHz y un temporizador interno en el FPGA. La conversión de tiempo y la sincronización entre la red de sensores y la placa se realizan mediante la MOTE solicitando periódicamente la captura del valor del temporizador actual a través de una línea GPIO dedicada y leyendo el valor capturado del archivo de registro a través de la interfaz I2 C. Según las lecturas actuales y anteriores y las sellos de tiempo locales MOTE correspondientes, la mota puede calcular y mantener el factor de escala y el desplazamiento entre los dos dominios de tiempo. La interfaz MOTE es implementada por el núcleo IP de esclavo I2 C y una capa de adaptación delgada que proporciona una abstracción del bus de datos y direcciones sobre él. El ancho de banda máximo efectivo es de 100 kbps a través de esta interfaz. El FPGA también contiene varios núcleos UART: para comunicarse con el módulo Bluetooth integrado, para controlar la brújula digital y para proporcionar un enlace RS232 con cable a través de un conector dedicado. Los registros de control, estado y datos de los módulos UART están disponibles a través del archivo de registro. Los protocolos de nivel superior en estas líneas son implementados por los núcleos de microcontroladores de PicoBlaze Xilinx [13] y los programas de software correspondientes. Uno de ellos proporciona una interfaz de línea de comando para fines de prueba y depuración, mientras que el otro es responsable de analizar las lecturas de la brújula. De manera predeterminada, están conectados al puerto RS232 y a la línea de brújula digital integrada respectivamente, sin embargo, se pueden volver a cablear a cualquier interfaz de comunicación cambiando la dirección base del archivo de registro en los programas (por ejemplo, se puede proporcionar la interfaz de la línea de comandosa través del canal Bluetooth). Dos de las interfaces externas no son accesibles a través del archivo de registro: un enlace USB de alta velocidad y la interfaz SRAM están vinculadas al bloque de grabadora. El módulo USB implementa un FIFO simple con líneas de datos paralelas conectadas a un controlador de dispositivo USB externo FT245R. El controlador RAM implementa ciclos de lectura/escritura de datos con el sincronización correcta y está conectado al pseudo sram integrado. Estas interfaces proporcionan un ancho de banda efectivo de 1 MB/s para descargar muestras de audio grabadas, por ejemplo. La adquisición de datos y las rutas de procesamiento de señales exhiben una simetría clara: el mismo conjunto de núcleos IP se instancia cuatro veces (es decir, el número de canales acústicos) y se ejecutan de forma independiente. Las rutas de señal se reúnen solo antes del archivo de registro. Cada uno de los canales analógicos está impulsado por un núcleo de A/D en serie para proporcionar un reloj en serie de 20 MHz y cambiar en muestras de datos de 8 bits a 1 ms/s y un controlador de potenciómetro digital para establecer la ganancia requerida. Cada canal tiene su propio detector de ondas de choque y explosión de hocico, que se describen en la Sección 5. Los detectores obtienen valores de parámetros de tiempo de ejecución del archivo de registro y almacenan sus resultados allí también. El núcleo del coordinador monitorea constantemente los resultados de la detección y genera una interrupción de la mota rápidamente tras la detección completa o después de un tiempo de espera razonable después de la detección parcial. El componente de la grabadora no se usa en la implementación final, sin embargo, es esencial para fines de desarrollo para refinar los valores de los parámetros para nuevos tipos de armas o para otras fuentes acústicas. Este componente recibe las muestras de todos los canales y las almacena en buffers circulares en el dispositivo PSRAM. Si la amplitud de la señal en uno de los canales cruza un umbral predefinido, el componente de la grabadora suspende la colección de la muestra con un retraso predefinido y arroja el contenido de los amortiguadores a través del enlace USB. La longitud de estos búferes y retrasos, la velocidad de muestreo, el nivel de umbral y el conjunto de canales grabados pueden estar configurados (re) tiempo de ejecución a través del archivo de registro. Tenga en cuenta que el núcleo funciona de forma independiente de los otros módulos de procesamiento de señal, por lo tanto, se puede utilizar para validar los resultados de detección fuera de línea. Los núcleos FPGA se implementan en VHDL, los programas de Picoblaze están escritos en el ensamblaje. La configuración completa ocupa el 40% de los recursos (rebanadas) de la FPGA y la velocidad máxima del reloj es de 30 MHz, que es de manera segura más alta que la velocidad utilizada con el dispositivo real (20MHz). Los Micaz Motes son responsables de distribuir datos de medición en la red, lo que mejora drásticamente los resultados de localización y clasificación en cada nodo. Además de una capa de radio robusta (Mac), las motas requieren dos servicios de middleware esenciales para lograr este objetivo. Los mensajes deben propagarse en la red AD-Hoc MultiHop utilizando un servicio de enrutamiento. Integramos con éxito el Marco de Routing de Inundación Directado (DFRF) [9] en nuestra aplicación. Además de la agregación automática de mensajes y la gestión eficiente de búfer, la característica más única de DFRF es su arquitectura enchufable, que acepta políticas de enrutamiento personalizadas. Las políticas de enrutamiento son máquinas estatales que rigen cómo se almacenan, resenten o descartan los mensajes recibidos. Las políticas de ejemplo incluyen enrutamiento de árboles, transmisión, enrutamiento geográfico, etc. Se pueden usar diferentes políticas para diferentes mensajes simultáneamente, y la aplicación puede cambiar las políticas subyacentes en tiempo de ejecución (por ejemplo: debido al cambio de entorno de RF o presupuesto de potencia). De hecho, cambiamos varias veces entre una política de transmisión simple pero lujosa y un enrutamiento de gradiente más eficiente en el campo. La correlación de las mediciones de TOA requiere una base de tiempo común y una sincronización de tiempo precisa en la red de sensores. El protocolo de sincronización de tiempo integrado (RIS) [15] de enrutamiento se basa en un estampado de tiempo de capa Mac muy preciso para incrustar el retraso acumulativo que se acumuló un mensaje de datos desde el momento de la detección en el mensaje en sí. Es decir, en cada nodo mide el tiempo que el mensaje pasó allí y agrega esto al número en la ranura de retraso de tiempo del mensaje, justo antes de que salga del nodo actual. Cada nodo receptor puede restar el retraso de su tiempo actual para obtener el tiempo de detección en su referencia de hora local. El servicio proporciona una conversión de tiempo muy precisa (pocos μs por error de lúpulo), que es más que adecuado para esta aplicación. Tenga en cuenta que las motas también necesitan convertir las marcas de tiempo del tablero de sensores en tiempo de mote como se describe anteriormente. La aplicación MOTE se implementa en NESC [5] y se ejecuta sobre Tinyos [6]. Con su requisito de 3 kb de RAM y 28 kb de espacio de programa (ROM), se ajusta fácilmente a los Micaz Motes.5. Algoritmo de detección Hay varias características de las ondas de choque acústicas y las explosiones de boca que distinguen sus algoritmos de detección y procesamiento de señales de aplicaciones de audio regulares. Ambos eventos son transitorios por su naturaleza y presentan estímulos muy intensos a los micrófonos. Esto es cada vez más problemático con micrófonos electret de bajo costo diseñados para recoger el habla o la música regular. Aunque la amortiguación mecánica de las membranas micrófonas puede mitigar el problema, este enfoque no está exento de efectos secundarios. Los algoritmos de detección deben ser lo suficientemente robustos como para manejar la distorsión no lineal severa y las oscilaciones transitorias. Dado que la firma de la explosión del hocico sigue de cerca la señal de ondas de choque y debido a posibles explosiones de armas automáticas, es extremadamente importante establecer los canales de audio y la lógica de detección lo antes posible después de un evento. Además, el ángulo preciso de estimación de llegada requiere una alta frecuencia de muestreo (en el rango de MHZ) y una detección de eventos precisa. Además, la lógica de detección necesita procesar múltiples canales en paralelo (4 canales en nuestro hardware existente). Estos requisitos dictaron algoritmos simples y robustos tanto para detecciones de explosión de hocico como de onda de choque. En lugar de usar detectores de energía mundanos, que podrían no ser capaces de distinguir los dos eventos diferentes, los detectores aplicados se esfuerzan por encontrar las características más importantes de las dos señales en el dominio del tiempo utilizando la lógica de máquina de estado simple. Los detectores se implementan como núcleos IP independientes dentro del par FPGA-ONE para cada canal. Los núcleos son configurables en el tiempo de ejecución y proporcionan señales de eventos de detección con marcas de tiempo de alta precisión y vectores de características específicos de eventos. Aunque los núcleos se ejecutan de forma independiente y paralela, un módulo de fusión local crudo los integra al cerrar esos núcleos que perdieron sus eventos después de un tiempo de espera razonable y generando un solo mensaje de detección hacia la mota. En este punto, la mota puede leer y reenviar los tiempos y características de detección y es responsable de reiniciar los núcleos después. Las características más conspicuas de una onda de choque acústica (ver Figura 5 (a)) son los bordes ascendentes empinados en el BE0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.6 0.8 1 Whockwave ((M16) Tiempo (µs) Amplitud 1 3 5 2 4 Len (A) S [T] - S [T -D]> E TStart: = T S [T] - S [T -D] <E S [T] - S [T -D]> E & t - t_start> lmin s [t] - s [t -d] <e len: = t - tStart inactivo 1 primer borde hecho 3 segundos borde 4 primer borde 2 encontrado 5 t - tStar ≥ lmax t - tstart ≥ lmax (b) Figura 5: Señal de onda de choque generada por un proyectil de la OTAN de 5.56 × 45 mm (A) y la máquina de estado del algoritmo de detección (b).Ginning y fin de la señal. Además, la longitud de la onda N es bastante predecible, como se describe en la Sección 6.5 y es relativamente corta (200-300 μs). El núcleo de detección de ondas de choque busca continuamente dos bordes ascendentes dentro de un intervalo dado. La máquina de estado del algoritmo se muestra en la Figura 5 (b). Los parámetros de entrada son la inclinación mínima de los bordes (d, e) y los límites en la longitud de la onda (Lmin, lmax). La única característica calculada por el núcleo es la longitud de la señal de onda de choque observada. A diferencia de las ondas de choque, las firmas de explosión del hocico se caracterizan por un largo período inicial (1-5 ms) donde el primer período de la primera mitad es significativamente más corta que la segunda mitad [4]. Debido a las limitaciones físicas de los circuitos analógicos descritos al comienzo de esta sección, las oscilaciones y fallas irregulares pueden aparecer dentro de esta ventana de tiempo más larga, ya que se pueden ver claramente en la Figura 6 (a). Por lo tanto, el verdadero desafío para el núcleo de detección coincidente es identificar los períodos de primer y segundo semestre correctamente. La máquina de estado (Figura 6 (b)) no funciona en las muestras sin procesar directamente, sino que se alimenta por un codificador de cruce cero (ZC). Después de la activación inicial, el detector intenta recolectar esos segmentos ZC que pertenecen al primer período (amplitud positiva) al tiempo que se descartan los segmentos demasiado cortos (en nuestra terminología: basura), implementando efectivamente un filtro de paso bajo rudimentario en el dominio ZC. Después de que se encuentra con un segmento negativo suficientemente largo, ejecuta la misma lógica de colección para el segundo período de la mitad. Si se descarta demasiada basura en las fases de recolección, el núcleo se restablece para evitar la detección (falsa) de las mitades de períodos completamente diferentes separados por oscilación o ruido rápidos. Finalmente, si las restricciones en la longitud total y en la relación de longitud se mantienen, el núcleo genera un evento de detección junto con la longitud real, la amplitud y la energía del período calculado simultáneamente. El mecanismo de activación inicial se basa en dos umbrales de amplitud: un nivel de amplitud estático (pero configurable) y uno calculado dinámicamente. El último es esencial para adaptar el sensor a diferentes entornos de ruido ambiental y para suspender temporalmente el detector de explosión del hocico después de un evento de onda de choque (oscilaciones en la sección analógica o reverberaciones en el recinto del sensor podría desencadenar falsas detecciones de explosión del hocico). El nivel de ruido dinámico se estima mediante un solo filtro de paso bajo de poste (corte @ 0.5 kHz) en el FPGA.117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 TIEMPO (µs) Explosión de la boca de amplitud (M16) 1 2 3 4 5 Len2 + Len1 (A) inactivo1 segundo ZC 3 pendiente ZC 4 Primer ZC 2 encontrado 5 umbral de amplitud Larga positiva ZC Long Negativo ZC Válido Válido PERIODO COMPLETO MAX SIGNO INCORRECTO RECOMIENDO RECOGRACIÓN DEL PRIMER PERIOMBRO CONTROGA DEL PRIMER EMPRO GARBA (B) Figura 6: Firma de explosión de hocico (A) producida porUn rifle de asalto M16 y la lógica de detección correspondiente (b). Los núcleos de detección se implementaron originalmente en Java y se evaluaron en señales pregrabadas debido a pruebas mucho más rápidas e instalaciones de depuración más convenientes. Más tarde, se portaron a VHDL y se sintetizaron utilizando el suite de herramientas ISE Xilinx. La equivalencia funcional entre las dos implementaciones se probó mediante bancos de prueba VHDL y scripts de Python que proporcionaban una forma automatizada de ejercer los núcleos de detección en el mismo conjunto de señales pregrabadas y comparar los resultados.6. Fusión del sensor El algoritmo de fusión del sensor recibe mensajes de detección de la red de sensores y estima la trayectoria de la bala, la posición del tirador, el calibre del proyectil y el tipo de arma. El algoritmo consiste en tareas computacionales bien separadas que se describen a continuación: 1. Calcule la explosión del hocico y las instrucciones de la onda de choque de las llegadas para cada sensor individual (ver 6.1).2. Estimaciones de rango de cálculo. Este algoritmo puede fusionar analíticamente un par de estimaciones de AOA de ondas de choque y explosión de hocico.(Ver 6.2).3. Calcule una sola trayectoria de todas las mediciones de onda de choque (ver 6.3).4. Si la trayectoria disponible en el rango de cómputo (ver 6.4).De lo contrario, calcule la posición del tirador primero y luego la trayectoria basada en ella.(Ver 6.4) 5. Si la trayectoria disponible calibre calibre (ver 6.5).6. Si el tipo de arma de cálculo de calibre disponible (consulte 6.6). Describimos cada paso en las siguientes secciones en detalle.6.1 Dirección de la llegada El primer paso de la fusión del sensor es calcular la explosión del hocico y el AOA-S de onda de choque para cada placa de sensores. Cada placa de sensor tiene cuatro micrófonos que miden el TOA-S. Dado que el espacio de micrófono es órdenes de magnitud más pequeñas que la distancia a la fuente de sonido, podemos aproximar el frente de onda de sonido que se acerca con un plano (suposición de campo lejano). Primero formalemos el problema para 3 micrófonos. Deje que P1, P2 y P3 sean la posición de los micrófonos ordenados por el tiempo de llegada t1 <t2 <t3. Primero aplicamos un paso simple de validación de geometría. La diferencia de tiempo medida entre dos micrófonos no puede ser mayor que el tiempo de propagación del sonido entre los dos micrófonos: | Ti - TJ |<= | Pi - pj |/c + ε donde c es la velocidad del sonido y ε es el error de medición máximo. Si esta condición no se mantiene, las detecciones correspondientes se descartan. Sea V (x, y, z) el vector normal de la dirección desconocida de llegada. También usamos R1 (X1, Y1, Z1), el vector de P1 a P2 y R2 (X2, Y2, Z2), el vector de P1 a P3. Consideremos la proyección de la dirección del movimiento del frente de onda (V) a R 1 dividido por la velocidad del sonido (c). Esto nos da cuánto tiempo lleva el frente de la onda para propagar la forma P1 a P2: VR1 = C (T2 - T1) La misma relación es válida para R2 y V: VR2 = C (T3 - T1) También sabemos que V es una normalidadVector: VV = 1 Mover de vectores a coordenadas usando la definición del producto DOT conduce a un sistema cuadrático: xx1 + yy1 + zz1 = c (t2 - t1) xx2 + yy2 + zz2 = c (t3 - t1) x2 + y2 + z2= 1 omitimos los pasos de la solución aquí, ya que son sencillos, pero largos. Hay dos soluciones (si la fuente está en el plano P1P2P3, las dos soluciones coinciden). Utilizamos la cuarta medición de los micrófonos, si hay uno para eliminar uno de ellos. De lo contrario, ambas soluciones se consideran para su posterior procesamiento.6.2 Fusión de choque de hocico u V 11, TP 22, TP TP, trayectoria de bala 2p 'Figura 7: Plano de sección de un disparo (en P) y dos sensores (en P1 y en P2). Un sensor detecta las explosiones del hocico, el otro las choque de choque el tiempo y la dirección de las llegadas. Considere la situación en la Figura 7. Se disparó un disparo desde P en el momento t.Tanto P como T son desconocidos. Tenemos una explosión de hocico y una detección de ondas de choque por dos sensores diferentes 118 con AOA y, por lo tanto, la información TOA disponible. La detección de la explosión del hocico está en la posición P1 con el tiempo T1 y AOA U. La detección de ondas de choque está en P2 con el tiempo T2 y AOA v. U y V son vectores normales. A continuación se muestra que estas mediciones son suficientes para calcular la posición del tirador (P). Deje que P2 sea el punto en la superficie de cono de onda de choque extendida donde PP2 es perpendicular a la superficie. Tenga en cuenta que PP2 es paralelo a v. Dado que P2 está en la superficie del cono que golpea P2, un sensor en P2 detectaría el mismo tiempo de llegada de onda de choque (T2). La superficie del cono viaja a la velocidad del sonido (c), por lo que podemos expresar p usando p2: p = p2 + cv (t2 - t). P también se puede expresar a partir de p1: p = p1 + cu (t1 - t) produciendo p1 + cu (t1 - t) = p2 + cv (t2 - t). P2P2 es perpendicular a V: (p2 - p2) V = 0 produciendo (p1 + cu (t1 - t) - cv (t2 - t) - p2) V = 0 que contiene solo una t desconocida.Uno obtiene: T = (P1 - P2) V C +UVT1 - T2 UV - 1. Desde aquí podemos calcular la posición del disparo P. Consideremos el caso especial del sensor único donde P1 = P2 (un sensor detecta tanto la onda de choque como la explosión de la boca). En este caso: t = UVT1 - T2 UV - 1. Dado que U y V no se usan por separado, solo UV, la orientación absoluta del sensor puede ser arbitraria, todavía obtenemos t, lo que nos da el rango. Aquí supusimos que la onda de choque es un cono que solo es cierto para las velocidades de proyectil constantes. En realidad, el ángulo del cono crece lentamente;La superficie se asemeja a la mitad de un fútbol americano. La bala desacelerado da como resultado una menor diferencia de tiempo entre la onda de choque y las detecciones de explosión del hocico porque la generación de onda de choque se ralentiza con la bala. Una diferencia de tiempo menor da como resultado un rango más pequeño, por lo que la fórmula anterior subestima el rango real. Sin embargo, todavía se puede usar con una función de corrección de desaceleración adecuada. Dejamos esto para el trabajo futuro.6.3 Estimación de trayectoria Danicki mostró que la trayectoria y la velocidad de la bala se pueden calcular analíticamente a partir de dos mediciones independientes de onda de choque donde se miden TOA y AOA [2]. El método se vuelve más sensible a los errores de medición a medida que las dos direcciones de onda de choque se acercan entre sí. En el caso especial, cuando ambas direcciones son las mismas, la trayectoria no se puede calcular. En una aplicación del mundo real, los sensores generalmente se implementan en un plano aproximadamente. En este caso, todos los sensores ubicados en un lado de la trayectoria miden casi la misma AOA de onda de choque. Para evitar este problema de sensibilidad al error, consideramos pares de medición de ondas de choque solo si la dirección de la diferencia de llegada es mayor que un cierto umbral. Tenemos múltiples sensores y un sensor puede informar dos direcciones diferentes (cuando solo tres micrófonos detectan la onda de choque). Por lo tanto, típicamente tenemos varios candidatos de trayectoria, es decir, uno para cada par AOA sobre el umbral. Aplicamos un método de filtrado y promedio atípico para fusionar la dirección de la onda de choque y la información de tiempo y presentamos una sola trayectoria. Suponga que tenemos n mediciones de AOA de onda de choque individual. Tomemos todos los pares posibles desordenados donde la diferencia de dirección está por encima del umbral mencionado y calcule la trayectoria para cada uno. Esto nos da como máximo las trayectorias N (n - 1) 2. Una trayectoria está representada por un punto PI y el vector VI normal (donde yo es el índice de trayectoria). Definimos la distancia de dos trayectorias como el producto DOT de sus vectores normales: d (i, j) = vivj para cada trayectoria se define un conjunto vecino: n (i): = {j | d (i, j) <r} Donde R es un parámetro RADIUS. El conjunto vecino más grande se considera el conjunto central C, todas las demás trayectorias son valores atípicos. El conjunto de núcleo se puede encontrar en el tiempo O (N2). Las trayectorias en el conjunto de núcleo se promedian para obtener la trayectoria final. Puede suceder que no podamos formar ningún par de sensores debido al umbral de diferencia de dirección. Significa que todos los sensores están en el mismo lado de la trayectoria. En este caso, primero calculamos la posición del tirador (descrita en la siguiente sección) que arregla P haciendo que V sea el único desconocido. Para encontrar V en este caso, utilizamos una búsqueda de cuadrícula de alta resolución simple y minimizamos una función de error basada en las instrucciones de Whockwave. Hemos realizado experimentos para utilizar la longitud de onda de choque medida en la estimación de la trayectoria. Hay algunos resultados prometedores, pero necesita más investigación.6.4 Estimación de la posición del tirador El algoritmo de estimación de posición del tirador Agregue la siguiente información heterogénea generada por pasos computacionales anteriores: 1. Trayectoria, 2. Básica de hocico TOA en un sensor, 3. Bloquea de hocico AOA en un sensor, que es efectivamente una estimación de la vida a la estimación de laShooter y 4. Estimación de rango en un sensor (cuando están disponibles tanto la onda de choque como el AOA de la explosión de hocico y la explosión). Algunos sensores informan solo TOA, algunos también tienen estimación de rodamientos y otros también tienen estimación de rango, dependiendo de la cantidad de detecciones exitosas de explosión y ondas de choque por parte del sensor. Para un ejemplo, consulte la Figura 8. Tenga en cuenta que un sensor puede tener dos estimaciones de rodamiento y rango diferentes.3 Las detecciones proporcionan dos posibles AOA-S para la explosión de hocico (es decir, rodamiento) y/o onda de choque. Además, la combinación de dos explosiones de hocico diferentes y AOA-S de onda de choque puede dar lugar a dos rangos diferentes.119 11111 ,,,, RRVVT ′ ′ 22, VT 333 ,, VVT ′ 4T 5T 6T Posición del tirador de la trayectoria de la bala Figura 8: Ejemplo de datos de entrada heterogéneos para el algoritmo de estimación de la posición del tirador. Todos los sensores tienen mediciones TOA (T1, T2, T3, T4, T5), un sensor tiene una estimación de rodamiento única (V2), un sensor tiene dos rodamientos posibles (V3, V3) y un sensor tiene dos estimaciones de rodamiento y dos rango (V1, V1, R1, R1) En un entorno múltiple, estas detecciones no solo contendrán el ruido gaussiano, sino también posiblemente grandes errores debido a los ecos. Se ha demostrado en nuestro trabajo anterior que un problema similar puede resolverse de manera eficiente con un algoritmo de búsqueda de bisección basada en aritmética de intervalo [8]. La idea básica es definir una función de consistencia discreta sobre el área de interés y subdividir el espacio en cajas 3D. Para cualquier cuadro 3D dado, esta función proporciona el número de mediciones que respaldan la hipótesis de que el tirador estaba dentro de esa caja. La búsqueda comienza con una caja lo suficientemente grande como para contener toda el área de interés, luego se acerca dividiendo y evaluando cajas. La caja con la consistencia máxima se divide hasta alcanzar la precisión deseada. El retroceso es posible evitar quedarse atascado en un máximo local. Se ha demostrado que este enfoque es lo suficientemente rápido para el procesamiento en línea. Sin embargo, tenga en cuenta que cuando la trayectoria ya se ha calculado en pasos anteriores, la búsqueda debe realizarse solo en la trayectoria, lo que hace que las órdenes de magnitud más rápido. A continuación, describamos cómo se calcula la función de consistencia en detalle. Considere B, un cuadro tridimensional, nos gustaría calcular el valor de consistencia de. Primero consideramos solo la información TOA. Si un sensor tiene múltiples detecciones TOA, usamos el promedio de esos tiempos, por lo que un sensor suministra como máximo una estimación de TOA. Para cada TOA, podemos calcular el tiempo correspondiente de la toma, ya que se supone que el origen está en el cuadro B. Como es una caja y no un solo punto, esto nos da un intervalo para el tiempo de disparo. El número máximo de intervalos de tiempo superpuestos nos da el valor de la función de consistencia para B. Para obtener una descripción detallada de la función de consistencia y el algoritmo de búsqueda, consulte [8]. Aquí extendemos el enfoque de la siguiente manera. Modificamos la función de consistencia basada en los datos de rodamiento y rango de sensores individuales. Una estimación de rodamiento admite B si el segmento de línea que comienza desde el sensor con la dirección medida se cruza con la caja B. Un rango admite B, si la esfera con el radio del rango y el origen del sensor se cruza con B. En lugar de simplemente verificar si la posición especificada por los pares de rango de rodamiento correspondientes cae dentro de B, esto elimina el posible error de orientación de los sensores. El valor de la función de consistencia se incrementa por uno para cada estimación de rodamiento y rango que es consistente con B. 6.5 Estimación de calibre Las características de la señal de onda de choque han sido estudiadas antes por Whitham [20]. Mostró que el período de onda de choque T está relacionado con el diámetro del proyectil d, la longitud L, la distancia perpendicular de la falla B desde la trayectoria de la bala hasta el sensor, el número de Mach M y la velocidad del sonido c.T = 1.82Mb1/4 C (M2-1) 3/8 D L1/4 ≈ 1.82D C (MB L) 1/4 0 100 200 300 400 500 600 0 10 20 30 Distancia de Miss (M) Longitud de onda de choque (microsegundos).50 cal 5,56 mm 7,62 mm Figura 9: Longitud de la onda de choque y relación de fallas. Cada punto de datos representa un tablero de sensores después de una agregación de las mediciones individuales de los cuatro canales acústicos. Se han probado tres proyectiles de calibre diferentes (196 disparos, 10 sensores). Para ilustrar la relación entre la distancia de la falla y la longitud de la onda de choque, aquí usamos las 196 disparos con tres proyectiles de calibre diferentes disparados durante la evaluación.(Durante la evaluación utilizamos datos obtenidos previamente utilizando algunas tomas de práctica por arma). 10 sensores (4 micrófonos por sensor) midieron la longitud de la onda de choque. Para cada sensor, consideramos válida la estimación de longitud de la onda de choque si al menos tres de cuatro micrófonos acordaron un valor con la mayoría de la varianza de 5 microsegundos. Este filtrado conduce a una tasa de informe del 86% por sensor y elimina los errores de medición grandes. Los datos experimentales se muestran en la Figura 9. La fórmula de Whithams sugiere que la longitud de la onda de choque para un calibre dado puede aproximarse con una función de potencia de la distancia de fallas (con un exponente 1/4). Las mejores funciones de ajuste en nuestros datos son: .50 Cal: t = 237.75b0.2059 7.62 mm: t = 178.11b0.1996 5.56 mm: t = 144.39b0.1757 Para evaluar un disparo, tomamos el calibre cuya función de aproximación resulta enEl error RMS más pequeño de las lecturas del sensor filtrado. Este método tiene menos del 1% de error de estimación de calibre cuando hay una estimación de trayectoria precisa disponible. En otras palabras, la estimación del calibre solo funciona si el sistema realiza suficientes detecciones de ondas de choque para calcular una trayectoria.120 6.6 Estimación de armas Analizamos todas las características de señal medidas para encontrar información específica de arma. Desafortunadamente, concluimos que la firma de explosión de hocico observada no es lo suficientemente característica del arma para fines de clasificación. Los reflejos de la explosión de hocico de alta energía del medio ambiente tienen un impacto mucho mayor en la forma de la señal de la explosión del hocico que el arma misma. Disparar la misma arma de diferentes lugares causó mayores diferencias en la señal grabada que disparar diferentes armas del mismo lugar.0 100 200 300 400 500 600 700 800 900 0 100 200 200 300 400 Rango (m) Velocidad (m/s) AK-47 M240 Figura 10: mediciones de desaceleración de balas AK47 y M240. Ambas armas tienen el mismo calibre. Los datos se aproximan utilizando una regresión lineal simple.0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 Rango (M) Velocidad (M/S) M16 M249 M4 Figura 11: M16, M249 y M4 Mediciones de desaceleración de bala. Todas las armas tienen el mismo calibre. Los datos se aproximan utilizando una regresión lineal simple. Sin embargo, la velocidad medida del proyectil y su calibre mostraron una buena correlación con el tipo de arma. Esto se debe a que para un tipo de arma dada y un par de municiones, la velocidad del hocico es casi constante. En las Figuras 10 y 11 podemos ver la relación entre el rango y la velocidad de bala medida para diferentes calibres y armas. En el rango de velocidad supersónico, la desaceleración de la bala se puede aproximar con una función lineal. En el caso del calibre de 7.62 mm, las dos armas probadas (AK47, M240) pueden separarse claramente (Figura 10). Desafortunadamente, esto no es necesariamente cierto para el calibre de 5.56 mm. El M16 con su mayor velocidad del hocico aún puede estar bien clasificada, pero las armas M4 y M249 parecen prácticamente indistinguibles (Figura 11). Sin embargo, esto puede deberse en parte al número limitado de tomas de práctica que pudimos tomar antes de que comenzara las pruebas reales. Más datos de entrenamiento pueden revelar una mejor separación entre las dos armas ya que sus velocidades publicadas de hocico difieren un poco. El sistema lleva a cabo la clasificación de armas de la siguiente manera. Una vez que se conoce la trayectoria, la velocidad se puede calcular para cada sensor en función de la geometría de ondas de choque. Para evaluar un disparo, elegimos el tipo de arma cuya función de desaceleración da como resultado el error RMS más pequeño de los pares de rango de rango estimados para la clase de calibre estimada.7. Resultados Una evaluación independiente del sistema fue realizada por un equipo de NIST en el Centro de Pruebas de Aberdeen del Ejército de EE. UU. En abril de 2006 [19]. El experimento se configuró en un campo de tiro con edificios de madera y paredes simuladas para soportar posiciones elevadas de tiradores y generar efectos de múltiples matriz. La Figura 12 muestra la interfaz de usuario con una fotografía aérea del sitio.Se desplegaron 10 nodos sensores en puntos encuestados en un área de aproximadamente 30 × 30 m. Había cinco objetivos fijos detrás de la red de sensores. Se ubicaron varias posiciones de disparo en cada una de las líneas de disparo a 50, 100, 200 y 300 metros. Estas posiciones eran conocidas por los evaluadores, pero no los operadores del sistema. Se utilizaron seis armas diferentes: AK47 y M240 disparando proyectiles de 7,62 mm, M16, M4 y M249 con municiones de 5,56 mm y el calibre .50 M107. Tenga en cuenta que los sensores permanecieron estáticos durante la prueba. La razón principal de esto es que a nadie se le permite el rango descendente durante las pruebas de fuego vivo. La utilización de algún tipo de plataforma de control remoto habría estado demasiado involucrado para el tiempo limitado que el rango estaba disponible para la prueba. El experimento, por lo tanto, no probó el aspecto de movilidad del sistema. Durante la prueba de un día, hubo 196 disparos. Los resultados se resumen en la Tabla 1. El sistema detectó todos los disparos con éxito. Dado que una onda de choque balístico es un fenómeno acústico único, hace que la detección sea muy robusta. No había falsos positivos para las ondas de choque, pero había un puñado de falsas detecciones de explosión de hocico debido a pruebas paralelas de artillería en un rango cercano. Tirador Local-Calibre trayectoria Trajectoria Distancia No. Error de distancia de acumulación de acumulación de rango de (M) Error de error de tasa (DEG) (M) (M) disparos 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.7132.8 54 300 97% 97% 1.49 6.29 70.6 34 Todos 96% 99.5% 0.88 2.47 23.0 196 Tabla 1: Resumen de resultados Fusioning todas las observaciones de sensores disponibles. Todos los disparos se detectaron con éxito, por lo que se omite la tasa de detección. La tasa de localización significa el porcentaje de disparos que la fusión del sensor pudo estimar la trayectoria. La tasa de precisión del calibre es relativa a los disparos localizados y no todos los disparos porque la estimación del calibre requiere la trayectoria. El error de trayectoria se descompone al acimut en grados y la distancia real del tirador desde la trayectoria. El error de distancia muestra la distancia entre la posición real del tirador y la posición estimada del tirador. Como tal, incluye el error causado tanto por la trayectoria como por el de la estimación de rango. Tenga en cuenta que las medidas tradicionales de rodamiento y rango no son buenas para un sistema distribuido como el nuestro debido a la falta de un solo punto de referencia.121 Figura 12: la interfaz de usuario del sistema que muestra la configuración experimental. Los 10 nodos sensores están etiquetados por su identificación y marcados por círculos oscuros. Los objetivos son cuadrados negros marcados T-1 a T-5. Las largas flechas blancas apuntan a la posición del tirador estimada por cada sensor. Donde falta, el sensor correspondiente no tenía suficientes detecciones para medir el AOA de la explosión del hocico, la onda de choque o ambas. La gruesa línea negra y el círculo grande indican la trayectoria estimada y la posición del tirador como se estima fusionando todas las detecciones disponibles de la red. Este disparo desde la línea de 100 metros en Target T-3 fue localizado casi perfectamente por la red de sensores. El calibre y el arma también se identificaron correctamente.6 de cada 10 nodos pudieron estimar la ubicación solo. Su precisión de rodamiento está en un grado, mientras que el rango está en menos del 10% en el peor de los casos. La tasa de localización caracteriza la capacidad de los sistemas para estimar con éxito la trayectoria de los disparos. Dado que la estimación del calibre y la clasificación de armas se basan en la trayectoria, los disparos no localizados tampoco se clasifican. Hubo 7 disparos de 196 que no fueron localizados. La razón de los disparos perdidos es el problema de ambigüedad de trayectoria que ocurre cuando el proyectil pasa en un lado de todos los sensores. En este caso, dos trayectorias significativamente diferentes pueden generar el mismo conjunto de observaciones (ver [8] y también la Sección 6.3). En lugar de estimar cuál es más probable o mostrar ambas posibilidades, decidimos no proporcionar una trayectoria en absoluto. Es mejor no dar una respuesta que no sea una alarma de disparo que engañar al soldado. La precisión de localización se descompone a la precisión de la trayectoria y la precisión de la estimación del rango. El ángulo de la trayectoria estimada fue mejor que 1 grado, excepto el rango de 300 m. Dado que el rango no debe afectar la estimación de la trayectoria siempre que el proyectil pase sobre la red, sospechamos que la precisión de ángulo ligeramente peor durante 300 m se debe a los disparos apresurados que presenciamos que los soldados tomaron cerca del final del día. Esto también está indicado por otro punto de datos: la distancia de trayectoria estimada de los objetivos reales tiene un error promedio de 1,3 m para disparos de 300 m, 0,75 m para disparos de 200 m y 0,6 m para todos menos 300 m disparos. Como se solucionó la distancia entre los objetivos y la red de sensores, este número no debería mostrar una mejora de 2 × solo porque el tirador está más cerca. Dado que el ángulo de la trayectoria en sí no caracteriza el error general, puede haber una traducción al menos 1 también da la distancia del tirador de la trayectoria estimada. Estos indican un error que es aproximadamente 1-2% del rango. Para poner esto en perspectiva, una estimación de trayectoria para un disparo de 100 m probablemente pasará o muy cerca de la ventana en la que se encuentra el tirador. Nuevamente, creemos que los errores desproporcionalmente mayores a 300 m se deben a errores humanos en el objetivo. Como se obtuvo la verdad del suelo conociendo la ubicación precisa del tirador y el objetivo, cualquier inexactitud en la trayectoria real se suma directamente al error percibido del sistema. Llamamos a la estimación de la posición de los tiradores en la estimación del rango de trayectoria calculada debido a la falta de un mejor término. Las estimaciones de rango son mejores que el 5% precisas de 50 my 10% durante 100 m.Sin embargo, esto va al 20% o peor a distancias más largas. No teníamos una instalación para probar el sistema antes de la evaluación de rangos de más de 100 m.Durante la evaluación, nos encontramos con el problema de confundir los ecos de ondas de choque con explosiones de boca. Estos ecos alcanzaron los sensores antes de la explosión del hocico real solo para disparos de largo alcance, ya que el proyectil viaja 2-3 × más rápido que la velocidad del sonido, por lo que el tiempo entre la onda de choque (y su posible eco de los objetos cercanos) y la explosión del hocicoaumenta con el aumento de los rangos. Esto dio como resultado subestimar el rango, ya que el sistema midió tiempos más cortos que los reales. Desde la evaluación, fingimos el algoritmo de detección de la explosión del hocico para evitar este problema. Distancia M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 50% 50% 50% 50% 50% 50%% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Tabla 2: Resultados de clasificación de armas. Los porcentajes son relativos a la cantidad de disparos localizados y no todos los disparos, ya que el algoritmo de clasificación necesita conocer la trayectoria y el rango. Tenga en cuenta que la diferencia es pequeña;Hubo 189 disparos localizados en el total de 196. Las tasas de precisión de calibre y estimación de armas se basan en los 189 disparos que se localizaron con éxito. Tenga en cuenta que hubo una sola toma que fue clasificada falsamente por el estimador de calibre. La precisión general de clasificación de armas del 73% no parece impresionante. Pero si lo dividimos en las seis armas diferentes probadas, la imagen cambia drásticamente como se muestra en la Tabla 2. Para cuatro de las armas (AK14, M16, M240 y M107), la tasa de clasificación es de casi el 100%. Solo había dos disparos de aproximadamente 140 que se perdieron. El M4 y el M249 demostraron ser demasiado similares y se confundieron el uno al otro la mayor parte del tiempo. Una posible explicación es que solo teníamos un número limitado de tomas de prueba tomadas con estas armas justo antes de la evaluación y utilizamos la función de aproximación de desaceleración incorrecta. Se cometió este o un error similar, ya que si simplemente usáramos lo contrario de la respuesta de los sistemas donde se indicó una de estas armas, la precisión habría mejorado 3x. Si consideramos estas dos armas una clase de armas individuales, entonces la precisión de clasificación para ella se convierte en 93%. Tenga en cuenta que el AK47 y el M240 tienen el mismo calibre (7,62 mm), tal como lo hacen el M16, M4 y M249 (5,56 mm). Es decir, el sistema puede diferenciar entre armas del mismo calibre. No somos conscientes de ningún sistema que clasifique las armas esto con precisión.7.1 El rendimiento del sensor único como se mostró anteriormente, un solo sensor solo puede localizar el tirador si puede determinar tanto la explosión del hocico como la AOA de onda Shock, es decir, debe medir los TOA de ambos en al menos tres canales acústicos. Si bien la detección de ondas de choque es independiente del rango, a menos que el proyectil se vuelva subsónico, la probabilidad de detección de la explosión del hocico más allá de 150 metros no es suficiente para obtener al menos tres por nodo del sensor para la estimación de AOA. Por lo tanto, solo evaluamos el rendimiento del sensor único para los 104 disparos que se tomaron de 50 y 100 m.Tenga en cuenta que usamos los mismos datos de prueba que en la sección anterior, pero evaluamos individualmente para cada sensor. La Tabla 3 resume los resultados desglosados por los diez sensores utilizados. Dado que ahora no es un sistema distribuido, los resultados se dan en relación con la posición del sensor dado, es decir, se proporciona una estimación de rodamiento y rango. Tenga en cuenta que muchas de las fuentes de error comunes del sistema en red no juegan un papel aquí. La sincronización del tiempo no es aplicable. La ubicación absoluta de los sensores es irrelevante (al igual que la ubicación relativa de múltiples sensores). Sin embargo, la orientación de los sensores sigue siendo importante. Hay varias desventajas del caso de un solo sensor en comparación con el sistema en red: no hay redundancia para compensar otros errores y realizar un rechazo atípico, la tasa de localización es notablemente más baja y un solo sensor solo no puede estimar el calibre o el calibre oClasifica el arma. ID del sensor 1 2 3 5 7 8 9 10 11 12 Loc.tasa tasa 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% RODENCIO (DEG) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Rango (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Tabla3: Precisión de un solo sensor para 108 disparos de 50 y 100 metros. La tasa de localización se refiere al porcentaje de disparos que solo el sensor dado fue capaz de localizar. Los valores de rodamiento y rango son errores promedio. Caracterizan la precisión de la localización desde la perspectiva de los sensores dados. Los datos indican que el rendimiento de los sensores varió significativamente, especialmente teniendo en cuenta la tasa de localización. Un factor tiene que ser la ubicación del sensor dado que incluye cuán lejos estaba de las líneas de disparo y cuán obstruido era su vista. Además, los sensores eran prototipos construidos a mano que utilizaban en ningún lugar casi cerca de envasado/montaje de calidad de producción. A la luz de estos factores, el error de rodamiento promedio general de 0.9 grados y un error de rango de 5 m con un espacio de micrófono de menos de 10 cm son excelentes. Creemos que la fabricación profesional y mejores micrófonos podrían lograr fácilmente un mejor rendimiento que el mejor sensor de nuestro experimento (> 60% de tasa de localización y error de rango de 3 m). Curiosamente, el error más grande en el rango fue un gran 90 m claramente debido a una detección errónea, sin embargo, el error de rodamiento más grande fue inferior a 12 grados, lo que sigue siendo una buena indicación para el soldado donde mirar. La tasa de localización general sobre todos los sensores individuales fue del 42%, mientras que solo para disparos de 50 m, esto aumentó al 61%. Tenga en cuenta que el rango de disparo se preparó para simular un área urbana hasta cierto punto: había algunas estructuras de madera de una sola y dos pisos construidas tanto en el área de despliegue del sensor como en las líneas de disparo. Por lo tanto, no todos los sensores tenían línea de visión para todas las posiciones de disparo. Estimamos que el 10% de los sensores habían obstruido la vista al tirador en promedio. Por lo tanto, podemos afirmar que un sensor determinado tenía aproximadamente un 50% de posibilidades de localizar un disparo dentro de los 130 m.(Dado que el área de despliegue del sensor tenía 30 m de profundidad, los disparos de 100 m corresponden a distancias reales entre 100 y 130 m.) Nuevamente, enfatizamos que la localización necesita al menos tres explosiones de hocico y tres detecciones de onda de choque de un posible cuatro por cada sensor por sensor. La tasa de detección para sensores individuales que corresponden a al menos una detección de onda de choque por sensor fue prácticamente al 100%.0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 Número de sensores Porcentaje de disparos Figura 13: histograma que muestra qué fracción de los 104 disparos de50 y 100 metros fueron localizados por la mayoría de cuántos sensores individuales solos.El 13% de los disparos fueron perdidos por cada sensor, es decir, ninguno de ellos tenía detecciones de explosión de hocico y ondas de choque. Tenga en cuenta que casi todas estas tomas todavía estaban localizadas con precisión por el sistema en red, es decir, la fusión del sensor utilizando todas las observaciones disponibles en la red de sensores. Sería engañoso interpretar estos resultados como el sistema faltando la mitad de los disparos. Como los soldados nunca trabajan solos y el nodo del sensor es relativamente barato para permitirse tener cada soldado equipado con uno, también debemos observar las tasas de detección generales para cada disparo. La Figura 13 muestra el histograma del porcentaje de disparos frente al número de sensores individuales que lo localizaron.El 13% de los disparos no fueron localizados solo por ningún sensor, pero el 87% fue localizado por al menos un sensor de diez.7.2 Fuentes de error En esta sección, analizamos las fuentes de error más significativas que afectan el rendimiento del sistema de localización de tiradores en red y clasificación de armas. Para correlacionar las observaciones distribuidas de los eventos acústicos, los nodos deben tener una referencia de tiempo y espacio común. Por lo tanto, los errores en la sincronización del tiempo, la localización de nodos y la orientación del nodo degradan la precisión general del sistema.123 Nuestro enfoque de sincronización de tiempo produce errores significativamente menos de 100 microsegundos. A medida que el sonido viaja aproximadamente 3 cm en ese tiempo, los errores de sincronización del tiempo tienen un efecto insignificante en el sistema. Por otro lado, la ubicación y la orientación del nodo pueden tener un efecto directo en el rendimiento general del sistema. Observe que para analizar esto, no tenemos que recurrir a la simulación, en su lugar podemos utilizar los datos de prueba real recopilados en Aberdeen. Pero en lugar de usar las ubicaciones de los sensores reales conocidas con mucha precisión y las orientaciones de nodo casi perfectas medidas y calibradas, podemos agregarles términos de error y ejecutar la fusión del sensor. Esto replica exactamente cómo el sistema se habría desempeñado durante la prueba utilizando las ubicaciones y orientaciones imprecisamente conocidas. Otro aspecto del rendimiento del sistema que se puede evaluar de esta manera es el efecto del número de sensores disponibles. En lugar de usar los diez sensores en la fusión de datos, podemos elegir cualquier subconjunto de los nodos para ver cómo la precisión se degrada a medida que disminuimos el número de nodos. Se realizó el siguiente experimento. El número de sensores varió de 2 a 10 en incrementos de 2. Cada ejecución eligió los sensores al azar usando una distribución uniforme. En cada ejecución, cada nodo se movió aleatoriamente a una nueva ubicación dentro de un círculo alrededor de su posición verdadera con un radio determinado por una distribución gaussiana media media. Finalmente, las orientaciones del nodo se perturbaron utilizando una distribución gaussiana zeromea. Cada combinación de parámetros se generó 100 veces y se utilizó para las 196 disparos. Los resultados se resumen en la Figura 14. Hay un barchart 3D para cada uno de los conjuntos de experimentos con el número fijo de sensores. El eje X muestra el error de ubicación del nodo, es decir, la desviación estándar de la distribución gaussiana correspondiente que varió entre 0 y 6 metros. El eje Y muestra la desviación estándar del error de orientación del nodo que varió entre 0 y 6 grados. El eje z es el error de acomitación de trayectoria resultante. Tenga en cuenta que los ángulos de elevación mostraron errores algo más grandes que el acimut. Dado que todos los sensores estaban en aproximadamente un plano horizontal y solo unas pocas posiciones de tiradores estaban fuera del mismo plano y solo por 2 M más o menos, la prueba no fue suficiente para evaluar este aspecto del sistema. Hay muchas observaciones interesantes que uno puede hacer analizando estos gráficos. Los errores de ubicación del nodo en este rango tienen un pequeño efecto sobre la precisión. Los errores de orientación del nodo, por otro lado, degradan notablemente el rendimiento. Aún así, los errores más grandes en este experimento de 3.5 grados para 6 sensores y 5 grados para 2 sensores siguen siendo muy buenos. Tenga en cuenta que a medida que aumentan los errores de ubicación y orientación y el número de sensores disminuye, la métrica de rendimiento más significativamente afectada es la tasa de localización. Ver Tabla 4 para obtener un resumen. La localización exitosa disminuye de casi 100% a 50% cuando pasamos de 10 sensores a 2 incluso sin errores adicionales. Esto es causado principalmente por la geometría: para una localización exitosa, la bala debe pasar por encima de la red de sensores, es decir, al menos un sensor debería estar del lado de la trayectoria que no sea el resto de los nodos.(Esta es una simplificación para fines ilustrativos. Si todos los sensores y la trayectoria no son coplanares, la localización puede ser exitosa incluso si el proyectil pasa en un lado de la red. Ver Sección 6.3.) A medida que el número de sensores disminuyó en el experimento seleccionando aleatoriamente un subconjunto, la probabilidad de trayectorias que respetaron esta regla disminuyó. Esto también significa que incluso si hay 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 Azimutherror (grado) Error de posición (M) Error de orientación (grado) 2 sensores 0 2 4 6 0 2 4 6 0 1 23 4 5 6 Azimutherror (Grado) Error de posición (M) Error de orientación (Grado) 4 Sensores 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 Error de posición de posición de Azimutherror (Grado) (M) Error de orientación (Grado) 6Sensores 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 Azimutherror (Grado) Error de posición (M) Error de orientación (Grado) 8 Sensores Figura 14: El efecto de la localización de nodos y los errores de orientación en la precisión del acimut con 2, 4, 6 y 8 nodos. Tenga en cuenta que el gráfico para 10 nodos es casi idéntico para el caso de 8 nodos, por lo tanto, se omite.124 muchos sensores (es decir, soldados), pero todos ellos están justo uno al lado del otro, la tasa de localización sufrirá. Sin embargo, cuando la fusión del sensor proporciona un resultado, todavía es preciso incluso con pocos sensores disponibles y errores individuales relativamente grandes. Una observación muy consistente conduce a una buena precisión, ya que las inconsistentes son descartadas por el algoritmo. Esto también está respaldado por la observación de que para los casos con el mayor número de sensores (8 o 10), la tasa de localización apenas se ve afectada por incluso grandes errores. Errores/Sensores 2 4 6 8 10 0 M, 0 DEG 54% 87% 94% 95% 96% 2 M, 2 DEG 53% 80% 91% 96% 96% 6 M, 0 DEG 43% 79% 88% 94% 94% 0 m, 6 grados 44% 78% 90% 93% 94% 6 m, 6 DEG 41% 73% 85% 89% 92% Tabla 4: Tasa de localización en función del número de sensores utilizados, el sensor, el sensorUbicación del nodo y errores de orientación. Una de las observaciones más significativas en la Figura 14 y la Tabla 4 es que casi no hay diferencia en los datos para los sensores de 6, 8 y 10. Esto significa que hay poca ventaja de agregar más nodos más allá de 6 sensores en lo que respecta a la precisión. La velocidad del sonido depende de la temperatura ambiente. El prototipo actual lo considera constante que generalmente se establece antes de una prueba. Sería sencillo emplear un sensor de temperatura para actualizar el valor de la velocidad del sonido periódicamente durante la operación. Tenga en cuenta también que el viento puede afectar negativamente la precisión del sistema. Sin embargo, la fusión del sensor podría incorporar la velocidad del viento en sus cálculos. Sería más complicado que la compensación de temperatura, pero podría hacerse. También se deben observar otros problemas prácticos antes de un despliegue del mundo real. Los silenciadores reducen la energía de la explosión del hocico y, por lo tanto, el rango efectivo en el que el sistema puede detectarla. Sin embargo, los silenciadores no afectan la onda de choque y el sistema aún detectaría la trayectoria y el calibre con precisión. El rango y el tipo de arma no se pueden estimar sin detecciones de explosión de hocico. Las armas subsónicas no producen una onda de choque. Sin embargo, esto no es de gran importancia, ya que tienen un rango más corto, menor precisión y mucha menos letalidad. Por lo tanto, su uso no está generalizado y representan menos peligro en cualquier caso. Otro problema es el tipo de munición utilizada. Los ejércitos irregulares pueden usar balas de calidad inferior, incluso fabricada a mano. Esto afecta la velocidad del hocico del arma. Para que la clasificación de armas funcione con precisión, el sistema necesitaría ser calibrado con la munición típica utilizada por el adversario dado.8. Trabajo relacionado La detección acústica y el reconocimiento han estado bajo investigación desde principios de los años cincuenta. El área tiene una estrecha relevancia para el tema de la mecánica de flujo supersónico [20]. Fansler analizó las complejas ondas de presión de campo cercano que ocurren a un pie de la explosión del hocico. El trabajo de Fanslers ofrece una buena idea de la onda de presión de explosión de hocico ideal sin contaminación por ecos o efectos de propagación [4]. Stoughton realizó experimentos con mayores distancias desde el hocico [18]. Se realizaron las mediciones de las ondas de choque balísticas utilizando transductores de presión calibrados en ubicaciones conocidas, velocidades de bala medidas y distancias de fallas de 355 metros para proyectiles de 5,56 mm y 7,62 mm. Los resultados indican que la interacción en el suelo se convierte en un problema para las distancias de la falla de 30 metros o más. Otra área de investigación es el procesamiento de la señal de la acústica de disparos. La atención se centra en la detección robusta y la estimación de la longitud de las ondas de choque acústicas de pequeño calibre y las explosiones de hocico. Las posibles técnicas para clasificar las señales como ondas de choque o explosiones de hocico incluyen transformación de Fourier a corto plazo (STFT), la distribución Pseudo Wigner-Ville suave (SPWVD) y una transformación discreta de wavelet (DWT). Los espectrogramas de frecuencia de tiempo conjunta (JTF) se utilizan para analizar la separación típica de los transitorios de explosión de la onda de choque y la explosión del hocico tanto en el tiempo como en la frecuencia. Mays concluye que el DWT es el mejor método para clasificar las señales como ondas de choque o explosiones de boca porque funciona bien y es menos costoso de calcular que el SPWVD [10]. Los bordes de la onda de choque generalmente están bien definidas y la longitud de la onda de choque está directamente relacionada con las características de la bala. Un artículo de Sadler [14] compara dos métodos de detección de borde de ondas de choque: un detector simple basado en gradientes y un detector de wavelets a múltiples escala. También demuestra cómo se puede usar la longitud de la onda de choque, según lo determinado por los detectores de borde, junto con las ecuaciones de Whithams [20] para estimar el calibre de un proyectil. Tenga en cuenta que el rendimiento computacional disponible en los nodos del sensor, el ancho de banda inalámbrico limitado y los requisitos en tiempo real hacen que estos enfoques no sean factibles en nuestra plataforma. Un tema relacionado es la investigación y el desarrollo de sistemas de ubicación de tiradores experimentales y prototipos. Los investigadores de BBN han desarrollado el sistema Bullet Ears [3] que tiene la capacidad de ser instalado en una posición fija o usado por los soldados. El sistema fijo tiene matrices de micrófono en forma de tetraedro con espaciado de 1,5 metros. El sistema general consta de dos a tres de estas matrices espaciadas a 20 a 100 metros entre sí. El sistema desgastado por el soldado tiene 12 micrófonos, así como una antena GPS y sensores de orientación montados en un casco. Hay una conexión RF de baja velocidad desde el casco hasta el cuerpo de procesamiento. Se ha realizado una prueba extensa para medir el rendimiento de ambos tipos de sistemas. El rendimiento de los sistemas fijos fue un orden de magnitud mejor en los cálculos de ángulo, mientras que su rendimiento de rango se combinó. La precisión del ángulo del sistema fijo era dominantemente inferior de un grado, mientras que era de alrededor de cinco grados para el casco montado. La precisión de rango fue de alrededor del 5 por ciento para ambos sistemas. El problema con este y sistemas centralizados similares es la necesidad de que uno o el puñado de matrices de micrófonos estén en línea de visión del tirador. Una solución basada en redes de sensores tiene la ventaja de una detección ampliamente distribuida para una mejor cobertura, compensación de efectos múltiples y resolución de disparos simultáneos múltiples [8]. Esto es especialmente importante para la operación en áreas urbanas acústicamente reverberantes. Tenga en cuenta que el sistema actual montado en el vehículo BBNS llamado Boomerang, una versión modificada de Bullet Ears, se usa actualmente en Iraq [1]. La compañía Shotspotter se especializa en sistemas de aplicación de la ley que informan la ubicación del disparo a la policía en segundos. El objetivo del sistema es significativamente diferente al de los sistemas militares. ShotSpotter informa una precisión típica de 25 m que es más que suficiente para que la policía responda 125. También están fabricando sistemas de uso de soldados experimentales y montados en UAV para uso militar [16], pero no hay especificaciones o resultados de evaluación disponibles públicamente.9. Conclusiones La principal contribución de este trabajo es doble. Primero, el rendimiento del sistema en red distribuido general es excelente. Lo más notable es la precisión trayectoria de un grado, la tasa de estimación de calibre correcta de más del 90% y la tasa de clasificación de armas cercana al 100% para 4 de las 6 armas probadas. El sistema demostró ser muy robusto al aumentar la ubicación del nodo y los errores de orientación y disminuir el número de sensores disponibles hasta una pareja. El factor clave detrás de esto es la capacidad de los algoritmos de fusión del sensor para rechazar mediciones erróneas. También vale la pena mencionar que los resultados presentados aquí corresponden a la primera y única prueba del sistema más allá de 100 my con seis armas diferentes. Creemos que con las lecciones aprendidas en la prueba, un experimento de campo consecutivo podría haber mostrado resultados significativamente mejorados, especialmente en una estimación de rango más allá de 100 my la clasificación de armas para las dos armas restantes que se confundieron el uno en el otro la mayoría de las veces durante la prueba. En segundo lugar, el rendimiento del sistema cuando se usa en modo independiente, es decir, cuando los sensores individuales solo proporcionaron localización, también fue muy bueno. Si bien la tasa de localización general del 42% por sensor para disparos de hasta 130 m podría mejorarse, la precisión del rodamiento de menos de un grado y el error de rango promedio del 5% son notables utilizando los prototipos hechos a mano de los nodos de bajo costo. Tenga en cuenta que el 87% de los disparos se localizaron con éxito por al menos uno de los diez sensores utilizados en modo independiente. Creemos que la tecnología es lo suficientemente madura como para que una próxima revisión del sistema pueda ser comercial. Sin embargo, los aspectos importantes del sistema aún deberían trabajarse. Todavía no hemos abordado la gestión de energía. Un nodo actual se ejecuta en 4 baterías AA durante aproximadamente 12 horas de operación continua. Una versión desplegable del nodo del sensor necesitaría estar dormido durante la operación normal y solo despertar cuando ocurre un evento interesante. Un circuito de activación analógico podría resolver este problema, sin embargo, el sistema se perdería el primer disparo. En cambio, los canales acústicos necesitarían ser muestreados y almacenados en un búfer circular. El resto del tablero podría ser apagado. Cuando un desencadenante despierta el tablero, los datos acústicos estarían disponibles de inmediato. Los experimentos con una placa sensor de generación anterior indicaron que esto podría proporcionar un aumento de 10x en la duración de la batería. Otros problemas sobresalientes incluyen el empaque y la resistencia a la intemperie, así como la integración con la infraestructura militar actual.10. Referencias [1] Sitio web de BBN Technologies.http://www.bbn.com.[2] E. Danicki. Localización de francotirador acústico. Archives of Acoustics, 30 (2): 233-245, 2005. [3] G. L. Duckworth et al. Sistemas acústicos acústicos fijos y portátiles para la aplicación de la ley. En E. M. Carapezza y D. B. Ley, editores, Proc. SPIE VOL.3577, p.210-230, páginas 210-230, enero de 1999. [4] K. Fansler. Descripción de la explosión de hocico por modelos de escala modificados. Shock and Vibration, 5 (1): 1-12, 1998. [5] D. Gay, P. Levis, R. Von Behren, M. Welsh, E. Brewer y D. Culler. El lenguaje NESC: un enfoque holístico para los sistemas integrados en red. Actas del diseño e implementación del lenguaje de programación (PLDI), junio de 2003. [6] J. Hill, R. Szewczyk, A. Woo, S. Hollar, D. Culler y K. Pister. Instrucciones de arquitectura del sistema para sensores en red.en Proc.de Asplos 2000, noviembre de 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, yL. Meertens. Localización independiente de densidad de nodo. Procesamiento de información en redes de sensores (IPSN 06) Spots Track, abril de 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti y G. Simon. Sistema de contrarrestación para la guerra urbana. Transacciones ACM en redes de sensores, 1 (1): 153-177, noviembre de 2005. [9] M. Mar´oti. Marco dirigido de ruta de inundación para redes de sensores inalámbricos. En Actas de la 5ta Conferencia Internacional ACM/IFIP/Usenix sobre Middleware, páginas 99-114, Nueva York, NY, EE. UU., 2004. Springer-Verlag New York, Inc. [10] B. Mays. Clasificación de la explosión de la ola de choque y la explosión de la boca a través de la frecuencia de tiempo articular y el análisis de wavelet. Informe técnico, Laboratorio de Investigación del Ejército Adelphi MD 20783-1197, septiembre de 2001. [11] Plataformas de hardware Tinyos.http://tinyos.net/scoop/special/hardware.[12] Módulo de radio de Bebow Micaz (MPR2400).http://www.xbow.com/products/productsdetails.ASPX? Sid = 101.[13] Recursos de usuario de Picoblaze.http://www.xilinx.com/ipcentes/processor_ central/picoblaze/picoblaze_user_resources.htm.[14] B. M. Sadler, T. Pham y L. C. Sadler. Detección y estimación de la onda de choque óptima y basada en wavelet. Acoustical Society of America Journal, 104: 955-963, agosto de 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi y P. Dutta. Sobre la escalabilidad de la sincronización de tiempo integrada en el enrutamiento.Taller Europeo del 3º Europa sobre redes de sensores inalámbricos (EWSN 2006), febrero de 2006. [16] Sitio web de Shotspotter.http: //www.shotspotter.com/products/military.html.[17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai y K. Frampton. Sistema de contador de sensores basado en red. En Sensys 04: Actas de la 2da Conferencia Internacional sobre Sistemas de Sensores Networked Incrustados, páginas 1-12, Nueva York, NY, EE. UU., 2004. ACM Press.[18] R. Stoughton. Medidas de ondas de choque balístico de pequeño calibre en el aire. Acoustical Society of America Journal, 102: 781-787, agosto de 1997. [19] B. A. Weiss, C. Schlenoff, M. Shneier y A. Virts. Evaluaciones tecnológicas y métricas de rendimiento para sensores usados por soldados para asistencia. En Taller de Métricas de rendimiento para Sistemas Inteligentes, agosto de 2006. [20] G. Whitham. Patrón de flujo de un proyectil supersónico. Comunicaciones sobre matemáticas puras y aplicadas, 5 (3): 301, 1952. 126",
    "original_sentences": [
        "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
        "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
        "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
        "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
        "The system estimates the trajectory, the range, the caliber and the weapon type.",
        "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
        "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
        "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
        "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
        "In October 2006 CNN reported on a new tactic employed by insurgents.",
        "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
        "By the time the soldiers can react, they are gone.",
        "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
        "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
        "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
        "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
        "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
        "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
        "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
        "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
        "The obvious disadvantage of such a system is its static nature.",
        "Once the sensors are distributed, they cover a certain area.",
        "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
        "It is not practical to gather and reuse the sensors, especially under combat conditions.",
        "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
        "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
        "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
        "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
        "The sensor positions and orientation need to be constantly monitored.",
        "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
        "Moreover, the system should be useful to even a single soldier.",
        "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
        "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
        "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
        "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
        "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
        "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
        "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
        "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
        "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
        "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
        "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
        "It is typically a few hundred μsec.",
        "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
        "Our system is based on four microphones connected to a sensorboard.",
        "The board detects shockwaves and muzzle blasts and measures their ToA.",
        "If at least three acoustic channels detect the same event, its AoA is also computed.",
        "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
        "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
        "Also, this method does not estimate a trajectory.",
        "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
        "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
        "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
        "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
        "A wired USB connection is also available.",
        "The sensorfusion algorithm and the user interface get their data through one of these channels.",
        "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
        "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
        "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
        "Refer to Section 7 for an analysis.",
        "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
        "However, we leave the integration of the two technologies for future work. 3.",
        "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
        "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
        "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
        "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
        "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
        "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
        "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
        "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
        "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
        "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
        "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
        "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
        "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
        "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
        "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
        "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
        "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
        "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
        "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
        "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
        "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
        "The first prototype of our system employed 10 sensor nodes.",
        "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
        "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
        "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
        "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
        "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
        "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
        "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
        "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
        "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
        "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
        "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
        "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
        "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
        "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
        "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
        "The results of the sensor fusion are displayed on the PDA screen with low latency.",
        "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
        "The border between software and hardware is considerably blurred on the sensor board.",
        "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
        "However, some of them-most notably the soft processor cores-execute true software programs.",
        "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
        "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
        "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
        "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
        "The same set of registers are also accessible through a UART link with a terminal emulation program.",
        "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
        "The most important results are the time stamps of the detected events.",
        "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
        "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
        "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
        "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
        "The maximum effective bandwidth is 100 Kbps through this interface.",
        "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
        "The control, status and data registers of the UART modules are available through the register file.",
        "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
        "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
        "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
        "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
        "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
        "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
        "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
        "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
        "The signal paths meet only just before the register file.",
        "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
        "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
        "The detectors fetch run-time parameter values from the register file and store their results there as well.",
        "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
        "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
        "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
        "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
        "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
        "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
        "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
        "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
        "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
        "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
        "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
        "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
        "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
        "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
        "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
        "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
        "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
        "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
        "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
        "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
        "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
        "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
        "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
        "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
        "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
        "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
        "Both events are transient by their nature and present very intense stimuli to the microphones.",
        "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
        "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
        "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
        "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
        "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
        "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
        "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
        "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
        "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
        "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
        "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
        "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
        "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
        "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
        "The shockwave detection core is continuously looking for two rising edges within a given interval.",
        "The state machine of the algorithm is shown in Figure 5(b).",
        "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
        "The only feature calculated by the core is the length of the observed shockwave signal.",
        "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
        "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
        "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
        "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
        "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
        "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
        "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
        "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
        "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
        "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
        "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
        "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
        "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
        "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
        "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
        "The algorithm consists of well separated computational tasks outlined below: 1.",
        "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
        "Compute range estimates.",
        "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
        "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
        "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
        "If trajectory available compute caliber (see 6.5). 6.",
        "If caliber available compute weapon type (see 6.6).",
        "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
        "Each sensorboard has four microphones that measure the ToA-s.",
        "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
        "Let us formalize the problem for 3 microphones first.",
        "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
        "First we apply a simple geometry validation step.",
        "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
        "If this condition does not hold, the corresponding detections are discarded.",
        "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
        "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
        "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
        "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
        "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
        "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
        "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
        "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
        "Consider the situation in Figure 7.",
        "A shot was fired from P at time t. Both P and t are unknown.",
        "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
        "The muzzle blast detection is at position P1 with time t1 and AoA u.",
        "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
        "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
        "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
        "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
        "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
        "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
        "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
        "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
        "In this case: t = uvt1−t2 uv−1 .",
        "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
        "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
        "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
        "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
        "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
        "However, it can still be used with a proper deceleration correction function.",
        "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
        "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
        "In the special case when both directions are the same, the trajectory cannot be computed.",
        "In a real world application, the sensors are typically deployed on a plane approximately.",
        "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
        "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
        "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
        "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
        "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
        "Assume that we have N individual shockwave AoA measurements.",
        "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
        "This gives us at most N(N−1) 2 trajectories.",
        "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
        "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
        "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
        "The core set can be found in O(N2 ) time.",
        "The trajectories in the core set are then averaged to get the final trajectory.",
        "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
        "It means all sensors are on the same side of the trajectory.",
        "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
        "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
        "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
        "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
        "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
        "For an example, refer to Figure 8.",
        "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
        "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
        "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
        "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
        "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
        "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
        "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
        "The box with the maximum consistency is divided until the desired precision is reached.",
        "Backtracking is possible to avoid getting stuck in a local maximum.",
        "This approach has been shown to be fast enough for online processing.",
        "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
        "Next let us describe how the consistency function is calculated in detail.",
        "Consider B, a three dimensional box, we would like to compute the consistency value of.",
        "First we consider only the ToA information.",
        "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
        "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
        "Since it is a box and not a single point, this gives us an interval for the shot time.",
        "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
        "For a detailed description of the consistency function and search algorithm, refer to [8].",
        "Here we extend the approach the following way.",
        "We modify the consistency function based on the bearing and range data from individual sensors.",
        "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
        "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
        "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
        "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
        "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
        "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
        "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
        "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
        "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
        "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
        "The experimental data is shown in Figure 9.",
        "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
        "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
        "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
        "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
        "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
        "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
        "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
        "Both weapons have the same caliber.",
        "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
        "All weapons have the same caliber.",
        "Data is approximated using simple linear regression.",
        "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
        "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
        "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
        "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
        "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
        "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
        "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
        "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
        "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
        "The system carries out weapon classification in the following manner.",
        "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
        "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
        "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
        "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
        "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
        "There were five fixed targets behind the sensor network.",
        "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
        "These positions were known to the evaluators, but not to the operators of the system.",
        "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
        "Note that the sensors remained static during the test.",
        "The primary reason for this is that nobody is allowed downrange during live fire tests.",
        "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
        "The experiment, therefore, did not test the mobility aspect of the system.",
        "During the one day test, there were 196 shots fired.",
        "The results are summarized in Table 1.",
        "The system detected all shots successfully.",
        "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
        "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
        "Shooter Local- Caliber Trajectory Trajectory Distance No.",
        "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
        "All shots were successfully detected, so the detection rate is omitted.",
        "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
        "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
        "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
        "The distance error shows the distance between the real shooter position and the estimated shooter position.",
        "As such, it includes the error caused by both the trajectory and that of the range estimation.",
        "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
        "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
        "The targets are black squares marked T-1 through T-5.",
        "The long white arrows point to the shooter position estimated by each sensor.",
        "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
        "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
        "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
        "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
        "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
        "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
        "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
        "There were 7 shots out of 196 that were not localized.",
        "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
        "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
        "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
        "It is better not to give an answer other than a shot alarm than misleading the soldier.",
        "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
        "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
        "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
        "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
        "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
        "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
        "These indicate an error which is about 1-2% of the range.",
        "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
        "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
        "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
        "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
        "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
        "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
        "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
        "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
        "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
        "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
        "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
        "Note that the difference is small; there were 189 shots localized out of the total 196.",
        "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
        "Note that there was a single shot that was falsely classified by the caliber estimator.",
        "The 73% overall weapon classification accuracy does not seem impressive.",
        "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
        "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
        "There were only two shots out of approximately 140 that were missed.",
        "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
        "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
        "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
        "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
        "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
        "That is, the system is able to differentiate between weapons of the same caliber.",
        "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
        "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
        "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
        "Table 3 summarizes the results broken down by the ten sensors utilized.",
        "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
        "Note that many of the common error sources of the networked system do not play a role here.",
        "Time synchronization is not applicable.",
        "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
        "The sensors orientation is still important though.",
        "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
        "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
        "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
        "The bearing and range values are average errors.",
        "They characterize the accuracy of localization from the given sensors perspective.",
        "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
        "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
        "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
        "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
        "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
        "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
        "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
        "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
        "Hence, not all sensors had line-of-sight to all shooting positions.",
        "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
        "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
        "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
        "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
        "It would be misleading to interpret these results as the system missing half the shots.",
        "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
        "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
        "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
        "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
        "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
        "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
        "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
        "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
        "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
        "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
        "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
        "The following experiment was carried out.",
        "The number of sensors were varied from 2 to 10 in increments of 2.",
        "Each run picked the sensors randomly using a uniform distribution.",
        "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
        "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
        "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
        "The results are summarized in Figure 14.",
        "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
        "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
        "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
        "The z-axis is the resulting trajectory azimuth error.",
        "Note that the elevation angles showed somewhat larger errors than the azimuth.",
        "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
        "There are many interesting observation one can make by analyzing these charts.",
        "Node location errors in this range have a small effect on accuracy.",
        "Node orientation errors, on the other hand, noticeably degrade the performance.",
        "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
        "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
        "See Table 4 for a summary.",
        "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
        "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
        "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
        "See Section 6.3.)",
        "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
        "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
        "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
        "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
        "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
        "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
        "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
        "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
        "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
        "The speed of sound depends on the ambient temperature.",
        "The current prototype considers it constant that is typically set before a test.",
        "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
        "Note also that wind may adversely affect the accuracy of the system.",
        "The sensor fusion, however, could incorporate wind speed into its calculations.",
        "It would be more complicated than temperature compensation, but could be done.",
        "Other practical issues also need to be looked at before a real world deployment.",
        "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
        "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
        "The range and weapon type could not be estimated without muzzle blast detections.",
        "Subsonic weapons do not produce a shockwave.",
        "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
        "Hence, their use is not widespread and they pose less danger in any case.",
        "Another issue is the type of ammunition used.",
        "Irregular armies may use substandard, even hand manufactured bullets.",
        "This effects the muzzle velocity of the weapon.",
        "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
        "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
        "The area has a close relevance to the topic of supersonic flow mechanics [20].",
        "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
        "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
        "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
        "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
        "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
        "Another area of research is the signal processing of gunfire acoustics.",
        "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
        "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
        "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
        "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
        "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
        "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
        "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
        "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
        "A related topic is the research and development of experimental and prototype shooter location systems.",
        "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
        "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
        "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
        "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
        "There is a low speed RF connection from the helmet to the processing body.",
        "An extensive test has been conducted to measure the performance of both type of systems.",
        "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
        "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
        "The range accuracy was around 5 percent for both of the systems.",
        "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
        "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
        "This is especially important for operation in acoustically reverberant urban areas.",
        "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
        "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
        "The goal of the system is significantly different than that of military systems.",
        "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
        "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
        "CONCLUSIONS The main contribution of this work is twofold.",
        "First, the performance of the overall distributed networked system is excellent.",
        "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
        "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
        "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
        "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
        "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
        "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
        "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
        "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
        "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
        "However, important aspects of the system would still need to be worked on.",
        "We have not addresses power management yet.",
        "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
        "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
        "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
        "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
        "The rest of the board could be turned off.",
        "When a trigger wakes up the board, the acoustic data would be immediately available.",
        "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
        "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
        "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
        "Acoustic sniper localization.",
        "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
        "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
        "In E. M. Carapezza and D. B.",
        "Law, editors, Proc.",
        "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
        "Description of muzzle blast by modified scaling models.",
        "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
        "The nesC language: a holistic approach to networked embedded systems.",
        "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
        "Woo, S. Hollar, D. Culler, and K. Pister.",
        "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
        "Node-density independent localization.",
        "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
        "Countersniper system for urban warfare.",
        "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
        "Directed flood-routing framework for wireless sensor networks.",
        "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
        "Springer-Verlag New York, Inc. [10] B. Mays.",
        "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
        "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
        "Optimal and wavelet-based shock wave detection and estimation.",
        "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
        "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
        "Sensor network-based countersniper system.",
        "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
        "ACM Press. [18] R. Stoughton.",
        "Measurements of small-caliber ballistic shock waves in air.",
        "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
        "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
        "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
        "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
        "Flow pattern of a supersonic projectile.",
        "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
    ],
    "error_count": 0,
    "keys": {
        "wireless sensor network-based mobile countersniper system": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a <br>wireless sensor network-based mobile countersniper system</br>.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Localización de tiradores y clasificación de armas con sensores en red que usan soldados Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, EE. UU.Presenta un \"sistema de anticipación móvil basado en redes de sensores inalámbricos\"."
            ],
            "translated_text": "",
            "candidates": [
                "Sistema de contador móvil basado en la red de sensores inalámbricos basado en la red",
                "sistema de anticipación móvil basado en redes de sensores inalámbricos"
            ],
            "error": []
        },
        "helmetmounted microphone array": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a <br>helmetmounted microphone array</br>, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Un nodo del sensor consiste en una \"matriz de micrófono de casco\", un cots Micaz Mote para la comunicación de internodo y un tablero de sensor personalizado que implementa la detección acústica y el tiempo de llegada (TOA) algoritmos de estimación en un FPGA."
            ],
            "translated_text": "",
            "candidates": [
                "matriz de micrófonos con casco",
                "matriz de micrófono de casco"
            ],
            "error": []
        },
        "internode communication": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for <br>internode communication</br> and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc <br>internode communication</br>, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Un nodo del sensor consiste en una matriz de micrófono montada en el casco, un cots Micaz Mote para \"comunicación de internodo\" y un tablero de sensor personalizado que implementa la detección acústica y el tiempo de llegada (TOA) algoritmos de estimación en un FPGA.",
                "La \"Comunicación de Internode\" ad-hoc, la sincronización del tiempo y el intercambio de datos son las responsabilidades de un módulo de radio basado en microcontroladores."
            ],
            "translated_text": "",
            "candidates": [
                "comunicación entre internodos",
                "comunicación de internodo",
                "comunicación entre internodos",
                "Comunicación de Internode"
            ],
            "error": []
        },
        "sensorboard": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom <br>sensorboard</br> that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a <br>sensorboard</br>.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The <br>sensorboard</br> is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic <br>sensorboard</br>/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation <br>sensorboard</br> features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation <br>sensorboard</br> is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main <br>sensorboard</br> with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the <br>sensorboard</br>. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The <br>sensorboard</br> also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the <br>sensorboard</br> and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the <br>sensorboard</br> through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the <br>sensorboard</br> which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the <br>sensorboard</br>.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the <br>sensorboard</br> and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the <br>sensorboard</br> time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each <br>sensorboard</br>.",
                "Each <br>sensorboard</br> has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one <br>sensorboard</br> after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Un nodo del sensor consiste en una matriz de micrófono montada en el casco, un cots Micaz Mote para la comunicación del internodo y un \"tablero de sensores\" personalizado que implementa la detección acústica y el tiempo de llegada (TOA) algoritmos de estimación en un FPGA.",
                "Nuestro sistema se basa en cuatro micrófonos conectados a un \"tablero de sensores\".",
                "El \"Sensorboard\" también es Bluetooth para la comunicación con la computadora PDA o la computadora portátil de los soldados.",
                "Sin embargo, la precisión de GPS es de unos pocos metros degradando la Figura 1: ensamblaje acústico de \"placa sensorial\"/mote.precisión general del sistema.",
                "El \"Sensorboard\" de última generación presenta una radio de Texas Instruments CC-1000 que permite el enfoque de autoalocalización interferométrica de radio de alta precisión que hemos desarrollado por separado [7].",
                "Nuestro \"Sensorboard\" de tercera generación está diseñado para usarse con Micaz Motes, de hecho, tiene casi el mismo tamaño que el Mote en sí (ver Figura 1).",
                "Estos canales, con un micrófono electret (Panasonic WM64PNT), amplificadores con ganancia controlable (30-60 dB) y un ADC serie de 12 bits (dispositivos analógicos AD7476), residen en pequeños tableros separados que están conectados al \"tablero de sensor\" principal concables de cinta.",
                "La interfaz MOTE consiste en un bus I2 C junto con una línea de interrupción y GPIO (la última se usa 114 Figura 2: Diagrama de bloques del \"tablero de sensores\". Para una sincronización precisa de tiempo entre la placa y la mota).",
                "El \"Sensorboard\" también admite transferencias USB a toda velocidad (con dongles USB personalizados) para cargar muestras de audio grabadas a la PC.",
                "Debido a los complejos requisitos de voltaje del FPGA, los circuitos de fuente de alimentación se implementan en el \"Sensorboard\" y proporciona energía tanto localmente como a la mota.",
                "El módulo de fusión del sensor recibe y desempaqueta las mediciones sin procesar (sellos de tiempo y vectores de características) desde la \"placa de sensores\" a través del enlace Bluetooth.",
                "Tenga en cuenta que las mediciones de otros nodos junto con su información de ubicación e orientación también llegan desde el \"tablero de sensores\" que actúa como una puerta de enlace entre el PDA y la red de sensores.",
                "El dispositivo portátil obtiene sus propios datos de ubicación GPS y Di115 recibe información de orientación a través de la \"placa de sensores\".",
                "Por lo tanto, integra efectivamente los bloques de construcción dentro del \"Sensorboard\" y desacopla las diversas interfaces de comunicación.",
                "Tenga en cuenta que las motas también necesitan convertir las marcas de tiempo \"sensor\" en tiempo de mote como se describe anteriormente.",
                "Describimos cada paso en las siguientes secciones en detalle.6.1 Dirección de la llegada El primer paso de la fusión del sensor es calcular la explosión del hocico y la AOA-S de onda de choque para cada \"placa de sensor\".",
                "Cada \"tablero de sensores\" tiene cuatro micrófonos que miden el TOA-S.",
                "Cada punto de datos representa un \"tablero de sensores\" después de una agregación de las mediciones individuales de los cuatro canales acústicos."
            ],
            "translated_text": "",
            "candidates": [
                "placa de sensor",
                "tablero de sensores",
                "placa de sensor",
                "tablero de sensores",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "placa sensorial",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "tablero de sensor",
                "placa de sensor",
                "tablero de sensores",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "placa de sensores",
                "placa de sensor",
                "tablero de sensores",
                "placa de sensor",
                "placa de sensores",
                "placa de sensor",
                "Sensorboard",
                "placa de sensor",
                "sensor",
                "placa de sensor",
                "placa de sensor",
                "placa de sensor",
                "tablero de sensores",
                "placa de sensor",
                "tablero de sensores"
            ],
            "error": []
        },
        "self orientation": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides <br>self orientation</br> and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Una brújula de 3 ejes proporciona \"autorrientación\" y Bluetooth se utiliza para la comunicación con los soldados PDA que ejecuta la fusión de datos y la interfaz de usuario."
            ],
            "translated_text": "",
            "candidates": [
                "orientación",
                "autorrientación"
            ],
            "error": []
        },
        "trajectory": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the <br>trajectory</br>, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree <br>trajectory</br> precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the <br>trajectory</br>, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the <br>trajectory</br> and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a <br>trajectory</br> estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a <br>trajectory</br>.",
                "In fact, an infinite number of <br>trajectory</br>-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the <br>trajectory</br>, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet <br>trajectory</br>, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single <br>trajectory</br> from all shockwave measurements (see 6.3). 4.",
                "If <br>trajectory</br> available compute range (see 6.4). else compute shooter position first and then <br>trajectory</br> based on it. (see 6.4) 5.",
                "If <br>trajectory</br> available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet <br>trajectory</br> Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 <br>trajectory</br> estimation Danicki showed that the bullet <br>trajectory</br> and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the <br>trajectory</br> cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the <br>trajectory</br> measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several <br>trajectory</br> candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single <br>trajectory</br>.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the <br>trajectory</br> for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A <br>trajectory</br> is represented by one point pi and the normal vector vi (where i is the <br>trajectory</br> index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each <br>trajectory</br> a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final <br>trajectory</br>.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the <br>trajectory</br>.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the <br>trajectory</br> estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. <br>trajectory</br>, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet <br>trajectory</br> shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the <br>trajectory</br> has already been calculated in previous steps, the search needs to be done only on the <br>trajectory</br> making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet <br>trajectory</br> to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate <br>trajectory</br> estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a <br>trajectory</br>. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the <br>trajectory</br> is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber <br>trajectory</br> <br>trajectory</br> Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the <br>trajectory</br> of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the <br>trajectory</br>.",
                "The <br>trajectory</br> error is broken down to azimuth in degrees and the actual distance of the shooter from the <br>trajectory</br>.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the <br>trajectory</br> and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated <br>trajectory</br> and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the <br>trajectory</br> of shots.",
                "Since caliber estimation and weapon classification relies on the <br>trajectory</br>, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the <br>trajectory</br> ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a <br>trajectory</br> at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to <br>trajectory</br> accuracy and range estimation precision.",
                "The angle of the estimated <br>trajectory</br> was better than 1 degree except for the 300 m range.",
                "Since the range should not affect <br>trajectory</br> estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated <br>trajectory</br> distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the <br>trajectory</br> itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated <br>trajectory</br>.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a <br>trajectory</br> estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual <br>trajectory</br> directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated <br>trajectory</br> range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the <br>trajectory</br> and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting <br>trajectory</br> azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the <br>trajectory</br> other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the <br>trajectory</br> are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the <br>trajectory</br> and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the <br>trajectory</br> accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El sistema estima la \"trayectoria\", el rango, el calibre y el tipo de arma.",
                "El rendimiento del sistema se caracteriza por una precisión de \"trayectoria\" de 1 grado y una precisión de estimación de calibre del 95% para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas.",
                "Se paga especial énfasis a la técnica de fusión del sensor que estima la \"trayectoria\", el rango, el calibre y el tipo de arma simultáneamente.",
                "La longitud está determinada por el calibre y la distancia de los fallas, la distancia entre la \"trayectoria\" y el sensor.",
                "Una vez que está disponible una estimación de \"trayectoria\", la longitud de la onda de choque se puede usar para la estimación del calibre.",
                "Además, este método no estimula una \"trayectoria\".",
                "De hecho, un número infinito de pares de velocidad de \"trayectoria\" satisfacen las observaciones.",
                "Un algoritmo de fusión del sensor híbrido luego estima la \"trayectoria\", el rango, el calibre y el tipo de arma en función de todas las observaciones disponibles.",
                "Fusión del sensor El algoritmo de fusión del sensor recibe mensajes de detección de la red de sensores y estima la \"trayectoria\" de la bala, la posición del tirador, el calibre del proyectil y el tipo de arma.",
                "Calcule una sola \"trayectoria\" de todas las mediciones de onda de choque (ver 6.3).4.",
                "Si la \"trayectoria\" disponible en el rango de cómputo (ver 6.4).De lo contrario, calcule la posición del tirador primero y luego \"trayectoria\" en función de ella.(ver 6.4) 5.",
                "Si \"trayectoria\" disponible calibre calibre (ver 6.5).6.",
                "De lo contrario, ambas soluciones se consideran para su posterior procesamiento.6.2 Fusión de hocico U V 11, TP 22, TP TP, Bullet 2p '\"trayectoria\" Figura 7: plano de sección de un disparo (en P) y dos sensores (en P1 y en P2).",
                "Dejamos esto para el trabajo futuro.6.3 Estimación de \"trayectoria\" Danicki mostró que la bala \"trayectoria\" y la velocidad se pueden calcular analíticamente a partir de dos mediciones independientes de onda de choque donde se miden TOA y AOA [2].",
                "En el caso especial cuando ambas direcciones son las mismas, la \"trayectoria\" no se puede calcular.",
                "En este caso, todos los sensores ubicados en un lado de la \"trayectoria\" miden casi la misma AOA de onda de choque.",
                "Por lo tanto, generalmente tenemos varios candidatos de \"trayectoria\", es decir, uno para cada par AOA sobre el umbral.",
                "Aplicamos un método de filtrado y promedio atípico para fusionar la dirección de la onda de choque y la información de tiempo y presentamos una sola \"trayectoria\".",
                "Tomemos todos los pares posibles desordenados donde la diferencia de dirección está por encima del umbral mencionado y calcule la \"trayectoria\" para cada uno.",
                "Una \"trayectoria\" está representada por un punto PI y el vector normal VI (donde yo es el índice \"trayectoria\").",
                "Definimos la distancia de dos trayectorias como el producto DOT de sus vectores normales: d (i, j) = vivj para cada \"trayectoria\" Se define un conjunto vecino: n (i): = {j | d (i, j)<R} donde r es un parámetro RADIUS.",
                "Las trayectorias en el conjunto de núcleo se promedian para obtener la \"trayectoria\" final.",
                "Significa que todos los sensores están en el mismo lado de la \"trayectoria\".",
                "Hemos realizado experimentos para utilizar la longitud de onda de choque medida en la estimación de \"trayectoria\".",
                "Hay algunos resultados prometedores, pero necesita más investigación.6.4 Estimación de la posición del tirador El algoritmo de estimación de posición del tirador Agregue la siguiente información heterogénea generada por pasos computacionales anteriores: 1. \"trayectoria\", 2. Bloquea de hocico TOA en un sensor, 3. Bloque de hocico AOA en un sensor, que es efectivamente una estimación de rodamientoal tirador, y 4. Estimación de rango en un sensor (cuando están disponibles la onda de choque y la explosión de la boca y la aoa).",
                "Además, la combinación de dos explosiones de hocico diferentes y AOA-S de onda de choque puede dar lugar a dos rangos diferentes.119 11111 ,,,, RRVVT ′ ′ 22, VT 333 ,, VVT ′ 4T 5T 6T Bullet \"trayectoria\" Posición del tirador Figura 8: Ejemplo de datos de entrada heterogéneos para el algoritmo de estimación de la posición del tirador.",
                "Sin embargo, tenga en cuenta que cuando la \"trayectoria\" ya se ha calculado en pasos anteriores, la búsqueda debe realizarse solo en la \"trayectoria\", lo que hace que las órdenes de magnitud sean más rápidas.",
                "Mostró que el período de ondas de choque T está relacionado con el diámetro del proyectil d, la longitud L, la distancia perpendicular de la falla b desde la bala \"trayectoria\" al sensor, el número de Mach M y la velocidad del sonido c.T = 1.82Mb1/4 C (M2-1) 3/8 D L1/4 ≈ 1.82D C (MB L) 1/4 0 100 200 300 400 500 600 0 10 20 30 Distancia de Miss (M) Longitud de onda de choque (microsegundos).50 cal 5,56 mm 7,62 mm Figura 9: Longitud de la onda de choque y relación de fallas.",
                "Este método tiene menos del 1% de error de estimación de calibre cuando hay una estimación precisa de \"trayectoria\" disponible.",
                "En otras palabras, la estimación del calibre solo funciona si el sistema realiza suficientes detecciones de ondas de choque para calcular una \"trayectoria\".120 6.6 Estimación de armas Analizamos todas las características de señal medidas para encontrar información específica de arma.",
                "Una vez que se conoce la \"trayectoria\", la velocidad se puede calcular para cada sensor en función de la geometría de onda de choque.",
                "Shooter Local-calibre \"trayectoria\" \"trayectoria\" Distancia No.",
                "La tasa de localización significa el porcentaje de disparos que la fusión del sensor pudo estimar la \"trayectoria\" de.",
                "La tasa de precisión del calibre es relativa a los disparos localizados y no todos los disparos porque la estimación del calibre requiere la \"trayectoria\".",
                "El error de \"trayectoria\" se descompone al acimut en grados y la distancia real del tirador de la \"trayectoria\".",
                "Como tal, incluye el error causado tanto por la \"trayectoria\" como por el de la estimación de rango.",
                "La gruesa línea negra y el círculo grande indican la \"trayectoria\" estimada y la posición del tirador como se estima fusionando todas las detecciones disponibles de la red.",
                "La tasa de localización caracteriza la capacidad de los sistemas para estimar con éxito la \"trayectoria\" de los disparos.",
                "Dado que la estimación del calibre y la clasificación de armas se basan en la \"trayectoria\", los disparos no localizados tampoco se clasifican.",
                "La razón de los disparos perdidos es el problema de ambigüedad de \"trayectoria\" que ocurre cuando el proyectil pasa en un lado de todos los sensores.",
                "En lugar de estimar cuál es más probable o mostrar ambas posibilidades, decidimos no proporcionar una \"trayectoria\" en absoluto.",
                "La precisión de localización se descompone a la precisión de \"trayectoria\" y la precisión de la estimación de rango.",
                "El ángulo de la \"trayectoria\" estimada fue mejor que 1 grado, excepto el rango de 300 m.",
                "Dado que el rango no debe afectar la estimación de \"trayectoria\" mientras el proyectil pase sobre la red, sospechamos que la precisión de ángulo ligeramente peor para 300 m se debe a los disparos apresurados que presenciamos que los soldados tomaron cerca del final del día.",
                "Esto también está indicado por otro punto de datos: la distancia estimada de \"trayectoria\" de los objetivos reales tiene un error promedio de 1.3 m para disparos de 300 m, 0,75 m para disparos de 200 m y 0,6 m para todos menos 300 m disparos.",
                "Dado que el ángulo de la \"trayectoria\" en sí no caracteriza el error general, puede haber una traducción alsotable 1 también da la distancia del tirador de la \"trayectoria\" estimada.",
                "Para poner esto en perspectiva, una estimación de \"trayectoria\" para un disparo de 100 m probablemente pasará por la ventana al que se encuentra el tirador.",
                "Como se obtuvo la verdad del suelo conociendo la ubicación precisa del tirador y el objetivo, cualquier inexactitud en la \"trayectoria\" real se suma directamente al error percibido del sistema.",
                "Llamamos a la estimación de la posición de los tiradores en la estimación de rango de \"trayectoria\" calculada debido a la falta de un mejor término.",
                "Los porcentajes son relativos a la cantidad de disparos localizados y no todos los disparos, ya que el algoritmo de clasificación necesita conocer la \"trayectoria\" y el rango.",
                "El eje z es el error de acomectoria \"trayectoria\" resultante.",
                "Esto es causado principalmente por la geometría: para una localización exitosa, la bala debe pasar por encima de la red de sensores, es decir, al menos un sensor debería estar del lado de la \"trayectoria\" que no sea el resto de los nodos.(Esta es una simplificación para fines ilustrativos.",
                "Si todos los sensores y la \"trayectoria\" no son coplanares, la localización puede ser exitosa incluso si el proyectil pasa por un lado de la red.",
                "Sin embargo, los silenciadores no afectan la onda de choque y el sistema aún detectaría la \"trayectoria\" y el calibre con precisión.",
                "Lo más notable es la precisión de \"trayectoria\" de un grado, la tasa de estimación de calibre correcta de más del 90% y la tasa de clasificación de armas cercana al 100% para 4 de las 6 armas probadas."
            ],
            "translated_text": "",
            "candidates": [
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "Trayectoria",
                "trayectoria",
                "Trajectoria",
                "trayectoria",
                "trayectoria",
                "Trajectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "Trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria",
                "trayectoria"
            ],
            "error": []
        },
        "range": {
            "translated_key": "rango",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the <br>range</br>, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in <br>range</br> estimation for longer <br>range</br> shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, <br>range</br>, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the <br>range</br>, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic <br>range</br>) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz <br>range</br>) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute <br>range</br> estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute <br>range</br> (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the <br>range</br>.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller <br>range</br>, so the above formula underestimates the true <br>range</br>.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. <br>range</br> estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has <br>range</br> estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and <br>range</br> estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two <br>range</br> estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and <br>range</br> data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A <br>range</br> supports B, if the sphere with the radius of the <br>range</br> and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-<br>range</br> pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and <br>range</br> estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 <br>range</br> (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 <br>range</br> (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the <br>range</br> and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed <br>range</br>, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated <br>range</br>-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting <br>range</br> with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the <br>range</br> was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby <br>range</br>.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "<br>range</br> ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the <br>range</br> estimation.",
                "Note that the traditional bearing and <br>range</br> measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the <br>range</br> is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and <br>range</br> estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m <br>range</br>.",
                "Since the <br>range</br> should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the <br>range</br>.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory <br>range</br> estimation due to the lack of a better term.",
                "The <br>range</br> estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long <br>range</br> shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the <br>range</br>, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the <br>range</br>.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the <br>range</br>-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and <br>range</br> estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 <br>range</br> (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and <br>range</br> values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and <br>range</br> error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m <br>range</br> error).",
                "Interestingly, the largest error in <br>range</br> was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing <br>range</br> was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this <br>range</br> have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective <br>range</br> the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The <br>range</br> and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter <br>range</br>, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their <br>range</br> performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The <br>range</br> accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in <br>range</br> estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% <br>range</br> error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El sistema estima la trayectoria, el \"rango\", el calibre y el tipo de arma.",
                "PINPTR se caracteriza por una precisión de alta precisión: 1M precisión 3D promedio para tomas que se originan dentro o cerca de la red de sensores y precisión de 1 grado para el acimut y la elevación y la precisión del 10% en la estimación de \"rango\" para disparos de \"rango\" más largos.",
                "Se paga especial énfasis a la técnica de fusión del sensor que estima la trayectoria, el \"rango\", el calibre y el tipo de arma simultáneamente.",
                "Un algoritmo de fusión del sensor híbrido estima la trayectoria, el \"rango\", el calibre y el tipo de arma basado en todas las observaciones disponibles.",
                "Esta partición permite el uso de canales de audio realmente diferentes (por ejemplo: frecuencia de muestreo más lenta, ganancia diferente o \"rango\" dinámico) y también da como resultado mediciones menos ruidosas al evitar largas rutas de señal analógica.",
                "Además, el ángulo preciso de la estimación de llegada requiere una alta frecuencia de muestreo (en el \"rango de MHZ) y la detección de eventos precisa.",
                "Calcule las estimaciones de \"rango\".",
                "Si la trayectoria disponible calcule \"rango\" (ver 6.4).De lo contrario, calcule la posición del tirador primero y luego la trayectoria basada en ella.(ver 6.4) 5.",
                "Dado que U y V no se usan por separado, solo UV, la orientación absoluta del sensor puede ser arbitraria, todavía obtenemos t, lo que nos da el \"rango\".",
                "Una diferencia de tiempo menor da como resultado un \"rango\" más pequeño, por lo que la fórmula anterior subestima el verdadero \"rango\".",
                "Hay algunos resultados prometedores, pero necesita más investigación.6.4 Estimación de la posición del tirador El algoritmo de estimación de posición del tirador Agregue la siguiente información heterogénea generada por pasos computacionales anteriores: 1. Trayectoria, 2. Básica de hocico TOA en un sensor, 3. Bloquea de hocico AOA en un sensor, que es efectivamente una estimación de la vida a la estimación de laShooter, y 4. Estimación de \"rango\" en un sensor (cuando están disponibles la onda de choque y la explosión de la lámina y la explosión).",
                "Algunos sensores informan solo TOA, algunos también tienen estimación (s) de rodamientos y otros también tienen estimación (s) de \"rango\", dependiendo de la cantidad de detecciones exitosas de explosión y ondas de choque por parte del sensor.",
                "Tenga en cuenta que un sensor puede tener dos estimaciones diferentes de rodamiento y \"rango\".3 Las detecciones proporcionan dos posibles AOA-S para la explosión de hocico (es decir, rodamiento) y/o onda de choque.",
                "Todos los sensores tienen mediciones TOA (T1, T2, T3, T4, T5), un sensor tiene una estimación de rodamiento única (V2), un sensor tiene dos posibles rodamientos (V3, V3) y un sensor tiene dos rodamientos y dos \"Rango\"Estimaciones (V1, V1, R1, R1) En un entorno de múltiples atadios, estas detecciones no solo contendrán el ruido gaussiano, sino también posiblemente grandes errores debido a los ecos.",
                "Modificamos la función de consistencia basada en los datos de rodamiento y \"rango\" de sensores individuales.",
                "Un \"rango\" admite B, si la esfera con el radio del \"rango\" y el origen del sensor se cruza con B.",
                "En lugar de simplemente verificar si la posición especificada por los pares de \"rango\" correspondientes cae dentro de B, esto elimina el posible error de orientación de los sensores.",
                "El valor de la función de consistencia se incrementa en una estimación de cada cojinete y \"rango\" que es consistente con B. 6.5 Estimación de calibre Las características de la señal de onda de choque han sido estudiadas antes por Whitham [20].",
                "Disparar la misma arma de diferentes lugares causó mayores diferencias en la señal grabada que disparar diferentes armas del mismo lugar.0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 \"Rango\" (M) Velocidad (M/S) AK-47 M240 Figura 10: Mediciones de desaceleración de balas AK47 y M240.",
                "Los datos se aproximan utilizando una regresión lineal simple.0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 \"Rango\" (M) Velocidad (M/S) M16 M249 M4 Figura 11: M16, M249 y M4 Mediciones de desaceleración de la bala.",
                "En las Figuras 10 y 11 podemos ver la relación entre el \"rango\" y la velocidad de bala medida para diferentes calibres y armas.",
                "En el \"rango\" de la velocidad supersónica, la desaceleración de la bala se puede aproximar con una función lineal.",
                "Para evaluar un disparo, elegimos el tipo de arma cuya función de desaceleración da como resultado el error RMS más pequeño de los pares de velocidad \"rango\" estimados para la clase de calibre estimada.7.",
                "El experimento se configuró en un \"rango\" de disparos con edificios de madera y paredes simuladas para soportar posiciones elevadas de tiradores y generar efectos de matriz múltiple.",
                "La utilización de algún tipo de plataforma de control remoto habría estado demasiado involucrado para el tiempo limitado, el \"rango\" estaba disponible para la prueba.",
                "No había falsos positivos para las ondas de choque, pero había un puñado de falsas detecciones de explosión de hocico debido a pruebas paralelas de artillería en un \"rango\" cercano.",
                "Error de distancia de acumulación de acumulación de \"rango\" de (M) Error de error de tasa de tasa (DEG) Error (M) (M) disparos 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100%0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 Todos 96% 99.5% 0.88 2.47 23.0 196 Tabla 1: Resumen de resultados que fusionan todas las observaciones de sensores disponibles.",
                "Como tal, incluye el error causado tanto por la trayectoria como por el de la estimación de \"rango\".",
                "Tenga en cuenta que las medidas tradicionales de rodamiento y \"rango\" no son buenas para un sistema distribuido como el nuestro debido a la falta de un solo punto de referencia.121 Figura 12: la interfaz de usuario del sistema que muestra la configuración experimental.",
                "Su precisión de soporte está en un grado, mientras que el \"rango\" está apagado en menos del 10% en el peor de los casos.",
                "La precisión de localización se descompone a la precisión de la trayectoria y la precisión de estimación de \"rango\".",
                "El ángulo de la trayectoria estimada fue mejor que 1 grado, excepto el \"rango\" de 300 m.",
                "Dado que el \"rango\" no debería afectar la estimación de la trayectoria siempre que el proyectil pase sobre la red, sospechamos que la precisión de ángulo ligeramente peor para 300 m se debe a los disparos apresurados que presenciamos que los soldados tomaron cerca del final del día.",
                "Estos indican un error que es aproximadamente 1-2% del \"rango\".",
                "Llamamos a la estimación de la posición de los tiradores en la estimación de \"rango\" de trayectoria calculada debido a la falta de un mejor término.",
                "Las estimaciones de \"rango\" son mejores que un 5% precisas de 50 my 10% durante 100 m.Sin embargo, esto va al 20% o peor a distancias más largas.",
                "Estos ecos alcanzaron los sensores antes de la explosión de hocico real solo para disparos de \"rango\", ya que el proyectil viaja 2-3 × más rápido que la velocidad del sonido, por lo que el tiempo entre la onda de choque (y su posible eco de los objetos cercanos) y elLa explosión del hocico aumenta con el aumento de los rangos.",
                "Esto dio como resultado subestimar el \"rango\", ya que el sistema midió tiempos más cortos que los reales.",
                "Los porcentajes son relativos a la cantidad de disparos localizados y no todos los disparos, ya que el algoritmo de clasificación necesita conocer la trayectoria y el \"rango\".",
                "Si bien la detección de ondas de choque es independiente del \"rango\", a menos que el proyectil se vuelva subsónico, la probabilidad de detección de la explosión del hocico más allá de 150 metros no es suficiente para obtener al menos tres por nodo del sensor para la estimación de AOA.",
                "Dado que ahora no es un sistema distribuido, los resultados se dan en relación con la posición del sensor dado, es decir, se proporciona una estimación de rodamiento y \"rango\".",
                "ID del sensor 1 2 3 5 7 8 9 10 11 12 Loc.tasa 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% RODAMIENTO (DEG) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 \"Rango\" (m) 3.2 6.1 4.4 4.6 4.6 4.1 5.2 4.888.2 Tabla 3: Precisión de un solo sensor para 108 disparos de 50 y 100 metros.",
                "Los valores de rodamiento y \"rango\" son errores promedio.",
                "A la luz de estos factores, el error de cojinete promedio general de 0.9 grados y un error de \"rango\" de 5 M con un espacio de micrófono de menos de 10 cm son excelentes.",
                "Creemos que la fabricación profesional y mejores micrófonos podrían lograr fácilmente un mejor rendimiento que el mejor sensor de nuestro experimento (> 60% de tasa de localización y error de 3 m de \"rango\").",
                "Curiosamente, el error más grande en el \"rango\" fue un gran 90 m claramente debido a una detección errónea, sin embargo, el error de rodamiento más grande fue inferior a 12 grados, lo que sigue siendo una buena indicación para el soldado donde mirar.",
                "Tenga en cuenta que el \"rango\" de disparo se preparó para simular un área urbana hasta cierto punto: había algunas estructuras de madera de una sola y dos pisos construidas tanto dentro como alrededor del área de despliegue del sensor y las líneas de disparo.",
                "Los errores de ubicación del nodo en este \"rango\" tienen un pequeño efecto sobre la precisión.",
                "Los silenciadores reducen la energía de la explosión del hocico y, por lo tanto, el \"rango\" efectivo en el que el sistema puede detectarla.",
                "El \"rango\" y el tipo de arma no se pueden estimar sin detecciones de explosión de hocico.",
                "Sin embargo, esto no es de gran importancia, ya que tienen un \"rango\" más corto, menor precisión y mucha menos letalidad.",
                "El rendimiento de los sistemas fijos fue un orden de magnitud mejor en los cálculos de ángulo, mientras que su rendimiento de \"rango\" fue coincidente.",
                "La precisión del \"rango\" fue de alrededor del 5 por ciento para los dos sistemas.",
                "Creemos que con las lecciones aprendidas en la prueba, un experimento de campo consecutivo podría haber mostrado resultados significativamente mejorados, especialmente en la estimación de \"rango\" más allá de 100 my la clasificación de armas para las dos armas restantes que se confundieron el uno con el otro la mayoría de los tiempos durante las veces durantela prueba.",
                "Si bien la tasa de localización general del 42% por sensor para disparos de hasta 130 m podría mejorarse, la precisión del rodamiento de menos de un grado y el error promedio de 5% de \"rango\" son notables utilizando los prototipos hechos a mano de los nodos de bajo costo."
            ],
            "translated_text": "",
            "candidates": [
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "Rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango",
                "rango"
            ],
            "error": []
        },
        "caliber": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the <br>caliber</br> and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% <br>caliber</br> estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for <br>caliber</br> estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, <br>caliber</br> and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the <br>caliber</br> and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for <br>caliber</br> estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the <br>caliber</br> and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the <br>caliber</br> of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute <br>caliber</br> (see 6.5). 6.",
                "If <br>caliber</br> available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 <br>caliber</br> estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different <br>caliber</br> projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different <br>caliber</br> projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given <br>caliber</br> can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the <br>caliber</br> whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% <br>caliber</br> estimation error when an accurate trajectory estimate is available.",
                "In other words, <br>caliber</br> estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same <br>caliber</br>.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same <br>caliber</br>.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its <br>caliber</br> showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm <br>caliber</br>, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm <br>caliber</br>.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated <br>caliber</br> class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 <br>caliber</br> M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- <br>caliber</br> Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The <br>caliber</br> accuracy rate is relative to the shots localized and not all the shots because <br>caliber</br> estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The <br>caliber</br> and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since <br>caliber</br> estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The <br>caliber</br> and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the <br>caliber</br> estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same <br>caliber</br> (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same <br>caliber</br>.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the <br>caliber</br> or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and <br>caliber</br> accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small <br>caliber</br> acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the <br>caliber</br> of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct <br>caliber</br> estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-<br>caliber</br> ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El sistema estima la trayectoria, el rango, el \"calibre\" y el tipo de arma.calibre",
                "El rendimiento del sistema se caracteriza por la precisión de la trayectoria de 1 grado y más del 95% de precisión de estimación de \"calibre\" para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas.calibre",
                "Finalmente, los requisitos adicionales requerían estimación de \"calibre\" y clasificación de armas, además de la localización de la fuente.calibre",
                "Se paga especial énfasis a la técnica de fusión del sensor que estima la trayectoria, el rango, el \"calibre\" y el tipo de arma simultáneamente.calibre",
                "La longitud está determinada por el \"calibre\" y la distancia de la falla, la distancia entre la trayectoria y el sensor.calibre",
                "Una vez que está disponible una estimación de trayectoria, la longitud de la onda de choque se puede usar para la estimación de \"calibre\".calibre",
                "Un algoritmo de fusión del sensor híbrido estima la trayectoria, el rango, el \"calibre\" y el tipo de arma basado en todas las observaciones disponibles.calibre",
                "Fusión del sensor El algoritmo de fusión del sensor recibe mensajes de detección de la red de sensores y estima la trayectoria de la bala, la posición del tirador, el \"calibre\" del proyectil y el tipo de arma.calibre",
                "Si la trayectoria disponible calcula el \"calibre\" (ver 6.5).6. Calibre",
                "Si el tipo de arma de cómputo disponible \"calibre\" (ver 6.6).calibre",
                "El valor de la función de consistencia se incrementa por uno para cada estimación de rodamiento y rango que es consistente con B. 6.5 Estimación de \"calibre\" Las características de la señal de onda de choque se han estudiado antes por Whitham [20].calibre",
                "Se han probado tres proyectiles \"calibre\" diferentes (196 disparos, 10 sensores).calibre",
                "Para ilustrar la relación entre la distancia de la falla y la longitud de la onda de choque, aquí usamos las 196 disparos con tres proyectiles \"calibre\" diferentes disparados durante la evaluación.(Durante la evaluación utilizamos datos obtenidos previamente utilizando algunas tomas de práctica por arma). 10 sensores (4 micrófonos por sensor) midieron la longitud de la onda de choque.calibre",
                "La fórmula de Whithams sugiere que la longitud de la onda de choque para un \"calibre\" dado se puede aproximar con una función de potencia de la distancia de fallas (con un exponente 1/4).calibre",
                "Las mejores funciones de ajuste en nuestros datos son: .50 Cal: T = 237.75b0.2059 7.62 mm: t = 178.11b0.1996 5.56 mm: t = 144.39b0.1757 Para evaluar un disparo, tomamos el \"calibre\" cuyo calibre de aproximación \"cuyo calibre de aproximación funciónResulta en el error RMS más pequeño de las lecturas del sensor filtrado.calibre",
                "Este método tiene menos del 1% de error de estimación de \"calibre\" cuando hay una estimación de trayectoria precisa disponible.calibre",
                "En otras palabras, la estimación de \"calibre\" solo funciona si el sistema realiza suficientes detecciones de onda de choque para calcular una trayectoria.120 6.6 Estimación de armas Analizamos todas las características de señal medidas para encontrar información específica de arma.calibre",
                "Ambas armas tienen el mismo \"calibre\".calibre",
                "Todas las armas tienen el mismo \"calibre\".calibre",
                "Sin embargo, la velocidad medida del proyectil y su \"calibre\" mostraron una buena correlación con el tipo de arma.calibre",
                "En el caso del \"calibre\" de 7.62 mm, las dos armas probadas (AK47, M240) pueden separarse claramente (Figura 10).calibre",
                "Desafortunadamente, esto no es necesariamente cierto para el \"calibre\" de 5.56 mm.calibre",
                "Para evaluar un disparo, elegimos el tipo de arma cuya función de desaceleración da como resultado el error RMS más pequeño de los pares de rango de rango estimados para la clase de \"calibre\" estimada.7. Calibre",
                "Se utilizaron seis armas diferentes: AK47 y M240 disparando proyectiles de 7,62 mm, M16, M4 y M249 con municiones de 5,56 mm y el \"calibre\" .50 M107.calibre",
                "Tirador local- Distancia de trayectoria de trayectoria de trayectoria \"calibre\"",
                "La tasa de precisión del \"calibre\" es relativa a los disparos localizados y no todos los disparos porque la estimación de \"calibre\" requiere la trayectoria.calibre",
                "El \"calibre\" y el arma también se identificaron correctamente.6 de cada 10 nodos pudieron estimar la ubicación solo.calibre",
                "Dado que la estimación de \"calibre\" y la clasificación de armas se basan en la trayectoria, los disparos no localizados tampoco se clasifican.calibre",
                "Las tasas de precisión de \"calibre\" y estimación de armas se basan en los 189 disparos que se localizaron con éxito.calibre",
                "Tenga en cuenta que hubo una sola toma que fue clasificada falsamente por el estimador de \"calibre\".calibre",
                "Tenga en cuenta que el AK47 y el M240 tienen el mismo \"calibre\" (7.62 mm), al igual que el M16, M4 y M249 (5.56 mm).calibre",
                "Es decir, el sistema puede diferenciar entre armas del mismo \"calibre\".calibre",
                "Hay varias desventajas del caso de un solo sensor en comparación con el sistema en red: no hay redundancia para compensar otros errores y realizar un rechazo atípico, la tasa de localización es notablemente más baja y un solo sensor solo no puede estimar el \"calibre\"\"O clasificar el arma.calibre",
                "Sin embargo, los silenciadores no afectan la onda de choque y el sistema aún detectaría la trayectoria y el \"calibre\" con precisión.calibre",
                "La atención se centra en la detección robusta y la estimación de la longitud de pequeñas ondas de choque acústicas de \"calibre\" y explosiones de hocico.calibre",
                "También demuestra cómo la longitud de la onda de choque, según lo determinado por los detectores de borde, se puede usar junto con las ecuaciones de Whithams [20] para estimar el \"calibre\" de un proyectil.calibre",
                "Lo más notable es la precisión trayectoria de un grado, la tasa de estimación correcta de \"calibre\" de más del 90% y la tasa de clasificación de armas cercana al 100% para 4 de las 6 armas probadas.calibre",
                "Medidas de pequeñas ondas de choque balístico \"calibre\" en el aire.calibre"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "weapon type": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the <br>weapon type</br>.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and <br>weapon type</br> simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the <br>weapon type</br> based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute <br>weapon type</br> (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the <br>weapon type</br>.",
                "This is because for a given <br>weapon type</br> and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the <br>weapon type</br> whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and <br>weapon type</br> could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El sistema estima la trayectoria, el rango, el calibre y el \"tipo de arma\".tipo de arma",
                "Se paga especial énfasis a la técnica de fusión del sensor que estima la trayectoria, el rango, el calibre y el \"tipo de arma\" simultáneamente.tipo de arma",
                "Un algoritmo de fusión del sensor híbrido luego estima la trayectoria, el rango, el calibre y el \"tipo de arma\" en función de todas las observaciones disponibles.tipo de arma",
                "Si el calibre disponible calcule el \"tipo de arma\" (ver 6.6).tipo de arma",
                "Sin embargo, la velocidad medida del proyectil y su calibre mostraron una buena correlación con el \"tipo de arma\".tipo de arma",
                "Esto se debe a que para un \"tipo de arma\" determinado y un par de municiones, la velocidad del hocico es casi constante.tipo de arma",
                "Para evaluar un disparo, elegimos el \"tipo de arma\" cuya función de desaceleración da como resultado el error RMS más pequeño de los pares de rango de rango estimados para la clase de calibre estimada.7. Tipo de arma",
                "El rango y el \"tipo de arma\" no se pueden estimar sin detecciones de explosión de hocico.tipo de arma"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "1degree trajectory precision": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by <br>1degree trajectory precision</br> and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El rendimiento del sistema se caracteriza por la \"precisión de la trayectoria de 1 grado\" y más del 95% de precisión de estimación de calibre para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas.Precisión de trayectoria de 1 grado"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "caliber estimation accuracy": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% <br>caliber estimation accuracy</br> for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El rendimiento del sistema se caracteriza por una precisión de la trayectoria de 1 grado y más del 95% de \"precisión de estimación de calibre\" para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas.precisión de la estimación del calibre"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "sensor network": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless <br>sensor network</br>-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the <br>sensor network</br> and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static <br>sensor network</br>-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the <br>sensor network</br>.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the <br>sensor network</br> and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the <br>sensor network</br>.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the <br>sensor network</br> and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the <br>sensor network</br>.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the <br>sensor network</br>.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the <br>sensor network</br> was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the <br>sensor network</br>.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the <br>sensor network</br>, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "<br>sensor network</br>-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Localización de tiradores y clasificación de armas con sensores en red que usan soldados Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, EE. UU.Presenta un sistema inalámbrico de contador móvil basado en \"red de sensores\".red de sensores",
                "PINPTR se caracteriza por una precisión de alta precisión: 1M precisión 3D promedio para tomas que se originan dentro o cerca de la \"red de sensores\" y la precisión de 1 grado para el acimut y la elevación y la precisión del 10% en la estimación de rango para disparos de mayor alcance.red de sensores",
                "BBN [3] desarrolló un sistema montado en el casco a mediados de los 90, pero no continuó más allá del programa DARPA lo que lo financió.113 para pasar de una solución estática basada en la \"red de sensores\" a una altamente móvil, presenta desafíos significativos.red de sensores",
                "Tenga en cuenta que las mediciones de otros nodos junto con su información de ubicación e orientación también llegan desde el tablero de sensores que actúa como una puerta de enlace entre el PDA y la \"red de sensores\".red de sensores",
                "La conversión de tiempo y la sincronización entre la \"red de sensores\" y la placa se realizan mediante la mota solicitando periódicamente la captura del valor del temporizador actual a través de una línea GPIO dedicada y leyendo el valor capturado del archivo de registro a través de la interfaz i2 C.red de sensores",
                "La correlación de las mediciones de TOA requiere una base de tiempo común y una sincronización de tiempo precisa en la \"red de sensores\".red de sensores",
                "Fusión del sensor El algoritmo de fusión del sensor recibe mensajes de detección de la \"red de sensores\" y estima la trayectoria de la bala, la posición del tirador, el calibre del proyectil y el tipo de arma.red de sensores",
                "Había cinco objetivos fijos detrás de la \"red de sensores\".red de sensores",
                "Este disparo desde la línea de 100 metros en Target T-3 fue localizado casi perfectamente por la \"red de sensores\".red de sensores",
                "Como se solucionó la distancia entre los objetivos y la \"red de sensores\", este número no debería mostrar una mejora de 2 × solo porque el tirador está más cerca.red de sensores",
                "Tenga en cuenta que casi todas estas tomas todavía estaban localizadas con precisión por el sistema en red, es decir, la fusión del sensor utilizando todas las observaciones disponibles en la \"red de sensores\".red de sensores",
                "Esto es causado principalmente por la geometría: para una localización exitosa, la bala debe pasar por encima de la \"red de sensores\", es decir, al menos un sensor debería estar del lado de la trayectoria que no sea el resto de los nodos.(Esta es una simplificación para fines ilustrativos. Red de sensores",
                "Sistema de contadoras basado en la \"red de sensores\".red de sensores"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "datum fusion": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "acoustic source localization": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "weapon classification": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and <br>weapon classification</br> with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% caliber estimation accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for caliber estimation and <br>weapon classification</br> in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for caliber estimation.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 Caliber estimation The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% caliber estimation error when an accurate trajectory estimate is available.",
                "In other words, caliber estimation only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out <br>weapon classification</br> in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because caliber estimation requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since caliber estimation and <br>weapon classification</br> relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: <br>weapon classification</br> results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall <br>weapon classification</br> accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and <br>weapon classification</br> system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For <br>weapon classification</br> to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct caliber estimation rate of well over 90% and the close to 100% <br>weapon classification</br> rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and <br>weapon classification</br> for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Localización de tiradores y \"clasificación de armas\" con sensores en red con soldados Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, Akos de EE. UU.El documento presenta un sistema de contador móvil basado en la red de sensores inalámbricos.clasificación de armas",
                "Finalmente, los requisitos adicionales requerían la estimación del calibre y la \"clasificación de armas\" además de la localización de la fuente.clasificación de armas",
                "El sistema lleva a cabo \"clasificación de armas\" de la siguiente manera.clasificación de armas",
                "Dado que la estimación del calibre y la \"clasificación de armas\" se basan en la trayectoria, los disparos no localizados tampoco se clasifican.clasificación de armas",
                "Distancia M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 50% 50% 50% 50% 50% 50%% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Tabla 2: Resultados de \"clasificación de armas\".clasificación de armas",
                "La precisión general de \"clasificación de armas\" del 73% no parece impresionante.clasificación de armas",
                "La Figura 13 muestra el histograma del porcentaje de disparos frente al número de sensores individuales que lo localizaron.El 13% de los disparos no fueron localizados solo por ningún sensor, pero el 87% fue localizado por al menos un sensor de diez.7.2 Fuentes de error En esta sección, analizamos las fuentes de error más significativas que afectan el rendimiento de la localización de tiradores en red y el sistema de \"clasificación de armas\".clasificación de armas",
                "Para que la \"clasificación de armas\" funcione con precisión, el sistema necesitaría ser calibrado con la munición típica utilizada por el adversario dado.8. Clasificación de armas",
                "Lo más notable es la precisión trayectoria de un grado, la tasa de estimación de calibre correcta de más del 90% y la tasa cercana a la \"clasificación de armas\" cercana para 4 de las 6 armas probadas.clasificación de armas",
                "Creemos que con las lecciones aprendidas en la prueba, un experimento de campo consecutivo podría haber mostrado resultados significativamente mejorados, especialmente en una estimación de rango más allá de 100 my \"clasificación de armas\" para las dos armas restantes que se confundieron el uno con el otro, la mayoría de los tiempos durante las veces durantela prueba.clasificación de armas"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "caliber estimation": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Shooter Localization and Weapon Classification with Soldier-Wearable Networked Sensors Peter Volgyesi, Gyorgy Balogh, Andras Nadas, Christopher B. Nash, Akos Ledeczi Institute for Software Integrated Systems, Vanderbilt University Nashville, TN, USA akos.ledeczi@vanderbilt.edu ABSTRACT The paper presents a wireless sensor network-based mobile countersniper system.",
                "A sensor node consists of a helmetmounted microphone array, a COTS MICAz mote for internode communication and a custom sensorboard that implements the acoustic detection and Time of Arrival (ToA) estimation algorithms on an FPGA.",
                "A 3-axis compass provides self orientation and Bluetooth is used for communication with the soldiers PDA running the data fusion and the user interface.",
                "The heterogeneous sensor fusion algorithm can work with data from a single sensor or it can fuse ToA or Angle of Arrival (AoA) observations of muzzle blasts and ballistic shockwaves from multiple sensors.",
                "The system estimates the trajectory, the range, the caliber and the weapon type.",
                "The paper presents the system design and the results from an independent evaluation at the US Army Aberdeen Test Center.",
                "The system performance is characterized by 1degree trajectory precision and over 95% <br>caliber estimation</br> accuracy for all shots, and close to 100% weapon estimation accuracy for 4 out of 6 guns tested.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communications Networks]: Distributed Systems; J.7 [Computers in Other Systems]: Military General Terms: Design, Measurement, Performance 1.",
                "INTRODUCTION The importance of countersniper systems is underscored by the constant stream of news reports coming from the Middle East.",
                "In October 2006 CNN reported on a new tactic employed by insurgents.",
                "A mobile sniper team moves around busy city streets in a car, positions itself at a good standoff distance from dismounted US military personnel, takes a single well-aimed shot and immediately melts in the city traffic.",
                "By the time the soldiers can react, they are gone.",
                "A countersniper system that provides almost immediate shooter location to every soldier in the vicinity would provide clear benefits to the warfigthers.",
                "Our team introduced PinPtr, the first sensor networkbased countersniper system [17, 8] in 2003.",
                "The system is based on potentially hundreds of inexpensive sensor nodes deployed in the area of interest forming an ad-hoc multihop network.",
                "The acoustic sensors measure the Time of Arrival (ToA) of muzzle blasts and ballistic shockwaves, pressure waves induced by the supersonic projectile, send the data to a base station where a sensor fusion algorithm determines the origin of the shot.",
                "PinPtr is characterized by high precision: 1m average 3D accuracy for shots originating within or near the sensor network and 1 degree bearing precision for both azimuth and elevation and 10% accuracy in range estimation for longer range shots.",
                "The truly unique characteristic of the system is that it works in such reverberant environments as cluttered urban terrain and that it can resolve multiple simultaneous shots at the same time.",
                "This capability is due to the widely distributed sensing and the unique sensor fusion approach [8].",
                "The system has been tested several times in US Army MOUT (Military Operations in Urban Terrain) facilities.",
                "The obvious disadvantage of such a system is its static nature.",
                "Once the sensors are distributed, they cover a certain area.",
                "Depending on the operation, the deployment may be needed for an hour or a month, but eventually the area looses its importance.",
                "It is not practical to gather and reuse the sensors, especially under combat conditions.",
                "Even if the sensors are cheap, it is still a waste and a logistical problem to provide a continuous stream of sensors as the operations move from place to place.",
                "As it is primarily the soldiers that the system protects, a natural extension is to mount the sensors on the soldiers themselves.",
                "While there are vehiclemounted countersniper systems [1] available commercially, we are not aware of a deployed system that protects dismounted soldiers.",
                "A helmet-mounted system was developed in the mid 90s by BBN [3], but it was not continued beyond the Darpa program that funded it. 113 To move from a static sensor network-based solution to a highly mobile one presents significant challenges.",
                "The sensor positions and orientation need to be constantly monitored.",
                "As soldiers may work in groups of as little as four people, the number of sensors measuring the acoustic phenomena may be an order of magnitude smaller than before.",
                "Moreover, the system should be useful to even a single soldier.",
                "Finally, additional requirements called for <br>caliber estimation</br> and weapon classification in addition to source localization.",
                "The paper presents the design and evaluation of our soldierwearable mobile countersniper system.",
                "It describes the hardware and software architecture including the custom sensor board equipped with a small microphone array and connected to a COTS MICAz mote [12].",
                "Special emphasis is paid to the sensor fusion technique that estimates the trajectory, range, caliber and weapon type simultaneously.",
                "The results and analysis of an independent evaluation of the system at the US Army Aberdeen Test Center are also presented. 2.",
                "APPROACH The firing of a typical military rifle, such as the AK47 or M16, produces two distinct acoustic phenomena.",
                "The muzzle blast is generated at the muzzle of the gun and travels at the speed sound.",
                "The supersonic projectile generates an acoustic shockwave, a kind of sonic boom.",
                "The wavefront has a conical shape, the angle of which depends on the Mach number, the speed of the bullet relative to the speed of sound.",
                "The shockwave has a characteristic shape resembling a capital N. The rise time at both the start and end of the signal is very fast, under 1 μsec.",
                "The length is determined by the caliber and the miss distance, the distance between the trajectory and the sensor.",
                "It is typically a few hundred μsec.",
                "Once a trajectory estimate is available, the shockwave length can be used for <br>caliber estimation</br>.",
                "Our system is based on four microphones connected to a sensorboard.",
                "The board detects shockwaves and muzzle blasts and measures their ToA.",
                "If at least three acoustic channels detect the same event, its AoA is also computed.",
                "If both the shockwave and muzzle blast AoA are available, a simple analytical solution gives the shooter location as shown in Section 6.",
                "As the microphones are close to each other, typically 2-4, we cannot expect very high precision.",
                "Also, this method does not estimate a trajectory.",
                "In fact, an infinite number of trajectory-bullet speed pairs satisfy the observations.",
                "However, the sensorboards are also connected to COTS MICAz motes and they share their AoA and ToA measurements, as well as their own location and orientation, with each other using a multihop routing service [9].",
                "A hybrid sensor fusion algorithm then estimates the trajectory, the range, the caliber and the weapon type based on all available observations.",
                "The sensorboard is also Bluetooth capable for communication with the soldiers PDA or laptop computer.",
                "A wired USB connection is also available.",
                "The sensorfusion algorithm and the user interface get their data through one of these channels.",
                "The orientation of the microphone array at the time of detection is provided by a 3-axis digital compass.",
                "Currently the system assumes that the soldiers PDA is GPS-capable and it does not provide self localization service itself.",
                "However, the accuracy of GPS is a few meters degrading the Figure 1: Acoustic sensorboard/mote assembly . overall accuracy of the system.",
                "Refer to Section 7 for an analysis.",
                "The latest generation sensorboard features a Texas Instruments CC-1000 radio enabling the high-precision radio interferometric self localization approach we have developed separately [7].",
                "However, we leave the integration of the two technologies for future work. 3.",
                "HARDWARE Since the first static version of our system in 2003, the sensor nodes have been built upon the UC Berkeley/Crossbow MICA product line [11].",
                "Although rudimentary acoustic signal processing can be done on these microcontroller-based boards, they do not provide the required computational performance for shockwave detection and angle of arrival measurements, where multiple signals from different microphones need to be processed in parallel at a high sampling rate.",
                "Our 3rd generation sensorboard is designed to be used with MICAz motes-in fact it has almost the same size as the mote itself (see Figure 1).",
                "The board utilizes a powerful Xilinx XC3S1000 FPGA chip with various standard peripheral IP cores, multiple soft processor cores and custom logic for the acoustic detectors (Figure 2).",
                "The onboard Flash (4MB) and PSRAM (8MB) modules allow storing raw samples of several acoustic events, which can be used to build libraries of various acoustic signatures and for refining the detection cores off-line.",
                "Also, the external memory blocks can store program code and data used by the soft processor cores on the FPGA.",
                "The board supports four independent analog channels sampled at up to 1 MS/s (million samples per seconds).",
                "These channels, featuring an electret microphone (Panasonic WM64PNT), amplifiers with controllable gain (30-60 dB) and a 12-bit serial ADC (Analog Devices AD7476), reside on separate tiny boards which are connected to the main sensorboard with ribbon cables.",
                "This partitioning enables the use of truly different audio channels (eg. : slower sampling frequency, different gain or dynamic range) and also results in less noisy measurements by avoiding long analog signal paths.",
                "The sensor platform offers a rich set of interfaces and can be integrated with existing systems in diverse ways.",
                "An RS232 port and a Bluetooth (BlueGiga WT12) wireless link with virtual UART emulation are directly available on the board and provide simple means to connect the sensor to PCs and PDAs.",
                "The mote interface consists of an I2 C bus along with an interrupt and GPIO line (the latter one is used 114 Figure 2: Block diagram of the sensorboard. for precise time synchronization between the board and the mote).",
                "The motes are equipped with IEEE 802.15.4 compliant radio transceivers and support ad-hoc wireless networking among the nodes and to/from the base station.",
                "The sensorboard also supports full-speed USB transfers (with custom USB dongles) for uploading recorded audio samples to the PC.",
                "The on-board JTAG chain-directly accessible through a dedicated connector-contains the FPGA part and configuration memory and provides in-system programming and debugging facilities.",
                "The integrated Honeywell HMR3300 digital compass module provides heading, pitch and roll information with 1◦ accuracy, which is essential for calculating and combining directional estimates of the detected events.",
                "Due to the complex voltage requirements of the FPGA, the power supply circuitry is implemented on the sensorboard and provides power both locally and to the mote.",
                "We used a quad pack of rechargeable AA batteries as the power source (although any other configuration is viable that meets the voltage requirements).",
                "The FPGA core (1.2 V) and I/O (3.3 V) voltages are generated by a highly efficient buck switching regulator.",
                "The FPGA configuration (2.5 V) and a separate 3.3 V power net are fed by low current LDOs, the latter one is used to provide independent power to the mote and to the Bluetooth radio.",
                "The regulators-except the last one-can be turned on/off from the mote or through the Bluetooth radio (via GPIO lines) to save power.",
                "The first prototype of our system employed 10 sensor nodes.",
                "Some of these nodes were mounted on military kevlar helmets with the microphones directly attached to the surface at about 20 cm separation as shown in Figure 3(a).",
                "The rest of the nodes were mounted in plastic enclosures (Figure 3(b)) with the microphones placed near the corners of the boxes to form approximately 5 cm×10 cm rectangles. 4.",
                "SOFTWARE ARCHITECTURE The sensor application relies on three subsystems exploiting three different computing paradigms as they are shown in Figure 4.",
                "Although each of these execution models suit their domain specific tasks extremely well, this diversity (a) (b) Figure 3: Sensor prototypes mounted on a kevlar helmet (a) and in a plastic box on a tripod (b). presents a challenge for software development and system integration.",
                "The sensor fusion and user interface subsystem is running on PDAs and were implemented in Java.",
                "The sensing and signal processing tasks are executed by an FPGA, which also acts as a bridge between various wired and wireless communication channels.",
                "The ad-hoc internode communication, time synchronization and data sharing are the responsibilities of a microcontroller based radio module.",
                "Similarly, the application employs a wide variety of communication protocols such as Bluetooth and IEEE 802.14.5 wireless links, as well as optional UARTs, I2 C and/or USB buses.",
                "Soldier Operated Device (PDA/Laptop) FPGA Sensor Board Mica Radio Module 2.4 GHz Wireless Link Radio Control Message Routing Acoustic Event Encoder Sensor Time Synch.",
                "Network Time Synch.Remote Control Time stamping Interrupts Virtual Register Interface C O O R D I N A T O R A n a l o g c h a n n e l s Compass PicoBlaze Comm.",
                "Interface PicoBlaze WT12 Bluetooth Radio MOTE IF:I2C,Interrupts USB PSRAM U A R T U A R T MB det SW det REC Bluetooth Link User Interface Sensor Fusion Location Engine GPS Message (Dis-)AssemblerSensor Control Figure 4: Software architecture diagram.",
                "The sensor fusion module receives and unpacks raw measurements (time stamps and feature vectors) from the sensorboard through the Bluetooth link.",
                "Also, it fine tunes the execution of the signal processing cores by setting parameters through the same link.",
                "Note that measurements from other nodes along with their location and orientation information also arrive from the sensorboard which acts as a gateway between the PDA and the sensor network.",
                "The handheld device obtains its own GPS location data and di115 rectly receives orientation information through the sensorboard.",
                "The results of the sensor fusion are displayed on the PDA screen with low latency.",
                "Since, the application is implemented in pure Java, it is portable across different PDA platforms.",
                "The border between software and hardware is considerably blurred on the sensor board.",
                "The IP cores-implemented in hardware description languages (HDL) on the reconfigurable FPGA fabric-closely resemble hardware building blocks.",
                "However, some of them-most notably the soft processor cores-execute true software programs.",
                "The primary tasks of the sensor board software are 1) acquiring data samples from the analog channels, 2) processing acoustic data (detection), and 3) providing access to the results and run-time parameters through different interfaces.",
                "As it is shown in Figure 4, a centralized virtual register file contains the address decoding logic, the registers for storing parameter values and results and the point to point data buses to and from the peripherals.",
                "Thus, it effectively integrates the building blocks within the sensorboard and decouples the various communication interfaces.",
                "This architecture enabled us to deploy the same set of sensors in a centralized scenario, where the ad-hoc mote network (using the I2 C interface) collected and forwarded the results to a base station or to build a decentralized system where the local PDAs execute the sensor fusion on the data obtained through the Bluetooth interface (and optionally from other sensors through the mote interface).",
                "The same set of registers are also accessible through a UART link with a terminal emulation program.",
                "Also, because the low-level interfaces are hidden by the register file, one can easily add/replace these with new ones (eg. : the first generation of motes supported a standard μP interface bus on the sensor connector, which was dropped in later designs).",
                "The most important results are the time stamps of the detected events.",
                "These time stamps and all other timing information (parameters, acoustic event features) are based on a 1 MHz clock and an internal timer on the FPGA.",
                "The time conversion and synchronization between the sensor network and the board is done by the mote by periodically requesting the capture of the current timer value through a dedicated GPIO line and reading the captured value from the register file through the I2 C interface.",
                "Based on the the current and previous readings and the corresponding mote local time stamps, the mote can calculate and maintain the scaling factor and offset between the two time domains.",
                "The mote interface is implemented by the I2 C slave IP core and a thin adaptation layer which provides a data and address bus abstraction on top of it.",
                "The maximum effective bandwidth is 100 Kbps through this interface.",
                "The FPGA contains several UART cores as well: for communicating with the on-board Bluetooth module, for controlling the digital compass and for providing a wired RS232 link through a dedicated connector.",
                "The control, status and data registers of the UART modules are available through the register file.",
                "The higher level protocols on these lines are implemented by Xilinx PicoBlaze microcontroller cores [13] and corresponding software programs.",
                "One of them provides a command line interface for test and debug purposes, while the other is responsible for parsing compass readings.",
                "By default, they are connected to the RS232 port and to the on-board digital compass line respectively, however, they can be rewired to any communication interface by changing the register file base address in the programs (e.g. the command line interface can be provided through the Bluetooth channel).",
                "Two of the external interfaces are not accessible through the register file: a high speed USB link and the SRAM interface are tied to the recorder block.",
                "The USB module implements a simple FIFO with parallel data lines connected to an external FT245R USB device controller.",
                "The RAM driver implements data read/write cycles with correct timing and is connected to the on-board pseudo SRAM.",
                "These interfaces provide 1 MB/s effective bandwidth for downloading recorded audio samples, for example.",
                "The data acquisition and signal processing paths exhibit clear symmetry: the same set of IP cores are instantiated four times (i.e. the number of acoustic channels) and run independently.",
                "The signal paths meet only just before the register file.",
                "Each of the analog channels is driven by a serial A/D core for providing a 20 MHz serial clock and shifting in 8-bit data samples at 1 MS/s and a digital potentiometer driver for setting the required gain.",
                "Each channel has its own shockwave and muzzle blast detector, which are described in Section 5.",
                "The detectors fetch run-time parameter values from the register file and store their results there as well.",
                "The coordinator core constantly monitors the detection results and generates a mote interrupt promptly upon full detection or after a reasonable timeout after partial detection.",
                "The recorder component is not used in the final deployment, however, it is essential for development purposes for refining parameter values for new types of weapons or for other acoustic sources.",
                "This component receives the samples from all channels and stores them in circular buffers in the PSRAM device.",
                "If the signal amplitude on one of the channels crosses a predefined threshold, the recorder component suspends the sample collection with a predefined delay and dumps the contents of the buffers through the USB link.",
                "The length of these buffers and delays, the sampling rate, the threshold level and the set of recorded channels can be (re)configured run-time through the register file.",
                "Note that the core operates independently from the other signal processing modules, therefore, it can be used to validate the detection results off-line.",
                "The FPGA cores are implemented in VHDL, the PicoBlaze programs are written in assembly.",
                "The complete configuration occupies 40% of the resources (slices) of the FPGA and the maximum clock speed is 30 MHz, which is safely higher than the speed used with the actual device (20MHz).",
                "The MICAz motes are responsible for distributing measurement data across the network, which drastically improves the localization and classification results at each node.",
                "Besides a robust radio (MAC) layer, the motes require two essential middleware services to achieve this goal.",
                "The messages need to be propagated in the ad-hoc multihop network using a routing service.",
                "We successfully integrated the Directed Flood-Routing Framework (DFRF) [9] in our application.",
                "Apart from automatic message aggregation and efficient buffer management, the most unique feature of DFRF is its plug-in architecture, which accepts custom routing policies.",
                "Routing policies are state machines that govern how received messages are stored, resent or discarded.",
                "Example policies include spanning tree routing, broadcast, geographic routing, etc.",
                "Different policies can be used for different messages concurrently, and the application is able to 116 change the underlying policies at run-time (eg. : because of the changing RF environment or power budget).",
                "In fact, we switched several times between a simple but lavish broadcast policy and a more efficient gradient routing on the field.",
                "Correlating ToA measurements requires a common time base and precise time synchronization in the sensor network.",
                "The Routing Integrated Time Synchronization (RITS) [15] protocol relies on very accurate MAC-layer time-stamping to embed the cumulative delay that a data message accrued since the time of the detection in the message itself.",
                "That is, at every node it measures the time the message spent there and adds this to the number in the time delay slot of the message, right before it leaves the current node.",
                "Every receiving node can subtract the delay from its current time to obtain the detection time in its local time reference.",
                "The service provides very accurate time conversion (few μs per hop error), which is more than adequate for this application.",
                "Note, that the motes also need to convert the sensorboard time stamps to mote time as it is described earlier.",
                "The mote application is implemented in nesC [5] and is running on top of TinyOS [6].",
                "With its 3 KB RAM and 28 KB program space (ROM) requirement, it easily fits on the MICAz motes. 5.",
                "DETECTION ALGORITHM There are several characteristics of acoustic shockwaves and muzzle blasts which distinguish their detection and signal processing algorithms from regular audio applications.",
                "Both events are transient by their nature and present very intense stimuli to the microphones.",
                "This is increasingly problematic with low cost electret microphones-designed for picking up regular speech or music.",
                "Although mechanical damping of the microphone membranes can mitigate the problem, this approach is not without side effects.",
                "The detection algorithms have to be robust enough to handle severe nonlinear distortion and transitory oscillations.",
                "Since the muzzle blast signature closely follows the shockwave signal and because of potential automatic weapon bursts, it is extremely important to settle the audio channels and the detection logic as soon as possible after an event.",
                "Also, precise angle of arrival estimation necessitates high sampling frequency (in the MHz range) and accurate event detection.",
                "Moreover, the detection logic needs to process multiple channels in parallel (4 channels on our existing hardware).",
                "These requirements dictated simple and robust algorithms both for muzzle blast and shockwave detections.",
                "Instead of using mundane energy detectors-which might not be able to distinguish the two different events-the applied detectors strive to find the most important characteristics of the two signals in the time-domain using simple state machine logic.",
                "The detectors are implemented as independent IP cores within the FPGA-one pair for each channel.",
                "The cores are run-time configurable and provide detection event signals with high precision time stamps and event specific feature vectors.",
                "Although the cores are running independently and in parallel, a crude local fusion module integrates them by shutting down those cores which missed their events after a reasonable timeout and by generating a single detection message towards the mote.",
                "At this point, the mote can read and forward the detection times and features and is responsible to restart the cores afterwards.",
                "The most conspicuous characteristics of an acoustic shockwave (see Figure 5(a)) are the steep rising edges at the be0 200 400 600 800 1000 1200 1400 1600 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Shockwave (M16) Time (µs) Amplitude 1 3 5 2 4 len (a) s[t] - s[t-D] > E tstart := t s[t] - s[t-D] < E s[t] - s[t-D] > E & t - t_start > Lmin s[t] - s[t-D] < E len := t - tstart IDLE 1 FIRST EDGE DONE 3 SECOND EDGE 4 FIRST EDGE 2 FOUND 5 t - tstart ≥ Lmax t - tstart ≥ Lmax (b) Figure 5: Shockwave signal generated by a 5.56 × 45 mm NATO projectile (a) and the state machine of the detection algorithm (b). ginning and end of the signal.",
                "Also, the length of the N-wave is fairly predictable-as it is described in Section 6.5-and is relatively short (200-300 μs).",
                "The shockwave detection core is continuously looking for two rising edges within a given interval.",
                "The state machine of the algorithm is shown in Figure 5(b).",
                "The input parameters are the minimum steepness of the edges (D, E), and the bounds on the length of the wave (Lmin, Lmax).",
                "The only feature calculated by the core is the length of the observed shockwave signal.",
                "In contrast to shockwaves, the muzzle blast signatures are characterized by a long initial period (1-5 ms) where the first half period is significantly shorter than the second half [4].",
                "Due to the physical limitations of the analog circuitry described at the beginning of this section, irregular oscillations and glitches might show up within this longer time window as they can be clearly seen in Figure 6(a).",
                "Therefore, the real challenge for the matching detection core is to identify the first and second half periods properly.",
                "The state machine (Figure 6(b)) does not work on the raw samples directly but is fed by a zero crossing (ZC) encoder.",
                "After the initial triggering, the detector attempts to collect those ZC segments which belong to the first period (positive amplitude) while discarding too short (in our terminology: garbage) segments-effectively implementing a rudimentary low-pass filter in the ZC domain.",
                "After it encounters a sufficiently long negative segment, it runs the same collection logic for the second half period.",
                "If too much garbage is discarded in the collection phases, the core resets itself to prevent the (false) detection of the halves from completely different periods separated by rapid oscillation or noise.",
                "Finally, if the constraints on the total length and on the length ratio hold, the core generates a detection event along with the actual length, amplitude and energy of the period calculated concurrently.",
                "The initial triggering mechanism is based on two amplitude thresholds: one static (but configurable) amplitude level and a dynamically computed one.",
                "The latter one is essential to adapt the sensor to different ambient noise environments and to temporarily suspend the muzzle blast detector after a shock wave event (oscillations in the analog section or reverberations in the sensor enclosure might otherwise trigger false muzzle blast detections).",
                "The dynamic noise level is estimated by a single pole recursive low-pass filter (cutoff @ 0.5 kHz ) on the FPGA. 117 0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 -1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8 1 Time (µs) Amplitude Muzzle blast (M16) 1 2 3 4 5 len2 + len1 (a) IDLE 1 SECOND ZC 3 PENDING ZC 4 FIRST ZC 2 FOUND 5 amplitude threshold long positive ZC long negative ZC valid full period max garbage wrong sign garbage collect first period garbage collect first period garbage (b) Figure 6: Muzzle blast signature (a) produced by an M16 assault rifle and the corresponding detection logic (b).",
                "The detection cores were originally implemented in Java and evaluated on pre-recorded signals because of much faster test runs and more convenient debugging facilities.",
                "Later on, they were ported to VHDL and synthesized using the Xilinx ISE tool suite.",
                "The functional equivalence between the two implementations were tested by VHDL test benches and Python scripts which provided an automated way to exercise the detection cores on the same set of pre-recorded signals and to compare the results. 6.",
                "SENSOR FUSION The sensor fusion algorithm receives detection messages from the sensor network and estimates the bullet trajectory, the shooter position, the caliber of the projectile and the type of the weapon.",
                "The algorithm consists of well separated computational tasks outlined below: 1.",
                "Compute muzzle blast and shockwave directions of arrivals for each individual sensor (see 6.1). 2.",
                "Compute range estimates.",
                "This algorithm can analytically fuse a pair of shockwave and muzzle blast AoA estimates. (see 6.2). 3.",
                "Compute a single trajectory from all shockwave measurements (see 6.3). 4.",
                "If trajectory available compute range (see 6.4). else compute shooter position first and then trajectory based on it. (see 6.4) 5.",
                "If trajectory available compute caliber (see 6.5). 6.",
                "If caliber available compute weapon type (see 6.6).",
                "We describe each step in the following sections in detail. 6.1 Direction of arrival The first step of the sensor fusion is to calculate the muzzle blast and shockwave AoA-s for each sensorboard.",
                "Each sensorboard has four microphones that measure the ToA-s.",
                "Since the microphone spacing is orders of magnitude smaller than the distance to the sound source, we can approximate the approaching sound wave front with a plane (far field assumption).",
                "Let us formalize the problem for 3 microphones first.",
                "Let P1, P2 and P3 be the position of the microphones ordered by time of arrival t1 < t2 < t3.",
                "First we apply a simple geometry validation step.",
                "The measured time difference between two microphones cannot be larger than the sound propagation time between the two microphones: |ti − tj| <= |Pi − Pj |/c + ε Where c is the speed of sound and ε is the maximum measurement error.",
                "If this condition does not hold, the corresponding detections are discarded.",
                "Let v(x, y, z) be the normal vector of the unknown direction of arrival.",
                "We also use r1(x1, y1, z1), the vector from P1 to P2 and r2(x2, y2, z2), the vector from P1 to P3.",
                "Lets consider the projection of the direction of the motion of the wave front (v) to r1 divided by the speed of sound (c).",
                "This gives us how long it takes the wave front to propagate form P1 to P2: vr1 = c(t2 − t1) The same relationship holds for r2 and v: vr2 = c(t3 − t1) We also know that v is a normal vector: vv = 1 Moving from vectors to coordinates using the dot product definition leads to a quadratic system: xx1 + yy1 + zz1 = c(t2 − t1) xx2 + yy2 + zz2 = c(t3 − t1) x2 + y2 + z2 = 1 We omit the solution steps here, as they are straightforward, but long.",
                "There are two solutions (if the source is on the P1P2P3 plane the two solutions coincide).",
                "We use the fourth microphones measurement-if there is one-to eliminate one of them.",
                "Otherwise, both solutions are considered for further processing. 6.2 Muzzle-shock fusion u v 11,tP 22,tP tP, 2P′ Bullet trajectory Figure 7: Section plane of a shot (at P) and two sensors (at P1 and at P2).",
                "One sensor detects the muzzle blasts, the other the shockwaves time and direction of arrivals.",
                "Consider the situation in Figure 7.",
                "A shot was fired from P at time t. Both P and t are unknown.",
                "We have one muzzle blast and one shockwave detections by two different sensors 118 with AoA and hence, ToA information available.",
                "The muzzle blast detection is at position P1 with time t1 and AoA u.",
                "The shockwave detection is at P2 with time t2 and AoA v. u and v are normal vectors.",
                "It is shown below that these measurements are sufficient to compute the position of the shooter (P).",
                "Let P2 be the point on the extended shockwave cone surface where PP2 is perpendicular to the surface.",
                "Note that PP2 is parallel with v. Since P2 is on the cone surface which hits P2, a sensor at P2 would detect the same shockwave time of arrival (t2).",
                "The cone surface travels at the speed of sound (c), so we can express P using P2: P = P2 + cv(t2 − t).",
                "P can also be expressed from P1: P = P1 + cu(t1 − t) yielding P1 + cu(t1 − t) = P2 + cv(t2 − t).",
                "P2P2 is perpendicular to v: (P2 − P2)v = 0 yielding (P1 + cu(t1 − t) − cv(t2 − t) − P2)v = 0 containing only one unknown t. One obtains: t = (P1−P2)v c +uvt1−t2 uv−1 .",
                "From here we can calculate the shoter position P. Lets consider the special single sensor case where P1 = P2 (one sensor detects both shockwave and muzzle blast AoA).",
                "In this case: t = uvt1−t2 uv−1 .",
                "Since u and v are not used separately only uv, the absolute orientation of the sensor can be arbitrary, we still get t which gives us the range.",
                "Here we assumed that the shockwave is a cone which is only true for constant projectile speeds.",
                "In reality, the angle of the cone slowly grows; the surface resembles one half of an American football.",
                "The decelerating bullet results in a smaller time difference between the shockwave and the muzzle blast detections because the shockwave generation slows down with the bullet.",
                "A smaller time difference results in a smaller range, so the above formula underestimates the true range.",
                "However, it can still be used with a proper deceleration correction function.",
                "We leave this for future work. 6.3 Trajectory estimation Danicki showed that the bullet trajectory and speed can be computed analytically from two independent shockwave measurements where both ToA and AoA are measured [2].",
                "The method gets more sensitive to measurement errors as the two shockwave directions get closer to each other.",
                "In the special case when both directions are the same, the trajectory cannot be computed.",
                "In a real world application, the sensors are typically deployed on a plane approximately.",
                "In this case, all sensors located on one side of the trajectory measure almost the same shockwave AoA.",
                "To avoid this error sensitivity problem, we consider shockwave measurement pairs only if the direction of arrival difference is larger than a certain threshold.",
                "We have multiple sensors and one sensor can report two different directions (when only three microphones detect the shockwave).",
                "Hence, we typically have several trajectory candidates, i.e. one for each AoA pair over the threshold.",
                "We applied an outlier filtering and averaging method to fuse together the shockwave direction and time information and come up with a single trajectory.",
                "Assume that we have N individual shockwave AoA measurements.",
                "Lets take all possible unordered pairs where the direction difference is above the mentioned threshold and compute the trajectory for each.",
                "This gives us at most N(N−1) 2 trajectories.",
                "A trajectory is represented by one point pi and the normal vector vi (where i is the trajectory index).",
                "We define the distance of two trajectories as the dot product of their normal vectors: D(i, j) = vivj For each trajectory a neighbor set is defined: N(i) := {j|D(i, j) < R} where R is a radius parameter.",
                "The largest neighbor set is considered to be the core set C, all other trajectories are outliers.",
                "The core set can be found in O(N2 ) time.",
                "The trajectories in the core set are then averaged to get the final trajectory.",
                "It can happen that we cannot form any sensor pairs because of the direction difference threshold.",
                "It means all sensors are on the same side of the trajectory.",
                "In this case, we first compute the shooter position (described in the next section) that fixes p making v the only unknown.",
                "To find v in this case, we use a simple high resolution grid search and minimize an error function based on the shockwave directions.",
                "We have made experiments to utilize the measured shockwave length in the trajectory estimation.",
                "There are some promising results, but it needs further research. 6.4 Shooter position estimation The shooter position estimation algorithm aggregates the following heterogenous information generated by earlier computational steps: 1. trajectory, 2. muzzle blast ToA at a sensor, 3. muzzle blast AoA at a sensor, which is effectively a bearing estimate to the shooter, and 4. range estimate at a sensor (when both shockwave and muzzle blast AoA are available).",
                "Some sensors report only ToA, some has bearing estimate(s) also and some has range estimate(s) as well, depending on the number of successful muzzle blast and shockwave detections by the sensor.",
                "For an example, refer to Figure 8.",
                "Note that a sensor may have two different bearing and range estimates. 3 detections gives two possible AoA-s for muzzle blast (i.e. bearing) and/or shockwave.",
                "Furthermore, the combination of two different muzzle blast and shockwave AoA-s may result in two different ranges. 119 11111 ,,,, rrvvt ′′ 22 ,vt 333 ,, vvt ′ 4t 5t 6t bullet trajectory shooter position Figure 8: Example of heterogenous input data for the shooter position estimation algorithm.",
                "All sensors have ToA measurements (t1, t2, t3, t4, t5), one sensor has a single bearing estimate (v2), one sensor has two possible bearings (v3, v3) and one sensor has two bearing and two range estimates (v1, v1,r1, r1) In a multipath environment, these detections will not only contain gaussian noise, but also possibly large errors due to echoes.",
                "It has been showed in our earlier work that a similar problem can be solved efficiently with an interval arithmetic based bisection search algorithm [8].",
                "The basic idea is to define a discrete consistency function over the area of interest and subdivide the space into 3D boxes.",
                "For any given 3D box, this function gives the number of measurements supporting the hypothesis that the shooter was within that box.",
                "The search starts with a box large enough to contain the whole area of interest, then zooms in by dividing and evaluating boxes.",
                "The box with the maximum consistency is divided until the desired precision is reached.",
                "Backtracking is possible to avoid getting stuck in a local maximum.",
                "This approach has been shown to be fast enough for online processing.",
                "Note, however, that when the trajectory has already been calculated in previous steps, the search needs to be done only on the trajectory making it orders of magnitude faster.",
                "Next let us describe how the consistency function is calculated in detail.",
                "Consider B, a three dimensional box, we would like to compute the consistency value of.",
                "First we consider only the ToA information.",
                "If one sensor has multiple ToA detections, we use the average of those times, so one sensor supplies at most one ToA estimate.",
                "For each ToA, we can calculate the corresponding time of the shot, since the origin is assumed to be in box B.",
                "Since it is a box and not a single point, this gives us an interval for the shot time.",
                "The maximum number of overlapping time intervals gives us the value of the consistency function for B.",
                "For a detailed description of the consistency function and search algorithm, refer to [8].",
                "Here we extend the approach the following way.",
                "We modify the consistency function based on the bearing and range data from individual sensors.",
                "A bearing estimate supports B if the line segment starting from the sensor with the measured direction intersects the B box.",
                "A range supports B, if the sphere with the radius of the range and origin of the sensor intersects B.",
                "Instead of simply checking whether the position specified by the corresponding bearing-range pairs falls within B, this eliminates the sensors possible orientation error.",
                "The value of the consistency function is incremented by one for each bearing and range estimate that is consistent with B. 6.5 <br>caliber estimation</br> The shockwave signal characteristics has been studied before by Whitham [20].",
                "He showed that the shockwave period T is related to the projectile diameter d, the length l, the perpendicular miss distance b from the bullet trajectory to the sensor, the Mach number M and the speed of sound c. T = 1.82Mb1/4 c(M2−1)3/8 d l1/4 ≈ 1.82d c (Mb l )1/4 0 100 200 300 400 500 600 0 10 20 30 miss distance (m)shockwavelength(microseconds) .50 cal 5.56 mm 7.62 mm Figure 9: Shockwave length and miss distance relationship.",
                "Each data point represents one sensorboard after an aggregation of the individual measurements of the four acoustic channels.",
                "Three different caliber projectiles have been tested (196 shots, 10 sensors).",
                "To illustrate the relationship between miss distance and shockwave length, here we use all 196 shots with three different caliber projectiles fired during the evaluation. (During the evaluation we used data obtained previously using a few practice shots per weapon.) 10 sensors (4 microphones by sensor) measured the shockwave length.",
                "For each sensor, we considered the shockwave length estimation valid if at least three out of four microphones agreed on a value with at most 5 microsecond variance.",
                "This filtering leads to a 86% report rate per sensor and gets rid of large measurement errors.",
                "The experimental data is shown in Figure 9.",
                "Whithams formula suggests that the shockwave length for a given caliber can be approximated with a power function of the miss distance (with a 1/4 exponent).",
                "Best fit functions on our data are: .50 cal: T = 237.75b0.2059 7.62 mm: T = 178.11b0.1996 5.56 mm: T = 144.39b0.1757 To evaluate a shot, we take the caliber whose approximation function results in the smallest RMS error of the filtered sensor readings.",
                "This method has less than 1% <br>caliber estimation</br> error when an accurate trajectory estimate is available.",
                "In other words, <br>caliber estimation</br> only works if enough shockwave detections are made by the system to compute a trajectory. 120 6.6 Weapon estimation We analyzed all measured signal characteristics to find weapon specific information.",
                "Unfortunately, we concluded that the observed muzzle blast signature is not characteristic enough of the weapon for classification purposes.",
                "The reflections of the high energy muzzle blast from the environment have much higher impact on the muzzle blast signal shape than the weapon itself.",
                "Shooting the same weapon from different places caused larger differences on the recorded signal than shooting different weapons from the same place. 0 100 200 300 400 500 600 700 800 900 0 100 200 300 400 range (m) speed(m/s) AK-47 M240 Figure 10: AK47 and M240 bullet deceleration measurements.",
                "Both weapons have the same caliber.",
                "Data is approximated using simple linear regression. 0 100 200 300 400 500 600 700 800 900 1000 0 50 100 150 200 250 300 350 range (m) speed(m/s) M16 M249 M4 Figure 11: M16, M249 and M4 bullet deceleration measurements.",
                "All weapons have the same caliber.",
                "Data is approximated using simple linear regression.",
                "However, the measured speed of the projectile and its caliber showed good correlation with the weapon type.",
                "This is because for a given weapon type and ammunition pair, the muzzle velocity is nearly constant.",
                "In Figures 10 and 11 we can see the relationship between the range and the measured bullet speed for different calibers and weapons.",
                "In the supersonic speed range, the bullet deceleration can be approximated with a linear function.",
                "In case of the 7.62 mm caliber, the two tested weapons (AK47, M240) can be clearly separated (Figure 10).",
                "Unfortunately, this is not necessarily true for the 5.56 mm caliber.",
                "The M16 with its higher muzzle speed can still be well classified, but the M4 and M249 weapons seem practically undistinguishable (Figure 11).",
                "However, this may be partially due to the limited number of practice shots we were able to take before the actual testing began.",
                "More training data may reveal better separation between the two weapons since their published muzzle velocities do differ somewhat.",
                "The system carries out weapon classification in the following manner.",
                "Once the trajectory is known, the speed can be calculated for each sensor based on the shockwave geometry.",
                "To evaluate a shot, we choose the weapon type whose deceleration function results in the smallest RMS error of the estimated range-speed pairs for the estimated caliber class. 7.",
                "RESULTS An independent evaluation of the system was carried out by a team from NIST at the US Army Aberdeen Test Center in April 2006 [19].",
                "The experiment was setup on a shooting range with mock-up wooden buildings and walls for supporting elevated shooter positions and generating multipath effects.",
                "Figure 12 shows the user interface with an aerial photograph of the site. 10 sensor nodes were deployed on surveyed points in an approximately 30×30 m area.",
                "There were five fixed targets behind the sensor network.",
                "Several firing positions were located at each of the firing lines at 50, 100, 200 and 300 meters.",
                "These positions were known to the evaluators, but not to the operators of the system.",
                "Six different weapons were utilized: AK47 and M240 firing 7.62 mm projectiles, M16, M4 and M249 with 5.56mm ammunition and the .50 caliber M107.",
                "Note that the sensors remained static during the test.",
                "The primary reason for this is that nobody is allowed downrange during live fire tests.",
                "Utilizing some kind of remote control platform would have been too involved for the limited time the range was available for the test.",
                "The experiment, therefore, did not test the mobility aspect of the system.",
                "During the one day test, there were 196 shots fired.",
                "The results are summarized in Table 1.",
                "The system detected all shots successfully.",
                "Since a ballistic shockwave is a unique acoustic phenomenon, it makes the detection very robust.",
                "There were no false positives for shockwaves, but there were a handful of false muzzle blast detections due to parallel tests of artillery at a nearby range.",
                "Shooter Local- Caliber Trajectory Trajectory Distance No.",
                "Range ization Accu- Azimuth Distance Error of (m) Rate racy Error (deg) Error (m) (m) Shots 50 93% 100% 0.86 0.91 2.2 54 100 100% 100% 0.66 1.34 8.7 54 200 96% 100% 0.74 2.71 32.8 54 300 97% 97% 1.49 6.29 70.6 34 All 96% 99.5% 0.88 2.47 23.0 196 Table 1: Summary of results fusing all available sensor observations.",
                "All shots were successfully detected, so the detection rate is omitted.",
                "Localization rate means the percentage of shots that the sensor fusion was able to estimate the trajectory of.",
                "The caliber accuracy rate is relative to the shots localized and not all the shots because <br>caliber estimation</br> requires the trajectory.",
                "The trajectory error is broken down to azimuth in degrees and the actual distance of the shooter from the trajectory.",
                "The distance error shows the distance between the real shooter position and the estimated shooter position.",
                "As such, it includes the error caused by both the trajectory and that of the range estimation.",
                "Note that the traditional bearing and range measures are not good ones for a distributed system such as ours because of the lack of a single reference point. 121 Figure 12: The user interface of the system showing the experimental setup.",
                "The 10 sensor nodes are labeled by their ID and marked by dark circles.",
                "The targets are black squares marked T-1 through T-5.",
                "The long white arrows point to the shooter position estimated by each sensor.",
                "Where it is missing, the corresponding sensor did not have enough detections to measure the AoA of either the muzzle blast, the shockwave or both.",
                "The thick black line and large circle indicate the estimated trajectory and the shooter position as estimated by fusing all available detections from the network.",
                "This shot from the 100-meter line at target T-3 was localized almost perfectly by the sensor network.",
                "The caliber and weapon were also identified correctly. 6 out of 10 nodes were able to estimate the location alone.",
                "Their bearing accuracy is within a degree, while the range is off by less than 10% in the worst case.",
                "The localization rate characterizes the systems ability to successfully estimate the trajectory of shots.",
                "Since <br>caliber estimation</br> and weapon classification relies on the trajectory, non-localized shots are not classified either.",
                "There were 7 shots out of 196 that were not localized.",
                "The reason for missed shots is the trajectory ambiguity problem that occurs when the projectile passes on one side of all the sensors.",
                "In this case, two significantly different trajectories can generate the same set of observations (see [8] and also Section 6.3).",
                "Instead of estimating which one is more likely or displaying both possibilities, we decided not to provide a trajectory at all.",
                "It is better not to give an answer other than a shot alarm than misleading the soldier.",
                "Localization accuracy is broken down to trajectory accuracy and range estimation precision.",
                "The angle of the estimated trajectory was better than 1 degree except for the 300 m range.",
                "Since the range should not affect trajectory estimation as long as the projectile passes over the network, we suspect that the slightly worse angle precision for 300 m is due to the hurried shots we witnessed the soldiers took near the end of the day.",
                "This is also indicated by another datapoint: the estimated trajectory distance from the actual targets has an average error of 1.3 m for 300 m shots, 0.75 m for 200 m shots and 0.6 m for all but 300 m shots.",
                "As the distance between the targets and the sensor network was fixed, this number should not show a 2× improvement just because the shooter is closer.",
                "Since the angle of the trajectory itself does not characterize the overall error-there can be a translation alsoTable 1 also gives the distance of the shooter from the estimated trajectory.",
                "These indicate an error which is about 1-2% of the range.",
                "To put this into perspective, a trajectory estimate for a 100 m shot will very likely go through or very near the window the shooter is located at.",
                "Again, we believe that the disproportionally larger errors at 300 m are due to human errors in aiming.",
                "As the ground truth was obtained by knowing the precise location of the shooter and the target, any inaccuracy in the actual trajectory directly adds to the perceived error of the system.",
                "We call the estimation of the shooters position on the calculated trajectory range estimation due to the lack of a better term.",
                "The range estimates are better than 5% accurate from 50 m and 10% for 100 m. However, this goes to 20% or worse for longer distances.",
                "We did not have a facility to test system before the evaluation for ranges beyond 100 m. During the evaluation, we ran into the problem of mistaking shockwave echoes for muzzle blasts.",
                "These echoes reached the sensors before the real muzzle blast for long range shots only, since the projectile travels 2-3× faster than the speed of sound, so the time between the shockwave (and its possible echo from nearby objects) and the muzzle blast increases with increasing ranges.",
                "This resulted in underestimating the range, since the system measured shorter times than the real ones.",
                "Since the evaluation we finetuned the muzzle blast detection algorithm to avoid this problem.",
                "Distance M16 AK47 M240 M107 M4 M249 M4-M249 50m 100% 100% 100% 100% 11% 25% 94% 100m 100% 100% 100% 100% 22% 33% 100% 200m 100% 100% 100% 100% 50% 22% 100% 300m 67% 100% 83% 100% 33% 0% 57% All 96% 100% 97% 100% 23% 23% 93% Table 2: Weapon classification results.",
                "The percentages are relative to the number of shots localized and not all shots, as the classification algorithm needs to know the trajectory and the range.",
                "Note that the difference is small; there were 189 shots localized out of the total 196.",
                "The caliber and weapon estimation accuracy rates are based on the 189 shots that were successfully localized.",
                "Note that there was a single shot that was falsely classified by the caliber estimator.",
                "The 73% overall weapon classification accuracy does not seem impressive.",
                "But if we break it down to the six different weapons tested, the picture changes dramatically as shown in Table 2.",
                "For four of the weapons (AK14, M16, M240 and M107), the classification rate is almost 100%.",
                "There were only two shots out of approximately 140 that were missed.",
                "The M4 and M249 proved to be too similar and they were mistaken for each other most of the time.",
                "One possible explanation is that we had only a limited number of test shots taken with these weapons right before the evaluation and used the wrong deceleration approximation function.",
                "Either this or a similar mistake was made 122 since if we simply used the opposite of the systems answer where one of these weapons were indicated, the accuracy would have improved 3x.",
                "If we consider these two weapons a single weapon class, then the classification accuracy for it becomes 93%.",
                "Note that the AK47 and M240 have the same caliber (7.62 mm), just as the M16, M4 and M249 do (5.56 mm).",
                "That is, the system is able to differentiate between weapons of the same caliber.",
                "We are not aware of any system that classifies weapons this accurately. 7.1 Single sensor performance As was shown previously, a single sensor alone is able to localize the shooter if it can determine both the muzzle blast and the shockwave AoA, that is, it needs to measure the ToA of both on at least three acoustic channels.",
                "While shockwave detection is independent of the range-unless the projectile becomes subsonic-, the likelihood of muzzle blast detection beyond 150 meters is not enough for consistently getting at least three per sensor node for AoA estimation.",
                "Hence, we only evaluate the single sensor performance for the 104 shots that were taken from 50 and 100 m. Note that we use the same test data as in the previous section, but we evaluate individually for each sensor.",
                "Table 3 summarizes the results broken down by the ten sensors utilized.",
                "Since this is now not a distributed system, the results are given relative to the position of the given sensor, that is, a bearing and range estimate is provided.",
                "Note that many of the common error sources of the networked system do not play a role here.",
                "Time synchronization is not applicable.",
                "The sensors absolute location is irrelevant (just as the relative location of multiple sensors).",
                "The sensors orientation is still important though.",
                "There are several disadvantages of the single sensor case compared to the networked system: there is no redundancy to compensate for other errors and to perform outlier rejection, the localization rate is markedly lower, and a single sensor alone is not able to estimate the caliber or classify the weapon.",
                "Sensor id 1 2 3 5 7 8 9 10 11 12 Loc. rate 44% 37% 53% 52% 19% 63% 51% 31% 23% 44% Bearing (deg) 0.80 1.25 0.60 0.85 1.02 0.92 0.73 0.71 1.28 1.44 Range (m) 3.2 6.1 4.4 4.7 4.6 4.6 4.1 5.2 4.8 8.2 Table 3: Single sensor accuracy for 108 shots fired from 50 and 100 meters.",
                "Localization rate refers to the percentage of shots the given sensor alone was able to localize.",
                "The bearing and range values are average errors.",
                "They characterize the accuracy of localization from the given sensors perspective.",
                "The data indicates that the performance of the sensors varied significantly especially considering the localization rate.",
                "One factor has to be the location of the given sensor including how far it was from the firing lines and how obstructed its view was.",
                "Also, the sensors were hand-built prototypes utilizing nowhere near production quality packaging/mounting.",
                "In light of these factors, the overall average bearing error of 0.9 degrees and range error of 5 m with a microphone spacing of less than 10 cm are excellent.",
                "We believe that professional manufacturing and better microphones could easily achieve better performance than the best sensor in our experiment (>60% localization rate and 3 m range error).",
                "Interestingly, the largest error in range was a huge 90 m clearly due to some erroneous detection, yet the largest bearing error was less than 12 degrees which is still a good indication for the soldier where to look.",
                "The overall localization rate over all single sensors was 42%, while for 50 m shots only, this jumped to 61%.",
                "Note that the firing range was prepared to simulate an urban area to some extent: there were a few single- and two-storey wooden structures built both in and around the sensor deployment area and the firing lines.",
                "Hence, not all sensors had line-of-sight to all shooting positions.",
                "We estimate that 10% of the sensors had obstructed view to the shooter on average.",
                "Hence, we can claim that a given sensor had about 50% chance of localizing a shot within 130 m. (Since the sensor deployment area was 30 m deep, 100 m shots correspond to actual distances between 100 and 130 m.) Again, we emphasize that localization needs at least three muzzle blast and three shockwave detections out of a possible four for each per sensor.",
                "The detection rate for single sensors-corresponding to at least one shockwave detection per sensor-was practically 100%. 0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 0 1 2 3 4 5 6 7 8 9 10 number of sensors percentageofshots Figure 13: Histogram showing what fraction of the 104 shots taken from 50 and 100 meters were localized by at most how many individual sensors alone. 13% of the shots were missed by every single sensor, i.e., none of them had both muzzle blast and shockwave AoA detections.",
                "Note that almost all of these shots were still accurately localized by the networked system, i.e. the sensor fusion using all available observations in the sensor network.",
                "It would be misleading to interpret these results as the system missing half the shots.",
                "As soldiers never work alone and the sensor node is relatively cheap to afford having every soldier equipped with one, we also need to look at the overall detection rates for every shot.",
                "Figure 13 shows the histogram of the percentage of shots vs. the number of individual sensors that localized it. 13% of shots were not localized by any sensor alone, but 87% was localized by at least one sensor out of ten. 7.2 Error sources In this section, we analyze the most significant sources of error that affect the performance of the networked shooter localization and weapon classification system.",
                "In order to correlate the distributed observations of the acoustic events, the nodes need to have a common time and space reference.",
                "Hence, errors in the time synchronization, node localization and node orientation all degrade the overall accuracy of the system. 123 Our time synchronization approach yields errors significantly less than 100 microseconds.",
                "As the sound travels about 3 cm in that time, time synchronization errors have a negligible effect on the system.",
                "On the other hand, node location and orientation can have a direct effect on the overall system performance.",
                "Notice that to analyze this, we do not have to resort to simulation, instead we can utilize the real test data gathered at Aberdeen.",
                "But instead of using the real sensor locations known very accurately and the measured and calibrated almost perfect node orientations, we can add error terms to them and run the sensor fusion.",
                "This exactly replicates how the system would have performed during the test using the imprecisely known locations and orientations.",
                "Another aspect of the system performance that can be evaluated this way is the effect of the number of available sensors.",
                "Instead of using all ten sensors in the data fusion, we can pick any subset of the nodes to see how the accuracy degrades as we decrease the number of nodes.",
                "The following experiment was carried out.",
                "The number of sensors were varied from 2 to 10 in increments of 2.",
                "Each run picked the sensors randomly using a uniform distribution.",
                "At each run each node was randomly moved to a new location within a circle around its true position with a radius determined by a zero-mean Gaussian distribution.",
                "Finally, the node orientations were perturbed using a zeromean Gaussian distribution.",
                "Each combination of parameters were generated 100 times and utilized for all 196 shots.",
                "The results are summarized in Figure 14.",
                "There is one 3D barchart for each of the experiment sets with the given fixed number of sensors.",
                "The x-axis shows the node location error, that is, the standard deviation of the corresponding Gaussian distribution that was varied between 0 and 6 meters.",
                "The y-axis shows the standard deviation of the node orientation error that was varied between 0 and 6 degrees.",
                "The z-axis is the resulting trajectory azimuth error.",
                "Note that the elevation angles showed somewhat larger errors than the azimuth.",
                "Since all the sensors were in approximately a horizontal plane and only a few shooter positions were out of the same plane and only by 2 m or so, the test was not sufficient to evaluate this aspect of the system.",
                "There are many interesting observation one can make by analyzing these charts.",
                "Node location errors in this range have a small effect on accuracy.",
                "Node orientation errors, on the other hand, noticeably degrade the performance.",
                "Still the largest errors in this experiment of 3.5 degrees for 6 sensors and 5 degrees for 2 sensors are still very good.",
                "Note that as the location and orientation errors increase and the number of sensors decrease, the most significantly affected performance metric is the localization rate.",
                "See Table 4 for a summary.",
                "Successful localization goes down from almost 100% to 50% when we go from 10 sensors to 2 even without additional errors.",
                "This is primarily caused by geometry: for a successful localization, the bullet needs to pass over the sensor network, that is, at least one sensor should be on the side of the trajectory other than the rest of the nodes. (This is a simplification for illustrative purposes.",
                "If all the sensors and the trajectory are not coplanar, localization may be successful even if the projectile passes on one side of the network.",
                "See Section 6.3.)",
                "As the numbers of sensors decreased in the experiment by randomly selecting a subset, the probability of trajectories abiding by this rule decreased.",
                "This also means that even if there are 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 2 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 4 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 6 sensors 0 2 4 6 0 2 4 6 0 1 2 3 4 5 6 azimutherror(degree) position error (m) orientation error (degree) 8 sensors Figure 14: The effect of node localization and orientation errors on azimuth accuracy with 2, 4, 6 and 8 nodes.",
                "Note that the chart for 10 nodes is almost identical for the 8-node case, hence, it is omitted. 124 many sensors (i.e. soldiers), but all of them are right next to each other, the localization rate will suffer.",
                "However, when the sensor fusion does provide a result, it is still accurate even with few available sensors and relatively large individual errors.",
                "A very few consistent observation lead to good accuracy as the inconsistent ones are discarded by the algorithm.",
                "This is also supported by the observation that for the cases with the higher number of sensors (8 or 10), the localization rate is hardly affected by even large errors.",
                "Errors/Sensors 2 4 6 8 10 0 m, 0 deg 54% 87% 94% 95% 96% 2 m, 2 deg 53% 80% 91% 96% 96% 6 m, 0 deg 43% 79% 88% 94% 94% 0 m, 6 deg 44% 78% 90% 93% 94% 6 m, 6 deg 41% 73% 85% 89% 92% Table 4: Localization rate as a function of the number of sensors used, the sensor node location and orientation errors.",
                "One of the most significant observations on Figure 14 and Table 4 is that there is hardly any difference in the data for 6, 8 and 10 sensors.",
                "This means that there is little advantage of adding more nodes beyond 6 sensors as far as the accuracy is concerned.",
                "The speed of sound depends on the ambient temperature.",
                "The current prototype considers it constant that is typically set before a test.",
                "It would be straightforward to employ a temperature sensor to update the value of the speed of sound periodically during operation.",
                "Note also that wind may adversely affect the accuracy of the system.",
                "The sensor fusion, however, could incorporate wind speed into its calculations.",
                "It would be more complicated than temperature compensation, but could be done.",
                "Other practical issues also need to be looked at before a real world deployment.",
                "Silencers reduce the muzzle blast energy and hence, the effective range the system can detect it at.",
                "However, silencers do not effect the shockwave and the system would still detect the trajectory and caliber accurately.",
                "The range and weapon type could not be estimated without muzzle blast detections.",
                "Subsonic weapons do not produce a shockwave.",
                "However, this is not of great significance, since they have shorter range, lower accuracy and much less lethality.",
                "Hence, their use is not widespread and they pose less danger in any case.",
                "Another issue is the type of ammunition used.",
                "Irregular armies may use substandard, even hand manufactured bullets.",
                "This effects the muzzle velocity of the weapon.",
                "For weapon classification to work accurately, the system would need to be calibrated with the typical ammunition used by the given adversary. 8.",
                "RELATED WORK Acoustic detection and recognition has been under research since the early fifties.",
                "The area has a close relevance to the topic of supersonic flow mechanics [20].",
                "Fansler analyzed the complex near-field pressure waves that occur within a foot of the muzzle blast.",
                "Fanslers work gives a good idea of the ideal muzzle blast pressure wave without contamination from echoes or propagation effects [4].",
                "Experiments with greater distances from the muzzle were conducted by Stoughton [18].",
                "The measurements of the ballistic shockwaves using calibrated pressure transducers at known locations, measured bullet speeds, and miss distances of 355 meters for 5.56 mm and 7.62 mm projectiles were made.",
                "Results indicate that ground interaction becomes a problem for miss distances of 30 meters or larger.",
                "Another area of research is the signal processing of gunfire acoustics.",
                "The focus is on the robust detection and length estimation of small caliber acoustic shockwaves and muzzle blasts.",
                "Possible techniques for classifying signals as either shockwaves or muzzle blasts includes short-time Fourier Transform (STFT), the Smoothed Pseudo Wigner-Ville distribution (SPWVD), and a discrete wavelet transformation (DWT).",
                "Joint time-frequency (JTF) spectrograms are used to analyze the typical separation of the shockwave and muzzle blast transients in both time and frequency.",
                "Mays concludes that the DWT is the best method for classifying signals as either shockwaves or muzzle blasts because it works well and is less expensive to compute than the SPWVD [10].",
                "The edges of the shockwave are typically well defined and the shockwave length is directly related to the bullet characteristics.",
                "A paper by Sadler [14] compares two shockwave edge detection methods: a simple gradient-based detector, and a multi-scale wavelet detector.",
                "It also demonstrates how the length of the shockwave, as determined by the edge detectors, can be used along with Whithams equations [20] to estimate the caliber of a projectile.",
                "Note that the available computational performance on the sensor nodes, the limited wireless bandwidth and real-time requirements render these approaches infeasible on our platform.",
                "A related topic is the research and development of experimental and prototype shooter location systems.",
                "Researchers at BBN have developed the Bullet Ears system [3] which has the capability to be installed in a fixed position or worn by soldiers.",
                "The fixed system has tetrahedron shaped microphone arrays with 1.5 meter spacing.",
                "The overall system consists of two to three of these arrays spaced 20 to 100 meters from each other.",
                "The soldier-worn system has 12 microphones as well as a GPS antenna and orientation sensors mounted on a helmet.",
                "There is a low speed RF connection from the helmet to the processing body.",
                "An extensive test has been conducted to measure the performance of both type of systems.",
                "The fixed systems performance was one order of magnitude better in the angle calculations while their range performance where matched.",
                "The angle accuracy of the fixed system was dominantly less than one degree while it was around five degrees for the helmet mounted one.",
                "The range accuracy was around 5 percent for both of the systems.",
                "The problem with this and similar centralized systems is the need of the one or handful of microphone arrays to be in line-of-sight of the shooter.",
                "A sensor networked based solution has the advantage of widely distributed sensing for better coverage, multipath effect compensation and multiple simultaneous shot resolution [8].",
                "This is especially important for operation in acoustically reverberant urban areas.",
                "Note that BBNs current vehicle-mounted system called BOOMERANG, a modified version of Bullet Ears, is currently used in Iraq [1].",
                "The company ShotSpotter specializes in law enforcement systems that report the location of gunfire to police within seconds.",
                "The goal of the system is significantly different than that of military systems.",
                "Shotspotter reports 25 m typical accuracy which is more than enough for police to 125 respond.",
                "They are also manufacturing experimental soldier wearable and UAV mounted systems for military use [16], but no specifications or evaluation results are publicly available. 9.",
                "CONCLUSIONS The main contribution of this work is twofold.",
                "First, the performance of the overall distributed networked system is excellent.",
                "Most noteworthy are the trajectory accuracy of one degree, the correct <br>caliber estimation</br> rate of well over 90% and the close to 100% weapon classification rate for 4 of the 6 weapons tested.",
                "The system proved to be very robust when increasing the node location and orientation errors and decreasing the number of available sensors all the way down to a couple.",
                "The key factor behind this is the sensor fusion algorithms ability to reject erroneous measurements.",
                "It is also worth mentioning that the results presented here correspond to the first and only test of the system beyond 100 m and with six different weapons.",
                "We believe that with the lessons learned in the test, a consecutive field experiment could have showed significantly improved results especially in range estimation beyond 100 m and weapon classification for the remaining two weapons that were mistaken for each other the majority of the times during the test.",
                "Second, the performance of the system when used in standalone mode, that is, when single sensors alone provided localization, was also very good.",
                "While the overall localization rate of 42% per sensor for shots up to 130 m could be improved, the bearing accuracy of less than a degree and the average 5% range error are remarkable using the handmade prototypes of the low-cost nodes.",
                "Note that 87% of the shots were successfully localized by at least one of the ten sensors utilized in standalone mode.",
                "We believe that the technology is mature enough that a next revision of the system could be a commercial one.",
                "However, important aspects of the system would still need to be worked on.",
                "We have not addresses power management yet.",
                "A current node runs on 4 AA batteries for about 12 hours of continuous operation.",
                "A deployable version of the sensor node would need to be asleep during normal operation and only wake up when an interesting event occurs.",
                "An analog trigger circuit could solve this problem, however, the system would miss the first shot.",
                "Instead, the acoustic channels would need to be sampled and stored in a circular buffer.",
                "The rest of the board could be turned off.",
                "When a trigger wakes up the board, the acoustic data would be immediately available.",
                "Experiments with a previous generation sensor board indicated that this could provide a 10x increase in battery life.",
                "Other outstanding issues include weatherproof packaging and ruggedization, as well as integration with current military infrastructure. 10.",
                "REFERENCES [1] BBN technologies website. http://www.bbn.com. [2] E. Danicki.",
                "Acoustic sniper localization.",
                "Archives of Acoustics, 30(2):233-245, 2005. [3] G. L. Duckworth et al.",
                "Fixed and wearable acoustic counter-sniper systems for law enforcement.",
                "In E. M. Carapezza and D. B.",
                "Law, editors, Proc.",
                "SPIE Vol. 3577, p. 210-230, pages 210-230, Jan. 1999. [4] K. Fansler.",
                "Description of muzzle blast by modified scaling models.",
                "Shock and Vibration, 5(1):1-12, 1998. [5] D. Gay, P. Levis, R. von Behren, M. Welsh, E. Brewer, and D. Culler.",
                "The nesC language: a holistic approach to networked embedded systems.",
                "Proceedings of Programming Language Design and Implementation (PLDI), June 2003. [6] J. Hill, R. Szewczyk, A.",
                "Woo, S. Hollar, D. Culler, and K. Pister.",
                "System architecture directions for networked sensors. in Proc. of ASPLOS 2000, Nov. 2000. [7] B. Kus´y, G. Balogh, P. V¨olgyesi, J. Sallai, A. N´adas, A. L´edeczi, M. Mar´oti, and L. Meertens.",
                "Node-density independent localization.",
                "Information Processing in Sensor Networks (IPSN 06) SPOTS Track, Apr. 2006. [8] A. L´edeczi, A. N´adas, P. V¨olgyesi, G. Balogh, B. Kus´y, J. Sallai, G. Pap, S. D´ora, K. Moln´ar, M. Mar´oti, and G. Simon.",
                "Countersniper system for urban warfare.",
                "ACM Transactions on Sensor Networks, 1(1):153-177, Nov. 2005. [9] M. Mar´oti.",
                "Directed flood-routing framework for wireless sensor networks.",
                "In Proceedings of the 5th ACM/IFIP/USENIX International Conference on Middleware, pages 99-114, New York, NY, USA, 2004.",
                "Springer-Verlag New York, Inc. [10] B. Mays.",
                "Shockwave and muzzle blast classification via joint time frequency and wavelet analysis.",
                "Technical report, Army Research Lab Adelphi MD 20783-1197, Sept. 2001. [11] TinyOS Hardware Platforms. http://tinyos.net/scoop/special/hardware. [12] Crossbow MICAz (MPR2400) Radio Module. http://www.xbow.com/Products/productsdetails. aspx?sid=101. [13] PicoBlaze User Resources. http://www.xilinx.com/ipcenter/processor_ central/picoblaze/picoblaze_user_resources.htm. [14] B. M. Sadler, T. Pham, and L. C. Sadler.",
                "Optimal and wavelet-based shock wave detection and estimation.",
                "Acoustical Society of America Journal, 104:955-963, Aug. 1998. [15] J. Sallai, B. Kus´y, A. L´edeczi, and P. Dutta.",
                "On the scalability of routing-integrated time synchronization. 3rd European Workshop on Wireless Sensor Networks (EWSN 2006), Feb. 2006. [16] ShotSpotter website. http: //www.shotspotter.com/products/military.html. [17] G. Simon, M. Mar´oti, A. L´edeczi, G. Balogh, B. Kus´y, A. N´adas, G. Pap, J. Sallai, and K. Frampton.",
                "Sensor network-based countersniper system.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 1-12, New York, NY, USA, 2004.",
                "ACM Press. [18] R. Stoughton.",
                "Measurements of small-caliber ballistic shock waves in air.",
                "Acoustical Society of America Journal, 102:781-787, Aug. 1997. [19] B.",
                "A. Weiss, C. Schlenoff, M. Shneier, and A. Virts.",
                "Technology evaluations and performance metrics for soldier-worn sensors for assist.",
                "In Performance Metrics for Intelligent Systems Workshop, Aug. 2006. [20] G. Whitham.",
                "Flow pattern of a supersonic projectile.",
                "Communications on pure and applied mathematics, 5(3):301, 1952. 126"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El rendimiento del sistema se caracteriza por una precisión de la trayectoria de 1 grado y más del 95% de precisión de \"estimación de calibre\" para todos los disparos, y cerca del 100% de precisión de estimación de armas para 4 de 6 armas probadas.estimación de calibre",
                "Finalmente, los requisitos adicionales requerían \"estimación de calibre\" y clasificación de armas, además de la localización de la fuente.estimación de calibre",
                "Una vez que está disponible una estimación de trayectoria, la longitud de la onda de choque se puede usar para la \"estimación de calibre\".estimación de calibre",
                "El valor de la función de consistencia se incrementa con uno para cada estimación de rodamiento y rango que es consistente con B. 6.5 \"Estimación de calibre\" Las características de la señal de onda de choque se han estudiado antes por Whitham [20].estimación de calibre",
                "Este método tiene menos del 1% de error de \"estimación de calibre\" cuando hay una estimación de trayectoria precisa disponible.estimación de calibre",
                "En otras palabras, la \"estimación de calibre\" solo funciona si el sistema realiza suficientes detecciones de onda de choque para calcular una trayectoria.120 6.6 Estimación de armas Analizamos todas las características de señal medidas para encontrar información específica de arma.estimación de calibre",
                "La tasa de precisión del calibre es relativa a los disparos localizados y no todos los disparos porque la \"estimación de calibre\" requiere la trayectoria.estimación de calibre",
                "Dado que la \"estimación de calibre\" y la clasificación de armas se basan en la trayectoria, los disparos no localizados tampoco se clasifican.estimación de calibre",
                "Lo más notable es la precisión trayectoria de un grado, la tasa correcta de \"estimación de calibre\" de más del 90% y la tasa de clasificación de armas cercana al 100% para 4 de las 6 armas probadas.estimación de calibre"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        }
    }
}